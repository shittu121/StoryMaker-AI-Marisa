var bT=Object.defineProperty;var ST=(e,t,n)=>t in e?bT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $r=(e,t,n)=>(ST(e,typeof t!="symbol"?t+"":t,n),n);function TT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function e0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t0={exports:{}},uc={},n0={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=Symbol.for("react.element"),kT=Symbol.for("react.portal"),CT=Symbol.for("react.fragment"),ET=Symbol.for("react.strict_mode"),NT=Symbol.for("react.profiler"),PT=Symbol.for("react.provider"),jT=Symbol.for("react.context"),AT=Symbol.for("react.forward_ref"),RT=Symbol.for("react.suspense"),IT=Symbol.for("react.memo"),MT=Symbol.for("react.lazy"),Gm=Symbol.iterator;function DT(e){return e===null||typeof e!="object"?null:(e=Gm&&e[Gm]||e["@@iterator"],typeof e=="function"?e:null)}var r0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o0=Object.assign,i0={};function Qi(e,t,n){this.props=e,this.context=t,this.refs=i0,this.updater=n||r0}Qi.prototype.isReactComponent={};Qi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function s0(){}s0.prototype=Qi.prototype;function kf(e,t,n){this.props=e,this.context=t,this.refs=i0,this.updater=n||r0}var Cf=kf.prototype=new s0;Cf.constructor=kf;o0(Cf,Qi.prototype);Cf.isPureReactComponent=!0;var Hm=Array.isArray,a0=Object.prototype.hasOwnProperty,Ef={current:null},l0={key:!0,ref:!0,__self:!0,__source:!0};function c0(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)a0.call(t,r)&&!l0.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:wa,type:e,key:i,ref:s,props:o,_owner:Ef.current}}function LT(e,t){return{$$typeof:wa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nf(e){return typeof e=="object"&&e!==null&&e.$$typeof===wa}function FT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Km=/\/+/g;function tu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FT(""+e.key):t.toString(36)}function fl(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case wa:case kT:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+tu(s,0):r,Hm(o)?(n="",e!=null&&(n=e.replace(Km,"$&/")+"/"),fl(o,t,n,"",function(u){return u})):o!=null&&(Nf(o)&&(o=LT(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Km,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",Hm(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+tu(i,l);s+=fl(i,t,n,c,o)}else if(c=DT(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+tu(i,l++),s+=fl(i,t,n,c,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Va(e,t,n){if(e==null)return e;var r=[],o=0;return fl(e,r,"","",function(i){return t.call(n,i,o++)}),r}function $T(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var on={current:null},hl={transition:null},OT={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:hl,ReactCurrentOwner:Ef};function u0(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Va,forEach:function(e,t,n){Va(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Va(e,function(){t++}),t},toArray:function(e){return Va(e,function(t){return t})||[]},only:function(e){if(!Nf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=Qi;Re.Fragment=CT;Re.Profiler=NT;Re.PureComponent=kf;Re.StrictMode=ET;Re.Suspense=RT;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OT;Re.act=u0;Re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=o0({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Ef.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)a0.call(t,c)&&!l0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:wa,type:e.type,key:o,ref:i,props:r,_owner:s}};Re.createContext=function(e){return e={$$typeof:jT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:PT,_context:e},e.Consumer=e};Re.createElement=c0;Re.createFactory=function(e){var t=c0.bind(null,e);return t.type=e,t};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:AT,render:e}};Re.isValidElement=Nf;Re.lazy=function(e){return{$$typeof:MT,_payload:{_status:-1,_result:e},_init:$T}};Re.memo=function(e,t){return{$$typeof:IT,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=hl.transition;hl.transition={};try{e()}finally{hl.transition=t}};Re.unstable_act=u0;Re.useCallback=function(e,t){return on.current.useCallback(e,t)};Re.useContext=function(e){return on.current.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e){return on.current.useDeferredValue(e)};Re.useEffect=function(e,t){return on.current.useEffect(e,t)};Re.useId=function(){return on.current.useId()};Re.useImperativeHandle=function(e,t,n){return on.current.useImperativeHandle(e,t,n)};Re.useInsertionEffect=function(e,t){return on.current.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return on.current.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return on.current.useMemo(e,t)};Re.useReducer=function(e,t,n){return on.current.useReducer(e,t,n)};Re.useRef=function(e){return on.current.useRef(e)};Re.useState=function(e){return on.current.useState(e)};Re.useSyncExternalStore=function(e,t,n){return on.current.useSyncExternalStore(e,t,n)};Re.useTransition=function(){return on.current.useTransition()};Re.version="18.3.1";n0.exports=Re;var p=n0.exports;const Qn=e0(p),Pf=TT({__proto__:null,default:Qn},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=p,_T=Symbol.for("react.element"),UT=Symbol.for("react.fragment"),zT=Object.prototype.hasOwnProperty,BT=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WT={key:!0,ref:!0,__self:!0,__source:!0};function d0(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)zT.call(t,r)&&!WT.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:_T,type:e,key:i,ref:s,props:o,_owner:BT.current}}uc.Fragment=UT;uc.jsx=d0;uc.jsxs=d0;t0.exports=uc;var a=t0.exports,qu={},f0={exports:{}},Nn={},h0={exports:{}},m0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,ge){var me=X.length;X.push(ge);e:for(;0<me;){var je=me-1>>>1,Ue=X[je];if(0<o(Ue,ge))X[je]=ge,X[me]=Ue,me=je;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ge=X[0],me=X.pop();if(me!==ge){X[0]=me;e:for(var je=0,Ue=X.length,De=Ue>>>1;je<De;){var At=2*(je+1)-1,Ve=X[At],at=At+1,gn=X[at];if(0>o(Ve,me))at<Ue&&0>o(gn,Ve)?(X[je]=gn,X[at]=me,je=at):(X[je]=Ve,X[At]=me,je=At);else if(at<Ue&&0>o(gn,me))X[je]=gn,X[at]=me,je=at;else break e}}return ge}function o(X,ge){var me=X.sortIndex-ge.sortIndex;return me!==0?me:X.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,m=3,T=!1,P=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(X){for(var ge=n(u);ge!==null;){if(ge.callback===null)r(u);else if(ge.startTime<=X)r(u),ge.sortIndex=ge.expirationTime,t(c,ge);else break;ge=n(u)}}function R(X){if(C=!1,w(X),!P)if(n(c)!==null)P=!0,N(M);else{var ge=n(u);ge!==null&&Te(R,ge.startTime-X)}}function M(X,ge){P=!1,C&&(C=!1,x(F),F=-1),T=!0;var me=m;try{for(w(ge),d=n(c);d!==null&&(!(d.expirationTime>ge)||X&&!ve());){var je=d.callback;if(typeof je=="function"){d.callback=null,m=d.priorityLevel;var Ue=je(d.expirationTime<=ge);ge=e.unstable_now(),typeof Ue=="function"?d.callback=Ue:d===n(c)&&r(c),w(ge)}else r(c);d=n(c)}if(d!==null)var De=!0;else{var At=n(u);At!==null&&Te(R,At.startTime-ge),De=!1}return De}finally{d=null,m=me,T=!1}}var z=!1,U=null,F=-1,se=5,J=-1;function ve(){return!(e.unstable_now()-J<se)}function ne(){if(U!==null){var X=e.unstable_now();J=X;var ge=!0;try{ge=U(!0,X)}finally{ge?Ae():(z=!1,U=null)}}else z=!1}var Ae;if(typeof v=="function")Ae=function(){v(ne)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,gt=oe.port2;oe.port1.onmessage=ne,Ae=function(){gt.postMessage(null)}}else Ae=function(){k(ne,0)};function N(X){U=X,z||(z=!0,Ae())}function Te(X,ge){F=k(function(){X(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){P||T||(P=!0,N(M))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(X){switch(m){case 1:case 2:case 3:var ge=3;break;default:ge=m}var me=m;m=ge;try{return X()}finally{m=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,ge){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var me=m;m=X;try{return ge()}finally{m=me}},e.unstable_scheduleCallback=function(X,ge,me){var je=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?je+me:je):me=je,X){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=me+Ue,X={id:h++,callback:ge,priorityLevel:X,startTime:me,expirationTime:Ue,sortIndex:-1},me>je?(X.sortIndex=me,t(u,X),n(c)===null&&X===n(u)&&(C?(x(F),F=-1):C=!0,Te(R,me-je))):(X.sortIndex=Ue,t(c,X),P||T||(P=!0,N(M))),X},e.unstable_shouldYield=ve,e.unstable_wrapCallback=function(X){var ge=m;return function(){var me=m;m=ge;try{return X.apply(this,arguments)}finally{m=me}}}})(m0);h0.exports=m0;var GT=h0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=p,En=GT;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p0=new Set,Ws={};function Qo(e,t){Vi(e,t),Vi(e+"Capture",t)}function Vi(e,t){for(Ws[e]=t,e=0;e<t.length;e++)p0.add(t[e])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=Object.prototype.hasOwnProperty,KT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Xm={};function YT(e){return Qu.call(Xm,e)?!0:Qu.call(Ym,e)?!1:KT.test(e)?Xm[e]=!0:(Ym[e]=!0,!1)}function XT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qT(e,t,n,r){if(t===null||typeof t>"u"||XT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sn(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_t[e]=new sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_t[t]=new sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_t[e]=new sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_t[e]=new sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_t[e]=new sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_t[e]=new sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_t[e]=new sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_t[e]=new sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_t[e]=new sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var jf=/[\-:]([a-z])/g;function Af(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jf,Af);_t[t]=new sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jf,Af);_t[t]=new sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jf,Af);_t[t]=new sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_t[e]=new sn(e,1,!1,e.toLowerCase(),null,!1,!1)});_t.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_t[e]=new sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Rf(e,t,n,r){var o=_t.hasOwnProperty(t)?_t[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qT(t,n,o,r)&&(n=null),r||o===null?YT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ir=HT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),di=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),Zu=Symbol.for("react.profiler"),g0=Symbol.for("react.provider"),y0=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),Df=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),v0=Symbol.for("react.offscreen"),qm=Symbol.iterator;function hs(e){return e===null||typeof e!="object"?null:(e=qm&&e[qm]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Object.assign,nu;function Cs(e){if(nu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nu=t&&t[1]||""}return`
`+nu+e}var ru=!1;function ou(e,t){if(!e||ru)return"";ru=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var c=`
`+o[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{ru=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cs(e):""}function QT(e){switch(e.tag){case 5:return Cs(e.type);case 16:return Cs("Lazy");case 13:return Cs("Suspense");case 19:return Cs("SuspenseList");case 0:case 2:case 15:return e=ou(e.type,!1),e;case 11:return e=ou(e.type.render,!1),e;case 1:return e=ou(e.type,!0),e;default:return""}}function td(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case di:return"Portal";case Zu:return"Profiler";case If:return"StrictMode";case Ju:return"Suspense";case ed:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case y0:return(e.displayName||"Context")+".Consumer";case g0:return(e._context.displayName||"Context")+".Provider";case Mf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Df:return t=e.displayName||null,t!==null?t:td(e.type)||"Memo";case Br:t=e._payload,e=e._init;try{return td(e(t))}catch{}}return null}function ZT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(t);case 8:return t===If?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function so(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function x0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JT(e){var t=x0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ua(e){e._valueTracker||(e._valueTracker=JT(e))}function w0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=x0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Rl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nd(e,t){var n=t.checked;return ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=so(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function b0(e,t){t=t.checked,t!=null&&Rf(e,"checked",t,!1)}function rd(e,t){b0(e,t);var n=so(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?od(e,t.type,n):t.hasOwnProperty("defaultValue")&&od(e,t.type,so(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function od(e,t,n){(t!=="number"||Rl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Es=Array.isArray;function ji(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+so(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function id(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(Es(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:so(n)}}function S0(e,t){var n=so(t.value),r=so(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ep(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function T0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?T0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var za,k0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(za=za||document.createElement("div"),za.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=za.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ek=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(e){ek.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),As[t]=As[e]})});function C0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||As.hasOwnProperty(e)&&As[e]?(""+t).trim():t+"px"}function E0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=C0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var tk=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(e,t){if(t){if(tk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function ld(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function Lf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ud=null,Ai=null,Ri=null;function tp(e){if(e=Ta(e)){if(typeof ud!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=pc(t),ud(e.stateNode,e.type,t))}}function N0(e){Ai?Ri?Ri.push(e):Ri=[e]:Ai=e}function P0(){if(Ai){var e=Ai,t=Ri;if(Ri=Ai=null,tp(e),t)for(e=0;e<t.length;e++)tp(t[e])}}function j0(e,t){return e(t)}function A0(){}var iu=!1;function R0(e,t,n){if(iu)return e(t,n);iu=!0;try{return j0(e,t,n)}finally{iu=!1,(Ai!==null||Ri!==null)&&(A0(),P0())}}function Hs(e,t){var n=e.stateNode;if(n===null)return null;var r=pc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var dd=!1;if(Er)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){dd=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{dd=!1}function nk(e,t,n,r,o,i,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Rs=!1,Il=null,Ml=!1,fd=null,rk={onError:function(e){Rs=!0,Il=e}};function ok(e,t,n,r,o,i,s,l,c){Rs=!1,Il=null,nk.apply(rk,arguments)}function ik(e,t,n,r,o,i,s,l,c){if(ok.apply(this,arguments),Rs){if(Rs){var u=Il;Rs=!1,Il=null}else throw Error(ee(198));Ml||(Ml=!0,fd=u)}}function Zo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function I0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function np(e){if(Zo(e)!==e)throw Error(ee(188))}function sk(e){var t=e.alternate;if(!t){if(t=Zo(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return np(o),e;if(i===r)return np(o),t;i=i.sibling}throw Error(ee(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function M0(e){return e=sk(e),e!==null?D0(e):null}function D0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=D0(e);if(t!==null)return t;e=e.sibling}return null}var L0=En.unstable_scheduleCallback,rp=En.unstable_cancelCallback,ak=En.unstable_shouldYield,lk=En.unstable_requestPaint,xt=En.unstable_now,ck=En.unstable_getCurrentPriorityLevel,Ff=En.unstable_ImmediatePriority,F0=En.unstable_UserBlockingPriority,Dl=En.unstable_NormalPriority,uk=En.unstable_LowPriority,$0=En.unstable_IdlePriority,dc=null,ur=null;function dk(e){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(dc,e,void 0,(e.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:mk,fk=Math.log,hk=Math.LN2;function mk(e){return e>>>=0,e===0?32:31-(fk(e)/hk|0)|0}var Ba=64,Wa=4194304;function Ns(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ll(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=Ns(l):(i&=s,i!==0&&(r=Ns(i)))}else s=n&~o,s!==0?r=Ns(s):i!==0&&(r=Ns(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-er(t),o=1<<n,r|=e[n],t&=~o;return r}function pk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-er(i),l=1<<s,c=o[s];c===-1?(!(l&n)||l&r)&&(o[s]=pk(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function hd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function O0(){var e=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),e}function su(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ba(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-er(t),e[t]=n}function yk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-er(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function $f(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-er(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var He=0;function V0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _0,Of,U0,z0,B0,md=!1,Ga=[],Qr=null,Zr=null,Jr=null,Ks=new Map,Ys=new Map,Gr=[],vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(e,t){switch(e){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(t.pointerId)}}function ps(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Ta(t),t!==null&&Of(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function xk(e,t,n,r,o){switch(t){case"focusin":return Qr=ps(Qr,e,t,n,r,o),!0;case"dragenter":return Zr=ps(Zr,e,t,n,r,o),!0;case"mouseover":return Jr=ps(Jr,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ks.set(i,ps(Ks.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ys.set(i,ps(Ys.get(i)||null,e,t,n,r,o)),!0}return!1}function W0(e){var t=Io(e.target);if(t!==null){var n=Zo(t);if(n!==null){if(t=n.tag,t===13){if(t=I0(n),t!==null){e.blockedOn=t,B0(e.priority,function(){U0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ml(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return t=Ta(n),t!==null&&Of(t),e.blockedOn=n,!1;t.shift()}return!0}function ip(e,t,n){ml(e)&&n.delete(t)}function wk(){md=!1,Qr!==null&&ml(Qr)&&(Qr=null),Zr!==null&&ml(Zr)&&(Zr=null),Jr!==null&&ml(Jr)&&(Jr=null),Ks.forEach(ip),Ys.forEach(ip)}function gs(e,t){e.blockedOn===t&&(e.blockedOn=null,md||(md=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,wk)))}function Xs(e){function t(o){return gs(o,e)}if(0<Ga.length){gs(Ga[0],e);for(var n=1;n<Ga.length;n++){var r=Ga[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qr!==null&&gs(Qr,e),Zr!==null&&gs(Zr,e),Jr!==null&&gs(Jr,e),Ks.forEach(t),Ys.forEach(t),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)W0(n),n.blockedOn===null&&Gr.shift()}var Ii=Ir.ReactCurrentBatchConfig,Fl=!0;function bk(e,t,n,r){var o=He,i=Ii.transition;Ii.transition=null;try{He=1,Vf(e,t,n,r)}finally{He=o,Ii.transition=i}}function Sk(e,t,n,r){var o=He,i=Ii.transition;Ii.transition=null;try{He=4,Vf(e,t,n,r)}finally{He=o,Ii.transition=i}}function Vf(e,t,n,r){if(Fl){var o=pd(e,t,n,r);if(o===null)gu(e,t,r,$l,n),op(e,r);else if(xk(o,e,t,n,r))r.stopPropagation();else if(op(e,r),t&4&&-1<vk.indexOf(e)){for(;o!==null;){var i=Ta(o);if(i!==null&&_0(i),i=pd(e,t,n,r),i===null&&gu(e,t,r,$l,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else gu(e,t,r,null,n)}}var $l=null;function pd(e,t,n,r){if($l=null,e=Lf(r),e=Io(e),e!==null)if(t=Zo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=I0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $l=e,null}function G0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ck()){case Ff:return 1;case F0:return 4;case Dl:case uk:return 16;case $0:return 536870912;default:return 16}default:return 16}}var Kr=null,_f=null,pl=null;function H0(){if(pl)return pl;var e,t=_f,n=t.length,r,o="value"in Kr?Kr.value:Kr.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return pl=o.slice(e,1<r?1-r:void 0)}function gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ha(){return!0}function sp(){return!1}function Pn(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ha:sp,this.isPropagationStopped=sp,this}return ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),t}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uf=Pn(Zi),Sa=ft({},Zi,{view:0,detail:0}),Tk=Pn(Sa),au,lu,ys,fc=ft({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(au=e.screenX-ys.screenX,lu=e.screenY-ys.screenY):lu=au=0,ys=e),au)},movementY:function(e){return"movementY"in e?e.movementY:lu}}),ap=Pn(fc),kk=ft({},fc,{dataTransfer:0}),Ck=Pn(kk),Ek=ft({},Sa,{relatedTarget:0}),cu=Pn(Ek),Nk=ft({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Pk=Pn(Nk),jk=ft({},Zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ak=Pn(jk),Rk=ft({},Zi,{data:0}),lp=Pn(Rk),Ik={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dk[e])?!!t[e]:!1}function zf(){return Lk}var Fk=ft({},Sa,{key:function(e){if(e.key){var t=Ik[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(e){return e.type==="keypress"?gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$k=Pn(Fk),Ok=ft({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=Pn(Ok),Vk=ft({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),_k=Pn(Vk),Uk=ft({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zk=Pn(Uk),Bk=ft({},fc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wk=Pn(Bk),Gk=[9,13,27,32],Bf=Er&&"CompositionEvent"in window,Is=null;Er&&"documentMode"in document&&(Is=document.documentMode);var Hk=Er&&"TextEvent"in window&&!Is,K0=Er&&(!Bf||Is&&8<Is&&11>=Is),up=String.fromCharCode(32),dp=!1;function Y0(e,t){switch(e){case"keyup":return Gk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hi=!1;function Kk(e,t){switch(e){case"compositionend":return X0(t);case"keypress":return t.which!==32?null:(dp=!0,up);case"textInput":return e=t.data,e===up&&dp?null:e;default:return null}}function Yk(e,t){if(hi)return e==="compositionend"||!Bf&&Y0(e,t)?(e=H0(),pl=_f=Kr=null,hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return K0&&t.locale!=="ko"?null:t.data;default:return null}}var Xk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xk[e.type]:t==="textarea"}function q0(e,t,n,r){N0(r),t=Ol(t,"onChange"),0<t.length&&(n=new Uf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ms=null,qs=null;function qk(e){av(e,0)}function hc(e){var t=gi(e);if(w0(t))return e}function Qk(e,t){if(e==="change")return t}var Q0=!1;if(Er){var uu;if(Er){var du="oninput"in document;if(!du){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),du=typeof hp.oninput=="function"}uu=du}else uu=!1;Q0=uu&&(!document.documentMode||9<document.documentMode)}function mp(){Ms&&(Ms.detachEvent("onpropertychange",Z0),qs=Ms=null)}function Z0(e){if(e.propertyName==="value"&&hc(qs)){var t=[];q0(t,qs,e,Lf(e)),R0(qk,t)}}function Zk(e,t,n){e==="focusin"?(mp(),Ms=t,qs=n,Ms.attachEvent("onpropertychange",Z0)):e==="focusout"&&mp()}function Jk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hc(qs)}function eC(e,t){if(e==="click")return hc(t)}function tC(e,t){if(e==="input"||e==="change")return hc(t)}function nC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nr=typeof Object.is=="function"?Object.is:nC;function Qs(e,t){if(nr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Qu.call(t,o)||!nr(e[o],t[o]))return!1}return!0}function pp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gp(e,t){var n=pp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pp(n)}}function J0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?J0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ev(){for(var e=window,t=Rl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rl(e.document)}return t}function Wf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rC(e){var t=ev(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&J0(n.ownerDocument.documentElement,n)){if(r!==null&&Wf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=gp(n,i);var s=gp(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oC=Er&&"documentMode"in document&&11>=document.documentMode,mi=null,gd=null,Ds=null,yd=!1;function yp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yd||mi==null||mi!==Rl(r)||(r=mi,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ds&&Qs(Ds,r)||(Ds=r,r=Ol(gd,"onSelect"),0<r.length&&(t=new Uf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mi)))}function Ka(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pi={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},fu={},tv={};Er&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function mc(e){if(fu[e])return fu[e];if(!pi[e])return e;var t=pi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tv)return fu[e]=t[n];return e}var nv=mc("animationend"),rv=mc("animationiteration"),ov=mc("animationstart"),iv=mc("transitionend"),sv=new Map,vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(e,t){sv.set(e,t),Qo(t,[e])}for(var hu=0;hu<vp.length;hu++){var mu=vp[hu],iC=mu.toLowerCase(),sC=mu[0].toUpperCase()+mu.slice(1);uo(iC,"on"+sC)}uo(nv,"onAnimationEnd");uo(rv,"onAnimationIteration");uo(ov,"onAnimationStart");uo("dblclick","onDoubleClick");uo("focusin","onFocus");uo("focusout","onBlur");uo(iv,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function xp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ik(r,t,void 0,e),e.currentTarget=null}function av(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&o.isPropagationStopped())break e;xp(o,l,u),i=c}else for(s=0;s<r.length;s++){if(l=r[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&o.isPropagationStopped())break e;xp(o,l,u),i=c}}}if(Ml)throw e=fd,Ml=!1,fd=null,e}function tt(e,t){var n=t[Sd];n===void 0&&(n=t[Sd]=new Set);var r=e+"__bubble";n.has(r)||(lv(t,e,2,!1),n.add(r))}function pu(e,t,n){var r=0;t&&(r|=4),lv(n,e,r,t)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Zs(e){if(!e[Ya]){e[Ya]=!0,p0.forEach(function(n){n!=="selectionchange"&&(aC.has(n)||pu(n,!1,e),pu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ya]||(t[Ya]=!0,pu("selectionchange",!1,t))}}function lv(e,t,n,r){switch(G0(t)){case 1:var o=bk;break;case 4:o=Sk;break;default:o=Vf}n=o.bind(null,t,n,e),o=void 0,!dd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function gu(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;l!==null;){if(s=Io(l),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}l=l.parentNode}}r=r.return}R0(function(){var u=i,h=Lf(n),d=[];e:{var m=sv.get(e);if(m!==void 0){var T=Uf,P=e;switch(e){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":T=$k;break;case"focusin":P="focus",T=cu;break;case"focusout":P="blur",T=cu;break;case"beforeblur":case"afterblur":T=cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=_k;break;case nv:case rv:case ov:T=Pk;break;case iv:T=zk;break;case"scroll":T=Tk;break;case"wheel":T=Wk;break;case"copy":case"cut":case"paste":T=Ak;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=cp}var C=(t&4)!==0,k=!C&&e==="scroll",x=C?m!==null?m+"Capture":null:m;C=[];for(var v=u,w;v!==null;){w=v;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,x!==null&&(R=Hs(v,x),R!=null&&C.push(Js(v,R,w)))),k)break;v=v.return}0<C.length&&(m=new T(m,P,null,n,h),d.push({event:m,listeners:C}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",m&&n!==cd&&(P=n.relatedTarget||n.fromElement)&&(Io(P)||P[Nr]))break e;if((T||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=u,P=P?Io(P):null,P!==null&&(k=Zo(P),P!==k||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=u),T!==P)){if(C=ap,R="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(C=cp,R="onPointerLeave",x="onPointerEnter",v="pointer"),k=T==null?m:gi(T),w=P==null?m:gi(P),m=new C(R,v+"leave",T,n,h),m.target=k,m.relatedTarget=w,R=null,Io(h)===u&&(C=new C(x,v+"enter",P,n,h),C.target=w,C.relatedTarget=k,R=C),k=R,T&&P)t:{for(C=T,x=P,v=0,w=C;w;w=si(w))v++;for(w=0,R=x;R;R=si(R))w++;for(;0<v-w;)C=si(C),v--;for(;0<w-v;)x=si(x),w--;for(;v--;){if(C===x||x!==null&&C===x.alternate)break t;C=si(C),x=si(x)}C=null}else C=null;T!==null&&wp(d,m,T,C,!1),P!==null&&k!==null&&wp(d,k,P,C,!0)}}e:{if(m=u?gi(u):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var M=Qk;else if(fp(m))if(Q0)M=tC;else{M=Jk;var z=Zk}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=eC);if(M&&(M=M(e,u))){q0(d,M,n,h);break e}z&&z(e,m,u),e==="focusout"&&(z=m._wrapperState)&&z.controlled&&m.type==="number"&&od(m,"number",m.value)}switch(z=u?gi(u):window,e){case"focusin":(fp(z)||z.contentEditable==="true")&&(mi=z,gd=u,Ds=null);break;case"focusout":Ds=gd=mi=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,yp(d,n,h);break;case"selectionchange":if(oC)break;case"keydown":case"keyup":yp(d,n,h)}var U;if(Bf)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else hi?Y0(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(K0&&n.locale!=="ko"&&(hi||F!=="onCompositionStart"?F==="onCompositionEnd"&&hi&&(U=H0()):(Kr=h,_f="value"in Kr?Kr.value:Kr.textContent,hi=!0)),z=Ol(u,F),0<z.length&&(F=new lp(F,e,null,n,h),d.push({event:F,listeners:z}),U?F.data=U:(U=X0(n),U!==null&&(F.data=U)))),(U=Hk?Kk(e,n):Yk(e,n))&&(u=Ol(u,"onBeforeInput"),0<u.length&&(h=new lp("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=U))}av(d,t)})}function Js(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ol(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Hs(e,n),i!=null&&r.unshift(Js(e,i,o)),i=Hs(e,t),i!=null&&r.push(Js(e,i,o))),e=e.return}return r}function si(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wp(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,o?(c=Hs(n,i),c!=null&&s.unshift(Js(n,c,l))):o||(c=Hs(n,i),c!=null&&s.push(Js(n,c,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var lC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function bp(e){return(typeof e=="string"?e:""+e).replace(lC,`
`).replace(cC,"")}function Xa(e,t,n){if(t=bp(t),bp(e)!==t&&n)throw Error(ee(425))}function Vl(){}var vd=null,xd=null;function wd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,uC=typeof clearTimeout=="function"?clearTimeout:void 0,Sp=typeof Promise=="function"?Promise:void 0,dC=typeof queueMicrotask=="function"?queueMicrotask:typeof Sp<"u"?function(e){return Sp.resolve(null).then(e).catch(fC)}:bd;function fC(e){setTimeout(function(){throw e})}function yu(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Xs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Xs(t)}function eo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),lr="__reactFiber$"+Ji,ea="__reactProps$"+Ji,Nr="__reactContainer$"+Ji,Sd="__reactEvents$"+Ji,hC="__reactListeners$"+Ji,mC="__reactHandles$"+Ji;function Io(e){var t=e[lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nr]||n[lr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tp(e);e!==null;){if(n=e[lr])return n;e=Tp(e)}return t}e=n,n=e.parentNode}return null}function Ta(e){return e=e[lr]||e[Nr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function pc(e){return e[ea]||null}var Td=[],yi=-1;function fo(e){return{current:e}}function nt(e){0>yi||(e.current=Td[yi],Td[yi]=null,yi--)}function Je(e,t){yi++,Td[yi]=e.current,e.current=t}var ao={},Xt=fo(ao),hn=fo(!1),Go=ao;function _i(e,t){var n=e.type.contextTypes;if(!n)return ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mn(e){return e=e.childContextTypes,e!=null}function _l(){nt(hn),nt(Xt)}function kp(e,t,n){if(Xt.current!==ao)throw Error(ee(168));Je(Xt,t),Je(hn,n)}function cv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ee(108,ZT(e)||"Unknown",o));return ft({},n,r)}function Ul(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ao,Go=Xt.current,Je(Xt,e),Je(hn,hn.current),!0}function Cp(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=cv(e,t,Go),r.__reactInternalMemoizedMergedChildContext=e,nt(hn),nt(Xt),Je(Xt,e)):nt(hn),Je(hn,n)}var Sr=null,gc=!1,vu=!1;function uv(e){Sr===null?Sr=[e]:Sr.push(e)}function pC(e){gc=!0,uv(e)}function ho(){if(!vu&&Sr!==null){vu=!0;var e=0,t=He;try{var n=Sr;for(He=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Sr=null,gc=!1}catch(o){throw Sr!==null&&(Sr=Sr.slice(e+1)),L0(Ff,ho),o}finally{He=t,vu=!1}}return null}var vi=[],xi=0,zl=null,Bl=0,Mn=[],Dn=0,Ho=null,Tr=1,kr="";function Po(e,t){vi[xi++]=Bl,vi[xi++]=zl,zl=e,Bl=t}function dv(e,t,n){Mn[Dn++]=Tr,Mn[Dn++]=kr,Mn[Dn++]=Ho,Ho=e;var r=Tr;e=kr;var o=32-er(r)-1;r&=~(1<<o),n+=1;var i=32-er(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Tr=1<<32-er(t)+o|n<<o|r,kr=i+e}else Tr=1<<i|n<<o|r,kr=e}function Gf(e){e.return!==null&&(Po(e,1),dv(e,1,0))}function Hf(e){for(;e===zl;)zl=vi[--xi],vi[xi]=null,Bl=vi[--xi],vi[xi]=null;for(;e===Ho;)Ho=Mn[--Dn],Mn[Dn]=null,kr=Mn[--Dn],Mn[Dn]=null,Tr=Mn[--Dn],Mn[Dn]=null}var Cn=null,kn=null,it=!1,Jn=null;function fv(e,t){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ep(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cn=e,kn=eo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cn=e,kn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ho!==null?{id:Tr,overflow:kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Cn=e,kn=null,!0):!1;default:return!1}}function kd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cd(e){if(it){var t=kn;if(t){var n=t;if(!Ep(e,t)){if(kd(e))throw Error(ee(418));t=eo(n.nextSibling);var r=Cn;t&&Ep(e,t)?fv(r,n):(e.flags=e.flags&-4097|2,it=!1,Cn=e)}}else{if(kd(e))throw Error(ee(418));e.flags=e.flags&-4097|2,it=!1,Cn=e}}}function Np(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cn=e}function qa(e){if(e!==Cn)return!1;if(!it)return Np(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wd(e.type,e.memoizedProps)),t&&(t=kn)){if(kd(e))throw hv(),Error(ee(418));for(;t;)fv(e,t),t=eo(t.nextSibling)}if(Np(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kn=eo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kn=null}}else kn=Cn?eo(e.stateNode.nextSibling):null;return!0}function hv(){for(var e=kn;e;)e=eo(e.nextSibling)}function Ui(){kn=Cn=null,it=!1}function Kf(e){Jn===null?Jn=[e]:Jn.push(e)}var gC=Ir.ReactCurrentBatchConfig;function vs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function Qa(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pp(e){var t=e._init;return t(e._payload)}function mv(e){function t(x,v){if(e){var w=x.deletions;w===null?(x.deletions=[v],x.flags|=16):w.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function o(x,v){return x=oo(x,v),x.index=0,x.sibling=null,x}function i(x,v,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<v?(x.flags|=2,v):w):(x.flags|=2,v)):(x.flags|=1048576,v)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,w,R){return v===null||v.tag!==6?(v=Cu(w,x.mode,R),v.return=x,v):(v=o(v,w),v.return=x,v)}function c(x,v,w,R){var M=w.type;return M===fi?h(x,v,w.props.children,R,w.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Br&&Pp(M)===v.type)?(R=o(v,w.props),R.ref=vs(x,v,w),R.return=x,R):(R=Tl(w.type,w.key,w.props,null,x.mode,R),R.ref=vs(x,v,w),R.return=x,R)}function u(x,v,w,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Eu(w,x.mode,R),v.return=x,v):(v=o(v,w.children||[]),v.return=x,v)}function h(x,v,w,R,M){return v===null||v.tag!==7?(v=Uo(w,x.mode,R,M),v.return=x,v):(v=o(v,w),v.return=x,v)}function d(x,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cu(""+v,x.mode,w),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _a:return w=Tl(v.type,v.key,v.props,null,x.mode,w),w.ref=vs(x,null,v),w.return=x,w;case di:return v=Eu(v,x.mode,w),v.return=x,v;case Br:var R=v._init;return d(x,R(v._payload),w)}if(Es(v)||hs(v))return v=Uo(v,x.mode,w,null),v.return=x,v;Qa(x,v)}return null}function m(x,v,w,R){var M=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return M!==null?null:l(x,v,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _a:return w.key===M?c(x,v,w,R):null;case di:return w.key===M?u(x,v,w,R):null;case Br:return M=w._init,m(x,v,M(w._payload),R)}if(Es(w)||hs(w))return M!==null?null:h(x,v,w,R,null);Qa(x,w)}return null}function T(x,v,w,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(w)||null,l(v,x,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _a:return x=x.get(R.key===null?w:R.key)||null,c(v,x,R,M);case di:return x=x.get(R.key===null?w:R.key)||null,u(v,x,R,M);case Br:var z=R._init;return T(x,v,w,z(R._payload),M)}if(Es(R)||hs(R))return x=x.get(w)||null,h(v,x,R,M,null);Qa(v,R)}return null}function P(x,v,w,R){for(var M=null,z=null,U=v,F=v=0,se=null;U!==null&&F<w.length;F++){U.index>F?(se=U,U=null):se=U.sibling;var J=m(x,U,w[F],R);if(J===null){U===null&&(U=se);break}e&&U&&J.alternate===null&&t(x,U),v=i(J,v,F),z===null?M=J:z.sibling=J,z=J,U=se}if(F===w.length)return n(x,U),it&&Po(x,F),M;if(U===null){for(;F<w.length;F++)U=d(x,w[F],R),U!==null&&(v=i(U,v,F),z===null?M=U:z.sibling=U,z=U);return it&&Po(x,F),M}for(U=r(x,U);F<w.length;F++)se=T(U,x,F,w[F],R),se!==null&&(e&&se.alternate!==null&&U.delete(se.key===null?F:se.key),v=i(se,v,F),z===null?M=se:z.sibling=se,z=se);return e&&U.forEach(function(ve){return t(x,ve)}),it&&Po(x,F),M}function C(x,v,w,R){var M=hs(w);if(typeof M!="function")throw Error(ee(150));if(w=M.call(w),w==null)throw Error(ee(151));for(var z=M=null,U=v,F=v=0,se=null,J=w.next();U!==null&&!J.done;F++,J=w.next()){U.index>F?(se=U,U=null):se=U.sibling;var ve=m(x,U,J.value,R);if(ve===null){U===null&&(U=se);break}e&&U&&ve.alternate===null&&t(x,U),v=i(ve,v,F),z===null?M=ve:z.sibling=ve,z=ve,U=se}if(J.done)return n(x,U),it&&Po(x,F),M;if(U===null){for(;!J.done;F++,J=w.next())J=d(x,J.value,R),J!==null&&(v=i(J,v,F),z===null?M=J:z.sibling=J,z=J);return it&&Po(x,F),M}for(U=r(x,U);!J.done;F++,J=w.next())J=T(U,x,F,J.value,R),J!==null&&(e&&J.alternate!==null&&U.delete(J.key===null?F:J.key),v=i(J,v,F),z===null?M=J:z.sibling=J,z=J);return e&&U.forEach(function(ne){return t(x,ne)}),it&&Po(x,F),M}function k(x,v,w,R){if(typeof w=="object"&&w!==null&&w.type===fi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case _a:e:{for(var M=w.key,z=v;z!==null;){if(z.key===M){if(M=w.type,M===fi){if(z.tag===7){n(x,z.sibling),v=o(z,w.props.children),v.return=x,x=v;break e}}else if(z.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Br&&Pp(M)===z.type){n(x,z.sibling),v=o(z,w.props),v.ref=vs(x,z,w),v.return=x,x=v;break e}n(x,z);break}else t(x,z);z=z.sibling}w.type===fi?(v=Uo(w.props.children,x.mode,R,w.key),v.return=x,x=v):(R=Tl(w.type,w.key,w.props,null,x.mode,R),R.ref=vs(x,v,w),R.return=x,x=R)}return s(x);case di:e:{for(z=w.key;v!==null;){if(v.key===z)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(x,v.sibling),v=o(v,w.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Eu(w,x.mode,R),v.return=x,x=v}return s(x);case Br:return z=w._init,k(x,v,z(w._payload),R)}if(Es(w))return P(x,v,w,R);if(hs(w))return C(x,v,w,R);Qa(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(x,v.sibling),v=o(v,w),v.return=x,x=v):(n(x,v),v=Cu(w,x.mode,R),v.return=x,x=v),s(x)):n(x,v)}return k}var zi=mv(!0),pv=mv(!1),Wl=fo(null),Gl=null,wi=null,Yf=null;function Xf(){Yf=wi=Gl=null}function qf(e){var t=Wl.current;nt(Wl),e._currentValue=t}function Ed(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Mi(e,t){Gl=e,Yf=wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dn=!0),e.firstContext=null)}function On(e){var t=e._currentValue;if(Yf!==e)if(e={context:e,memoizedValue:t,next:null},wi===null){if(Gl===null)throw Error(ee(308));wi=e,Gl.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var Mo=null;function Qf(e){Mo===null?Mo=[e]:Mo.push(e)}function gv(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Qf(t)):(n.next=o.next,o.next=n),t.interleaved=n,Pr(e,r)}function Pr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wr=!1;function Zf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function to(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Pr(e,n)}return o=r.interleaved,o===null?(t.next=t,Qf(r)):(t.next=o.next,o.next=t),r.interleaved=t,Pr(e,n)}function yl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$f(e,n)}}function jp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hl(e,t,n,r){var o=e.updateQueue;Wr=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=o.baseState;s=0,h=u=c=null,l=i;do{var m=l.lane,T=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=e,C=l;switch(m=t,T=n,C.tag){case 1:if(P=C.payload,typeof P=="function"){d=P.call(T,d,m);break e}d=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=C.payload,m=typeof P=="function"?P.call(T,d,m):P,m==null)break e;d=ft({},d,m);break e;case 2:Wr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[l]:m.push(l))}else T={eventTime:T,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=T,c=d):h=h.next=T,s|=m;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;m=l,l=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(1);if(h===null&&(c=d),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);Yo|=s,e.lanes=s,e.memoizedState=d}}function Ap(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ee(191,o));o.call(r)}}}var ka={},dr=fo(ka),ta=fo(ka),na=fo(ka);function Do(e){if(e===ka)throw Error(ee(174));return e}function Jf(e,t){switch(Je(na,t),Je(ta,e),Je(dr,ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sd(t,e)}nt(dr),Je(dr,t)}function Bi(){nt(dr),nt(ta),nt(na)}function vv(e){Do(na.current);var t=Do(dr.current),n=sd(t,e.type);t!==n&&(Je(ta,e),Je(dr,n))}function eh(e){ta.current===e&&(nt(dr),nt(ta))}var ct=fo(0);function Kl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xu=[];function th(){for(var e=0;e<xu.length;e++)xu[e]._workInProgressVersionPrimary=null;xu.length=0}var vl=Ir.ReactCurrentDispatcher,wu=Ir.ReactCurrentBatchConfig,Ko=0,dt=null,Pt=null,Mt=null,Yl=!1,Ls=!1,ra=0,yC=0;function Gt(){throw Error(ee(321))}function nh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nr(e[n],t[n]))return!1;return!0}function rh(e,t,n,r,o,i){if(Ko=i,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vl.current=e===null||e.memoizedState===null?bC:SC,e=n(r,o),Ls){i=0;do{if(Ls=!1,ra=0,25<=i)throw Error(ee(301));i+=1,Mt=Pt=null,t.updateQueue=null,vl.current=TC,e=n(r,o)}while(Ls)}if(vl.current=Xl,t=Pt!==null&&Pt.next!==null,Ko=0,Mt=Pt=dt=null,Yl=!1,t)throw Error(ee(300));return e}function oh(){var e=ra!==0;return ra=0,e}function ar(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?dt.memoizedState=Mt=e:Mt=Mt.next=e,Mt}function Vn(){if(Pt===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=Pt.next;var t=Mt===null?dt.memoizedState:Mt.next;if(t!==null)Mt=t,Pt=e;else{if(e===null)throw Error(ee(310));Pt=e,e={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Mt===null?dt.memoizedState=Mt=e:Mt=Mt.next=e}return Mt}function oa(e,t){return typeof t=="function"?t(e):t}function bu(e){var t=Vn(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=Pt,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,c=null,u=i;do{var h=u.lane;if((Ko&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,s=r):c=c.next=d,dt.lanes|=h,Yo|=h}u=u.next}while(u!==null&&u!==i);c===null?s=r:c.next=l,nr(r,t.memoizedState)||(dn=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,dt.lanes|=i,Yo|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Su(e){var t=Vn(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);nr(i,t.memoizedState)||(dn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function xv(){}function wv(e,t){var n=dt,r=Vn(),o=t(),i=!nr(r.memoizedState,o);if(i&&(r.memoizedState=o,dn=!0),r=r.queue,ih(Tv.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,ia(9,Sv.bind(null,n,r,o,t),void 0,null),Lt===null)throw Error(ee(349));Ko&30||bv(n,t,o)}return o}function bv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sv(e,t,n,r){t.value=n,t.getSnapshot=r,kv(t)&&Cv(e)}function Tv(e,t,n){return n(function(){kv(t)&&Cv(e)})}function kv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nr(e,n)}catch{return!0}}function Cv(e){var t=Pr(e,1);t!==null&&tr(t,e,1,-1)}function Rp(e){var t=ar();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:e},t.queue=e,e=e.dispatch=wC.bind(null,dt,e),[t.memoizedState,e]}function ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ev(){return Vn().memoizedState}function xl(e,t,n,r){var o=ar();dt.flags|=e,o.memoizedState=ia(1|t,n,void 0,r===void 0?null:r)}function yc(e,t,n,r){var o=Vn();r=r===void 0?null:r;var i=void 0;if(Pt!==null){var s=Pt.memoizedState;if(i=s.destroy,r!==null&&nh(r,s.deps)){o.memoizedState=ia(t,n,i,r);return}}dt.flags|=e,o.memoizedState=ia(1|t,n,i,r)}function Ip(e,t){return xl(8390656,8,e,t)}function ih(e,t){return yc(2048,8,e,t)}function Nv(e,t){return yc(4,2,e,t)}function Pv(e,t){return yc(4,4,e,t)}function jv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Av(e,t,n){return n=n!=null?n.concat([e]):null,yc(4,4,jv.bind(null,t,e),n)}function sh(){}function Rv(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Iv(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Mv(e,t,n){return Ko&21?(nr(n,t)||(n=O0(),dt.lanes|=n,Yo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dn=!0),e.memoizedState=n)}function vC(e,t){var n=He;He=n!==0&&4>n?n:4,e(!0);var r=wu.transition;wu.transition={};try{e(!1),t()}finally{He=n,wu.transition=r}}function Dv(){return Vn().memoizedState}function xC(e,t,n){var r=ro(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lv(e))Fv(t,n);else if(n=gv(e,t,n,r),n!==null){var o=rn();tr(n,e,r,o),$v(n,t,r)}}function wC(e,t,n){var r=ro(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lv(e))Fv(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,nr(l,s)){var c=t.interleaved;c===null?(o.next=o,Qf(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=gv(e,t,o,r),n!==null&&(o=rn(),tr(n,e,r,o),$v(n,t,r))}}function Lv(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function Fv(e,t){Ls=Yl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $v(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$f(e,n)}}var Xl={readContext:On,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},bC={readContext:On,useCallback:function(e,t){return ar().memoizedState=[e,t===void 0?null:t],e},useContext:On,useEffect:Ip,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xl(4194308,4,jv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xl(4194308,4,e,t)},useInsertionEffect:function(e,t){return xl(4,2,e,t)},useMemo:function(e,t){var n=ar();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ar();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xC.bind(null,dt,e),[r.memoizedState,e]},useRef:function(e){var t=ar();return e={current:e},t.memoizedState=e},useState:Rp,useDebugValue:sh,useDeferredValue:function(e){return ar().memoizedState=e},useTransition:function(){var e=Rp(!1),t=e[0];return e=vC.bind(null,e[1]),ar().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=dt,o=ar();if(it){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),Lt===null)throw Error(ee(349));Ko&30||bv(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Ip(Tv.bind(null,r,i,e),[e]),r.flags|=2048,ia(9,Sv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ar(),t=Lt.identifierPrefix;if(it){var n=kr,r=Tr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ra++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SC={readContext:On,useCallback:Rv,useContext:On,useEffect:ih,useImperativeHandle:Av,useInsertionEffect:Nv,useLayoutEffect:Pv,useMemo:Iv,useReducer:bu,useRef:Ev,useState:function(){return bu(oa)},useDebugValue:sh,useDeferredValue:function(e){var t=Vn();return Mv(t,Pt.memoizedState,e)},useTransition:function(){var e=bu(oa)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:xv,useSyncExternalStore:wv,useId:Dv,unstable_isNewReconciler:!1},TC={readContext:On,useCallback:Rv,useContext:On,useEffect:ih,useImperativeHandle:Av,useInsertionEffect:Nv,useLayoutEffect:Pv,useMemo:Iv,useReducer:Su,useRef:Ev,useState:function(){return Su(oa)},useDebugValue:sh,useDeferredValue:function(e){var t=Vn();return Pt===null?t.memoizedState=e:Mv(t,Pt.memoizedState,e)},useTransition:function(){var e=Su(oa)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:xv,useSyncExternalStore:wv,useId:Dv,unstable_isNewReconciler:!1};function qn(e,t){if(e&&e.defaultProps){t=ft({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Nd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ft({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vc={isMounted:function(e){return(e=e._reactInternals)?Zo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rn(),o=ro(e),i=Cr(r,o);i.payload=t,n!=null&&(i.callback=n),t=to(e,i,o),t!==null&&(tr(t,e,o,r),yl(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rn(),o=ro(e),i=Cr(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=to(e,i,o),t!==null&&(tr(t,e,o,r),yl(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rn(),r=ro(e),o=Cr(n,r);o.tag=2,t!=null&&(o.callback=t),t=to(e,o,r),t!==null&&(tr(t,e,r,n),yl(t,e,r))}};function Mp(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Qs(n,r)||!Qs(o,i):!0}function Ov(e,t,n){var r=!1,o=ao,i=t.contextType;return typeof i=="object"&&i!==null?i=On(i):(o=mn(t)?Go:Xt.current,r=t.contextTypes,i=(r=r!=null)?_i(e,o):ao),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Dp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vc.enqueueReplaceState(t,t.state,null)}function Pd(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Zf(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=On(i):(i=mn(t)?Go:Xt.current,o.context=_i(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Nd(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&vc.enqueueReplaceState(o,o.state,null),Hl(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Wi(e,t){try{var n="",r=t;do n+=QT(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Tu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function jd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kC=typeof WeakMap=="function"?WeakMap:Map;function Vv(e,t,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Vd=r),jd(e,t)},n}function _v(e,t,n){n=Cr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){jd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jd(e,t),typeof r!="function"&&(no===null?no=new Set([this]):no.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Lp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kC;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=OC.bind(null,e,t,n),t.then(e,e))}function Fp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $p(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cr(-1,1),t.tag=2,to(n,t,1))),n.lanes|=1),e)}var CC=Ir.ReactCurrentOwner,dn=!1;function en(e,t,n,r){t.child=e===null?pv(t,null,n,r):zi(t,e.child,n,r)}function Op(e,t,n,r,o){n=n.render;var i=t.ref;return Mi(t,o),r=rh(e,t,n,r,i,o),n=oh(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,jr(e,t,o)):(it&&n&&Gf(t),t.flags|=1,en(e,t,r,o),t.child)}function Vp(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!mh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Uv(e,t,i,r,o)):(e=Tl(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(s,r)&&e.ref===t.ref)return jr(e,t,o)}return t.flags|=1,e=oo(i,r),e.ref=t.ref,e.return=t,t.child=e}function Uv(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(Qs(i,r)&&e.ref===t.ref)if(dn=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(dn=!0);else return t.lanes=e.lanes,jr(e,t,o)}return Ad(e,t,n,r,o)}function zv(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Si,Tn),Tn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(Si,Tn),Tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Je(Si,Tn),Tn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Je(Si,Tn),Tn|=r;return en(e,t,o,n),t.child}function Bv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ad(e,t,n,r,o){var i=mn(n)?Go:Xt.current;return i=_i(t,i),Mi(t,o),n=rh(e,t,n,r,i,o),r=oh(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,jr(e,t,o)):(it&&r&&Gf(t),t.flags|=1,en(e,t,n,o),t.child)}function _p(e,t,n,r,o){if(mn(n)){var i=!0;Ul(t)}else i=!1;if(Mi(t,o),t.stateNode===null)wl(e,t),Ov(t,n,r),Pd(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=On(u):(u=mn(n)?Go:Xt.current,u=_i(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Dp(t,s,r,u),Wr=!1;var m=t.memoizedState;s.state=m,Hl(t,r,s,o),c=t.memoizedState,l!==r||m!==c||hn.current||Wr?(typeof h=="function"&&(Nd(t,n,h,r),c=t.memoizedState),(l=Wr||Mp(t,n,l,r,m,c,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,yv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:qn(t.type,l),s.props=u,d=t.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=On(c):(c=mn(n)?Go:Xt.current,c=_i(t,c));var T=n.getDerivedStateFromProps;(h=typeof T=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Dp(t,s,r,c),Wr=!1,m=t.memoizedState,s.state=m,Hl(t,r,s,o);var P=t.memoizedState;l!==d||m!==P||hn.current||Wr?(typeof T=="function"&&(Nd(t,n,T,r),P=t.memoizedState),(u=Wr||Mp(t,n,u,r,m,P,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,P,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,P,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=P),s.props=r,s.state=P,s.context=c,r=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Rd(e,t,n,r,i,o)}function Rd(e,t,n,r,o,i){Bv(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&Cp(t,n,!1),jr(e,t,i);r=t.stateNode,CC.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=zi(t,e.child,null,i),t.child=zi(t,null,l,i)):en(e,t,l,i),t.memoizedState=r.state,o&&Cp(t,n,!0),t.child}function Wv(e){var t=e.stateNode;t.pendingContext?kp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kp(e,t.context,!1),Jf(e,t.containerInfo)}function Up(e,t,n,r,o){return Ui(),Kf(o),t.flags|=256,en(e,t,n,r),t.child}var Id={dehydrated:null,treeContext:null,retryLane:0};function Md(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gv(e,t,n){var r=t.pendingProps,o=ct.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Je(ct,o&1),e===null)return Cd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=bc(s,r,0,null),e=Uo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Md(n),t.memoizedState=Id,e):ah(t,s));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return EC(e,t,s,r,l,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=oo(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=oo(l,i):(i=Uo(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Md(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Id,r}return i=e.child,e=i.sibling,r=oo(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ah(e,t){return t=bc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Za(e,t,n,r){return r!==null&&Kf(r),zi(t,e.child,null,n),e=ah(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EC(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Tu(Error(ee(422))),Za(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=bc({mode:"visible",children:r.children},o,0,null),i=Uo(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&zi(t,e.child,null,s),t.child.memoizedState=Md(s),t.memoizedState=Id,i);if(!(t.mode&1))return Za(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ee(419)),r=Tu(i,r,void 0),Za(e,t,s,r)}if(l=(s&e.childLanes)!==0,dn||l){if(r=Lt,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Pr(e,o),tr(r,e,o,-1))}return hh(),r=Tu(Error(ee(421))),Za(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=VC.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,kn=eo(o.nextSibling),Cn=t,it=!0,Jn=null,e!==null&&(Mn[Dn++]=Tr,Mn[Dn++]=kr,Mn[Dn++]=Ho,Tr=e.id,kr=e.overflow,Ho=t),t=ah(t,r.children),t.flags|=4096,t)}function zp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ed(e.return,t,n)}function ku(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Hv(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(en(e,t,r.children,n),r=ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zp(e,n,t);else if(e.tag===19)zp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Je(ct,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Kl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ku(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Kl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ku(t,!0,n,null,i);break;case"together":ku(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=oo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=oo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function NC(e,t,n){switch(t.tag){case 3:Wv(t),Ui();break;case 5:vv(t);break;case 1:mn(t.type)&&Ul(t);break;case 4:Jf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Je(Wl,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Je(ct,ct.current&1),t.flags|=128,null):n&t.child.childLanes?Gv(e,t,n):(Je(ct,ct.current&1),e=jr(e,t,n),e!==null?e.sibling:null);Je(ct,ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Hv(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Je(ct,ct.current),r)break;return null;case 22:case 23:return t.lanes=0,zv(e,t,n)}return jr(e,t,n)}var Kv,Dd,Yv,Xv;Kv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};Yv=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Do(dr.current);var i=null;switch(n){case"input":o=nd(e,o),r=nd(e,r),i=[];break;case"select":o=ft({},o,{value:void 0}),r=ft({},r,{value:void 0}),i=[];break;case"textarea":o=id(e,o),r=id(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vl)}ad(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ws.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ws.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Xv=function(e,t,n,r){n!==r&&(t.flags|=4)};function xs(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function PC(e,t,n){var r=t.pendingProps;switch(Hf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return mn(t.type)&&_l(),Ht(t),null;case 3:return r=t.stateNode,Bi(),nt(hn),nt(Xt),th(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jn!==null&&(zd(Jn),Jn=null))),Dd(e,t),Ht(t),null;case 5:eh(t);var o=Do(na.current);if(n=t.type,e!==null&&t.stateNode!=null)Yv(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return Ht(t),null}if(e=Do(dr.current),qa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[lr]=t,r[ea]=i,e=(t.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(o=0;o<Ps.length;o++)tt(Ps[o],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Qm(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":Jm(r,i),tt("invalid",r)}ad(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xa(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xa(r.textContent,l,e),o=["children",""+l]):Ws.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&tt("scroll",r)}switch(n){case"input":Ua(r),Zm(r,i,!0);break;case"textarea":Ua(r),ep(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vl)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=T0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[lr]=t,e[ea]=r,Kv(e,t,!1,!1),t.stateNode=e;e:{switch(s=ld(n,r),n){case"dialog":tt("cancel",e),tt("close",e),o=r;break;case"iframe":case"object":case"embed":tt("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ps.length;o++)tt(Ps[o],e);o=r;break;case"source":tt("error",e),o=r;break;case"img":case"image":case"link":tt("error",e),tt("load",e),o=r;break;case"details":tt("toggle",e),o=r;break;case"input":Qm(e,r),o=nd(e,r),tt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ft({},r,{value:void 0}),tt("invalid",e);break;case"textarea":Jm(e,r),o=id(e,r),tt("invalid",e);break;default:o=r}ad(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?E0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&k0(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Gs(e,c):typeof c=="number"&&Gs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ws.hasOwnProperty(i)?c!=null&&i==="onScroll"&&tt("scroll",e):c!=null&&Rf(e,i,c,s))}switch(n){case"input":Ua(e),Zm(e,r,!1);break;case"textarea":Ua(e),ep(e);break;case"option":r.value!=null&&e.setAttribute("value",""+so(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ji(e,!!r.multiple,i,!1):r.defaultValue!=null&&ji(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Vl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ht(t),null;case 6:if(e&&t.stateNode!=null)Xv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=Do(na.current),Do(dr.current),qa(t)){if(r=t.stateNode,n=t.memoizedProps,r[lr]=t,(i=r.nodeValue!==n)&&(e=Cn,e!==null))switch(e.tag){case 3:Xa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=t,t.stateNode=r}return Ht(t),null;case 13:if(nt(ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&kn!==null&&t.mode&1&&!(t.flags&128))hv(),Ui(),t.flags|=98560,i=!1;else if(i=qa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ee(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[lr]=t}else Ui(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ht(t),i=!1}else Jn!==null&&(zd(Jn),Jn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ct.current&1?jt===0&&(jt=3):hh())),t.updateQueue!==null&&(t.flags|=4),Ht(t),null);case 4:return Bi(),Dd(e,t),e===null&&Zs(t.stateNode.containerInfo),Ht(t),null;case 10:return qf(t.type._context),Ht(t),null;case 17:return mn(t.type)&&_l(),Ht(t),null;case 19:if(nt(ct),i=t.memoizedState,i===null)return Ht(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)xs(i,!1);else{if(jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Kl(e),s!==null){for(t.flags|=128,xs(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Je(ct,ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&xt()>Gi&&(t.flags|=128,r=!0,xs(i,!1),t.lanes=4194304)}else{if(!r)if(e=Kl(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!it)return Ht(t),null}else 2*xt()-i.renderingStartTime>Gi&&n!==1073741824&&(t.flags|=128,r=!0,xs(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xt(),t.sibling=null,n=ct.current,Je(ct,r?n&1|2:n&1),t):(Ht(t),null);case 22:case 23:return fh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tn&1073741824&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function jC(e,t){switch(Hf(t),t.tag){case 1:return mn(t.type)&&_l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bi(),nt(hn),nt(Xt),th(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return eh(t),null;case 13:if(nt(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Ui()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return nt(ct),null;case 4:return Bi(),null;case 10:return qf(t.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var Ja=!1,Kt=!1,AC=typeof WeakSet=="function"?WeakSet:Set,he=null;function bi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(e,t,r)}else n.current=null}function Ld(e,t,n){try{n()}catch(r){pt(e,t,r)}}var Bp=!1;function RC(e,t){if(vd=Fl,e=ev(),Wf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var T;d!==n||o!==0&&d.nodeType!==3||(l=s+o),d!==i||r!==0&&d.nodeType!==3||(c=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(T=d.firstChild)!==null;)m=d,d=T;for(;;){if(d===e)break t;if(m===n&&++u===o&&(l=s),m===i&&++h===r&&(c=s),(T=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:e,selectionRange:n},Fl=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var C=P.memoizedProps,k=P.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?C:qn(t.type,C),k);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(R){pt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return P=Bp,Bp=!1,P}function Fs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Ld(t,n,i)}o=o.next}while(o!==r)}}function xc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qv(e){var t=e.alternate;t!==null&&(e.alternate=null,qv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[ea],delete t[Sd],delete t[hC],delete t[mC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qv(e){return e.tag===5||e.tag===3||e.tag===4}function Wp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $d(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vl));else if(r!==4&&(e=e.child,e!==null))for($d(e,t,n),e=e.sibling;e!==null;)$d(e,t,n),e=e.sibling}function Od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Od(e,t,n),e=e.sibling;e!==null;)Od(e,t,n),e=e.sibling}var $t=null,Zn=!1;function Or(e,t,n){for(n=n.child;n!==null;)Zv(e,t,n),n=n.sibling}function Zv(e,t,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(dc,n)}catch{}switch(n.tag){case 5:Kt||bi(n,t);case 6:var r=$t,o=Zn;$t=null,Or(e,t,n),$t=r,Zn=o,$t!==null&&(Zn?(e=$t,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(Zn?(e=$t,n=n.stateNode,e.nodeType===8?yu(e.parentNode,n):e.nodeType===1&&yu(e,n),Xs(e)):yu($t,n.stateNode));break;case 4:r=$t,o=Zn,$t=n.stateNode.containerInfo,Zn=!0,Or(e,t,n),$t=r,Zn=o;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Ld(n,t,s),o=o.next}while(o!==r)}Or(e,t,n);break;case 1:if(!Kt&&(bi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){pt(n,t,l)}Or(e,t,n);break;case 21:Or(e,t,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Or(e,t,n),Kt=r):Or(e,t,n);break;default:Or(e,t,n)}}function Gp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new AC),t.forEach(function(r){var o=_C.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:$t=l.stateNode,Zn=!1;break e;case 3:$t=l.stateNode.containerInfo,Zn=!0;break e;case 4:$t=l.stateNode.containerInfo,Zn=!0;break e}l=l.return}if($t===null)throw Error(ee(160));Zv(i,s,o),$t=null,Zn=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){pt(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jv(t,e),t=t.sibling}function Jv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gn(t,e),sr(e),r&4){try{Fs(3,e,e.return),xc(3,e)}catch(C){pt(e,e.return,C)}try{Fs(5,e,e.return)}catch(C){pt(e,e.return,C)}}break;case 1:Gn(t,e),sr(e),r&512&&n!==null&&bi(n,n.return);break;case 5:if(Gn(t,e),sr(e),r&512&&n!==null&&bi(n,n.return),e.flags&32){var o=e.stateNode;try{Gs(o,"")}catch(C){pt(e,e.return,C)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&b0(o,i),ld(l,s);var u=ld(l,i);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];h==="style"?E0(o,d):h==="dangerouslySetInnerHTML"?k0(o,d):h==="children"?Gs(o,d):Rf(o,h,d,u)}switch(l){case"input":rd(o,i);break;case"textarea":S0(o,i);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?ji(o,!!i.multiple,T,!1):m!==!!i.multiple&&(i.defaultValue!=null?ji(o,!!i.multiple,i.defaultValue,!0):ji(o,!!i.multiple,i.multiple?[]:"",!1))}o[ea]=i}catch(C){pt(e,e.return,C)}}break;case 6:if(Gn(t,e),sr(e),r&4){if(e.stateNode===null)throw Error(ee(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(C){pt(e,e.return,C)}}break;case 3:if(Gn(t,e),sr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(t.containerInfo)}catch(C){pt(e,e.return,C)}break;case 4:Gn(t,e),sr(e);break;case 13:Gn(t,e),sr(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(uh=xt())),r&4&&Gp(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Kt=(u=Kt)||h,Gn(t,e),Kt=u):Gn(t,e),sr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(he=e,h=e.child;h!==null;){for(d=he=h;he!==null;){switch(m=he,T=m.child,m.tag){case 0:case 11:case 14:case 15:Fs(4,m,m.return);break;case 1:bi(m,m.return);var P=m.stateNode;if(typeof P.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(C){pt(r,n,C)}}break;case 5:bi(m,m.return);break;case 22:if(m.memoizedState!==null){Kp(d);continue}}T!==null?(T.return=m,he=T):Kp(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=C0("display",s))}catch(C){pt(e,e.return,C)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(C){pt(e,e.return,C)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gn(t,e),sr(e),r&4&&Gp(e);break;case 21:break;default:Gn(t,e),sr(e)}}function sr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Qv(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Gs(o,""),r.flags&=-33);var i=Wp(e);Od(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Wp(e);$d(e,l,s);break;default:throw Error(ee(161))}}catch(c){pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IC(e,t,n){he=e,ex(e)}function ex(e,t,n){for(var r=(e.mode&1)!==0;he!==null;){var o=he,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Ja;if(!s){var l=o.alternate,c=l!==null&&l.memoizedState!==null||Kt;l=Ja;var u=Kt;if(Ja=s,(Kt=c)&&!u)for(he=o;he!==null;)s=he,c=s.child,s.tag===22&&s.memoizedState!==null?Yp(o):c!==null?(c.return=s,he=c):Yp(o);for(;i!==null;)he=i,ex(i),i=i.sibling;he=o,Ja=l,Kt=u}Hp(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,he=i):Hp(e)}}function Hp(e){for(;he!==null;){var t=he;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kt||xc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:qn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ap(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ap(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Xs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Kt||t.flags&512&&Fd(t)}catch(m){pt(t,t.return,m)}}if(t===e){he=null;break}if(n=t.sibling,n!==null){n.return=t.return,he=n;break}he=t.return}}function Kp(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var n=t.sibling;if(n!==null){n.return=t.return,he=n;break}he=t.return}}function Yp(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xc(4,t)}catch(c){pt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){pt(t,o,c)}}var i=t.return;try{Fd(t)}catch(c){pt(t,i,c)}break;case 5:var s=t.return;try{Fd(t)}catch(c){pt(t,s,c)}}}catch(c){pt(t,t.return,c)}if(t===e){he=null;break}var l=t.sibling;if(l!==null){l.return=t.return,he=l;break}he=t.return}}var MC=Math.ceil,ql=Ir.ReactCurrentDispatcher,lh=Ir.ReactCurrentOwner,Fn=Ir.ReactCurrentBatchConfig,Oe=0,Lt=null,Et=null,Vt=0,Tn=0,Si=fo(0),jt=0,sa=null,Yo=0,wc=0,ch=0,$s=null,un=null,uh=0,Gi=1/0,xr=null,Ql=!1,Vd=null,no=null,el=!1,Yr=null,Zl=0,Os=0,_d=null,bl=-1,Sl=0;function rn(){return Oe&6?xt():bl!==-1?bl:bl=xt()}function ro(e){return e.mode&1?Oe&2&&Vt!==0?Vt&-Vt:gC.transition!==null?(Sl===0&&(Sl=O0()),Sl):(e=He,e!==0||(e=window.event,e=e===void 0?16:G0(e.type)),e):1}function tr(e,t,n,r){if(50<Os)throw Os=0,_d=null,Error(ee(185));ba(e,n,r),(!(Oe&2)||e!==Lt)&&(e===Lt&&(!(Oe&2)&&(wc|=n),jt===4&&Hr(e,Vt)),pn(e,r),n===1&&Oe===0&&!(t.mode&1)&&(Gi=xt()+500,gc&&ho()))}function pn(e,t){var n=e.callbackNode;gk(e,t);var r=Ll(e,e===Lt?Vt:0);if(r===0)n!==null&&rp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rp(n),t===1)e.tag===0?pC(Xp.bind(null,e)):uv(Xp.bind(null,e)),dC(function(){!(Oe&6)&&ho()}),n=null;else{switch(V0(r)){case 1:n=Ff;break;case 4:n=F0;break;case 16:n=Dl;break;case 536870912:n=$0;break;default:n=Dl}n=lx(n,tx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tx(e,t){if(bl=-1,Sl=0,Oe&6)throw Error(ee(327));var n=e.callbackNode;if(Di()&&e.callbackNode!==n)return null;var r=Ll(e,e===Lt?Vt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Jl(e,r);else{t=r;var o=Oe;Oe|=2;var i=rx();(Lt!==e||Vt!==t)&&(xr=null,Gi=xt()+500,_o(e,t));do try{FC();break}catch(l){nx(e,l)}while(1);Xf(),ql.current=i,Oe=o,Et!==null?t=0:(Lt=null,Vt=0,t=jt)}if(t!==0){if(t===2&&(o=hd(e),o!==0&&(r=o,t=Ud(e,o))),t===1)throw n=sa,_o(e,0),Hr(e,r),pn(e,xt()),n;if(t===6)Hr(e,r);else{if(o=e.current.alternate,!(r&30)&&!DC(o)&&(t=Jl(e,r),t===2&&(i=hd(e),i!==0&&(r=i,t=Ud(e,i))),t===1))throw n=sa,_o(e,0),Hr(e,r),pn(e,xt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:jo(e,un,xr);break;case 3:if(Hr(e,r),(r&130023424)===r&&(t=uh+500-xt(),10<t)){if(Ll(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){rn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=bd(jo.bind(null,e,un,xr),t);break}jo(e,un,xr);break;case 4:if(Hr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-er(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MC(r/1960))-r,10<r){e.timeoutHandle=bd(jo.bind(null,e,un,xr),r);break}jo(e,un,xr);break;case 5:jo(e,un,xr);break;default:throw Error(ee(329))}}}return pn(e,xt()),e.callbackNode===n?tx.bind(null,e):null}function Ud(e,t){var n=$s;return e.current.memoizedState.isDehydrated&&(_o(e,t).flags|=256),e=Jl(e,t),e!==2&&(t=un,un=n,t!==null&&zd(t)),e}function zd(e){un===null?un=e:un.push.apply(un,e)}function DC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!nr(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t){for(t&=~ch,t&=~wc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-er(t),r=1<<n;e[n]=-1,t&=~r}}function Xp(e){if(Oe&6)throw Error(ee(327));Di();var t=Ll(e,0);if(!(t&1))return pn(e,xt()),null;var n=Jl(e,t);if(e.tag!==0&&n===2){var r=hd(e);r!==0&&(t=r,n=Ud(e,r))}if(n===1)throw n=sa,_o(e,0),Hr(e,t),pn(e,xt()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jo(e,un,xr),pn(e,xt()),null}function dh(e,t){var n=Oe;Oe|=1;try{return e(t)}finally{Oe=n,Oe===0&&(Gi=xt()+500,gc&&ho())}}function Xo(e){Yr!==null&&Yr.tag===0&&!(Oe&6)&&Di();var t=Oe;Oe|=1;var n=Fn.transition,r=He;try{if(Fn.transition=null,He=1,e)return e()}finally{He=r,Fn.transition=n,Oe=t,!(Oe&6)&&ho()}}function fh(){Tn=Si.current,nt(Si)}function _o(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uC(n)),Et!==null)for(n=Et.return;n!==null;){var r=n;switch(Hf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:Bi(),nt(hn),nt(Xt),th();break;case 5:eh(r);break;case 4:Bi();break;case 13:nt(ct);break;case 19:nt(ct);break;case 10:qf(r.type._context);break;case 22:case 23:fh()}n=n.return}if(Lt=e,Et=e=oo(e.current,null),Vt=Tn=t,jt=0,sa=null,ch=wc=Yo=0,un=$s=null,Mo!==null){for(t=0;t<Mo.length;t++)if(n=Mo[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}Mo=null}return e}function nx(e,t){do{var n=Et;try{if(Xf(),vl.current=Xl,Yl){for(var r=dt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Yl=!1}if(Ko=0,Mt=Pt=dt=null,Ls=!1,ra=0,lh.current=null,n===null||n.return===null){jt=1,sa=t,Et=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var T=Fp(s);if(T!==null){T.flags&=-257,$p(T,s,l,i,t),T.mode&1&&Lp(i,u,t),t=T,c=u;var P=t.updateQueue;if(P===null){var C=new Set;C.add(c),t.updateQueue=C}else P.add(c);break e}else{if(!(t&1)){Lp(i,u,t),hh();break e}c=Error(ee(426))}}else if(it&&l.mode&1){var k=Fp(s);if(k!==null){!(k.flags&65536)&&(k.flags|=256),$p(k,s,l,i,t),Kf(Wi(c,l));break e}}i=c=Wi(c,l),jt!==4&&(jt=2),$s===null?$s=[i]:$s.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Vv(i,c,t);jp(i,x);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(no===null||!no.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var R=_v(i,l,t);jp(i,R);break e}}i=i.return}while(i!==null)}ix(n)}catch(M){t=M,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(1)}function rx(){var e=ql.current;return ql.current=Xl,e===null?Xl:e}function hh(){(jt===0||jt===3||jt===2)&&(jt=4),Lt===null||!(Yo&268435455)&&!(wc&268435455)||Hr(Lt,Vt)}function Jl(e,t){var n=Oe;Oe|=2;var r=rx();(Lt!==e||Vt!==t)&&(xr=null,_o(e,t));do try{LC();break}catch(o){nx(e,o)}while(1);if(Xf(),Oe=n,ql.current=r,Et!==null)throw Error(ee(261));return Lt=null,Vt=0,jt}function LC(){for(;Et!==null;)ox(Et)}function FC(){for(;Et!==null&&!ak();)ox(Et)}function ox(e){var t=ax(e.alternate,e,Tn);e.memoizedProps=e.pendingProps,t===null?ix(e):Et=t,lh.current=null}function ix(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jC(n,t),n!==null){n.flags&=32767,Et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jt=6,Et=null;return}}else if(n=PC(n,t,Tn),n!==null){Et=n;return}if(t=t.sibling,t!==null){Et=t;return}Et=t=e}while(t!==null);jt===0&&(jt=5)}function jo(e,t,n){var r=He,o=Fn.transition;try{Fn.transition=null,He=1,$C(e,t,n,r)}finally{Fn.transition=o,He=r}return null}function $C(e,t,n,r){do Di();while(Yr!==null);if(Oe&6)throw Error(ee(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(yk(e,i),e===Lt&&(Et=Lt=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,lx(Dl,function(){return Di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fn.transition,Fn.transition=null;var s=He;He=1;var l=Oe;Oe|=4,lh.current=null,RC(e,n),Jv(n,e),rC(xd),Fl=!!vd,xd=vd=null,e.current=n,IC(n),lk(),Oe=l,He=s,Fn.transition=i}else e.current=n;if(el&&(el=!1,Yr=e,Zl=o),i=e.pendingLanes,i===0&&(no=null),dk(n.stateNode),pn(e,xt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ql)throw Ql=!1,e=Vd,Vd=null,e;return Zl&1&&e.tag!==0&&Di(),i=e.pendingLanes,i&1?e===_d?Os++:(Os=0,_d=e):Os=0,ho(),null}function Di(){if(Yr!==null){var e=V0(Zl),t=Fn.transition,n=He;try{if(Fn.transition=null,He=16>e?16:e,Yr===null)var r=!1;else{if(e=Yr,Yr=null,Zl=0,Oe&6)throw Error(ee(331));var o=Oe;for(Oe|=4,he=e.current;he!==null;){var i=he,s=i.child;if(he.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:Fs(8,h,i)}var d=h.child;if(d!==null)d.return=h,he=d;else for(;he!==null;){h=he;var m=h.sibling,T=h.return;if(qv(h),h===u){he=null;break}if(m!==null){m.return=T,he=m;break}he=T}}}var P=i.alternate;if(P!==null){var C=P.child;if(C!==null){P.child=null;do{var k=C.sibling;C.sibling=null,C=k}while(C!==null)}}he=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,he=s;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fs(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,he=x;break e}he=i.return}}var v=e.current;for(he=v;he!==null;){s=he;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,he=w;else e:for(s=v;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xc(9,l)}}catch(M){pt(l,l.return,M)}if(l===s){he=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,he=R;break e}he=l.return}}if(Oe=o,ho(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(dc,e)}catch{}r=!0}return r}finally{He=n,Fn.transition=t}}return!1}function qp(e,t,n){t=Wi(n,t),t=Vv(e,t,1),e=to(e,t,1),t=rn(),e!==null&&(ba(e,1,t),pn(e,t))}function pt(e,t,n){if(e.tag===3)qp(e,e,n);else for(;t!==null;){if(t.tag===3){qp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(no===null||!no.has(r))){e=Wi(n,e),e=_v(t,e,1),t=to(t,e,1),e=rn(),t!==null&&(ba(t,1,e),pn(t,e));break}}t=t.return}}function OC(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rn(),e.pingedLanes|=e.suspendedLanes&n,Lt===e&&(Vt&n)===n&&(jt===4||jt===3&&(Vt&130023424)===Vt&&500>xt()-uh?_o(e,0):ch|=n),pn(e,t)}function sx(e,t){t===0&&(e.mode&1?(t=Wa,Wa<<=1,!(Wa&130023424)&&(Wa=4194304)):t=1);var n=rn();e=Pr(e,t),e!==null&&(ba(e,t,n),pn(e,n))}function VC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sx(e,n)}function _C(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),sx(e,n)}var ax;ax=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hn.current)dn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dn=!1,NC(e,t,n);dn=!!(e.flags&131072)}else dn=!1,it&&t.flags&1048576&&dv(t,Bl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wl(e,t),e=t.pendingProps;var o=_i(t,Xt.current);Mi(t,n),o=rh(null,t,r,e,o,n);var i=oh();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mn(r)?(i=!0,Ul(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Zf(t),o.updater=vc,t.stateNode=o,o._reactInternals=t,Pd(t,r,e,n),t=Rd(null,t,r,!0,i,n)):(t.tag=0,it&&i&&Gf(t),en(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=zC(r),e=qn(r,e),o){case 0:t=Ad(null,t,r,e,n);break e;case 1:t=_p(null,t,r,e,n);break e;case 11:t=Op(null,t,r,e,n);break e;case 14:t=Vp(null,t,r,qn(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),Ad(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),_p(e,t,r,o,n);case 3:e:{if(Wv(t),e===null)throw Error(ee(387));r=t.pendingProps,i=t.memoizedState,o=i.element,yv(e,t),Hl(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=Wi(Error(ee(423)),t),t=Up(e,t,r,n,o);break e}else if(r!==o){o=Wi(Error(ee(424)),t),t=Up(e,t,r,n,o);break e}else for(kn=eo(t.stateNode.containerInfo.firstChild),Cn=t,it=!0,Jn=null,n=pv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ui(),r===o){t=jr(e,t,n);break e}en(e,t,r,n)}t=t.child}return t;case 5:return vv(t),e===null&&Cd(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,wd(r,o)?s=null:i!==null&&wd(r,i)&&(t.flags|=32),Bv(e,t),en(e,t,s,n),t.child;case 6:return e===null&&Cd(t),null;case 13:return Gv(e,t,n);case 4:return Jf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zi(t,null,r,n):en(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),Op(e,t,r,o,n);case 7:return en(e,t,t.pendingProps,n),t.child;case 8:return en(e,t,t.pendingProps.children,n),t.child;case 12:return en(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Je(Wl,r._currentValue),r._currentValue=s,i!==null)if(nr(i.value,s)){if(i.children===o.children&&!hn.current){t=jr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Cr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ed(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(ee(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ed(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}en(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Mi(t,n),o=On(o),r=r(o),t.flags|=1,en(e,t,r,n),t.child;case 14:return r=t.type,o=qn(r,t.pendingProps),o=qn(r.type,o),Vp(e,t,r,o,n);case 15:return Uv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),wl(e,t),t.tag=1,mn(r)?(e=!0,Ul(t)):e=!1,Mi(t,n),Ov(t,r,o),Pd(t,r,o,n),Rd(null,t,r,!0,e,n);case 19:return Hv(e,t,n);case 22:return zv(e,t,n)}throw Error(ee(156,t.tag))};function lx(e,t){return L0(e,t)}function UC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(e,t,n,r){return new UC(e,t,n,r)}function mh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zC(e){if(typeof e=="function")return mh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mf)return 11;if(e===Df)return 14}return 2}function oo(e,t){var n=e.alternate;return n===null?(n=Ln(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tl(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")mh(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case fi:return Uo(n.children,o,i,t);case If:s=8,o|=8;break;case Zu:return e=Ln(12,n,t,o|2),e.elementType=Zu,e.lanes=i,e;case Ju:return e=Ln(13,n,t,o),e.elementType=Ju,e.lanes=i,e;case ed:return e=Ln(19,n,t,o),e.elementType=ed,e.lanes=i,e;case v0:return bc(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case g0:s=10;break e;case y0:s=9;break e;case Mf:s=11;break e;case Df:s=14;break e;case Br:s=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Ln(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Uo(e,t,n,r){return e=Ln(7,e,r,t),e.lanes=n,e}function bc(e,t,n,r){return e=Ln(22,e,r,t),e.elementType=v0,e.lanes=n,e.stateNode={isHidden:!1},e}function Cu(e,t,n){return e=Ln(6,e,null,t),e.lanes=n,e}function Eu(e,t,n){return t=Ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BC(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ph(e,t,n,r,o,i,s,l,c){return e=new BC(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ln(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(i),e}function WC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cx(e){if(!e)return ao;e=e._reactInternals;e:{if(Zo(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(mn(n))return cv(e,n,t)}return t}function ux(e,t,n,r,o,i,s,l,c){return e=ph(n,r,!0,e,o,i,s,l,c),e.context=cx(null),n=e.current,r=rn(),o=ro(n),i=Cr(r,o),i.callback=t??null,to(n,i,o),e.current.lanes=o,ba(e,o,r),pn(e,r),e}function Sc(e,t,n,r){var o=t.current,i=rn(),s=ro(o);return n=cx(n),t.context===null?t.context=n:t.pendingContext=n,t=Cr(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=to(o,t,s),e!==null&&(tr(e,o,s,i),yl(e,o,s)),s}function ec(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gh(e,t){Qp(e,t),(e=e.alternate)&&Qp(e,t)}function GC(){return null}var dx=typeof reportError=="function"?reportError:function(e){console.error(e)};function yh(e){this._internalRoot=e}Tc.prototype.render=yh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Sc(e,t,null,null)};Tc.prototype.unmount=yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xo(function(){Sc(null,e,null,null)}),t[Nr]=null}};function Tc(e){this._internalRoot=e}Tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=z0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gr.length&&t!==0&&t<Gr[n].priority;n++);Gr.splice(n,0,e),n===0&&W0(e)}};function vh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zp(){}function HC(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=ec(s);i.call(u)}}var s=ux(t,r,e,0,null,!1,!1,"",Zp);return e._reactRootContainer=s,e[Nr]=s.current,Zs(e.nodeType===8?e.parentNode:e),Xo(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=ec(c);l.call(u)}}var c=ph(e,0,!1,null,null,!1,!1,"",Zp);return e._reactRootContainer=c,e[Nr]=c.current,Zs(e.nodeType===8?e.parentNode:e),Xo(function(){Sc(t,c,n,r)}),c}function Cc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var c=ec(s);l.call(c)}}Sc(t,s,e,o)}else s=HC(n,t,e,o,r);return ec(s)}_0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ns(t.pendingLanes);n!==0&&($f(t,n|1),pn(t,xt()),!(Oe&6)&&(Gi=xt()+500,ho()))}break;case 13:Xo(function(){var r=Pr(e,1);if(r!==null){var o=rn();tr(r,e,1,o)}}),gh(e,1)}};Of=function(e){if(e.tag===13){var t=Pr(e,134217728);if(t!==null){var n=rn();tr(t,e,134217728,n)}gh(e,134217728)}};U0=function(e){if(e.tag===13){var t=ro(e),n=Pr(e,t);if(n!==null){var r=rn();tr(n,e,t,r)}gh(e,t)}};z0=function(){return He};B0=function(e,t){var n=He;try{return He=e,t()}finally{He=n}};ud=function(e,t,n){switch(t){case"input":if(rd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=pc(r);if(!o)throw Error(ee(90));w0(r),rd(r,o)}}}break;case"textarea":S0(e,n);break;case"select":t=n.value,t!=null&&ji(e,!!n.multiple,t,!1)}};j0=dh;A0=Xo;var KC={usingClientEntryPoint:!1,Events:[Ta,gi,pc,N0,P0,dh]},ws={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YC={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=M0(e),e===null?null:e.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||GC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{dc=tl.inject(YC),ur=tl}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;Nn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vh(t))throw Error(ee(200));return WC(e,t,null,n)};Nn.createRoot=function(e,t){if(!vh(e))throw Error(ee(299));var n=!1,r="",o=dx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ph(e,1,!1,null,null,n,!1,r,o),e[Nr]=t.current,Zs(e.nodeType===8?e.parentNode:e),new yh(t)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=M0(t),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return Xo(e)};Nn.hydrate=function(e,t,n){if(!kc(t))throw Error(ee(200));return Cc(null,e,t,!0,n)};Nn.hydrateRoot=function(e,t,n){if(!vh(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=dx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=ux(t,null,e,1,n??null,o,!1,i,s),e[Nr]=t.current,Zs(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Tc(t)};Nn.render=function(e,t,n){if(!kc(t))throw Error(ee(200));return Cc(null,e,t,!1,n)};Nn.unmountComponentAtNode=function(e){if(!kc(e))throw Error(ee(40));return e._reactRootContainer?(Xo(function(){Cc(null,null,e,!1,function(){e._reactRootContainer=null,e[Nr]=null})}),!0):!1};Nn.unstable_batchedUpdates=dh;Nn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kc(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return Cc(e,t,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fx)}catch(e){console.error(e)}}fx(),f0.exports=Nn;var xh=f0.exports;const XC=e0(xh);var Jp=xh;qu.createRoot=Jp.createRoot,qu.hydrateRoot=Jp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aa.apply(this,arguments)}var Xr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xr||(Xr={}));const eg="popstate";function qC(e){e===void 0&&(e={});function t(r,o){let{pathname:i,search:s,hash:l}=r.location;return Bd("",{pathname:i,search:s,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:tc(o)}return ZC(t,n,null,e)}function bt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QC(){return Math.random().toString(36).substr(2,8)}function tg(e,t){return{usr:e.state,key:e.key,idx:t}}function Bd(e,t,n,r){return n===void 0&&(n=null),aa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?es(t):t,{state:n,key:t&&t.key||r||QC()})}function tc(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function es(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ZC(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,l=Xr.Pop,c=null,u=h();u==null&&(u=0,s.replaceState(aa({},s.state,{idx:u}),""));function h(){return(s.state||{idx:null}).idx}function d(){l=Xr.Pop;let k=h(),x=k==null?null:k-u;u=k,c&&c({action:l,location:C.location,delta:x})}function m(k,x){l=Xr.Push;let v=Bd(C.location,k,x);n&&n(v,k),u=h()+1;let w=tg(v,u),R=C.createHref(v);try{s.pushState(w,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(R)}i&&c&&c({action:l,location:C.location,delta:1})}function T(k,x){l=Xr.Replace;let v=Bd(C.location,k,x);n&&n(v,k),u=h();let w=tg(v,u),R=C.createHref(v);s.replaceState(w,"",R),i&&c&&c({action:l,location:C.location,delta:0})}function P(k){let x=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof k=="string"?k:tc(k);return v=v.replace(/ $/,"%20"),bt(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let C={get action(){return l},get location(){return e(o,s)},listen(k){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(eg,d),c=k,()=>{o.removeEventListener(eg,d),c=null}},createHref(k){return t(o,k)},createURL:P,encodeLocation(k){let x=P(k);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:T,go(k){return s.go(k)}};return C}var ng;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ng||(ng={}));function JC(e,t,n){return n===void 0&&(n="/"),eE(e,t,n,!1)}function eE(e,t,n,r){let o=typeof t=="string"?es(t):t,i=wh(o.pathname||"/",n);if(i==null)return null;let s=mx(e);tE(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=fE(i);l=uE(s[c],u,r)}return l}function mx(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,s,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(bt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=io([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mx(i.children,t,h,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:lE(u,i.index),routesMeta:h})};return e.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))o(i,s);else for(let c of px(i.path))o(i,s,c)}),t}function px(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let s=px(r.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),o&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function tE(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cE(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nE=/^:[\w-]+$/,rE=3,oE=2,iE=1,sE=10,aE=-2,rg=e=>e==="*";function lE(e,t){let n=e.split("/"),r=n.length;return n.some(rg)&&(r+=aE),t&&(r+=oE),n.filter(o=>!rg(o)).reduce((o,i)=>o+(nE.test(i)?rE:i===""?iE:sE),r)}function cE(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function uE(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,o={},i="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",d=og({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=og({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(o,d.params),s.push({params:o,pathname:io([i,d.pathname]),pathnameBase:gE(io([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=io([i,d.pathnameBase]))}return s}function og(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=dE(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:m,isOptional:T}=h;if(m==="*"){let C=l[d]||"";s=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const P=l[d];return T&&!P?u[m]=void 0:u[m]=(P||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function dE(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),hx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function fE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function hE(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?es(e):e;return{pathname:n?n.startsWith("/")?n:mE(n,t):t,search:yE(r),hash:vE(o)}}function mE(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Nu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pE(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function bh(e,t){let n=pE(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Sh(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=es(e):(o=aa({},e),bt(!o.pathname||!o.pathname.includes("?"),Nu("?","pathname","search",o)),bt(!o.pathname||!o.pathname.includes("#"),Nu("#","pathname","hash",o)),bt(!o.search||!o.search.includes("#"),Nu("#","search","hash",o)));let i=e===""||o.pathname==="",s=i?"/":o.pathname,l;if(s==null)l=n;else{let d=t.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),d-=1;o.pathname=m.join("/")}l=d>=0?t[d]:"/"}let c=hE(o,l),u=s&&s!=="/"&&s.endsWith("/"),h=(i||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const io=e=>e.join("/").replace(/\/\/+/g,"/"),gE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gx=["post","put","patch","delete"];new Set(gx);const wE=["get",...gx];new Set(wE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},la.apply(this,arguments)}const Th=p.createContext(null),bE=p.createContext(null),mo=p.createContext(null),Ec=p.createContext(null),po=p.createContext({outlet:null,matches:[],isDataRoute:!1}),yx=p.createContext(null);function SE(e,t){let{relative:n}=t===void 0?{}:t;ts()||bt(!1);let{basename:r,navigator:o}=p.useContext(mo),{hash:i,pathname:s,search:l}=xx(e,{relative:n}),c=s;return r!=="/"&&(c=s==="/"?r:io([r,s])),o.createHref({pathname:c,search:l,hash:i})}function ts(){return p.useContext(Ec)!=null}function Jo(){return ts()||bt(!1),p.useContext(Ec).location}function vx(e){p.useContext(mo).static||p.useLayoutEffect(e)}function ns(){let{isDataRoute:e}=p.useContext(po);return e?LE():TE()}function TE(){ts()||bt(!1);let e=p.useContext(Th),{basename:t,future:n,navigator:r}=p.useContext(mo),{matches:o}=p.useContext(po),{pathname:i}=Jo(),s=JSON.stringify(bh(o,n.v7_relativeSplatPath)),l=p.useRef(!1);return vx(()=>{l.current=!0}),p.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=Sh(u,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:io([t,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[t,r,s,i,e])}function xx(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(mo),{matches:o}=p.useContext(po),{pathname:i}=Jo(),s=JSON.stringify(bh(o,r.v7_relativeSplatPath));return p.useMemo(()=>Sh(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function kE(e,t){return CE(e,t)}function CE(e,t,n,r){ts()||bt(!1);let{navigator:o}=p.useContext(mo),{matches:i}=p.useContext(po),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Jo(),h;if(t){var d;let k=typeof t=="string"?es(t):t;c==="/"||(d=k.pathname)!=null&&d.startsWith(c)||bt(!1),h=k}else h=u;let m=h.pathname||"/",T=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");T="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let P=JC(e,{pathname:T}),C=AE(P&&P.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:io([c,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:io([c,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return t&&C?p.createElement(Ec.Provider,{value:{location:la({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Xr.Pop}},C):C}function EE(){let e=DE(),t=xE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:o},n):null,i)}const NE=p.createElement(EE,null);class PE extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(po.Provider,{value:this.props.routeContext},p.createElement(yx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jE(e){let{routeContext:t,match:n,children:r}=e,o=p.useContext(Th);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(po.Provider,{value:t},r)}function AE(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,l=(o=n)==null?void 0:o.errors;if(l!=null){let h=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||bt(!1),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:m,errors:T}=n,P=d.route.loader&&m[d.route.id]===void 0&&(!T||T[d.route.id]===void 0);if(d.route.lazy||P){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((h,d,m)=>{let T,P=!1,C=null,k=null;n&&(T=l&&d.route.id?l[d.route.id]:void 0,C=d.route.errorElement||NE,c&&(u<0&&m===0?(FE("route-fallback",!1),P=!0,k=null):u===m&&(P=!0,k=d.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,m+1)),v=()=>{let w;return T?w=C:P?w=k:d.route.Component?w=p.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,p.createElement(jE,{match:d,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?p.createElement(PE,{location:n.location,revalidation:n.revalidation,component:C,error:T,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var wx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wx||{}),nc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nc||{});function RE(e){let t=p.useContext(Th);return t||bt(!1),t}function IE(e){let t=p.useContext(bE);return t||bt(!1),t}function ME(e){let t=p.useContext(po);return t||bt(!1),t}function bx(e){let t=ME(),n=t.matches[t.matches.length-1];return n.route.id||bt(!1),n.route.id}function DE(){var e;let t=p.useContext(yx),n=IE(nc.UseRouteError),r=bx(nc.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function LE(){let{router:e}=RE(wx.UseNavigateStable),t=bx(nc.UseNavigateStable),n=p.useRef(!1);return vx(()=>{n.current=!0}),p.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,la({fromRouteId:t},i)))},[e,t])}const ig={};function FE(e,t,n){!t&&!ig[e]&&(ig[e]=!0)}function $E(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Sx(e){let{to:t,replace:n,state:r,relative:o}=e;ts()||bt(!1);let{future:i,static:s}=p.useContext(mo),{matches:l}=p.useContext(po),{pathname:c}=Jo(),u=ns(),h=Sh(t,bh(l,i.v7_relativeSplatPath),c,o==="path"),d=JSON.stringify(h);return p.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:o}),[u,d,o,n,r]),null}function ui(e){bt(!1)}function OE(e){let{basename:t="/",children:n=null,location:r,navigationType:o=Xr.Pop,navigator:i,static:s=!1,future:l}=e;ts()&&bt(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:s,future:la({v7_relativeSplatPath:!1},l)}),[c,l,i,s]);typeof r=="string"&&(r=es(r));let{pathname:h="/",search:d="",hash:m="",state:T=null,key:P="default"}=r,C=p.useMemo(()=>{let k=wh(h,c);return k==null?null:{location:{pathname:k,search:d,hash:m,state:T,key:P},navigationType:o}},[c,h,d,m,T,P,o]);return C==null?null:p.createElement(mo.Provider,{value:u},p.createElement(Ec.Provider,{children:n,value:C}))}function VE(e){let{children:t,location:n}=e;return kE(Wd(t),n)}new Promise(()=>{});function Wd(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,o)=>{if(!p.isValidElement(r))return;let i=[...t,o];if(r.type===p.Fragment){n.push.apply(n,Wd(r.props.children,i));return}r.type!==ui&&bt(!1),!r.props.index||!r.props.children||bt(!1);let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Wd(r.props.children,i)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gd.apply(this,arguments)}function _E(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function UE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zE(e,t){return e.button===0&&(!t||t==="_self")&&!UE(e)}const BE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WE="6";try{window.__reactRouterVersion=WE}catch{}const GE="startTransition",sg=Pf[GE];function HE(e){let{basename:t,children:n,future:r,window:o}=e,i=p.useRef();i.current==null&&(i.current=qC({window:o,v5Compat:!0}));let s=i.current,[l,c]=p.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},h=p.useCallback(d=>{u&&sg?sg(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>s.listen(h),[s,h]),p.useEffect(()=>$E(r),[r]),p.createElement(OE,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}const KE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hd=p.forwardRef(function(t,n){let{onClick:r,relative:o,reloadDocument:i,replace:s,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=t,m=_E(t,BE),{basename:T}=p.useContext(mo),P,C=!1;if(typeof u=="string"&&YE.test(u)&&(P=u,KE))try{let w=new URL(window.location.href),R=u.startsWith("//")?new URL(w.protocol+u):new URL(u),M=wh(R.pathname,T);R.origin===w.origin&&M!=null?u=M+R.search+R.hash:C=!0}catch{}let k=SE(u,{relative:o}),x=XE(u,{replace:s,state:l,target:c,preventScrollReset:h,relative:o,viewTransition:d});function v(w){r&&r(w),w.defaultPrevented||x(w)}return p.createElement("a",Gd({},m,{href:P||k,onClick:C||i?r:v,ref:n,target:c}))});var ag;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ag||(ag={}));var lg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lg||(lg={}));function XE(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:s,viewTransition:l}=t===void 0?{}:t,c=ns(),u=Jo(),h=xx(e,{relative:s});return p.useCallback(d=>{if(zE(d,n)){d.preventDefault();let m=r!==void 0?r:tc(u)===tc(h);c(e,{replace:m,state:o,preventScrollReset:i,relative:s,viewTransition:l})}},[u,c,h,r,o,n,e,i,s,l])}const qE="https://storymaker.nocodelauncher.com/api";class QE{constructor(){$r(this,"baseURL");$r(this,"token",null);this.baseURL=qE}setToken(t){this.token=t}async request(t,n={}){const r=`${this.baseURL}${t}`,o={"Content-Type":"application/json",...n.headers};this.token&&(o.Authorization=`Bearer ${this.token}`);const i={...n,headers:o};try{const s=await fetch(r,i),l=await s.json();if(!s.ok){const c=l.error||`HTTP ${s.status}`,u=new Error(c);throw u.status=s.status,u.response=l,u}return l}catch(s){throw s instanceof Error?s.message.includes("fetch")||s.message.includes("Failed to fetch")?new Error("Network error"):s:new Error("Network error")}}async register(t,n){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:n})})}async login(t,n){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:n})})}async refreshToken(t){return this.request("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:t})})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getProfile(){return this.request("/auth/profile")}async getStories(){try{return{success:!0,data:{stories:(await window.storyDB.getStories()).map(r=>({id:r._id||"",title:r.title,content:r.content,summary:r.summary,genre:r.genre,duration:r.duration,status:r.status,createdAt:r.createdAt||new Date().toISOString(),updatedAt:r.updatedAt||new Date().toISOString(),videoStyle:r.videoStyle,language:r.language,additionalContext:r.additionalContext,videoToneEmotions:r.videoToneEmotions,isDraft:r.isDraft,currentStep:r.currentStep,maxStepReached:r.maxStepReached,mainPrompt:r.mainPrompt,storySummary:r.storySummary,chapterSummaries:r.chapterSummaries,youtubeTitle:r.youtubeTitle,youtubeDescription:r.youtubeDescription,youtubeTags:r.youtubeTags,stockFootageTerms:r.stockFootageTerms,chapters:r.chapters,currentChapter:r.currentChapter,totalChapters:r.totalChapters,selectedVoiceId:r.selectedVoiceId,audioChunks:r.audioChunks,totalAudioDuration:r.totalAudioDuration,transcriptInfo:r.transcriptInfo,sentenceTranscripts:r.sentenceTranscripts,stockMediaInfo:r.stockMediaInfo,videoAssets:r.videoAssets}))}}}catch(t){return console.error("Error getting stories from local database:",t),{success:!1,data:{stories:[]}}}}async getStory(t){try{console.log(" DEBUG: Attempting to get story with ID:",t);const n=await window.storyDB.getStory(t);if(console.log(" DEBUG: Local story result:",n),n)return{success:!0,data:{story:{id:n._id||"",title:n.title,content:n.content,summary:n.summary,genre:n.genre,duration:n.duration,status:n.status,createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),videoStyle:n.videoStyle,language:n.language,additionalContext:n.additionalContext,videoToneEmotions:n.videoToneEmotions,isDraft:n.isDraft,currentStep:n.currentStep,maxStepReached:n.maxStepReached,mainPrompt:n.mainPrompt,storySummary:n.storySummary,chapterSummaries:n.chapterSummaries,youtubeTitle:n.youtubeTitle,youtubeDescription:n.youtubeDescription,youtubeTags:n.youtubeTags,stockFootageTerms:n.stockFootageTerms,chapters:n.chapters,currentChapter:n.currentChapter,totalChapters:n.totalChapters,selectedVoiceId:n.selectedVoiceId,audioChunks:n.audioChunks,totalAudioDuration:n.totalAudioDuration,transcriptInfo:n.transcriptInfo,sentenceTranscripts:n.sentenceTranscripts,stockMediaInfo:n.stockMediaInfo,videoAssets:n.videoAssets}}};throw new Error("Story not found")}catch(n){throw console.error("Error getting story from local database:",n),n}}async createStory(t){try{const n=await window.storyDB.createStory({title:t.title,content:t.content,summary:t.summary,genre:t.genre,duration:t.duration,status:t.isDraft?"draft":"completed",videoStyle:t.videoStyle,language:t.language,additionalContext:t.additionalContext,videoToneEmotions:t.videoToneEmotions,isDraft:t.isDraft,currentStep:t.currentStep,maxStepReached:t.maxStepReached,mainPrompt:t.mainPrompt,storySummary:t.storySummary,chapterSummaries:t.chapterSummaries,youtubeTitle:t.youtubeTitle,youtubeDescription:t.youtubeDescription,youtubeTags:t.youtubeTags,stockFootageTerms:t.stockFootageTerms,chapters:t.chapters,currentChapter:t.currentChapter,totalChapters:t.totalChapters,selectedVoiceId:t.selectedVoiceId,audioChunks:t.audioChunks,totalAudioDuration:t.totalAudioDuration,transcriptInfo:t.transcriptInfo,sentenceTranscripts:t.sentenceTranscripts,stockMediaInfo:t.stockMediaInfo,videoAssets:t.videoAssets});return{success:!0,data:{story:{id:n._id||"",title:n.title,content:n.content,summary:n.summary,genre:n.genre,duration:n.duration,status:n.status,createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),videoStyle:n.videoStyle,language:n.language,additionalContext:n.additionalContext,videoToneEmotions:n.videoToneEmotions,isDraft:n.isDraft,currentStep:n.currentStep,maxStepReached:n.maxStepReached,mainPrompt:n.mainPrompt,storySummary:n.storySummary,chapterSummaries:n.chapterSummaries,youtubeTitle:n.youtubeTitle,youtubeDescription:n.youtubeDescription,youtubeTags:n.youtubeTags,stockFootageTerms:n.stockFootageTerms,chapters:n.chapters,currentChapter:n.currentChapter,totalChapters:n.totalChapters,selectedVoiceId:n.selectedVoiceId,audioChunks:n.audioChunks,totalAudioDuration:n.totalAudioDuration,transcriptInfo:n.transcriptInfo,sentenceTranscripts:n.sentenceTranscripts,stockMediaInfo:n.stockMediaInfo,videoAssets:n.videoAssets}}}}catch(n){throw console.error("Error creating story in local database:",n),n}}async updateStory(t,n){try{const r=await window.storyDB.updateStory(t,n);return{success:!0,data:{story:{id:r._id||"",title:r.title,content:r.content,summary:r.summary,genre:r.genre,duration:r.duration,status:r.status,createdAt:r.createdAt||new Date().toISOString(),updatedAt:r.updatedAt||new Date().toISOString(),videoStyle:r.videoStyle,language:r.language,additionalContext:r.additionalContext,videoToneEmotions:r.videoToneEmotions,isDraft:r.isDraft,currentStep:r.currentStep,maxStepReached:r.maxStepReached,mainPrompt:r.mainPrompt,storySummary:r.storySummary,chapterSummaries:r.chapterSummaries,youtubeTitle:r.youtubeTitle,youtubeDescription:r.youtubeDescription,youtubeTags:r.youtubeTags,stockFootageTerms:r.stockFootageTerms,chapters:r.chapters,currentChapter:r.currentChapter,totalChapters:r.totalChapters,selectedVoiceId:r.selectedVoiceId,audioChunks:r.audioChunks,totalAudioDuration:r.totalAudioDuration,transcriptInfo:r.transcriptInfo,sentenceTranscripts:r.sentenceTranscripts,stockMediaInfo:r.stockMediaInfo,videoAssets:r.videoAssets}}}}catch(r){throw console.error("Error updating story in local database:",r),r}}async deleteStory(t){try{return await window.storyDB.deleteStory(t),{success:!0}}catch(n){return console.error("Error deleting story from local database:",n),{success:!1}}}async generateStoryStructure(t,n,r,o){var i;try{const s=`${this.baseURL}/stories/generate-structure`,l={"Content-Type":"application/json"};this.token&&(l.Authorization=`Bearer ${this.token}`);const c=await fetch(s,{method:"POST",headers:l,body:JSON.stringify(t)});if(!c.ok){const m=await c.json();throw new Error(m.error||`HTTP ${c.status}`)}const u=(i=c.body)==null?void 0:i.getReader();if(!u)throw new Error("No response body");const h=new TextDecoder;let d="";for(;;){const{done:m,value:T}=await u.read();if(m)break;d+=h.decode(T,{stream:!0});const P=d.split(`
`);d=P.pop()||"";for(const C of P)if(C.trim())try{const k=JSON.parse(C);n(k),k.type==="complete"?r({storySummary:k.storySummary,chapterSummaries:k.chapterSummaries,youtubeTitle:k.youtubeTitle,youtubeDescription:k.youtubeDescription,youtubeTags:k.youtubeTags,stockFootageTerms:k.stockFootageTerms}):k.type==="error"&&o(new Error(k.error))}catch(k){console.error("Error parsing chunk:",k)}}}catch(s){console.error("Error in generateStoryStructure:",s),o(s)}}async generateChapterContent(t,n,r,o){var i;try{const s=`${this.baseURL}/stories/generate-chapter`,l={"Content-Type":"application/json"};this.token&&(l.Authorization=`Bearer ${this.token}`);const c=await fetch(s,{method:"POST",headers:l,body:JSON.stringify(t)});if(!c.ok){const m=await c.json();throw new Error(m.error||`HTTP ${c.status}`)}const u=(i=c.body)==null?void 0:i.getReader();if(!u)throw new Error("No response body");const h=new TextDecoder;let d="";for(;;){const{done:m,value:T}=await u.read();if(m)break;d+=h.decode(T,{stream:!0});const P=d.split(`
`);d=P.pop()||"";for(const C of P)if(C.trim())try{const k=JSON.parse(C);n(k),k.type==="complete"?r({chapterContent:k.chapterContent,chapterNumber:k.chapterNumber}):k.type==="error"&&o(new Error(k.error))}catch(k){console.error("Error parsing chunk:",k)}}}catch(s){console.error("Error in generateChapterContent:",s),o(s)}}async generateTTS(t,n){try{const r=`${this.baseURL}/stories/tts`,o={"Content-Type":"application/json"};this.token&&(o.Authorization=`Bearer ${this.token}`);const i=await fetch(r,{method:"POST",headers:o,body:JSON.stringify({voice_id:t,text:n})});if(!i.ok){const l=await i.json();throw new Error(l.error||`HTTP ${i.status}`)}return await i.blob()}catch(r){throw console.error("Error in generateTTS:",r),r}}async generateTranscript(t,n,r){try{const o=`${this.baseURL}/transcript/generate`,i=new FormData;i.append("audio",t),i.append("storyId",n),i.append("mediaId",r);const s={};this.token&&(s.Authorization=`Bearer ${this.token}`);const l=await fetch(o,{method:"POST",headers:s,body:i});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();if(!c.success)throw new Error(c.error||"Failed to generate transcript");return c.data}catch(o){throw console.error("Error in generateTranscript:",o),o}}async checkTranscriptHealth(){try{const t=`${this.baseURL}/transcript/health`,n={};this.token&&(n.Authorization=`Bearer ${this.token}`);const r=await fetch(t,{method:"GET",headers:n});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(t){throw console.error("Error checking transcript health:",t),t}}async fetchStockMedia(t,n){try{const r=`${this.baseURL}/media/fetch-stock-media`,o={"Content-Type":"application/json"};this.token&&(o.Authorization=`Bearer ${this.token}`);const i=await fetch(r,{method:"POST",headers:o,body:JSON.stringify({segments:t,storyId:n})});if(!i.ok){const l=await i.json();throw new Error(l.error||`HTTP ${i.status}`)}const s=await i.json();if(!s.success)throw new Error(s.error||"Failed to fetch stock media");return s.data}catch(r){throw console.error("Error in fetchStockMedia:",r),r}}async checkMediaHealth(){try{const t=`${this.baseURL}/media/health`,n={};this.token&&(n.Authorization=`Bearer ${this.token}`);const r=await fetch(t,{method:"GET",headers:n});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(t){throw console.error("Error checking media health:",t),t}}}const vt=new QE,ko=Object.defineProperty({__proto__:null,apiService:vt},Symbol.toStringTag,{value:"Module"});class cg{static parseBackendError(t){var n,r;return typeof t=="string"?t:(r=(n=t==null?void 0:t.response)==null?void 0:n.data)!=null&&r.error?t.response.data.error:t!=null&&t.message?t.message:"An unexpected error occurred"}static validateEmail(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"Please enter a valid email address":"Email is required"}static validatePassword(t){return t?t.length<6?"Password must be at least 6 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t)?null:"Password must contain at least one uppercase letter, one lowercase letter, and one number":"Password is required"}static validatePasswordConfirmation(t,n){return n?t!==n?"Passwords do not match":null:"Please confirm your password"}static getErrorMessage(t){return{"User with this email already exists":"An account with this email already exists. Please try logging in instead.","Invalid email or password":"Invalid email or password. Please check your credentials and try again.","Account is deactivated":"Your account has been deactivated. Please contact support.","Too many requests from this IP, please try again later.":"Too many login attempts. Please wait a few minutes before trying again.","Network error":"Unable to connect to the server. Please check your internet connection.","Valid email is required":"Please enter a valid email address.","Password must be at least 6 characters":"Password must be at least 6 characters long.","Password must contain at least one uppercase letter, one lowercase letter, and one number":"Password must contain at least one uppercase letter, one lowercase letter, and one number."}[t]||t}static isNetworkError(t){return t.includes("Network error")||t.includes("fetch")||t.includes("Failed to fetch")||t.includes("ECONNREFUSED")}static isValidationError(t){return t.includes("Valid email")||t.includes("Password must")||t.includes("required")}static isRateLimitError(t){return t.includes("Too many requests")||t.includes("rate limit")}}const kh=()=>(window==null?void 0:window.electronAPI)!==void 0,ca=()=>{var e;return kh()&&((e=window.electronAPI)==null?void 0:e.secureStorage)!==void 0},ZE=()=>{console.log(" Electron Environment Check:"),console.log("  - window.electronAPI:",window.electronAPI),console.log("  - isElectron():",kh()),console.log("  - isElectronAPIAvailable():",ca()),window.electronAPI&&(console.log("  - Available APIs:",Object.keys(window.electronAPI)),window.electronAPI.secureStorage&&console.log("  - Secure Storage APIs:",Object.keys(window.electronAPI.secureStorage))),console.log("  - User Agent:",navigator.userAgent),console.log("  - Platform:",navigator.platform)},JE=async()=>{if(console.log(" Testing Electron API..."),!kh()){console.log(" Electron API not available");return}try{if(console.log(" Platform:",window.electronAPI.platform),console.log(" Versions:",window.electronAPI.versions),window.electronAPI.secureStorage){const e="test-encryption-data";console.log(" Testing secure storage...");const t=await window.electronAPI.secureStorage.encrypt(e);console.log(" Encryption successful");const n=await window.electronAPI.secureStorage.decrypt(t);console.log(" Decryption successful:",n===e)}else console.log(" Secure storage not available");window.electronAPI.app&&console.log(" App controls available"),window.electronAPI.network&&console.log(" Network status available:",window.electronAPI.network.isOnline())}catch(e){console.error(" Electron API test failed:",e)}};class eN{constructor(){$r(this,"STORAGE_KEY","storymaker_auth_encrypted")}async storeAuth(t){try{const n=JSON.stringify(t);if(ca()){const r=await window.electronAPI.secureStorage.encrypt(n);localStorage.setItem(this.STORAGE_KEY,r)}else console.warn("Electron API not available, using regular localStorage"),localStorage.setItem(this.STORAGE_KEY,n)}catch(n){console.error("Failed to store auth data securely:",n);try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch{throw new Error("Failed to store authentication data")}}}async getAuth(){try{const t=localStorage.getItem(this.STORAGE_KEY);if(!t)return null;if(ca()){const n=await window.electronAPI.secureStorage.decrypt(t),r=JSON.parse(n);return Date.now()>r.expiresAt?(await this.clearAuth(),null):r}else{console.warn("Electron API not available, using regular localStorage");const n=JSON.parse(t);return Date.now()>n.expiresAt?(await this.clearAuth(),null):n}}catch(t){return console.error("Failed to retrieve auth data:",t),await this.clearAuth(),null}}async clearAuth(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Failed to clear auth data:",t)}}async isAuthenticated(){return await this.getAuth()!==null}async getAccessToken(){const t=await this.getAuth();return(t==null?void 0:t.accessToken)||null}async getRefreshToken(){const t=await this.getAuth();return(t==null?void 0:t.refreshToken)||null}async getUser(){const t=await this.getAuth();return(t==null?void 0:t.user)||null}async updateAccessToken(t,n){try{const r=await this.getAuth();if(!r)throw new Error("No stored authentication data");const o={...r,accessToken:t,expiresAt:Date.now()+n*1e3};await this.storeAuth(o)}catch(r){throw console.error("Failed to update access token:",r),r}}}const Co=new eN;class tN{constructor(){$r(this,"STORAGE_KEY","storymaker_auth_encrypted_v2");$r(this,"ENCRYPTION_KEY","storymaker-auth-key-2024")}async encrypt(t){try{if(window.crypto&&window.crypto.subtle){const n=new TextEncoder,r=await window.crypto.subtle.importKey("raw",n.encode(this.ENCRYPTION_KEY),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),o=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n.encode("storymaker-salt"),iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!0,["encrypt"]),i=window.crypto.getRandomValues(new Uint8Array(12)),s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,n.encode(t)),l=new Uint8Array(s),c=new Uint8Array(i.length+l.length);return c.set(i),c.set(l,i.length),btoa(String.fromCharCode(...c))}else return btoa(unescape(encodeURIComponent(t)))}catch(n){return console.error("Encryption failed:",n),btoa(unescape(encodeURIComponent(t)))}}async decrypt(t){try{if(window.crypto&&window.crypto.subtle){const n=new Uint8Array(atob(t).split("").map(u=>u.charCodeAt(0))),r=n.slice(0,12),o=n.slice(12),i=new TextEncoder,s=await window.crypto.subtle.importKey("raw",i.encode(this.ENCRYPTION_KEY),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),l=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:i.encode("storymaker-salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["decrypt"]),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},l,o);return new TextDecoder().decode(c)}else return decodeURIComponent(escape(atob(t)))}catch(n){return console.error("Decryption failed:",n),decodeURIComponent(escape(atob(t)))}}async storeAuth(t){try{const n=JSON.stringify(t),r=await this.encrypt(n);localStorage.setItem(this.STORAGE_KEY,r),console.log(" Auth data stored using alternative encryption")}catch(n){throw console.error("Failed to store auth data:",n),new Error("Failed to store authentication data")}}async getAuth(){try{const t=localStorage.getItem(this.STORAGE_KEY);if(!t)return null;const n=await this.decrypt(t),r=JSON.parse(n);return Date.now()>r.expiresAt?(await this.clearAuth(),null):r}catch(t){return console.error("Failed to retrieve auth data:",t),await this.clearAuth(),null}}async clearAuth(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Failed to clear auth data:",t)}}async isAuthenticated(){return await this.getAuth()!==null}async getAccessToken(){const t=await this.getAuth();return(t==null?void 0:t.accessToken)||null}async getRefreshToken(){const t=await this.getAuth();return(t==null?void 0:t.refreshToken)||null}async getUser(){const t=await this.getAuth();return(t==null?void 0:t.user)||null}async updateAccessToken(t,n){try{const r=await this.getAuth();if(!r)throw new Error("No stored authentication data");const o={...r,accessToken:t,expiresAt:Date.now()+n*1e3};await this.storeAuth(o)}catch(r){throw console.error("Failed to update access token:",r),r}}}const bs=new tN;class nN{constructor(){$r(this,"provider",null);$r(this,"providerName",null);this.initializeProvider()}initializeProvider(){ca()?(this.provider=Co,this.providerName="Electron Secure Storage",console.log(" Using Electron Secure Storage")):(this.provider=bs,this.providerName="Alternative Storage (Web Crypto)",console.log(" Using Alternative Storage with Web Crypto API"))}reinitialize(){this.initializeProvider()}getProviderName(){return this.providerName||"Unknown"}isUsingElectron(){return this.provider===Co}async storeAuth(t){try{if(!this.provider)throw new Error("No storage provider available");await this.provider.storeAuth(t),console.log(` Auth data stored using ${this.providerName}`)}catch(n){if(console.error(` Failed to store auth data with ${this.providerName}:`,n),this.provider===Co)console.log(" Falling back to alternative storage..."),this.provider=bs,this.providerName="Alternative Storage (Fallback)",await this.provider.storeAuth(t),console.log(" Auth data stored using fallback storage");else throw n}}async getAuth(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getAuth()}catch(t){return console.error(` Failed to get auth data with ${this.providerName}:`,t),this.provider===Co?(console.log(" Falling back to alternative storage..."),this.provider=bs,this.providerName="Alternative Storage (Fallback)",await this.provider.getAuth()):null}}async clearAuth(){try{if(!this.provider)throw new Error("No storage provider available");await this.provider.clearAuth()}catch(t){console.error(` Failed to clear auth data with ${this.providerName}:`,t)}}async isAuthenticated(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.isAuthenticated()}catch(t){return console.error(` Failed to check authentication with ${this.providerName}:`,t),!1}}async getAccessToken(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getAccessToken()}catch(t){return console.error(` Failed to get access token with ${this.providerName}:`,t),null}}async getRefreshToken(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getRefreshToken()}catch(t){return console.error(` Failed to get refresh token with ${this.providerName}:`,t),null}}async getUser(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getUser()}catch(t){return console.error(` Failed to get user data with ${this.providerName}:`,t),null}}async updateAccessToken(t,n){try{if(!this.provider)throw new Error("No storage provider available");await this.provider.updateAccessToken(t,n)}catch(r){throw console.error(` Failed to update access token with ${this.providerName}:`,r),r}}async migrateToElectron(){if(this.provider===Co)return console.log(" Already using Electron storage"),!0;if(!ca())return console.log(" Electron API not available for migration"),!1;try{const t=await bs.getAuth();return t?(await Co.storeAuth(t),await bs.clearAuth(),this.provider=Co,this.providerName="Electron Secure Storage (Migrated)",console.log(" Successfully migrated to Electron storage"),!0):(console.log(" No data to migrate"),!0)}catch(t){return console.error(" Migration failed:",t),!1}}async healthCheck(){try{const t={accessToken:"test-token",refreshToken:"test-refresh",user:{id:1,email:"test@example.com",subscriptionStatus:"free"},expiresAt:Date.now()+36e5};if(!this.provider)throw new Error("No storage provider available");await this.provider.storeAuth(t);const n=await this.provider.getAuth();return await this.provider.clearAuth(),{provider:this.providerName||"Unknown",isElectron:this.isUsingElectron(),isWorking:n!==null&&n.accessToken===t.accessToken}}catch(t){return{provider:this.providerName||"Unknown",isElectron:this.isUsingElectron(),isWorking:!1,error:t instanceof Error?t.message:"Unknown error"}}}}const Hn=new nN;var rN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iN=(e,t)=>{const n=p.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,children:l,...c},u)=>p.createElement("svg",{ref:u,...rN,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:`lucide lucide-${oN(e)}`,...c},[...t.map(([h,d])=>p.createElement(h,d)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var Ce=iN;const Tx=Ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Kd=Ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Yn=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),kl=Ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),sN=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),aN=Ce("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),qr=Ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),lN=Ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Hi=Ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),cN=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),kx=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Cx=Ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ex=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yd=Ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),uN=Ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Nx=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),dN=Ce("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),fN=Ce("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Dt=Ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Px=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),hN=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),mN=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),pN=Ce("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),gN=Ce("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),ug=Ce("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),yN=Ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),jx=Ce("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),dg=Ce("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Lo=Ce("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ua=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Li=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),vN=Ce("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Ax=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fo=Ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Rx=Ce("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),xN=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Pu=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),wN=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),fg=Ce("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),bN=Ce("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Ix=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),SN=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Xd=Ce("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),zo=Ce("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Mx=Ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ti=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Dx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Dx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Lx(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Dx(e))&&(r&&(r+=" "),r+=t);return r}function TN(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=Fx(t))&&(r&&(r+=" "),r+=n);return r}function Fx(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=Fx(e[r]))&&(n&&(n+=" "),n+=t);return n}var Ch="-";function kN(e){var t=EN(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,o=r===void 0?{}:r;function i(l){var c=l.split(Ch);return c[0]===""&&c.length!==1&&c.shift(),$x(c,t)||CN(l)}function s(l,c){var u=n[l]||[];return c&&o[l]?[].concat(u,o[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function $x(e,t){var s;if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),o=r?$x(e.slice(1),r):void 0;if(o)return o;if(t.validators.length!==0){var i=e.join(Ch);return(s=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:s.classGroupId}}var hg=/^\[(.+)\]$/;function CN(e){if(hg.test(e)){var t=hg.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function EN(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},o=PN(Object.entries(e.classGroups),n);return o.forEach(function(i){var s=i[0],l=i[1];qd(l,r,s,t)}),r}function qd(e,t,n,r){e.forEach(function(o){if(typeof o=="string"){var i=o===""?t:mg(t,o);i.classGroupId=n;return}if(typeof o=="function"){if(NN(o)){qd(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(function(s){var l=s[0],c=s[1];qd(c,mg(t,l),n,r)})})}function mg(e,t){var n=e;return t.split(Ch).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function NN(e){return e.isThemeGetter}function PN(e,t){return t?e.map(function(n){var r=n[0],o=n[1],i=o.map(function(s){return typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):s});return[r,i]}):e}function jN(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function o(i,s){n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(s){var l=n.get(s);if(l!==void 0)return l;if((l=r.get(s))!==void 0)return o(s,l),l},set:function(s,l){n.has(s)?n.set(s,l):o(s,l)}}}var Ox="!";function AN(e){var t=e.separator||":",n=t.length===1,r=t[0],o=t.length;return function(s){for(var l=[],c=0,u=0,h,d=0;d<s.length;d++){var m=s[d];if(c===0){if(m===r&&(n||s.slice(d,d+o)===t)){l.push(s.slice(u,d)),u=d+o;continue}if(m==="/"){h=d;continue}}m==="["?c++:m==="]"&&c--}var T=l.length===0?s:s.substring(u),P=T.startsWith(Ox),C=P?T.substring(1):T,k=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:P,baseClassName:C,maybePostfixModifierPosition:k}}}function RN(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var o=r[0]==="[";o?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function IN(e){return{cache:jN(e.cacheSize),splitModifiers:AN(e),...kN(e)}}var MN=/\s+/;function DN(e,t){var n=t.splitModifiers,r=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(MN).map(function(s){var l=n(s),c=l.modifiers,u=l.hasImportantModifier,h=l.baseClassName,d=l.maybePostfixModifierPosition,m=r(d?h.substring(0,d):h),T=!!d;if(!m){if(!d)return{isTailwindClass:!1,originalClassName:s};if(m=r(h),!m)return{isTailwindClass:!1,originalClassName:s};T=!1}var P=RN(c).join(":"),C=u?P+Ox:P;return{isTailwindClass:!0,modifierId:C,classGroupId:m,originalClassName:s,hasPostfixModifier:T}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var l=s.modifierId,c=s.classGroupId,u=s.hasPostfixModifier,h=l+c;return i.has(h)?!1:(i.add(h),o(c,u).forEach(function(d){return i.add(l+d)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function LN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,i,s=l;function l(u){var h=t[0],d=t.slice(1),m=d.reduce(function(T,P){return P(T)},h());return r=IN(m),o=r.cache.get,i=r.cache.set,s=c,c(u)}function c(u){var h=o(u);if(h)return h;var d=DN(u,r);return i(u,d),d}return function(){return s(TN.apply(null,arguments))}}function et(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var Vx=/^\[(?:([a-z-]+):)?(.+)\]$/i,FN=/^\d+\/\d+$/,$N=new Set(["px","full","screen"]),ON=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_N=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Kn(e){return $o(e)||$N.has(e)||FN.test(e)||Qd(e)}function Qd(e){return ei(e,"length",HN)}function UN(e){return ei(e,"size",_x)}function zN(e){return ei(e,"position",_x)}function BN(e){return ei(e,"url",KN)}function nl(e){return ei(e,"number",$o)}function $o(e){return!Number.isNaN(Number(e))}function WN(e){return e.endsWith("%")&&$o(e.slice(0,-1))}function Ss(e){return pg(e)||ei(e,"number",pg)}function Me(e){return Vx.test(e)}function Ts(){return!0}function Vr(e){return ON.test(e)}function GN(e){return ei(e,"",YN)}function ei(e,t,n){var r=Vx.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function HN(e){return VN.test(e)}function _x(){return!1}function KN(e){return e.startsWith("url(")}function pg(e){return Number.isInteger(Number(e))}function YN(e){return _N.test(e)}function XN(){var e=et("colors"),t=et("spacing"),n=et("blur"),r=et("brightness"),o=et("borderColor"),i=et("borderRadius"),s=et("borderSpacing"),l=et("borderWidth"),c=et("contrast"),u=et("grayscale"),h=et("hueRotate"),d=et("invert"),m=et("gap"),T=et("gradientColorStops"),P=et("gradientColorStopPositions"),C=et("inset"),k=et("margin"),x=et("opacity"),v=et("padding"),w=et("saturate"),R=et("scale"),M=et("sepia"),z=et("skew"),U=et("space"),F=et("translate"),se=function(){return["auto","contain","none"]},J=function(){return["auto","hidden","clip","visible","scroll"]},ve=function(){return["auto",Me,t]},ne=function(){return[Me,t]},Ae=function(){return["",Kn]},oe=function(){return["auto",$o,Me]},gt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},N=function(){return["solid","dashed","dotted","double","none"]},Te=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},X=function(){return["start","end","center","between","around","evenly","stretch"]},ge=function(){return["","0",Me]},me=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},je=function(){return[$o,nl]},Ue=function(){return[$o,Me]};return{cacheSize:500,theme:{colors:[Ts],spacing:[Kn],blur:["none","",Vr,Me],brightness:je(),borderColor:[e],borderRadius:["none","","full",Vr,Me],borderSpacing:ne(),borderWidth:Ae(),contrast:je(),grayscale:ge(),hueRotate:Ue(),invert:ge(),gap:ne(),gradientColorStops:[e],gradientColorStopPositions:[WN,Qd],inset:ve(),margin:ve(),opacity:je(),padding:ne(),saturate:je(),scale:je(),sepia:ge(),skew:Ue(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[Vr]}],"break-after":[{"break-after":me()}],"break-before":[{"break-before":me()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(gt(),[Me])}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:se()}],"overscroll-x":[{"overscroll-x":se()}],"overscroll-y":[{"overscroll-y":se()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ss]}],basis:[{basis:ve()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:ge()}],shrink:[{shrink:ge()}],order:[{order:["first","last","none",Ss]}],"grid-cols":[{"grid-cols":[Ts]}],"col-start-end":[{col:["auto",{span:["full",Ss]},Me]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[Ts]}],"row-start-end":[{row:["auto",{span:[Ss]},Me]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(X())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(X(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(X(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Me,t]}],"min-w":[{"min-w":["min","max","fit",Me,Kn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Vr]},Vr,Me]}],h:[{h:[Me,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Me,Kn]}],"max-h":[{"max-h":[Me,t,"min","max","fit"]}],"font-size":[{text:["base",Vr,Qd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nl]}],"font-family":[{font:[Ts]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",$o,nl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Me,Kn]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(N(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Kn]}],"underline-offset":[{"underline-offset":["auto",Me,Kn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(gt(),[zN])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BN]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[P]}],"gradient-via-pos":[{via:[P]}],"gradient-to-pos":[{to:[P]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(N(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:N()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(N())}],"outline-offset":[{"outline-offset":[Me,Kn]}],"outline-w":[{outline:[Kn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Kn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vr,GN]}],"shadow-color":[{shadow:[Ts]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":Te()}],"bg-blend":[{"bg-blend":Te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vr,Me]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:Ue()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:Ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Ss,Me]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kn,nl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var qN=LN(XN);function St(...e){return qN(Lx(e))}const Ux=p.createContext(void 0),rs=()=>{const e=p.useContext(Ux);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},QN=({children:e})=>{const[t,n]=p.useState([]),r=p.useCallback(i=>{const s=Math.random().toString(36).substr(2,9),l={...i,id:s};n(u=>[...u,l]);const c=i.duration||5e3;setTimeout(()=>{o(s)},c)},[]),o=p.useCallback(i=>{n(s=>s.filter(l=>l.id!==i))},[]);return a.jsxs(Ux.Provider,{value:{toasts:t,addToast:r,removeToast:o},children:[e,a.jsx(ZN,{})]})},ZN=()=>{const{toasts:e,removeToast:t}=rs(),n=o=>{switch(o){case"success":return a.jsx(Hi,{className:"h-5 w-5 text-green-500"});case"error":return a.jsx(Mx,{className:"h-5 w-5 text-red-500"});case"warning":return a.jsx(Tx,{className:"h-5 w-5 text-yellow-500"});case"info":return a.jsx(Nx,{className:"h-5 w-5 text-blue-500"})}},r=o=>{switch(o){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}};return a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(o=>a.jsxs("div",{className:St("flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-sm animate-in slide-in-from-right-full duration-300",r(o.type)),children:[n(o.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:o.title}),o.message&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.message})]}),a.jsx("button",{onClick:()=>t(o.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Ti,{className:"h-4 w-4"})})]},o.id))})},zx=p.createContext(void 0),Nc=()=>{const e=p.useContext(zx);if(!e)throw new Error("useAuthContext must be used within an AuthProvider");return e},JN=({children:e})=>{const[t,n]=p.useState(!1),[r,o]=p.useState(null),[i,s]=p.useState(!0),[l,c]=p.useState(null),{addToast:u}=rs();p.useEffect(()=>{ZE(),JE(),h()},[]);const h=async()=>{try{if(s(!0),!await Hn.isAuthenticated()){s(!1);return}const x=await Hn.getUser(),v=await Hn.getAccessToken();if(!x||!v){await Hn.clearAuth(),s(!1);return}vt.setToken(v);try{const w=await vt.getProfile();o(w.data.user),n(!0)}catch{await d()}}catch(k){console.error("Auth initialization failed:",k),await Hn.clearAuth()}finally{s(!1)}},d=async()=>{try{const k=await Hn.getRefreshToken();if(!k)throw new Error("No refresh token available");const x=await vt.refreshToken(k),v={accessToken:x.data.token,refreshToken:x.data.token,user:x.data.user,expiresAt:Date.now()+7*24*60*60*1e3};await Hn.storeAuth(v),vt.setToken(x.data.token),o(x.data.user),n(!0)}catch(k){console.error("Token refresh failed:",k),await Hn.clearAuth(),n(!1),o(null)}},m=async(k,x)=>{try{s(!0),c(null);const v=await vt.login(k,x),w={accessToken:v.data.token,refreshToken:v.data.token,user:v.data.user,expiresAt:Date.now()+7*24*60*60*1e3};await Hn.storeAuth(w),vt.setToken(v.data.token),console.log("Login successful:",v.data.user),o(v.data.user),n(!0),u({type:"success",title:"Welcome back!",message:`Successfully logged in as ${v.data.user.email}`})}catch(v){console.error("Login failed:",v);const w=cg.parseBackendError(v);throw c(w),u({type:"error",title:"Login Failed",message:w}),v}finally{s(!1)}},T=async(k,x)=>{try{s(!0),c(null);const v=await vt.register(k,x),w={accessToken:v.data.token,refreshToken:v.data.token,user:v.data.user,expiresAt:Date.now()+7*24*60*60*1e3};await Hn.storeAuth(w),vt.setToken(v.data.token),o(v.data.user),n(!0),u({type:"success",title:"Account Created!",message:`Welcome to StoryMaker AI, ${v.data.user.email}!`})}catch(v){console.error("Registration failed:",v);const w=cg.parseBackendError(v);throw c(w),u({type:"error",title:"Registration Failed",message:w}),v}finally{s(!1)}},P=async()=>{try{await vt.logout()}catch(k){console.error("Backend logout failed:",k)}finally{await Hn.clearAuth(),vt.setToken(null),n(!1),o(null),u({type:"info",title:"Logged Out",message:"You have been successfully logged out"})}},C=()=>{c(null)};return a.jsx(zx.Provider,{value:{isAuthenticated:t,user:r,loading:i,error:l,login:m,register:T,logout:P,clearError:C},children:e})},gg=({children:e})=>{const{isAuthenticated:t,loading:n}=Nc();return n?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(Sx,{to:"/login",replace:!0})},Eh=p.createContext({});function Nh(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ph=typeof window<"u",Bx=Ph?p.useLayoutEffect:p.useEffect,Pc=p.createContext(null);function jh(e,t){e.indexOf(t)===-1&&e.push(t)}function Ah(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ar=(e,t,n)=>n>t?t:n<e?e:n;let Rh=()=>{};const Rr={},Wx=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Gx(e){return typeof e=="object"&&e!==null}const Hx=e=>/^0[^.\s]+$/u.test(e);function Ih(e){let t;return()=>(t===void 0&&(t=e()),t)}const $n=e=>e,e2=(e,t)=>n=>t(e(n)),Ca=(...e)=>e.reduce(e2),da=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Mh{constructor(){this.subscriptions=[]}add(t){return jh(this.subscriptions,t),()=>Ah(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fr=e=>e*1e3,hr=e=>e/1e3;function Kx(e,t){return t?e*(1e3/t):0}const Yx=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,t2=1e-7,n2=12;function r2(e,t,n,r,o){let i,s,l=0;do s=t+(n-t)/2,i=Yx(s,r,o)-e,i>0?n=s:t=s;while(Math.abs(i)>t2&&++l<n2);return s}function Ea(e,t,n,r){if(e===t&&n===r)return $n;const o=i=>r2(i,0,1,e,n);return i=>i===0||i===1?i:Yx(o(i),t,r)}const Xx=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qx=e=>t=>1-e(1-t),Qx=Ea(.33,1.53,.69,.99),Dh=qx(Qx),Zx=Xx(Dh),Jx=e=>(e*=2)<1?.5*Dh(e):.5*(2-Math.pow(2,-10*(e-1))),Lh=e=>1-Math.sin(Math.acos(e)),ew=qx(Lh),tw=Xx(Lh),o2=Ea(.42,0,1,1),i2=Ea(0,0,.58,1),nw=Ea(.42,0,.58,1),s2=e=>Array.isArray(e)&&typeof e[0]!="number",rw=e=>Array.isArray(e)&&typeof e[0]=="number",a2={linear:$n,easeIn:o2,easeInOut:nw,easeOut:i2,circIn:Lh,circInOut:tw,circOut:ew,backIn:Dh,backInOut:Zx,backOut:Qx,anticipate:Jx},l2=e=>typeof e=="string",yg=e=>{if(rw(e)){Rh(e.length===4);const[t,n,r,o]=e;return Ea(t,n,r,o)}else if(l2(e))return a2[e];return e},rl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vg={value:null,addProjectionMetrics:null};function c2(e,t){let n=new Set,r=new Set,o=!1,i=!1;const s=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(d){s.has(d)&&(h.schedule(d),e()),c++,d(l)}const h={schedule:(d,m=!1,T=!1)=>{const C=T&&o?n:r;return m&&s.add(d),C.has(d)||C.add(d),d},cancel:d=>{r.delete(d),s.delete(d)},process:d=>{if(l=d,o){i=!0;return}o=!0,[n,r]=[r,n],n.forEach(u),t&&vg.value&&vg.value.frameloop[t].push(c),c=0,n.clear(),o=!1,i&&(i=!1,h.process(d))}};return h}const u2=40;function ow(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=rl.reduce((w,R)=>(w[R]=c2(i,t?R:void 0),w),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:d,preRender:m,render:T,postRender:P}=s,C=()=>{const w=Rr.useManualTiming?o.timestamp:performance.now();n=!1,Rr.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,u2),1)),o.timestamp=w,o.isProcessing=!0,l.process(o),c.process(o),u.process(o),h.process(o),d.process(o),m.process(o),T.process(o),P.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(C))},k=()=>{n=!0,r=!0,o.isProcessing||e(C)};return{schedule:rl.reduce((w,R)=>{const M=s[R];return w[R]=(z,U=!1,F=!1)=>(n||k(),M.schedule(z,U,F)),w},{}),cancel:w=>{for(let R=0;R<rl.length;R++)s[rl[R]].cancel(w)},state:o,steps:s}}const{schedule:st,cancel:lo,state:Ot,steps:ju}=ow(typeof requestAnimationFrame<"u"?requestAnimationFrame:$n,!0);let Cl;function d2(){Cl=void 0}const fn={now:()=>(Cl===void 0&&fn.set(Ot.isProcessing||Rr.useManualTiming?Ot.timestamp:performance.now()),Cl),set:e=>{Cl=e,queueMicrotask(d2)}},iw=e=>t=>typeof t=="string"&&t.startsWith(e),Fh=iw("--"),f2=iw("var(--"),$h=e=>f2(e)?h2.test(e.split("/*")[0].trim()):!1,h2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,os={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},fa={...os,transform:e=>Ar(0,1,e)},ol={...os,default:1},Vs=e=>Math.round(e*1e5)/1e5,Oh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function m2(e){return e==null}const p2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vh=(e,t)=>n=>!!(typeof n=="string"&&p2.test(n)&&n.startsWith(e)||t&&!m2(n)&&Object.prototype.hasOwnProperty.call(n,t)),sw=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,i,s,l]=r.match(Oh);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(s),alpha:l!==void 0?parseFloat(l):1}},g2=e=>Ar(0,255,e),Au={...os,transform:e=>Math.round(g2(e))},Oo={test:Vh("rgb","red"),parse:sw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Au.transform(e)+", "+Au.transform(t)+", "+Au.transform(n)+", "+Vs(fa.transform(r))+")"};function y2(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Zd={test:Vh("#"),parse:y2,transform:Oo.transform},Na=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),_r=Na("deg"),mr=Na("%"),ke=Na("px"),v2=Na("vh"),x2=Na("vw"),xg=(()=>({...mr,parse:e=>mr.parse(e)/100,transform:e=>mr.transform(e*100)}))(),ki={test:Vh("hsl","hue"),parse:sw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+mr.transform(Vs(t))+", "+mr.transform(Vs(n))+", "+Vs(fa.transform(r))+")"},Ct={test:e=>Oo.test(e)||Zd.test(e)||ki.test(e),parse:e=>Oo.test(e)?Oo.parse(e):ki.test(e)?ki.parse(e):Zd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Oo.transform(e):ki.transform(e),getAnimatableNone:e=>{const t=Ct.parse(e);return t.alpha=0,Ct.transform(t)}},w2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function b2(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Oh))==null?void 0:t.length)||0)+(((n=e.match(w2))==null?void 0:n.length)||0)>0}const aw="number",lw="color",S2="var",T2="var(",wg="${}",k2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ha(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const l=t.replace(k2,c=>(Ct.test(c)?(r.color.push(i),o.push(lw),n.push(Ct.parse(c))):c.startsWith(T2)?(r.var.push(i),o.push(S2),n.push(c)):(r.number.push(i),o.push(aw),n.push(parseFloat(c))),++i,wg)).split(wg);return{values:n,split:l,indexes:r,types:o}}function cw(e){return ha(e).values}function uw(e){const{split:t,types:n}=ha(e),r=t.length;return o=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],o[s]!==void 0){const l=n[s];l===aw?i+=Vs(o[s]):l===lw?i+=Ct.transform(o[s]):i+=o[s]}return i}}const C2=e=>typeof e=="number"?0:Ct.test(e)?Ct.getAnimatableNone(e):e;function E2(e){const t=cw(e);return uw(e)(t.map(C2))}const co={test:b2,parse:cw,createTransformer:uw,getAnimatableNone:E2};function Ru(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function N2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,s=0;if(!t)o=i=s=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;o=Ru(c,l,e+1/3),i=Ru(c,l,e),s=Ru(c,l,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function rc(e,t){return n=>n>0?t:e}const ut=(e,t,n)=>e+(t-e)*n,Iu=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},P2=[Zd,Oo,ki],j2=e=>P2.find(t=>t.test(e));function bg(e){const t=j2(e);if(!t)return!1;let n=t.parse(e);return t===ki&&(n=N2(n)),n}const Sg=(e,t)=>{const n=bg(e),r=bg(t);if(!n||!r)return rc(e,t);const o={...n};return i=>(o.red=Iu(n.red,r.red,i),o.green=Iu(n.green,r.green,i),o.blue=Iu(n.blue,r.blue,i),o.alpha=ut(n.alpha,r.alpha,i),Oo.transform(o))},Jd=new Set(["none","hidden"]);function A2(e,t){return Jd.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function R2(e,t){return n=>ut(e,t,n)}function _h(e){return typeof e=="number"?R2:typeof e=="string"?$h(e)?rc:Ct.test(e)?Sg:D2:Array.isArray(e)?dw:typeof e=="object"?Ct.test(e)?Sg:I2:rc}function dw(e,t){const n=[...e],r=n.length,o=e.map((i,s)=>_h(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=o[s](i);return n}}function I2(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=_h(e[o])(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}}function M2(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const i=t.types[o],s=e.indexes[i][r[i]],l=e.values[s]??0;n[o]=l,r[i]++}return n}const D2=(e,t)=>{const n=co.createTransformer(t),r=ha(e),o=ha(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?Jd.has(e)&&!o.values.length||Jd.has(t)&&!r.values.length?A2(e,t):Ca(dw(M2(r,o),o.values),n):rc(e,t)};function fw(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ut(e,t,n):_h(e)(e,t)}const L2=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>st.update(t,n),stop:()=>lo(t),now:()=>Ot.isProcessing?Ot.timestamp:fn.now()}},hw=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let i=0;i<o;i++)r+=Math.round(e(i/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},oc=2e4;function Uh(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<oc;)t+=n,r=e.next(t);return t>=oc?1/0:t}function F2(e,t=100,n){const r=n({...e,keyframes:[0,t]}),o=Math.min(Uh(r),oc);return{type:"keyframes",ease:i=>r.next(o*i).value/t,duration:hr(o)}}const $2=5;function mw(e,t,n){const r=Math.max(t-$2,0);return Kx(n-e(r),t-r)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mu=.001;function O2({duration:e=mt.duration,bounce:t=mt.bounce,velocity:n=mt.velocity,mass:r=mt.mass}){let o,i,s=1-t;s=Ar(mt.minDamping,mt.maxDamping,s),e=Ar(mt.minDuration,mt.maxDuration,hr(e)),s<1?(o=u=>{const h=u*s,d=h*e,m=h-n,T=ef(u,s),P=Math.exp(-d);return Mu-m/T*P},i=u=>{const d=u*s*e,m=d*n+n,T=Math.pow(s,2)*Math.pow(u,2)*e,P=Math.exp(-d),C=ef(Math.pow(u,2),s);return(-o(u)+Mu>0?-1:1)*((m-T)*P)/C}):(o=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-Mu+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const l=5/e,c=_2(o,i,l);if(e=fr(e),isNaN(c))return{stiffness:mt.stiffness,damping:mt.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const V2=12;function _2(e,t,n){let r=n;for(let o=1;o<V2;o++)r=r-e(r)/t(r);return r}function ef(e,t){return e*Math.sqrt(1-t*t)}const U2=["duration","bounce"],z2=["stiffness","damping","mass"];function Tg(e,t){return t.some(n=>e[n]!==void 0)}function B2(e){let t={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...e};if(!Tg(e,z2)&&Tg(e,U2))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,i=2*Ar(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:mt.mass,stiffness:o,damping:i}}else{const n=O2(e);t={...t,...n,mass:mt.mass},t.isResolvedFromDuration=!0}return t}function ic(e=mt.visualDuration,t=mt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:h,duration:d,velocity:m,isResolvedFromDuration:T}=B2({...n,velocity:-hr(n.velocity||0)}),P=m||0,C=u/(2*Math.sqrt(c*h)),k=s-i,x=hr(Math.sqrt(c/h)),v=Math.abs(k)<5;r||(r=v?mt.restSpeed.granular:mt.restSpeed.default),o||(o=v?mt.restDelta.granular:mt.restDelta.default);let w;if(C<1){const M=ef(x,C);w=z=>{const U=Math.exp(-C*x*z);return s-U*((P+C*x*k)/M*Math.sin(M*z)+k*Math.cos(M*z))}}else if(C===1)w=M=>s-Math.exp(-x*M)*(k+(P+x*k)*M);else{const M=x*Math.sqrt(C*C-1);w=z=>{const U=Math.exp(-C*x*z),F=Math.min(M*z,300);return s-U*((P+C*x*k)*Math.sinh(F)+M*k*Math.cosh(F))/M}}const R={calculatedDuration:T&&d||null,next:M=>{const z=w(M);if(T)l.done=M>=d;else{let U=M===0?P:0;C<1&&(U=M===0?fr(P):mw(w,M,z));const F=Math.abs(U)<=r,se=Math.abs(s-z)<=o;l.done=F&&se}return l.value=l.done?s:z,l},toString:()=>{const M=Math.min(Uh(R),oc),z=hw(U=>R.next(M*U).value,M,30);return M+"ms "+z},toTransition:()=>{}};return R}ic.applyToOptions=e=>{const t=F2(e,100,ic);return e.ease=t.ease,e.duration=fr(t.duration),e.type="keyframes",e};function tf({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:s,min:l,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],m={done:!1,value:d},T=F=>l!==void 0&&F<l||c!==void 0&&F>c,P=F=>l===void 0?c:c===void 0||Math.abs(l-F)<Math.abs(c-F)?l:c;let C=n*t;const k=d+C,x=s===void 0?k:s(k);x!==k&&(C=x-d);const v=F=>-C*Math.exp(-F/r),w=F=>x+v(F),R=F=>{const se=v(F),J=w(F);m.done=Math.abs(se)<=u,m.value=m.done?x:J};let M,z;const U=F=>{T(m.value)&&(M=F,z=ic({keyframes:[m.value,P(m.value)],velocity:mw(w,F,m.value),damping:o,stiffness:i,restDelta:u,restSpeed:h}))};return U(0),{calculatedDuration:null,next:F=>{let se=!1;return!z&&M===void 0&&(se=!0,R(F),U(F)),M!==void 0&&F>=M?z.next(F-M):(!se&&R(F),m)}}}function W2(e,t,n){const r=[],o=n||Rr.mix||fw,i=e.length-1;for(let s=0;s<i;s++){let l=o(e[s],e[s+1]);if(t){const c=Array.isArray(t)?t[s]||$n:t;l=Ca(c,l)}r.push(l)}return r}function G2(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(Rh(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=W2(t,r,o),c=l.length,u=h=>{if(s&&h<e[0])return t[0];let d=0;if(c>1)for(;d<e.length-2&&!(h<e[d+1]);d++);const m=da(e[d],e[d+1],h);return l[d](m)};return n?h=>u(Ar(e[0],e[i-1],h)):u}function H2(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=da(0,t,r);e.push(ut(n,1,o))}}function K2(e){const t=[0];return H2(t,e.length-1),t}function Y2(e,t){return e.map(n=>n*t)}function X2(e,t){return e.map(()=>t||nw).splice(0,e.length-1)}function _s({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=s2(r)?r.map(yg):yg(r),i={done:!1,value:t[0]},s=Y2(n&&n.length===t.length?n:K2(t),e),l=G2(s,t,{ease:Array.isArray(o)?o:X2(t,o)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const q2=e=>e!==null;function zh(e,{repeat:t,repeatType:n="loop"},r,o=1){const i=e.filter(q2),l=o<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const Q2={decay:tf,inertia:tf,tween:_s,keyframes:_s,spring:ic};function pw(e){typeof e.type=="string"&&(e.type=Q2[e.type])}class Bh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Z2=e=>e/100;class Wh extends Bh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:n}=this.options;n&&n.updatedAt!==fn.now()&&this.tick(fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;pw(t);const{type:n=_s,repeat:r=0,repeatDelay:o=0,repeatType:i,velocity:s=0}=t;let{keyframes:l}=t;const c=n||_s;c!==_s&&typeof l[0]!="number"&&(this.mixKeyframes=Ca(Z2,fw(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=Uh(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:o,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:h,repeat:d,repeatType:m,repeatDelay:T,type:P,onUpdate:C,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?x<0:x>o;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let w=this.currentTime,R=r;if(d){const F=Math.min(this.currentTime,o)/l;let se=Math.floor(F),J=F%1;!J&&F>=1&&(J=1),J===1&&se--,se=Math.min(se,d+1),!!(se%2)&&(m==="reverse"?(J=1-J,T&&(J-=T/l)):m==="mirror"&&(R=s)),w=Ar(0,1,J)*l}const M=v?{done:!1,value:h[0]}:R.next(w);i&&(M.value=i(M.value));let{done:z}=M;!v&&c!==null&&(z=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return U&&P!==tf&&(M.value=zh(h,this.options,k,this.speed)),C&&C(M.value),U&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return hr(this.calculatedDuration)}get time(){return hr(this.currentTime)}set time(t){var n;t=fr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(fn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hr(this.currentTime))}play(){var o,i;if(this.isStopped)return;const{driver:t=L2,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),(i=(o=this.options).onPlay)==null||i.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function J2(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Vo=e=>e*180/Math.PI,nf=e=>{const t=Vo(Math.atan2(e[1],e[0]));return rf(t)},eP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:nf,rotateZ:nf,skewX:e=>Vo(Math.atan(e[1])),skewY:e=>Vo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rf=e=>(e=e%360,e<0&&(e+=360),e),kg=nf,Cg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Eg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),tP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Cg,scaleY:Eg,scale:e=>(Cg(e)+Eg(e))/2,rotateX:e=>rf(Vo(Math.atan2(e[6],e[5]))),rotateY:e=>rf(Vo(Math.atan2(-e[2],e[0]))),rotateZ:kg,rotate:kg,skewX:e=>Vo(Math.atan(e[4])),skewY:e=>Vo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function of(e){return e.includes("scale")?1:0}function sf(e,t){if(!e||e==="none")return of(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=tP,o=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=eP,o=l}if(!o)return of(t);const i=r[t],s=o[1].split(",").map(rP);return typeof i=="function"?i(s):s[i]}const nP=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return sf(n,t)};function rP(e){return parseFloat(e.trim())}const is=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ss=(()=>new Set(is))(),Ng=e=>e===os||e===ke,oP=new Set(["x","y","z"]),iP=is.filter(e=>!oP.has(e));function sP(e){const t=[];return iP.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Bo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sf(t,"x"),y:(e,{transform:t})=>sf(t,"y")};Bo.translateX=Bo.x;Bo.translateY=Bo.y;const Wo=new Set;let af=!1,lf=!1,cf=!1;function gw(){if(lf){const e=Array.from(Wo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=sP(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([i,s])=>{var l;(l=r.getValue(i))==null||l.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lf=!1,af=!1,Wo.forEach(e=>e.complete(cf)),Wo.clear()}function yw(){Wo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lf=!0)})}function aP(){cf=!0,yw(),gw(),cf=!1}class Gh{constructor(t,n,r,o,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Wo.add(this),af||(af=!0,st.read(yw),st.resolveKeyframes(gw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;if(t[0]===null){const i=o==null?void 0:o.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,s);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=s),o&&i===void 0&&o.set(t[0])}J2(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Wo.delete(this)}cancel(){this.state==="scheduled"&&(Wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lP=e=>e.startsWith("--");function cP(e,t,n){lP(t)?e.style.setProperty(t,n):e.style[t]=n}const uP=Ih(()=>window.ScrollTimeline!==void 0),dP={};function fP(e,t){const n=Ih(e);return()=>dP[t]??n()}const vw=fP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),js=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Pg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:js([0,.65,.55,1]),circOut:js([.55,0,1,.45]),backIn:js([.31,.01,.66,-.59]),backOut:js([.33,1.53,.69,.99])};function xw(e,t){if(e)return typeof e=="function"?vw()?hw(e,t):"ease-out":rw(e)?js(e):Array.isArray(e)?e.map(n=>xw(n,t)||Pg.easeOut):Pg[e]}function hP(e,t,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:s="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[t]:n};c&&(h.offset=c);const d=xw(l,o);Array.isArray(d)&&(h.easing=d);const m={delay:r,duration:o,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(h,m)}function ww(e){return typeof e=="function"&&"applyToOptions"in e}function mP({type:e,...t}){return ww(e)&&vw()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class pP extends Bh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:o,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,Rh(typeof t.type!="string");const u=mP(t);this.animation=hP(n,r,o,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=zh(o,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):cP(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hr(Number(t))}get time(){return hr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&uP()?(this.animation.timeline=t,$n):n(this)}}const bw={anticipate:Jx,backInOut:Zx,circInOut:tw};function gP(e){return e in bw}function yP(e){typeof e.ease=="string"&&gP(e.ease)&&(e.ease=bw[e.ease])}const jg=10;class vP extends pP{constructor(t){yP(t),pw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:o,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Wh({...s,autoplay:!1}),c=fr(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-jg).value,l.sample(c).value,jg),l.stop()}}const Ag=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(co.test(e)||e==="0")&&!e.startsWith("url("));function xP(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function wP(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=Ag(o,t),l=Ag(i,t);return!s||!l?!1:xP(e)||(n==="spring"||ww(n))&&r}function Hh(e){return Gx(e)&&"offsetHeight"in e}const bP=new Set(["opacity","clipPath","filter","transform"]),SP=Ih(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TP(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:o,damping:i,type:s}=e;if(!Hh((u=t==null?void 0:t.owner)==null?void 0:u.current))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return SP()&&n&&bP.has(n)&&(n!=="transform"||!c)&&!l&&!r&&o!=="mirror"&&i!==0&&s!=="inertia"}const kP=40;class CP extends Bh{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s="loop",keyframes:l,name:c,motionValue:u,element:h,...d}){var P;super(),this.stop=()=>{var C,k;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=fn.now();const m={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:i,repeatType:s,name:c,motionValue:u,element:h,...d},T=(h==null?void 0:h.KeyframeResolver)||Gh;this.keyframeResolver=new T(l,(C,k,x)=>this.onKeyframesResolved(C,k,m,!x),c,u,h),(P=this.keyframeResolver)==null||P.scheduleResolve()}onKeyframesResolved(t,n,r,o){this.keyframeResolver=void 0;const{name:i,type:s,velocity:l,delay:c,isHandoff:u,onUpdate:h}=r;this.resolvedAt=fn.now(),wP(t,i,s,l)||((Rr.instantAnimations||!c)&&(h==null||h(zh(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const m={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>kP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},T=!u&&TP(m)?new vP({...m,element:m.motionValue.owner.current}):new Wh(m);T.finished.then(()=>this.notifyFinished()).catch($n),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),aP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const EP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NP(e){const t=EP.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function Sw(e,t,n=1){const[r,o]=NP(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return Wx(s)?parseFloat(s):s}return $h(o)?Sw(o,t,n+1):o}function Kh(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Tw=new Set(["width","height","top","left","right","bottom",...is]),PP={test:e=>e==="auto",parse:e=>e},kw=e=>t=>t.test(e),Cw=[os,ke,mr,_r,x2,v2,PP],Rg=e=>Cw.find(kw(e));function jP(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Hx(e):!0}const AP=new Set(["brightness","contrast","saturate","opacity"]);function RP(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Oh)||[];if(!r)return e;const o=n.replace(r,"");let i=AP.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const IP=/\b([a-z-]*)\(.*?\)/gu,uf={...co,getAnimatableNone:e=>{const t=e.match(IP);return t?t.map(RP).join(" "):e}},Ig={...os,transform:Math.round},MP={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:ol,scaleX:ol,scaleY:ol,scaleZ:ol,skew:_r,skewX:_r,skewY:_r,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:fa,originX:xg,originY:xg,originZ:ke},Yh={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,backgroundPositionX:ke,backgroundPositionY:ke,...MP,zIndex:Ig,fillOpacity:fa,strokeOpacity:fa,numOctaves:Ig},DP={...Yh,color:Ct,backgroundColor:Ct,outlineColor:Ct,fill:Ct,stroke:Ct,borderColor:Ct,borderTopColor:Ct,borderRightColor:Ct,borderBottomColor:Ct,borderLeftColor:Ct,filter:uf,WebkitFilter:uf},Ew=e=>DP[e];function Nw(e,t){let n=Ew(e);return n!==uf&&(n=co),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const LP=new Set(["auto","none","0"]);function FP(e,t,n){let r=0,o;for(;r<e.length&&!o;){const i=e[r];typeof i=="string"&&!LP.has(i)&&ha(i).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=Nw(n,o)}class $P extends Gh{constructor(t,n,r,o,i){super(t,n,r,o,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),$h(u))){const h=Sw(u,n.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Tw.has(r)||t.length!==2)return;const[o,i]=t,s=Rg(o),l=Rg(i);if(s!==l)if(Ng(s)&&Ng(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Bo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||jP(t[o]))&&r.push(o);r.length&&FP(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=Bo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function OP(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const o=(n==null?void 0:n[e])??r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const Pw=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Mg=30,VP=e=>!isNaN(parseFloat(e));class _P{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var s,l;const i=fn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();o&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=fn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=VP(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Mh);const r=this.events[t].add(n);return t==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Mg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Mg);return Kx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ki(e,t){return new _P(e,t)}const{schedule:Xh,cancel:MD}=ow(queueMicrotask,!1),Xn={x:!1,y:!1};function jw(){return Xn.x||Xn.y}function UP(e){return e==="x"||e==="y"?Xn[e]?null:(Xn[e]=!0,()=>{Xn[e]=!1}):Xn.x||Xn.y?null:(Xn.x=Xn.y=!0,()=>{Xn.x=Xn.y=!1})}function Aw(e,t){const n=OP(e),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[n,o,()=>r.abort()]}function Dg(e){return!(e.pointerType==="touch"||jw())}function zP(e,t,n={}){const[r,o,i]=Aw(e,n),s=l=>{if(!Dg(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const h=d=>{Dg(d)&&(u(d),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,o)};return r.forEach(l=>{l.addEventListener("pointerenter",s,o)}),i}const Rw=(e,t)=>t?e===t?!0:Rw(e,t.parentElement):!1,qh=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,BP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WP(e){return BP.has(e.tagName)||e.tabIndex!==-1}const El=new WeakSet;function Lg(e){return t=>{t.key==="Enter"&&e(t)}}function Du(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const GP=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Lg(()=>{if(El.has(n))return;Du(n,"down");const o=Lg(()=>{Du(n,"up")}),i=()=>Du(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Fg(e){return qh(e)&&!jw()}function HP(e,t,n={}){const[r,o,i]=Aw(e,n),s=l=>{const c=l.currentTarget;if(!Fg(l))return;El.add(c);const u=t(c,l),h=(T,P)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),El.has(c)&&El.delete(c),Fg(T)&&typeof u=="function"&&u(T,{success:P})},d=T=>{h(T,c===window||c===document||n.useGlobalTarget||Rw(c,T.target))},m=T=>{h(T,!1)};window.addEventListener("pointerup",d,o),window.addEventListener("pointercancel",m,o)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",s,o),Hh(l)&&(l.addEventListener("focus",u=>GP(u,o)),!WP(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Iw(e){return Gx(e)&&"ownerSVGElement"in e}function KP(e){return Iw(e)&&e.tagName==="svg"}const Yt=e=>!!(e&&e.getVelocity),YP=[...Cw,Ct,co],XP=e=>YP.find(kw(e)),Qh=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class qP extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=Hh(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function QP({children:e,isPresent:t,anchorX:n,root:r}){const o=p.useId(),i=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(Qh);return p.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:d,right:m}=s.current;if(t||!i.current||!c||!u)return;const T=n==="left"?`left: ${d}`:`right: ${m}`;i.current.dataset.motionPopId=o;const P=document.createElement("style");l&&(P.nonce=l);const C=r??document.head;return C.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${T}px !important;
            top: ${h}px !important;
          }
        `),()=>{C.removeChild(P),C.contains(P)&&C.removeChild(P)}},[t]),a.jsx(qP,{isPresent:t,childRef:i,sizeRef:s,children:p.cloneElement(e,{ref:i})})}const ZP=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:s,anchorX:l,root:c})=>{const u=Nh(JP),h=p.useId();let d=!0,m=p.useMemo(()=>(d=!1,{id:h,initial:t,isPresent:n,custom:o,onExitComplete:T=>{u.set(T,!0);for(const P of u.values())if(!P)return;r&&r()},register:T=>(u.set(T,!1),()=>u.delete(T))}),[n,u,r]);return i&&d&&(m={...m}),p.useMemo(()=>{u.forEach((T,P)=>u.set(P,!1))},[n]),p.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(e=a.jsx(QP,{isPresent:n,anchorX:l,root:c,children:e})),a.jsx(Pc.Provider,{value:m,children:e})};function JP(){return new Map}function Mw(e=!0){const t=p.useContext(Pc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,i=p.useId();p.useEffect(()=>{if(e)return o(i)},[e]);const s=p.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const il=e=>e.key||"";function $g(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const Og=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:i="sync",propagate:s=!1,anchorX:l="left",root:c})=>{const[u,h]=Mw(s),d=p.useMemo(()=>$g(e),[e]),m=s&&!u?[]:d.map(il),T=p.useRef(!0),P=p.useRef(d),C=Nh(()=>new Map),[k,x]=p.useState(d),[v,w]=p.useState(d);Bx(()=>{T.current=!1,P.current=d;for(let z=0;z<v.length;z++){const U=il(v[z]);m.includes(U)?C.delete(U):C.get(U)!==!0&&C.set(U,!1)}},[v,m.length,m.join("-")]);const R=[];if(d!==k){let z=[...d];for(let U=0;U<v.length;U++){const F=v[U],se=il(F);m.includes(se)||(z.splice(U,0,F),R.push(F))}return i==="wait"&&R.length&&(z=R),w($g(z)),x(d),null}const{forceRender:M}=p.useContext(Eh);return a.jsx(a.Fragment,{children:v.map(z=>{const U=il(z),F=s&&!u?!1:d===v||m.includes(U),se=()=>{if(C.has(U))C.set(U,!0);else return;let J=!0;C.forEach(ve=>{ve||(J=!1)}),J&&(M==null||M(),w(P.current),s&&(h==null||h()),r&&r())};return a.jsx(ZP,{isPresent:F,initial:!T.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:c,onExitComplete:F?void 0:se,anchorX:l,children:z},U)})})},Dw=p.createContext({strict:!1}),Vg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yi={};for(const e in Vg)Yi[e]={isEnabled:t=>Vg[e].some(n=>!!t[n])};function ej(e){for(const t in e)Yi[t]={...Yi[t],...e[t]}}const tj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||tj.has(e)}let Lw=e=>!sc(e);function nj(e){typeof e=="function"&&(Lw=t=>t.startsWith("on")?!sc(t):e(t))}try{nj(require("@emotion/is-prop-valid").default)}catch{}function rj(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(Lw(o)||n===!0&&sc(o)||!t&&!sc(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function oj(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}const jc=p.createContext({});function Ac(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ma(e){return typeof e=="string"||Array.isArray(e)}const Zh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jh=["initial",...Zh];function Rc(e){return Ac(e.animate)||Jh.some(t=>ma(e[t]))}function Fw(e){return!!(Rc(e)||e.variants)}function ij(e,t){if(Rc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ma(n)?n:void 0,animate:ma(r)?r:void 0}}return e.inherit!==!1?t:{}}function sj(e){const{initial:t,animate:n}=ij(e,p.useContext(jc));return p.useMemo(()=>({initial:t,animate:n}),[_g(t),_g(n)])}function _g(e){return Array.isArray(e)?e.join(" "):e}const aj=Symbol.for("motionComponentSymbol");function Ci(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function lj(e,t,n){return p.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ci(n)&&(n.current=r))},[t])}const em=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cj="framerAppearId",$w="data-"+em(cj),Ow=p.createContext({});function uj(e,t,n,r,o){var C,k;const{visualElement:i}=p.useContext(jc),s=p.useContext(Dw),l=p.useContext(Pc),c=p.useContext(Qh).reducedMotion,u=p.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,d=p.useContext(Ow);h&&!h.projection&&o&&(h.type==="html"||h.type==="svg")&&dj(u.current,n,o,d);const m=p.useRef(!1);p.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const T=n[$w],P=p.useRef(!!T&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,T))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,T)));return Bx(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Xh.render(h.render),P.current&&h.animationState&&h.animationState.animateChanges())}),p.useEffect(()=>{h&&(!P.current&&h.animationState&&h.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,T)}),P.current=!1))}),h}function dj(e,t,n,r){const{layoutId:o,layout:i,drag:s,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Vw(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!s||l&&Ci(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:u})}function Vw(e){if(e)return e.options.allowProjection!==!1?e.projection:Vw(e.parent)}function fj({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&ej(e);function i(l,c){let u;const h={...p.useContext(Qh),...l,layoutId:hj(l)},{isStatic:d}=h,m=sj(l),T=r(l,d);if(!d&&Ph){mj();const P=pj(h);u=P.MeasureLayout,m.visualElement=uj(o,T,h,t,P.ProjectionNode)}return a.jsxs(jc.Provider,{value:m,children:[u&&m.visualElement?a.jsx(u,{visualElement:m.visualElement,...h}):null,n(o,l,lj(T,m.visualElement,c),T,d,m.visualElement)]})}i.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const s=p.forwardRef(i);return s[aj]=o,s}function hj({layoutId:e}){const t=p.useContext(Eh).id;return t&&e!==void 0?t+"-"+e:e}function mj(e,t){p.useContext(Dw).strict}function pj(e){const{drag:t,layout:n}=Yi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pa={};function gj(e){for(const t in e)pa[t]=e[t],Fh(t)&&(pa[t].isCSSVariable=!0)}function _w(e,{layout:t,layoutId:n}){return ss.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!pa[e]||e==="opacity")}const yj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vj=is.length;function xj(e,t,n){let r="",o=!0;for(let i=0;i<vj;i++){const s=is[i],l=e[s];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(s.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Pw(l,Yh[s]);if(!c){o=!1;const h=yj[s]||s;r+=`${h}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function tm(e,t,n){const{style:r,vars:o,transformOrigin:i}=e;let s=!1,l=!1;for(const c in t){const u=t[c];if(ss.has(c)){s=!0;continue}else if(Fh(c)){o[c]=u;continue}else{const h=Pw(u,Yh[c]);c.startsWith("origin")?(l=!0,i[c]=h):r[c]=h}}if(t.transform||(s||n?r.transform=xj(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=i;r.transformOrigin=`${c} ${u} ${h}`}}const nm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Uw(e,t,n){for(const r in t)!Yt(t[r])&&!_w(r,n)&&(e[r]=t[r])}function wj({transformTemplate:e},t){return p.useMemo(()=>{const n=nm();return tm(n,t,e),Object.assign({},n.vars,n.style)},[t])}function bj(e,t){const n=e.style||{},r={};return Uw(r,n,e),Object.assign(r,wj(e,t)),r}function Sj(e,t){const n={},r=bj(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Tj={offset:"stroke-dashoffset",array:"stroke-dasharray"},kj={offset:"strokeDashoffset",array:"strokeDasharray"};function Cj(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?Tj:kj;e[i.offset]=ke.transform(-r);const s=ke.transform(t),l=ke.transform(n);e[i.array]=`${s} ${l}`}function zw(e,{attrX:t,attrY:n,attrScale:r,pathLength:o,pathSpacing:i=1,pathOffset:s=0,...l},c,u,h){if(tm(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:m}=e;d.transform&&(m.transform=d.transform,delete d.transform),(m.transform||d.transformOrigin)&&(m.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),o!==void 0&&Cj(d,o,i,s,!1)}const Bw=()=>({...nm(),attrs:{}}),Ww=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Ej(e,t,n,r){const o=p.useMemo(()=>{const i=Bw();return zw(i,t,Ww(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Uw(i,e.style,e),o.style={...i,...o.style}}return o}const Nj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rm(e){return typeof e!="string"||e.includes("-")?!1:!!(Nj.indexOf(e)>-1||/[A-Z]/u.test(e))}function Pj(e=!1){return(n,r,o,{latestValues:i},s)=>{const c=(rm(n)?Ej:Sj)(r,i,s,n),u=rj(r,typeof n=="string",e),h=n!==p.Fragment?{...u,...c,ref:o}:{},{children:d}=r,m=p.useMemo(()=>Yt(d)?d.get():d,[d]);return p.createElement(n,{...h,children:m})}}function Ug(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function om(e,t,n,r){if(typeof t=="function"){const[o,i]=Ug(r);t=t(n!==void 0?n:e.custom,o,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,i]=Ug(r);t=t(n!==void 0?n:e.custom,o,i)}return t}function Nl(e){return Yt(e)?e.get():e}function jj({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,o){return{latestValues:Aj(n,r,o,e),renderState:t()}}const Gw=e=>(t,n)=>{const r=p.useContext(jc),o=p.useContext(Pc),i=()=>jj(e,t,r,o);return n?i():Nh(i)};function Aj(e,t,n,r){const o={},i=r(e,{});for(const m in i)o[m]=Nl(i[m]);let{initial:s,animate:l}=e;const c=Rc(e),u=Fw(e);t&&u&&!c&&e.inherit!==!1&&(s===void 0&&(s=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||s===!1;const d=h?l:s;if(d&&typeof d!="boolean"&&!Ac(d)){const m=Array.isArray(d)?d:[d];for(let T=0;T<m.length;T++){const P=om(e,m[T]);if(P){const{transitionEnd:C,transition:k,...x}=P;for(const v in x){let w=x[v];if(Array.isArray(w)){const R=h?w.length-1:0;w=w[R]}w!==null&&(o[v]=w)}for(const v in C)o[v]=C[v]}}}return o}function im(e,t,n){var i;const{style:r}=e,o={};for(const s in r)(Yt(r[s])||t.style&&Yt(t.style[s])||_w(s,e)||((i=n==null?void 0:n.getValue(s))==null?void 0:i.liveStyle)!==void 0)&&(o[s]=r[s]);return o}const Rj={useVisualState:Gw({scrapeMotionValuesFromProps:im,createRenderState:nm})};function Hw(e,t,n){const r=im(e,t,n);for(const o in e)if(Yt(e[o])||Yt(t[o])){const i=is.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[i]=e[o]}return r}const Ij={useVisualState:Gw({scrapeMotionValuesFromProps:Hw,createRenderState:Bw})};function Mj(e,t){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const s={...rm(r)?Ij:Rj,preloadedFeatures:e,useRender:Pj(o),createVisualElement:t,Component:r};return fj(s)}}function ga(e,t,n){const r=e.getProps();return om(r,t,n!==void 0?n:r.custom,e)}const df=e=>Array.isArray(e);function Dj(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ki(n))}function Lj(e){return df(e)?e[e.length-1]||0:e}function Fj(e,t){const n=ga(e,t);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const s in i){const l=Lj(i[s]);Dj(e,s,l)}}function $j(e){return!!(Yt(e)&&e.add)}function ff(e,t){const n=e.getValue("willChange");if($j(n))return n.add(t);if(!n&&Rr.WillChange){const r=new Rr.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Kw(e){return e.props[$w]}const Oj=e=>e!==null;function Vj(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(Oj),i=t&&n!=="loop"&&t%2===1?0:o.length-1;return!i||r===void 0?o[i]:r}const _j={type:"spring",stiffness:500,damping:25,restSpeed:10},Uj=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),zj={type:"keyframes",duration:.8},Bj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wj=(e,{keyframes:t})=>t.length>2?zj:ss.has(e)?e.startsWith("scale")?Uj(t[1]):_j:Bj;function Gj({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:s,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const sm=(e,t,n,r={},o,i)=>s=>{const l=Kh(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-fr(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{s(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:o};Gj(l)||Object.assign(h,Wj(e,h)),h.duration&&(h.duration=fr(h.duration)),h.repeatDelay&&(h.repeatDelay=fr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),(Rr.instantAnimations||Rr.skipAnimations)&&(d=!0,h.duration=0,h.delay=0),h.allowFlatten=!l.type&&!l.ease,d&&!i&&t.get()!==void 0){const m=Vj(h.keyframes,l);if(m!==void 0){st.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new Wh(h):new CP(h)};function Hj({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Yw(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...l}=t;r&&(i=r);const c=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const h in l){const d=e.getValue(h,e.latestValues[h]??null),m=l[h];if(m===void 0||u&&Hj(u,h))continue;const T={delay:n,...Kh(i||{},h)},P=d.get();if(P!==void 0&&!d.isAnimating&&!Array.isArray(m)&&m===P&&!T.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const x=Kw(e);if(x){const v=window.MotionHandoffAnimation(x,h,st);v!==null&&(T.startTime=v,C=!0)}}ff(e,h),d.start(sm(h,d,m,e.shouldReduceMotion&&Tw.has(h)?{type:!1}:T,e,C));const k=d.animation;k&&c.push(k)}return s&&Promise.all(c).then(()=>{st.update(()=>{s&&Fj(e,s)})}),c}function hf(e,t,n={}){var c;const r=ga(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(Yw(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:m}=o;return Kj(e,t,u,h,d,m,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[u,h]=l==="beforeChildren"?[i,s]:[s,i];return u().then(()=>h())}else return Promise.all([i(),s(n.delay)])}function Kj(e,t,n=0,r=0,o=0,i=1,s){const l=[],c=e.variantChildren.size,u=(c-1)*o,h=typeof r=="function",d=h?m=>r(m,c):i===1?(m=0)=>m*o:(m=0)=>u-m*o;return Array.from(e.variantChildren).sort(Yj).forEach((m,T)=>{m.notify("AnimationStart",t),l.push(hf(m,t,{...s,delay:n+(h?0:r)+d(T)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(l)}function Yj(e,t){return e.sortNodePosition(t)}function Xj(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>hf(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=hf(e,t,n);else{const o=typeof t=="function"?ga(e,t,n.custom):t;r=Promise.all(Yw(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Xw(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const qj=Jh.length;function qw(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?qw(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<qj;n++){const r=Jh[n],o=e.props[r];(ma(o)||o===!1)&&(t[r]=o)}return t}const Qj=[...Zh].reverse(),Zj=Zh.length;function Jj(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Xj(e,n,r)))}function eA(e){let t=Jj(e),n=zg(),r=!0;const o=c=>(u,h)=>{var m;const d=ga(e,h,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(d){const{transition:T,transitionEnd:P,...C}=d;u={...u,...C,...P}}return u};function i(c){t=c(e)}function s(c){const{props:u}=e,h=qw(e.parent)||{},d=[],m=new Set;let T={},P=1/0;for(let k=0;k<Zj;k++){const x=Qj[k],v=n[x],w=u[x]!==void 0?u[x]:h[x],R=ma(w),M=x===c?v.isActive:null;M===!1&&(P=k);let z=w===h[x]&&w!==u[x]&&R;if(z&&r&&e.manuallyAnimateOnMount&&(z=!1),v.protectedKeys={...T},!v.isActive&&M===null||!w&&!v.prevProp||Ac(w)||typeof w=="boolean")continue;const U=tA(v.prevProp,w);let F=U||x===c&&v.isActive&&!z&&R||k>P&&R,se=!1;const J=Array.isArray(w)?w:[w];let ve=J.reduce(o(x),{});M===!1&&(ve={});const{prevResolvedValues:ne={}}=v,Ae={...ne,...ve},oe=Te=>{F=!0,m.has(Te)&&(se=!0,m.delete(Te)),v.needsAnimating[Te]=!0;const X=e.getValue(Te);X&&(X.liveStyle=!1)};for(const Te in Ae){const X=ve[Te],ge=ne[Te];if(T.hasOwnProperty(Te))continue;let me=!1;df(X)&&df(ge)?me=!Xw(X,ge):me=X!==ge,me?X!=null?oe(Te):m.add(Te):X!==void 0&&m.has(Te)?oe(Te):v.protectedKeys[Te]=!0}v.prevProp=w,v.prevResolvedValues=ve,v.isActive&&(T={...T,...ve}),r&&e.blockInitialAnimation&&(F=!1),F&&(!(z&&U)||se)&&d.push(...J.map(Te=>({animation:Te,options:{type:x}})))}if(m.size){const k={};if(typeof u.initial!="boolean"){const x=ga(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(k.transition=x.transition)}m.forEach(x=>{const v=e.getBaseTarget(x),w=e.getValue(x);w&&(w.liveStyle=!0),k[x]=v??null}),d.push({animation:k})}let C=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(C=!1),r=!1,C?t(d):Promise.resolve()}function l(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(m=>{var T;return(T=m.animationState)==null?void 0:T.setActive(c,u)}),n[c].isActive=u;const h=s(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:s,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=zg(),r=!0}}}function tA(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Xw(t,e):!1}function Eo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zg(){return{animate:Eo(!0),whileInView:Eo(),whileHover:Eo(),whileTap:Eo(),whileDrag:Eo(),whileFocus:Eo(),exit:Eo()}}class go{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nA extends go{constructor(t){super(t),t.animationState||(t.animationState=eA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ac(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let rA=0;class oA extends go{constructor(){super(...arguments),this.id=rA++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const iA={animation:{Feature:nA},exit:{Feature:oA}};function ya(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Pa(e){return{point:{x:e.pageX,y:e.pageY}}}const sA=e=>t=>qh(t)&&e(t,Pa(t));function Us(e,t,n,r){return ya(e,t,sA(n),r)}function Qw({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function aA({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function lA(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Zw=1e-4,cA=1-Zw,uA=1+Zw,Jw=.01,dA=0-Jw,fA=0+Jw;function tn(e){return e.max-e.min}function hA(e,t,n){return Math.abs(e-t)<=n}function Bg(e,t,n,r=.5){e.origin=r,e.originPoint=ut(t.min,t.max,e.origin),e.scale=tn(n)/tn(t),e.translate=ut(n.min,n.max,e.origin)-e.originPoint,(e.scale>=cA&&e.scale<=uA||isNaN(e.scale))&&(e.scale=1),(e.translate>=dA&&e.translate<=fA||isNaN(e.translate))&&(e.translate=0)}function zs(e,t,n,r){Bg(e.x,t.x,n.x,r?r.originX:void 0),Bg(e.y,t.y,n.y,r?r.originY:void 0)}function Wg(e,t,n){e.min=n.min+t.min,e.max=e.min+tn(t)}function mA(e,t,n){Wg(e.x,t.x,n.x),Wg(e.y,t.y,n.y)}function Gg(e,t,n){e.min=t.min-n.min,e.max=e.min+tn(t)}function Bs(e,t,n){Gg(e.x,t.x,n.x),Gg(e.y,t.y,n.y)}const Hg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ei=()=>({x:Hg(),y:Hg()}),Kg=()=>({min:0,max:0}),yt=()=>({x:Kg(),y:Kg()});function In(e){return[e("x"),e("y")]}function Lu(e){return e===void 0||e===1}function mf({scale:e,scaleX:t,scaleY:n}){return!Lu(e)||!Lu(t)||!Lu(n)}function Ao(e){return mf(e)||e1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function e1(e){return Yg(e.x)||Yg(e.y)}function Yg(e){return e&&e!=="0%"}function ac(e,t,n){const r=e-n,o=t*r;return n+o}function Xg(e,t,n,r,o){return o!==void 0&&(e=ac(e,o,r)),ac(e,n,r)+t}function pf(e,t=0,n=1,r,o){e.min=Xg(e.min,t,n,r,o),e.max=Xg(e.max,t,n,r,o)}function t1(e,{x:t,y:n}){pf(e.x,t.translate,t.scale,t.originPoint),pf(e.y,n.translate,n.scale,n.originPoint)}const qg=.999999999999,Qg=1.0000000000001;function pA(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,s;for(let l=0;l<o;l++){i=n[l],s=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Pi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,t1(e,s)),r&&Ao(i.latestValues)&&Pi(e,i.latestValues))}t.x<Qg&&t.x>qg&&(t.x=1),t.y<Qg&&t.y>qg&&(t.y=1)}function Ni(e,t){e.min=e.min+t,e.max=e.max+t}function Zg(e,t,n,r,o=.5){const i=ut(e.min,e.max,o);pf(e,t,n,i,r)}function Pi(e,t){Zg(e.x,t.x,t.scaleX,t.scale,t.originX),Zg(e.y,t.y,t.scaleY,t.scale,t.originY)}function n1(e,t){return Qw(lA(e.getBoundingClientRect(),t))}function gA(e,t,n){const r=n1(e,n),{scroll:o}=t;return o&&(Ni(r.x,o.offset.x),Ni(r.y,o.offset.y)),r}const r1=({current:e})=>e?e.ownerDocument.defaultView:null,Jg=(e,t)=>Math.abs(e-t);function yA(e,t){const n=Jg(e.x,t.x),r=Jg(e.y,t.y);return Math.sqrt(n**2+r**2)}class o1{constructor(t,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=$u(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,P=yA(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!P)return;const{point:C}=m,{timestamp:k}=Ot;this.history.push({...C,timestamp:k});const{onStart:x,onMove:v}=this.handlers;T||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,m)},this.handlePointerMove=(m,T)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Fu(T,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(m,T)=>{this.end();const{onEnd:P,onSessionEnd:C,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=$u(m.type==="pointercancel"?this.lastMoveEventInfo:Fu(T,this.transformPagePoint),this.history);this.startEvent&&P&&P(m,x),C&&C(m,x)},!qh(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=o||window;const l=Pa(t),c=Fu(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=Ot;this.history=[{...u,timestamp:h}];const{onSessionStart:d}=n;d&&d(t,$u(c,this.history)),this.removeListeners=Ca(Us(this.contextWindow,"pointermove",this.handlePointerMove),Us(this.contextWindow,"pointerup",this.handlePointerUp),Us(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),lo(this.updatePoint)}}function Fu(e,t){return t?{point:t(e.point)}:e}function ey(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $u({point:e},t){return{point:e,delta:ey(e,i1(t)),offset:ey(e,vA(t)),velocity:xA(t,.1)}}function vA(e){return e[0]}function i1(e){return e[e.length-1]}function xA(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=i1(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>fr(t)));)n--;if(!r)return{x:0,y:0};const i=hr(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function wA(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ut(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ut(n,e,r.max):Math.min(e,n)),e}function ty(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function bA(e,{top:t,left:n,bottom:r,right:o}){return{x:ty(e.x,n,o),y:ty(e.y,t,r)}}function ny(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function SA(e,t){return{x:ny(e.x,t.x),y:ny(e.y,t.y)}}function TA(e,t){let n=.5;const r=tn(e),o=tn(t);return o>r?n=da(t.min,t.max-r,e.min):r>o&&(n=da(e.min,e.max-o,t.min)),Ar(0,1,n)}function kA(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const gf=.35;function CA(e=gf){return e===!1?e=0:e===!0&&(e=gf),{x:ry(e,"left","right"),y:ry(e,"top","bottom")}}function ry(e,t,n){return{min:oy(e,t),max:oy(e,n)}}function oy(e,t){return typeof e=="number"?e:e[t]||0}const EA=new WeakMap;class NA{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pa(d).point)},s=(d,m)=>{const{drag:T,dragPropagation:P,onDragStart:C}=this.getProps();if(T&&!P&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UP(T),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),In(x=>{let v=this.getAxisMotionValue(x).get()||0;if(mr.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const R=w.layout.layoutBox[x];R&&(v=tn(R)*(parseFloat(v)/100))}}this.originPoint[x]=v}),C&&st.postRender(()=>C(d,m)),ff(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},l=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m;const{dragPropagation:T,dragDirectionLock:P,onDirectionLock:C,onDrag:k}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:x}=m;if(P&&this.currentDirection===null){this.currentDirection=PA(x),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),k&&k(d,m)},c=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m,this.stop(d,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>In(d=>{var m;return this.getAnimationState(d)==="paused"&&((m=this.getAxisMotionValue(d).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new o1(t,{onSessionStart:i,onStart:s,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:r1(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!r)return;const{velocity:s}=o;this.startAnimation(s);const{onDragEnd:l}=this.getProps();l&&st.postRender(()=>l(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!sl(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=wA(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,o=this.constraints;t&&Ci(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=bA(r.layoutBox,t):this.constraints=!1,this.elastic=CA(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&In(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=kA(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ci(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=gA(r,o.root,this.visualElement.getTransformPagePoint());let s=SA(o.layout.layoutBox,i);if(n){const l=n(aA(s));this.hasMutatedConstraints=!!l,l&&(s=Qw(l))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=In(h=>{if(!sl(h,n,this.currentDirection))return;let d=c&&c[h]||{};s&&(d={min:0,max:0});const m=o?200:1e6,T=o?40:1e7,P={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,P)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ff(this.visualElement,t),r.start(sm(t,r,0,n,this.visualElement,!1))}stopAnimation(){In(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){In(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){In(n=>{const{drag:r}=this.getProps();if(!sl(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:s,max:l}=o.layout.layoutBox[n];i.set(t[n]-ut(s,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ci(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};In(s=>{const l=this.getAxisMotionValue(s);if(l&&this.constraints!==!1){const c=l.get();o[s]=TA({min:c,max:c},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),In(s=>{if(!sl(s,t,null))return;const l=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];l.set(ut(c,u,o[s]))})}addListeners(){if(!this.visualElement.current)return;EA.set(this.visualElement,this);const t=this.visualElement.current,n=Us(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ci(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),st.read(r);const s=ya(window,"resize",()=>this.scalePositionWithinConstraints()),l=o.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(In(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{s(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:s=gf,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:s,dragMomentum:l}}}function sl(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function PA(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jA extends go{constructor(t){super(t),this.removeGroupControls=$n,this.removeListeners=$n,this.controls=new NA(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$n}unmount(){this.removeGroupControls(),this.removeListeners()}}const iy=e=>(t,n)=>{e&&st.postRender(()=>e(t,n))};class AA extends go{constructor(){super(...arguments),this.removePointerDownListener=$n}onPointerDown(t){this.session=new o1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:iy(t),onStart:iy(n),onMove:r,onEnd:(i,s)=>{delete this.session,o&&st.postRender(()=>o(i,s))}}}mount(){this.removePointerDownListener=Us(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sy(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ks={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ke.test(e))e=parseFloat(e);else return e;const n=sy(e,t.target.x),r=sy(e,t.target.y);return`${n}% ${r}%`}},RA={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=co.parse(e);if(o.length>5)return r;const i=co.createTransformer(e),s=typeof o[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;o[0+s]/=l,o[1+s]/=c;const u=ut(l,c,.5);return typeof o[2+s]=="number"&&(o[2+s]/=u),typeof o[3+s]=="number"&&(o[3+s]/=u),i(o)}};let ay=!1;class IA extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;gj(MA),i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),ay&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Pl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,ay=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||st.postRender(()=>{const l=s.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Xh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function s1(e){const[t,n]=Mw(),r=p.useContext(Eh);return a.jsx(IA,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(Ow),isPresent:t,safeToRemove:n})}const MA={borderRadius:{...ks,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ks,borderTopRightRadius:ks,borderBottomLeftRadius:ks,borderBottomRightRadius:ks,boxShadow:RA};function DA(e,t,n){const r=Yt(e)?e:Ki(e);return r.start(sm("",r,t,n)),r.animation}const LA=(e,t)=>e.depth-t.depth;class FA{constructor(){this.children=[],this.isDirty=!1}add(t){jh(this.children,t),this.isDirty=!0}remove(t){Ah(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LA),this.isDirty=!1,this.children.forEach(t)}}function $A(e,t){const n=fn.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(lo(r),e(i-t))};return st.setup(r,!0),()=>lo(r)}const a1=["TopLeft","TopRight","BottomLeft","BottomRight"],OA=a1.length,ly=e=>typeof e=="string"?parseFloat(e):e,cy=e=>typeof e=="number"||ke.test(e);function VA(e,t,n,r,o,i){o?(e.opacity=ut(0,n.opacity??1,_A(r)),e.opacityExit=ut(t.opacity??1,0,UA(r))):i&&(e.opacity=ut(t.opacity??1,n.opacity??1,r));for(let s=0;s<OA;s++){const l=`border${a1[s]}Radius`;let c=uy(t,l),u=uy(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||cy(c)===cy(u)?(e[l]=Math.max(ut(ly(c),ly(u),r),0),(mr.test(u)||mr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=ut(t.rotate||0,n.rotate||0,r))}function uy(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _A=l1(0,.5,ew),UA=l1(.5,.95,$n);function l1(e,t,n){return r=>r<e?0:r>t?1:n(da(e,t,r))}function dy(e,t){e.min=t.min,e.max=t.max}function Rn(e,t){dy(e.x,t.x),dy(e.y,t.y)}function fy(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function hy(e,t,n,r,o){return e-=t,e=ac(e,1/n,r),o!==void 0&&(e=ac(e,1/o,r)),e}function zA(e,t=0,n=1,r=.5,o,i=e,s=e){if(mr.test(t)&&(t=parseFloat(t),t=ut(s.min,s.max,t/100)-s.min),typeof t!="number")return;let l=ut(i.min,i.max,r);e===i&&(l-=t),e.min=hy(e.min,t,n,l,o),e.max=hy(e.max,t,n,l,o)}function my(e,t,[n,r,o],i,s){zA(e,t[n],t[r],t[o],t.scale,i,s)}const BA=["x","scaleX","originX"],WA=["y","scaleY","originY"];function py(e,t,n,r){my(e.x,t,BA,n?n.x:void 0,r?r.x:void 0),my(e.y,t,WA,n?n.y:void 0,r?r.y:void 0)}function gy(e){return e.translate===0&&e.scale===1}function c1(e){return gy(e.x)&&gy(e.y)}function yy(e,t){return e.min===t.min&&e.max===t.max}function GA(e,t){return yy(e.x,t.x)&&yy(e.y,t.y)}function vy(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function u1(e,t){return vy(e.x,t.x)&&vy(e.y,t.y)}function xy(e){return tn(e.x)/tn(e.y)}function wy(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class HA{constructor(){this.members=[]}add(t){jh(this.members,t),t.scheduleRender()}remove(t){if(Ah(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KA(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((o||i||s)&&(r=`translate3d(${o}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:m,skewX:T,skewY:P}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),T&&(r+=`skewX(${T}deg) `),P&&(r+=`skewY(${P}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Ou=["","X","Y","Z"],YA=1e3;let XA=0;function Vu(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function d1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Kw(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",st,!(o||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&d1(r)}function f1({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(s={},l=t==null?void 0:t()){this.id=XA++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZA),this.nodes.forEach(nR),this.nodes.forEach(rR),this.nodes.forEach(JA)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new FA)}addEventListener(s,l){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Mh),this.eventHandlers.get(s).add(l)}notifyListeners(s,...l){const c=this.eventHandlers.get(s);c&&c.notify(...l)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=Iw(s)&&!KP(s),this.instance=s;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let h,d=0;const m=()=>this.root.updateBlockedByResize=!1;st.read(()=>{d=window.innerWidth}),e(s,()=>{const T=window.innerWidth;T!==d&&(d=T,this.root.updateBlockedByResize=!0,h&&h(),h=$A(m,250),Pl.hasAnimatedSinceResize&&(Pl.hasAnimatedSinceResize=!1,this.nodes.forEach(Ty)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:m,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||u.getDefaultTransition()||lR,{onLayoutAnimationStart:C,onLayoutAnimationComplete:k}=u.getProps(),x=!this.targetLayout||!u1(this.targetLayout,T),v=!d&&m;if(this.options.layoutRoot||this.resumeFrom||v||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Kh(P,"layout"),onPlay:C,onComplete:k};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,v)}else d||Ty(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),lo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oR),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&d1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(by);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Sy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tR),this.nodes.forEach(qA),this.nodes.forEach(QA)):this.nodes.forEach(Sy),this.clearAllSnapshots();const l=fn.now();Ot.delta=Ar(0,1e3/60,l-Ot.timestamp),Ot.timestamp=l,Ot.isProcessing=!0,ju.update.process(Ot),ju.preRender.process(Ot),ju.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eR),this.sharedNodes.forEach(iR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tn(this.snapshot.measuredBox.x)&&!tn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!o)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!c1(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;s&&this.instance&&(l||Ao(this.latestValues)||h)&&(o(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return s&&(c=this.removeTransform(c)),cR(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return yt();const l=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(uR))){const{scroll:h}=this.root;h&&(Ni(l.x,h.offset.x),Ni(l.y,h.offset.y))}return l}removeElementScroll(s){var c;const l=yt();if(Rn(l,s),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:m}=h;h!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&Rn(l,s),Ni(l.x,d.offset.x),Ni(l.y,d.offset.y))}return l}applyTransform(s,l=!1){const c=yt();Rn(c,s);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Pi(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ao(h.latestValues)&&Pi(c,h.latestValues)}return Ao(this.latestValues)&&Pi(c,this.latestValues),c}removeTransform(s){const l=yt();Rn(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ao(u.latestValues))continue;mf(u.latestValues)&&u.updateSnapshot();const h=yt(),d=u.measurePageBox();Rn(h,d),py(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ao(this.latestValues)&&py(l,this.latestValues),l}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Bs(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rn(this.target,this.layout.layoutBox),t1(this.target,this.targetDelta)):Rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Bs(this.relativeTargetOrigin,this.target,T.target),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mf(this.parent.latestValues)||e1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var P;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(P=this.parent)!=null&&P.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Rn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;pA(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=yt());const{target:T}=s;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fy(this.prevProjectionDelta.x,this.projectionDelta.x),fy(this.prevProjectionDelta.y,this.projectionDelta.y)),zs(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!wy(this.projectionDelta.x,this.prevProjectionDelta.x)||!wy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ei(),this.projectionDelta=Ei(),this.projectionDeltaWithTransform=Ei()}setAnimationOrigin(s,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=Ei();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=yt(),T=c?c.source:void 0,P=this.layout?this.layout.source:void 0,C=T!==P,k=this.getStack(),x=!k||k.members.length<=1,v=!!(C&&!x&&this.options.crossfade===!0&&!this.path.some(aR));this.animationProgress=0;let w;this.mixTargetDelta=R=>{const M=R/1e3;ky(d.x,s.x,M),ky(d.y,s.y,M),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bs(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sR(this.relativeTarget,this.relativeTargetOrigin,m,M),w&&GA(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=yt()),Rn(w,this.relativeTarget)),C&&(this.animationValues=h,VA(h,u,this.latestValues,M,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(lo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{Pl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ki(0)),this.currentAnimation=DA(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),s.onUpdate&&s.onUpdate(h)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=s;if(!(!l||!c||!u)){if(this!==s&&this.layout&&u&&h1(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||yt();const d=tn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+d;const m=tn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+m}Rn(l,c),Pi(l,h),zs(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(s,l){this.sharedNodes.has(s)||this.sharedNodes.set(s,new HA),this.sharedNodes.get(s).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var l;const{layoutId:s}=this.options;return s?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:s}=this.options;return s?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let l=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Vu("z",s,u,this.animationValues);for(let h=0;h<Ou.length;h++)Vu(`rotate${Ou[h]}`,s,u,this.animationValues),Vu(`skew${Ou[h]}`,s,u,this.animationValues);s.render();for(const h in u)s.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);s.scheduleRender()}applyProjectionStyles(s,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Nl(l==null?void 0:l.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Nl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ao(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=KA(this.projectionDeltaWithTransform,this.treeScale,h);c&&(d=c(h,d)),s.transform=d;const{x:m,y:T}=this.projectionDelta;s.transformOrigin=`${m.origin*100}% ${T.origin*100}% 0`,u.animationValues?s.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:s.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const P in pa){if(h[P]===void 0)continue;const{correct:C,applyTo:k,isCSSVariable:x}=pa[P],v=d==="none"?h[P]:C(h[P],u);if(k){const w=k.length;for(let R=0;R<w;R++)s[k[R]]=v}else x?this.options.visualElement.renderState.vars[P]=v:s[P]=v}this.options.layoutId&&(s.pointerEvents=u===this?Nl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var l;return(l=s.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(by),this.root.sharedNodes.clear()}}}function qA(e){e.updateLayout()}function QA(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?In(d=>{const m=s?t.measuredBox[d]:t.layoutBox[d],T=tn(m);m.min=r[d].min,m.max=m.min+T}):h1(i,t.layoutBox,r)&&In(d=>{const m=s?t.measuredBox[d]:t.layoutBox[d],T=tn(r[d]);m.max=m.min+T,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+T)});const l=Ei();zs(l,r,t.layoutBox);const c=Ei();s?zs(c,e.applyTransform(o,!0),t.measuredBox):zs(c,r,t.layoutBox);const u=!c1(l);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:T}=d;if(m&&T){const P=yt();Bs(P,t.layoutBox,m.layoutBox);const C=yt();Bs(C,r,T.layoutBox),u1(P,C)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=C,e.relativeTargetOrigin=P,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function ZA(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function JA(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function eR(e){e.clearSnapshot()}function by(e){e.clearMeasurements()}function Sy(e){e.isLayoutDirty=!1}function tR(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ty(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nR(e){e.resolveTargetDelta()}function rR(e){e.calcProjection()}function oR(e){e.resetSkewAndRotation()}function iR(e){e.removeLeadSnapshot()}function ky(e,t,n){e.translate=ut(t.translate,0,n),e.scale=ut(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Cy(e,t,n,r){e.min=ut(t.min,n.min,r),e.max=ut(t.max,n.max,r)}function sR(e,t,n,r){Cy(e.x,t.x,n.x,r),Cy(e.y,t.y,n.y,r)}function aR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const lR={duration:.45,ease:[.4,0,.1,1]},Ey=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ny=Ey("applewebkit/")&&!Ey("chrome/")?Math.round:$n;function Py(e){e.min=Ny(e.min),e.max=Ny(e.max)}function cR(e){Py(e.x),Py(e.y)}function h1(e,t,n){return e==="position"||e==="preserve-aspect"&&!hA(xy(t),xy(n),.2)}function uR(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const dR=f1({attachResizeListener:(e,t)=>ya(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_u={current:void 0},m1=f1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_u.current){const e=new dR({});e.mount(window),e.setOptions({layoutScroll:!0}),_u.current=e}return _u.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fR={pan:{Feature:AA},drag:{Feature:jA,ProjectionNode:m1,MeasureLayout:s1}};function jy(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=r[o];i&&st.postRender(()=>i(t,Pa(t)))}class hR extends go{mount(){const{current:t}=this.node;t&&(this.unmount=zP(t,(n,r)=>(jy(this.node,r,"Start"),o=>jy(this.node,o,"End"))))}unmount(){}}class mR extends go{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ca(ya(this.node.current,"focus",()=>this.onFocus()),ya(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ay(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=r[o];i&&st.postRender(()=>i(t,Pa(t)))}class pR extends go{mount(){const{current:t}=this.node;t&&(this.unmount=HP(t,(n,r)=>(Ay(this.node,r,"Start"),(o,{success:i})=>Ay(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yf=new WeakMap,Uu=new WeakMap,gR=e=>{const t=yf.get(e.target);t&&t(e)},yR=e=>{e.forEach(gR)};function vR({root:e,...t}){const n=e||document;Uu.has(n)||Uu.set(n,{});const r=Uu.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(yR,{root:e,...t})),r[o]}function xR(e,t,n){const r=vR(t);return yf.set(e,n),r.observe(e),()=>{yf.delete(e),r.unobserve(e)}}const wR={some:0,all:1};class bR extends go{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:wR[o]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=u?h:d;m&&m(c)};return xR(this.node.current,s,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(SR(t,n))&&this.startObserver()}unmount(){}}function SR({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const TR={inView:{Feature:bR},tap:{Feature:pR},focus:{Feature:mR},hover:{Feature:hR}},kR={layout:{ProjectionNode:m1,MeasureLayout:s1}},vf={current:null},p1={current:!1};function CR(){if(p1.current=!0,!!Ph)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>vf.current=e.matches;e.addEventListener("change",t),t()}else vf.current=!1}const ER=new WeakMap;function NR(e,t,n){for(const r in t){const o=t[r],i=n[r];if(Yt(o))e.addValue(r,o);else if(Yt(i))e.addValue(r,Ki(o,{owner:e}));else if(i!==o)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(o):s.hasAnimated||s.set(o)}else{const s=e.getStaticValue(r);e.addValue(r,Ki(s!==void 0?s:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ry=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PR{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:i,visualState:s},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Gh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=fn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,st.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Rc(n),this.isVariantNode=Fw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in d){const T=d[m];c[m]!==void 0&&Yt(T)&&T.set(c[m],!1)}}mount(t){this.current=t,ER.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),p1.current||CR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),lo(this.notifyUpdate),lo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ss.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yi){const n=Yi[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ry.length;r++){const o=Ry[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i="on"+o,s=t[i];s&&(this.propEventSubscriptions[o]=this.on(o,s))}this.prevMotionValues=NR(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ki(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Wx(r)||Hx(r))?r=parseFloat(r):!XP(r)&&co.test(n)&&(r=Nw(t,n)),this.setBaseTarget(t,Yt(r)?r.get():r)),Yt(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=om(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Yt(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Mh),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class g1 extends PR{constructor(){super(...arguments),this.KeyframeResolver=$P}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Yt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function y1(e,{style:t,vars:n},r,o){const i=e.style;let s;for(s in t)i[s]=t[s];o==null||o.applyProjectionStyles(i,r);for(s in n)i.setProperty(s,n[s])}function jR(e){return window.getComputedStyle(e)}class AR extends g1{constructor(){super(...arguments),this.type="html",this.renderInstance=y1}readValueFromInstance(t,n){var r;if(ss.has(n))return(r=this.projection)!=null&&r.isProjecting?of(n):nP(t,n);{const o=jR(t),i=(Fh(n)?o.getPropertyValue(n):o[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return n1(t,n)}build(t,n,r){tm(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return im(t,n,r)}}const v1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RR(e,t,n,r){y1(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(v1.has(o)?o:em(o),t.attrs[o])}class IR extends g1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ss.has(n)){const r=Ew(n);return r&&r.default||0}return n=v1.has(n)?n:em(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Hw(t,n,r)}build(t,n,r){zw(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,o){RR(t,n,r,o)}mount(t){this.isSVGTag=Ww(t.tagName),super.mount(t)}}const MR=(e,t)=>rm(e)?new IR(t):new AR(t,{allowProjection:e!==p.Fragment}),DR=Mj({...iA,...TR,...fR,...kR},MR),xe=oj(DR),Fi=({type:e="text",label:t,placeholder:n,value:r,onChange:o,onBlur:i,error:s,icon:l,required:c=!1,disabled:u=!1,className:h})=>{const[d,m]=p.useState(!1),[T,P]=p.useState(!1),C=()=>{switch(l){case"email":return a.jsx(mN,{className:"h-5 w-5 text-gray-400"});case"password":case"lock":return a.jsx(Px,{className:"h-5 w-5 text-gray-400"});case"user":return a.jsx(Ix,{className:"h-5 w-5 text-gray-400"});default:return null}},k=e==="password"&&d?"text":e;return a.jsxs("div",{className:St("space-y-2",h),children:[t&&a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[t,c&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[l&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:C()}),a.jsx("input",{type:k,value:r,onChange:x=>o(x.target.value),onFocus:()=>P(!0),onBlur:()=>{P(!1),i==null||i()},placeholder:n,disabled:u,className:St("w-full px-4 py-3 border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:bg-gray-50 disabled:cursor-not-allowed",l&&"pl-10",e==="password"&&"pr-12",s?"border-red-300 focus:ring-red-500":T?"border-blue-300":"border-gray-300","placeholder:text-gray-400")}),e==="password"&&a.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:d?a.jsx(Cx,{className:"h-5 w-5"}):a.jsx(Ex,{className:"h-5 w-5"})})]}),s&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[a.jsx(Tx,{className:"h-4 w-4"}),a.jsx("span",{children:s})]})]})};function Iy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function x1(...e){return t=>{let n=!1;const r=e.map(o=>{const i=Iy(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():Iy(e[o],null)}}}}function Ut(...e){return p.useCallback(x1(...e),e)}function va(e){const t=FR(e),n=p.forwardRef((r,o)=>{const{children:i,...s}=r,l=p.Children.toArray(i),c=l.find(OR);if(c){const u=c.props.children,h=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return a.jsx(t,{...s,ref:o,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return a.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}var LR=va("Slot");function FR(e){const t=p.forwardRef((n,r)=>{const{children:o,...i}=n;if(p.isValidElement(o)){const s=_R(o),l=VR(i,o.props);return o.type!==p.Fragment&&(l.ref=r?x1(r,s):s),p.cloneElement(o,l)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var w1=Symbol("radix.slottable");function $R(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=w1,t}function OR(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===w1}function VR(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...l)=>{const c=i(...l);return o(...l),c}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function _R(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const My=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Dy=Lx,UR=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Dy(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:i}=t,s=Object.keys(o).map(u=>{const h=n==null?void 0:n[u],d=i==null?void 0:i[u];if(h===null)return null;const m=My(h)||My(d);return o[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[d,m]=h;return m===void 0||(u[d]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:d,className:m,...T}=h;return Object.entries(T).every(P=>{let[C,k]=P;return Array.isArray(k)?k.includes({...i,...l}[C]):{...i,...l}[C]===k})?[...u,d,m]:u},[]);return Dy(e,s,c,n==null?void 0:n.class,n==null?void 0:n.className)},am=UR("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fe=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},i)=>{const s=r?LR:"button";return a.jsx(s,{className:St(am({variant:t,size:n,className:e})),ref:i,...o})});fe.displayName="Button";const Nt=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:St("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Nt.displayName="Card";const Xi=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:St("flex flex-col space-y-1.5 p-6",e),...t}));Xi.displayName="CardHeader";const ja=p.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:St("text-2xl font-semibold leading-none tracking-tight",e),...t}));ja.displayName="CardTitle";const Ic=p.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:St("text-sm text-muted-foreground",e),...t}));Ic.displayName="CardDescription";const wt=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:St("p-6 pt-0",e),...t}));wt.displayName="CardContent";const zR=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:St("flex items-center p-6 pt-0",e),...t}));zR.displayName="CardFooter";const b1=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{isValid:!0}:{isValid:!1,message:"Please enter a valid email address"}:{isValid:!1,message:"Email is required"},S1=e=>{const t=[];let n=0;e.length<8?t.push("Password should be at least 8 characters long"):n+=1,/[a-z]/.test(e)?n+=1:t.push("Add lowercase letters"),/[A-Z]/.test(e)?n+=1:t.push("Add uppercase letters"),/[0-9]/.test(e)?n+=1:t.push("Add numbers"),/[^A-Za-z0-9]/.test(e)?n+=1:t.push("Add special characters");let r="";switch(n){case 0:case 1:r="Very weak";break;case 2:r="Weak";break;case 3:r="Fair";break;case 4:r="Good";break;case 5:r="Strong";break}return{score:n,feedback:r,suggestions:t}},T1=e=>{if(!e)return{isValid:!1,message:"Password is required"};if(e.length<8)return{isValid:!1,message:"Password must be at least 8 characters long"};const t=S1(e);return t.score<3?{isValid:!1,message:`Password is too weak. ${t.suggestions[0]}`}:{isValid:!0}},BR=(e,t)=>t?e!==t?{isValid:!1,message:"Passwords do not match"}:{isValid:!0}:{isValid:!1,message:"Please confirm your password"},WR=e=>{switch(e){case 0:case 1:return"bg-red-500";case 2:return"bg-orange-500";case 3:return"bg-yellow-500";case 4:return"bg-blue-500";case 5:return"bg-green-500";default:return"bg-gray-300"}},GR=()=>{const e=ns(),{login:t,loading:n,clearError:r}=Nc(),{addToast:o}=rs(),[i,s]=p.useState({email:"",password:""}),[l,c]=p.useState({email:"",password:""}),[u,h]=p.useState({email:!1,password:!1});p.useEffect(()=>{r()},[r]);const d=(k,x)=>{s(v=>({...v,[k]:x})),l[k]&&c(v=>({...v,[k]:""}))},m=k=>{h(x=>({...x,[k]:!0})),T(k,i[k])},T=(k,x)=>{let v="";switch(k){case"email":const w=b1(x);w.isValid||(v=w.message||"");break;case"password":const R=T1(x);R.isValid||(v=R.message||"");break}return c(w=>({...w,[k]:v})),!v},P=()=>{const k=T("email",i.email),x=T("password",i.password);return k&&x},C=async k=>{var x,v;if(k.preventDefault(),!P()){o({type:"error",title:"Validation Error",message:"Please fix the errors in the form"});return}try{await t(i.email,i.password),e("/dashboard")}catch(w){(x=w==null?void 0:w.message)!=null&&x.includes("Invalid credentials")?o({type:"error",title:"Login Failed",message:"Invalid email or password"}):(v=w==null?void 0:w.message)!=null&&v.includes("Network")&&o({type:"error",title:"Connection Error",message:"Unable to connect to server. Please check your internet connection."})}};return a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs(xe.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[a.jsx(xe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:a.jsx(qr,{className:"w-8 h-8 text-white"})}),a.jsx(xe.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-3xl font-bold text-gray-900 mb-2",children:"StoryMaker AI"}),a.jsxs(xe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"text-gray-600 flex items-center justify-center gap-2",children:[a.jsx(Fo,{className:"w-4 h-4"}),"Create amazing stories with AI"]})]}),a.jsx(xe.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:a.jsxs(Nt,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[a.jsxs(Xi,{className:"text-center pb-4",children:[a.jsx(ja,{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),a.jsx(Ic,{className:"text-gray-600",children:"Sign in to your account to continue"})]}),a.jsxs(wt,{children:[a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsx(Fi,{type:"email",label:"Email Address",placeholder:"Enter your email",value:i.email,onChange:k=>d("email",k),onBlur:()=>m("email"),error:u.email?l.email:"",icon:"email",required:!0}),a.jsx(Fi,{type:"password",label:"Password",placeholder:"Enter your password",value:i.password,onChange:k=>d("password",k),onBlur:()=>m("password"),error:u.password?l.password:"",icon:"password",required:!0}),a.jsx(fe,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",disabled:n,children:n?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign In"})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),a.jsx("div",{className:"text-center",children:a.jsx(Hd,{to:"/register",className:"inline-flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all duration-200",children:"Create New Account"})})]})]})}),a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},className:"text-center mt-8 text-sm text-gray-500",children:a.jsx("p",{children:" 2024 StoryMaker AI. All rights reserved."})})]})})},HR=({password:e,className:t=""})=>{if(!e)return null;const n=S1(e),r=WR(n.score);return a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Password strength:"}),a.jsx("span",{className:`text-sm font-medium ${n.score<=1?"text-red-600":n.score===2?"text-orange-600":n.score===3?"text-yellow-600":n.score===4?"text-blue-600":"text-green-600"}`,children:n.feedback})]}),a.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(o=>a.jsx("div",{className:`h-2 flex-1 rounded-full transition-all duration-300 ${o<=n.score?r:"bg-gray-200"}`},o))}),n.suggestions.length>0&&a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsx("p",{className:"font-medium",children:"Suggestions:"}),a.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:n.suggestions.slice(0,3).map((o,i)=>a.jsx("li",{children:o},i))})]})]})},KR=()=>{const e=ns(),{register:t,loading:n,clearError:r}=Nc(),{addToast:o}=rs(),[i,s]=p.useState({email:"",password:"",confirmPassword:""}),[l,c]=p.useState({email:"",password:"",confirmPassword:""}),[u,h]=p.useState({email:!1,password:!1,confirmPassword:!1});p.useEffect(()=>{r()},[r]);const d=(k,x)=>{s(v=>({...v,[k]:x})),l[k]&&c(v=>({...v,[k]:""})),k==="password"&&u.confirmPassword&&T("confirmPassword",i.confirmPassword)},m=k=>{h(x=>({...x,[k]:!0})),T(k,i[k])},T=(k,x)=>{let v="";switch(k){case"email":const w=b1(x);w.isValid||(v=w.message||"");break;case"password":const R=T1(x);R.isValid||(v=R.message||"");break;case"confirmPassword":const M=BR(i.password,x);M.isValid||(v=M.message||"");break}return c(w=>({...w,[k]:v})),!v},P=()=>{const k=T("email",i.email),x=T("password",i.password),v=T("confirmPassword",i.confirmPassword);return k&&x&&v},C=async k=>{var x,v,w,R;if(k.preventDefault(),!P()){o({type:"error",title:"Validation Error",message:"Please fix the errors in the form"});return}try{await t(i.email,i.password),o({type:"success",title:"Account Created!",message:"Welcome to StoryMaker AI! Your account has been created successfully."}),e("/dashboard")}catch(M){(x=M==null?void 0:M.message)!=null&&x.includes("already exists")||(v=M==null?void 0:M.message)!=null&&v.includes("duplicate")?o({type:"error",title:"Account Already Exists",message:"An account with this email already exists. Please try logging in instead."}):(w=M==null?void 0:M.message)!=null&&w.includes("Network")?o({type:"error",title:"Connection Error",message:"Unable to connect to server. Please check your internet connection."}):(R=M==null?void 0:M.message)!=null&&R.includes("weak")&&o({type:"error",title:"Weak Password",message:"Please choose a stronger password for your account."})}};return a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx(xe.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1,duration:.5},className:"mb-6",children:a.jsxs(Hd,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[a.jsx(Yn,{className:"w-4 h-4"}),"Back to Login"]})}),a.jsxs(xe.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[a.jsx(xe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:a.jsx(qr,{className:"w-8 h-8 text-white"})}),a.jsx(xe.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-3xl font-bold text-gray-900 mb-2",children:"StoryMaker AI"}),a.jsxs(xe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"text-gray-600 flex items-center justify-center gap-2",children:[a.jsx(Fo,{className:"w-4 h-4"}),"Create amazing stories with AI"]})]}),a.jsx(xe.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:a.jsxs(Nt,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[a.jsxs(Xi,{className:"text-center pb-4",children:[a.jsx(ja,{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),a.jsx(Ic,{className:"text-gray-600",children:"Join StoryMaker AI and start creating amazing stories"})]}),a.jsxs(wt,{children:[a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsx(Fi,{type:"email",label:"Email Address",placeholder:"Enter your email",value:i.email,onChange:k=>d("email",k),onBlur:()=>m("email"),error:u.email?l.email:"",icon:"email",required:!0}),a.jsx(Fi,{type:"password",label:"Password",placeholder:"Create a strong password",value:i.password,onChange:k=>d("password",k),onBlur:()=>m("password"),error:u.password?l.password:"",icon:"password",required:!0}),i.password&&a.jsx(HR,{password:i.password,className:"mt-2"}),a.jsx(Fi,{type:"password",label:"Confirm Password",placeholder:"Confirm your password",value:i.confirmPassword,onChange:k=>d("confirmPassword",k),onBlur:()=>m("confirmPassword"),error:u.confirmPassword?l.confirmPassword:"",icon:"password",required:!0}),a.jsx(fe,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",disabled:n,children:n?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating account..."]}):"Create Account"})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),a.jsx("div",{className:"text-center",children:a.jsx(Hd,{to:"/login",className:"inline-flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all duration-200",children:"Sign In to Existing Account"})})]})]})}),a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},className:"text-center mt-8 text-sm text-gray-500",children:a.jsx("p",{children:" 2024 StoryMaker AI. All rights reserved."})})]})})},YR=()=>{var Tt,Qe;const e=ns(),t=Jo(),{user:n,logout:r}=Nc(),{addToast:o}=rs(),[i,s]=p.useState(!1),[l,c]=p.useState([]),[u,h]=p.useState(!0),[d,m]=p.useState(null),[T,P]=p.useState(!1),[C,k]=p.useState({x:0,y:0}),[x,v]=p.useState(!1),[w,R]=p.useState(!1),[M,z]=p.useState(!1),[U,F]=p.useState(!1),[se,J]=p.useState(""),[ve,ne]=p.useState(!1),[Ae,oe]=p.useState(!1),gt=async()=>{s(!0);try{await r(),e("/login")}catch(re){console.error("Logout failed:",re)}finally{s(!1)}},N=()=>{e("/create-story")},Te=async()=>{try{h(!0);const re=await vt.getStories();re.success&&(c(re.data.stories),o({type:"success",title:"Stories Updated",message:"Your local stories have been refreshed"}))}catch(re){console.error("Error refreshing stories:",re),o({type:"error",title:"Refresh Failed",message:"Could not refresh stories"})}finally{h(!1)}},X=(re,Pe)=>{Pe.stopPropagation();const Le=Pe.currentTarget.getBoundingClientRect(),an=window.innerWidth,ln=window.innerHeight;let or=Le.left,Fe=Le.bottom+5;or+200>an&&(or=Le.right-200),Fe+200>ln&&(Fe=Le.top-200),k({x:or,y:Fe}),m(re),P(!0)},ge=async()=>{if(!(!d||!se.trim())){ne(!0);try{(await vt.updateStory(d.id,{title:se.trim()})).success&&(c(l.map(Pe=>Pe.id===d.id?{...Pe,title:se.trim()}:Pe)),o({type:"success",title:"Story Renamed",message:"Story name has been updated successfully"}),v(!1),J(""))}catch(re){console.error("Error renaming story:",re),o({type:"error",title:"Rename Failed",message:"Failed to rename story"})}finally{ne(!1)}}},me=async()=>{if(d){oe(!0);try{(await vt.deleteStory(d.id)).success&&(c(l.filter(Pe=>Pe.id!==d.id)),o({type:"success",title:"Story Deleted",message:"Story has been permanently deleted"}),F(!1))}catch(re){console.error("Error deleting story:",re),o({type:"error",title:"Delete Failed",message:"Failed to delete story"})}finally{oe(!1)}}},je=re=>{e("/create-story",{state:{storyId:re.id}})},Ue=re=>{console.log(re),o({type:"info",title:"Download Coming Soon",message:"Video download functionality will be implemented soon"})},De=re=>{if(re.storySummary)return re.storySummary;if(re.content&&re.content.includes("*****")){const an=re.content.split("*****");if(an.length>=3)return an[2].trim()}const Le=(re.content||"").split(" ").slice(0,50).join(" ");return Le.length>100?Le.substring(0,100)+"...":Le},At=re=>re.youtubeTitle?re.youtubeTitle:re.title||"Untitled Story",Ve=re=>{if(re.youtubeDescription)return re.youtubeDescription;const Pe=re.content||"";return Pe.length>200?Pe.substring(0,200)+"...":Pe},at=re=>{const Pe=[];if(re.genre&&Pe.push(re.genre),re.videoStyle&&Pe.push(re.videoStyle),re.language&&Pe.push(re.language),re.youtubeTags){const Le=re.youtubeTags.split(",").map(an=>an.trim());Pe.push(...Le)}return Pe};p.useEffect(()=>{var Pe;(async()=>{try{h(!0);const Le=await vt.getStories();console.log(Le),Le.success?c(Le.data.stories):o({type:"error",title:"Failed to load stories",message:"Could not fetch your local stories"})}catch(Le){console.error("Error fetching stories:",Le),o({type:"error",title:"Failed to load stories",message:"Could not fetch your local stories"})}finally{h(!1)}})(),(Pe=t.state)!=null&&Pe.refresh&&e(t.pathname,{replace:!0,state:{}})},[o,(Tt=t.state)==null?void 0:Tt.refresh,e,t.pathname]);const gn=l.filter(re=>re.status==="completed").length,yn=[{title:"Stories Created",value:l.length.toString(),icon:qr,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Completed Stories",value:gn.toString(),icon:wN,color:"text-green-600",bgColor:"bg-green-50"}],ye={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Xe={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return a.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[a.jsx(xe.header,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.6},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(xe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring",stiffness:200},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(qr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"StoryMaker AI"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Create amazing stories"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(fe,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:a.jsx(sN,{className:"w-5 h-5"})}),a.jsx(fe,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:a.jsx(Ax,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:n==null?void 0:n.email}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:n==null?void 0:n.subscriptionStatus})]}),a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx(Ix,{className:"w-4 h-4 text-white"})})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:gt,disabled:i,className:"text-red-600 border-red-200 hover:bg-red-50",children:[i?a.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):a.jsx(hN,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Logout"})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},className:"mb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs(xe.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(Qe=n==null?void 0:n.email)==null?void 0:Qe.split("@")[0],"! "]}),a.jsxs(xe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.5},className:"text-gray-600 flex items-center justify-center gap-2",children:[a.jsx(Fo,{className:"w-4 h-4"}),"Ready to create your next amazing story?"]})]})}),a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.6},className:"mb-8",children:a.jsx(Nt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:a.jsx(wt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quick Actions"}),a.jsx("p",{className:"text-gray-600",children:"Start creating your next masterpiece"})]}),a.jsxs(fe,{onClick:N,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",children:[a.jsx(ua,{className:"w-5 h-5 mr-2"}),"Create New Story"]})]})})})}),a.jsx(xe.div,{variants:ye,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:yn.map(re=>a.jsx(xe.div,{variants:Xe,children:a.jsx(Nt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-shadow duration-200",children:a.jsx(wt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:re.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:re.value})]}),a.jsx("div",{className:`w-12 h-12 ${re.bgColor} rounded-lg flex items-center justify-center`,children:a.jsx(re.icon,{className:`w-6 h-6 ${re.color}`})})]})})})},re.title))}),a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.6},children:a.jsxs(Nt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:[a.jsx(Xi,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(ja,{className:"text-xl font-bold text-gray-900",children:"My Video Stories"}),a.jsx(Ic,{children:"Your latest creative works"})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:Te,disabled:u,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[u?a.jsx(Dt,{className:"w-4 h-4 animate-spin"}):a.jsx(Li,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Refresh"})]})]})}),a.jsx(wt,{children:u?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Dt,{className:"w-6 h-6 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading stories..."})]}):l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stories yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first story to get started!"}),a.jsxs(fe,{onClick:N,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(ua,{className:"w-4 h-4 mr-2"}),"Create Your First Story"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((re,Pe)=>a.jsxs(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9+Pe*.1,duration:.5},className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200 overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-purple-600/20"}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx(qr,{className:"w-12 h-12 text-blue-600 mx-auto mb-2"}),a.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:[re.videoStyle||"landscape"," "," ",re.genre||"Unknown"]})]}),re.status==="completed"&&a.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Ready"}),re.status!=="completed"&&re.isDraft&&a.jsx("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full",children:"Draft"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:re.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(re.createdAt).toLocaleDateString()})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:Le=>X(re,Le),className:"ml-2 p-1 h-8 w-8",children:a.jsx(pN,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(cN,{className:"w-3 h-3 mr-1"}),Math.round((re.duration||0)/60),"m"]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(lN,{className:"w-3 h-3 mr-1"}),re.status]})]})]})]},re.id))})})]})})]}),T&&d&&a.jsx(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50",onClick:()=>P(!1),children:a.jsx(xe.div,{className:"bg-white rounded-lg shadow-xl p-2 min-w-48 border border-gray-200",style:{position:"absolute",left:C.x,top:C.y,zIndex:51},onClick:re=>re.stopPropagation(),children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>{J(d.title),v(!0),P(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(dg,{className:"w-4 h-4 mr-2"}),"Rename Story"]}),a.jsxs("button",{onClick:()=>{R(!0),P(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Story Summary"]}),d.status==="completed"?a.jsxs("button",{onClick:()=>{Ue(d),P(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(kx,{className:"w-4 h-4 mr-2"}),"Download Video"]}):a.jsxs("button",{onClick:()=>{je(d),P(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(dg,{className:"w-4 h-4 mr-2"}),"Edit Video"]}),a.jsxs("button",{onClick:()=>{z(!0),P(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(Nx,{className:"w-4 h-4 mr-2"}),"Show Meta Data"]}),a.jsx("div",{className:"border-t border-gray-200 my-1"}),a.jsxs("button",{onClick:()=>{F(!0),P(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md",children:[a.jsx(Pu,{className:"w-4 h-4 mr-2"}),"Delete Story"]})]})})}),x&&d&&a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rename Story"}),a.jsx("input",{type:"text",value:se,onChange:re=>J(re.target.value),placeholder:"Enter new story name",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx(fe,{variant:"outline",onClick:()=>{v(!1),J("")},className:"flex-1",children:"Cancel"}),a.jsxs(fe,{onClick:ge,disabled:ve||!se.trim(),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",children:[ve?a.jsx(Dt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Rename"]})]})]})}),w&&d&&a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Story Summary"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Generated Summary"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:De(d)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Story Content"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg max-h-40 overflow-y-auto",children:d.content||"No content available"})]})]}),a.jsx(fe,{onClick:()=>R(!1),className:"mt-6",children:"Close"})]})}),M&&d&&a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Story Meta Data"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Generated Headline"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:At(d)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:Ve(d)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:at(d).map((re,Pe)=>a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:re},Pe))})]}),d.stockFootageTerms&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Stock Footage Terms"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:d.stockFootageTerms.split(",").map((re,Pe)=>a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:re.trim()},Pe))})]}),d.totalChapters&&d.totalChapters>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Chapter Information"}),a.jsxs("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:["Total Chapters: ",d.totalChapters,d.chapterSummaries&&d.chapterSummaries.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium mb-1",children:"Chapter Summaries:"}),d.chapterSummaries.map((re,Pe)=>a.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[a.jsxs("strong",{children:["Chapter ",re.number,":"]})," ",re.summary]},Pe))]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Story Summary"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:De(d)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Story Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Genre:"})," ",d.genre||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Duration:"})," ",d.duration?`${Math.round(d.duration/60)}m`:"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Language:"})," ",d.language||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Video Style:"})," ",d.videoStyle||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"})," ",d.status||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Created:"})," ",d.createdAt?new Date(d.createdAt).toLocaleDateString():"N/A"]})]})]})]}),a.jsx(fe,{onClick:()=>z(!1),className:"mt-6",children:"Close"})]})}),U&&d&&a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Pu,{className:"w-6 h-6 text-red-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Story"})]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',d.title,'"? This action cannot be undone.']}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:()=>F(!1),className:"flex-1",children:"Cancel"}),a.jsxs(fe,{onClick:me,disabled:Ae,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[Ae?a.jsx(Dt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Pu,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]})},XR="modulepreload",qR=function(e,t){return new URL(e,t).href},Ly={},wr=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=qR(i,r),i in Ly)return;Ly[i]=!0;const s=i.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!r)for(let h=o.length-1;h>=0;h--){const d=o[h];if(d.href===i&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":XR,s||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),s)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};function QR(e,t){const n=p.createContext(t),r=i=>{const{children:s,...l}=i,c=p.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:s})};r.displayName=e+"Provider";function o(i){const s=p.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,o]}function Aa(e,t=[]){let n=[];function r(i,s){const l=p.createContext(s),c=n.length;n=[...n,s];const u=d=>{var x;const{scope:m,children:T,...P}=d,C=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,k=p.useMemo(()=>P,Object.values(P));return a.jsx(C.Provider,{value:k,children:T})};u.displayName=i+"Provider";function h(d,m){var C;const T=((C=m==null?void 0:m[e])==null?void 0:C[c])||l,P=p.useContext(T);if(P)return P;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[u,h]}const o=()=>{const i=n.map(s=>p.createContext(s));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return o.scopeName=e,[r,ZR(o,...t)]}function ZR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(i)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function nn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}var qi=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},JR=Pf[" useId ".trim().toString()]||(()=>{}),eI=0;function zu(e){const[t,n]=p.useState(JR());return qi(()=>{e||n(r=>r??String(eI++))},[e]),e||(t?`radix-${t}`:"")}var tI=Pf[" useInsertionEffect ".trim().toString()]||qi;function k1({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,s]=nI({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:o;{const h=p.useRef(e!==void 0);p.useEffect(()=>{const d=h.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=p.useCallback(h=>{var d;if(l){const m=rI(h)?h(e):h;m!==e&&((d=s.current)==null||d.call(s,m))}else i(h)},[l,e,i,s]);return[c,u]}function nI({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),o=p.useRef(n),i=p.useRef(t);return tI(()=>{i.current=t},[t]),p.useEffect(()=>{var s;o.current!==n&&((s=i.current)==null||s.call(i,n),o.current=n)},[n,o]),[n,r,i]}function rI(e){return typeof e=="function"}var oI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qt=oI.reduce((e,t)=>{const n=va(`Primitive.${t}`),r=p.forwardRef((o,i)=>{const{asChild:s,...l}=o,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function iI(e,t){e&&xh.flushSync(()=>e.dispatchEvent(t))}function xa(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function sI(e,t=globalThis==null?void 0:globalThis.document){const n=xa(e);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var aI="DismissableLayer",xf="dismissableLayer.update",lI="dismissableLayer.pointerDownOutside",cI="dismissableLayer.focusOutside",Fy,C1=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),E1=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:l,...c}=e,u=p.useContext(C1),[h,d]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,T]=p.useState({}),P=Ut(t,U=>d(U)),C=Array.from(u.layers),[k]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=C.indexOf(k),v=h?C.indexOf(h):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,R=v>=x,M=fI(U=>{const F=U.target,se=[...u.branches].some(J=>J.contains(F));!R||se||(o==null||o(U),s==null||s(U),U.defaultPrevented||l==null||l())},m),z=hI(U=>{const F=U.target;[...u.branches].some(J=>J.contains(F))||(i==null||i(U),s==null||s(U),U.defaultPrevented||l==null||l())},m);return sI(U=>{v===u.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&l&&(U.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Fy=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),$y(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Fy)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),$y())},[h,u]),p.useEffect(()=>{const U=()=>T({});return document.addEventListener(xf,U),()=>document.removeEventListener(xf,U)},[]),a.jsx(qt.div,{...c,ref:P,style:{pointerEvents:w?R?"auto":"none":void 0,...e.style},onFocusCapture:nn(e.onFocusCapture,z.onFocusCapture),onBlurCapture:nn(e.onBlurCapture,z.onBlurCapture),onPointerDownCapture:nn(e.onPointerDownCapture,M.onPointerDownCapture)})});E1.displayName=aI;var uI="DismissableLayerBranch",dI=p.forwardRef((e,t)=>{const n=p.useContext(C1),r=p.useRef(null),o=Ut(t,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(qt.div,{...e,ref:o})});dI.displayName=uI;function fI(e,t=globalThis==null?void 0:globalThis.document){const n=xa(e),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){N1(lI,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function hI(e,t=globalThis==null?void 0:globalThis.document){const n=xa(e),r=p.useRef(!1);return p.useEffect(()=>{const o=i=>{i.target&&!r.current&&N1(cI,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $y(){const e=new CustomEvent(xf);document.dispatchEvent(e)}function N1(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?iI(o,i):o.dispatchEvent(i)}var Bu="focusScope.autoFocusOnMount",Wu="focusScope.autoFocusOnUnmount",Oy={bubbles:!1,cancelable:!0},mI="FocusScope",P1=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[l,c]=p.useState(null),u=xa(o),h=xa(i),d=p.useRef(null),m=Ut(t,C=>c(C)),T=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let C=function(w){if(T.paused||!l)return;const R=w.target;l.contains(R)?d.current=R:Ur(d.current,{select:!0})},k=function(w){if(T.paused||!l)return;const R=w.relatedTarget;R!==null&&(l.contains(R)||Ur(d.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const M of w)M.removedNodes.length>0&&Ur(l)};document.addEventListener("focusin",C),document.addEventListener("focusout",k);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",k),v.disconnect()}}},[r,l,T.paused]),p.useEffect(()=>{if(l){_y.add(T);const C=document.activeElement;if(!l.contains(C)){const x=new CustomEvent(Bu,Oy);l.addEventListener(Bu,u),l.dispatchEvent(x),x.defaultPrevented||(pI(wI(j1(l)),{select:!0}),document.activeElement===C&&Ur(l))}return()=>{l.removeEventListener(Bu,u),setTimeout(()=>{const x=new CustomEvent(Wu,Oy);l.addEventListener(Wu,h),l.dispatchEvent(x),x.defaultPrevented||Ur(C??document.body,{select:!0}),l.removeEventListener(Wu,h),_y.remove(T)},0)}}},[l,u,h,T]);const P=p.useCallback(C=>{if(!n&&!r||T.paused)return;const k=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,x=document.activeElement;if(k&&x){const v=C.currentTarget,[w,R]=gI(v);w&&R?!C.shiftKey&&x===R?(C.preventDefault(),n&&Ur(w,{select:!0})):C.shiftKey&&x===w&&(C.preventDefault(),n&&Ur(R,{select:!0})):x===v&&C.preventDefault()}},[n,r,T.paused]);return a.jsx(qt.div,{tabIndex:-1,...s,ref:m,onKeyDown:P})});P1.displayName=mI;function pI(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ur(r,{select:t}),document.activeElement!==n)return}function gI(e){const t=j1(e),n=Vy(t,e),r=Vy(t.reverse(),e);return[n,r]}function j1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vy(e,t){for(const n of e)if(!yI(n,{upTo:t}))return n}function yI(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function vI(e){return e instanceof HTMLInputElement&&"select"in e}function Ur(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&vI(e)&&t&&e.select()}}var _y=xI();function xI(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Uy(e,t),e.unshift(t)},remove(t){var n;e=Uy(e,t),(n=e[0])==null||n.resume()}}}function Uy(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function wI(e){return e.filter(t=>t.tagName!=="A")}var bI="Portal",A1=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[o,i]=p.useState(!1);qi(()=>i(!0),[]);const s=n||o&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return s?XC.createPortal(a.jsx(qt.div,{...r,ref:t}),s):null});A1.displayName=bI;function SI(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var Mc=e=>{const{present:t,children:n}=e,r=TI(t),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Ut(r.ref,kI(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:i}):null};Mc.displayName="Presence";function TI(e){const[t,n]=p.useState(),r=p.useRef(null),o=p.useRef(e),i=p.useRef("none"),s=e?"mounted":"unmounted",[l,c]=SI(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=al(r.current);i.current=l==="mounted"?u:"none"},[l]),qi(()=>{const u=r.current,h=o.current;if(h!==e){const m=i.current,T=al(u);e?c("MOUNT"):T==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==T?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),qi(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,d=T=>{const C=al(r.current).includes(T.animationName);if(T.target===t&&C&&(c("ANIMATION_END"),!o.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},m=T=>{T.target===t&&(i.current=al(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function al(e){return(e==null?void 0:e.animationName)||"none"}function kI(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Gu=0;function CI(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??zy()),document.body.insertAdjacentElement("beforeend",e[1]??zy()),Gu++,()=>{Gu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Gu--}},[])}function zy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cr=function(){return cr=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cr.apply(this,arguments)};function R1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function EI(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var jl="right-scroll-bar-position",Al="width-before-scroll-bar",NI="with-scroll-bars-hidden",PI="--removed-body-scroll-bar-size";function Hu(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jI(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var AI=typeof window<"u"?p.useLayoutEffect:p.useEffect,By=new WeakMap;function RI(e,t){var n=jI(t||null,function(r){return e.forEach(function(o){return Hu(o,r)})});return AI(function(){var r=By.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(l){i.has(l)||Hu(l,null)}),i.forEach(function(l){o.has(l)||Hu(l,s)})}By.set(n,e)},[e]),n}function II(e){return e}function MI(e,t){t===void 0&&(t=II);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(l){return l!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var l=n;n=[],l.forEach(i),s=n}var c=function(){var h=s;s=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){s.push(h),u()},filter:function(h){return s=s.filter(h),n}}}};return o}function DI(e){e===void 0&&(e={});var t=MI(null);return t.options=cr({async:!0,ssr:!1},e),t}var I1=function(e){var t=e.sideCar,n=R1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,cr({},n))};I1.isSideCarExport=!0;function LI(e,t){return e.useMedium(t),I1}var M1=DI(),Ku=function(){},Dc=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Ku,onWheelCapture:Ku,onTouchMoveCapture:Ku}),o=r[0],i=r[1],s=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,d=e.shards,m=e.sideCar,T=e.noRelative,P=e.noIsolation,C=e.inert,k=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,w=e.gapMode,R=R1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=m,z=RI([n,t]),U=cr(cr({},R),o);return p.createElement(p.Fragment,null,h&&p.createElement(M,{sideCar:M1,removeScrollBar:u,shards:d,noRelative:T,noIsolation:P,inert:C,setCallbacks:i,allowPinchZoom:!!k,lockRef:n,gapMode:w}),s?p.cloneElement(p.Children.only(l),cr(cr({},U),{ref:z})):p.createElement(v,cr({},U,{className:c,ref:z}),l))});Dc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dc.classNames={fullWidth:Al,zeroRight:jl};var Wy,FI=function(){if(Wy)return Wy;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $I(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=FI();return t&&e.setAttribute("nonce",t),e}function OI(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VI(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var _I=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$I())&&(OI(t,n),VI(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},UI=function(){var e=_I();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},D1=function(){var e=UI(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},zI={left:0,top:0,right:0,gap:0},Yu=function(e){return parseInt(e||"",10)||0},BI=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Yu(n),Yu(r),Yu(o)]},WI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zI;var t=BI(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},GI=D1(),$i="data-scroll-locked",HI=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(NI,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat($i,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jl,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Al,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(jl," .").concat(jl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Al," .").concat(Al,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($i,`] {
    `).concat(PI,": ").concat(l,`px;
  }
`)},Gy=function(){var e=parseInt(document.body.getAttribute($i)||"0",10);return isFinite(e)?e:0},KI=function(){p.useEffect(function(){return document.body.setAttribute($i,(Gy()+1).toString()),function(){var e=Gy()-1;e<=0?document.body.removeAttribute($i):document.body.setAttribute($i,e.toString())}},[])},YI=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;KI();var i=p.useMemo(function(){return WI(o)},[o]);return p.createElement(GI,{styles:HI(i,!t,o,n?"":"!important")})},wf=!1;if(typeof window<"u")try{var ll=Object.defineProperty({},"passive",{get:function(){return wf=!0,!0}});window.addEventListener("test",ll,ll),window.removeEventListener("test",ll,ll)}catch{wf=!1}var ai=wf?{passive:!1}:!1,XI=function(e){return e.tagName==="TEXTAREA"},L1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!XI(e)&&n[t]==="visible")},qI=function(e){return L1(e,"overflowY")},QI=function(e){return L1(e,"overflowX")},Hy=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=F1(e,r);if(o){var i=$1(e,r),s=i[1],l=i[2];if(s>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ZI=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},JI=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},F1=function(e,t){return e==="v"?qI(t):QI(t)},$1=function(e,t){return e==="v"?ZI(t):JI(t)},eM=function(e,t){return e==="h"&&t==="rtl"?-1:1},tM=function(e,t,n,r,o){var i=eM(e,window.getComputedStyle(t).direction),s=i*r,l=n.target,c=t.contains(l),u=!1,h=s>0,d=0,m=0;do{if(!l)break;var T=$1(e,l),P=T[0],C=T[1],k=T[2],x=C-k-i*P;(P||x)&&F1(e,l)&&(d+=x,m+=P);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(o&&Math.abs(d)<1||!o&&s>d)||!h&&(o&&Math.abs(m)<1||!o&&-s>m))&&(u=!0),u},cl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ky=function(e){return[e.deltaX,e.deltaY]},Yy=function(e){return e&&"current"in e?e.current:e},nM=function(e,t){return e[0]===t[0]&&e[1]===t[1]},rM=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},oM=0,li=[];function iM(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(oM++)[0],i=p.useState(D1)[0],s=p.useRef(e);p.useEffect(function(){s.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var C=EI([e.lockRef.current],(e.shards||[]).map(Yy),!0).filter(Boolean);return C.forEach(function(k){return k.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),C.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(C,k){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!s.current.allowPinchZoom;var x=cl(C),v=n.current,w="deltaX"in C?C.deltaX:v[0]-x[0],R="deltaY"in C?C.deltaY:v[1]-x[1],M,z=C.target,U=Math.abs(w)>Math.abs(R)?"h":"v";if("touches"in C&&U==="h"&&z.type==="range")return!1;var F=Hy(U,z);if(!F)return!0;if(F?M=U:(M=U==="v"?"h":"v",F=Hy(U,z)),!F)return!1;if(!r.current&&"changedTouches"in C&&(w||R)&&(r.current=M),!M)return!0;var se=r.current||M;return tM(se,k,C,se==="h"?w:R,!0)},[]),c=p.useCallback(function(C){var k=C;if(!(!li.length||li[li.length-1]!==i)){var x="deltaY"in k?Ky(k):cl(k),v=t.current.filter(function(M){return M.name===k.type&&(M.target===k.target||k.target===M.shadowParent)&&nM(M.delta,x)})[0];if(v&&v.should){k.cancelable&&k.preventDefault();return}if(!v){var w=(s.current.shards||[]).map(Yy).filter(Boolean).filter(function(M){return M.contains(k.target)}),R=w.length>0?l(k,w[0]):!s.current.noIsolation;R&&k.cancelable&&k.preventDefault()}}},[]),u=p.useCallback(function(C,k,x,v){var w={name:C,delta:k,target:x,should:v,shadowParent:sM(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(R){return R!==w})},1)},[]),h=p.useCallback(function(C){n.current=cl(C),r.current=void 0},[]),d=p.useCallback(function(C){u(C.type,Ky(C),C.target,l(C,e.lockRef.current))},[]),m=p.useCallback(function(C){u(C.type,cl(C),C.target,l(C,e.lockRef.current))},[]);p.useEffect(function(){return li.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ai),document.addEventListener("touchmove",c,ai),document.addEventListener("touchstart",h,ai),function(){li=li.filter(function(C){return C!==i}),document.removeEventListener("wheel",c,ai),document.removeEventListener("touchmove",c,ai),document.removeEventListener("touchstart",h,ai)}},[]);var T=e.removeScrollBar,P=e.inert;return p.createElement(p.Fragment,null,P?p.createElement(i,{styles:rM(o)}):null,T?p.createElement(YI,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function sM(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const aM=LI(M1,iM);var O1=p.forwardRef(function(e,t){return p.createElement(Dc,cr({},e,{ref:t,sideCar:aM}))});O1.classNames=Dc.classNames;const lM=O1;var cM=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ci=new WeakMap,ul=new WeakMap,dl={},Xu=0,V1=function(e){return e&&(e.host||V1(e.parentNode))},uM=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=V1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},dM=function(e,t,n,r){var o=uM(t,Array.isArray(e)?e:[e]);dl[n]||(dl[n]=new WeakMap);var i=dl[n],s=[],l=new Set,c=new Set(o),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};o.forEach(u);var h=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(m){if(l.has(m))h(m);else try{var T=m.getAttribute(r),P=T!==null&&T!=="false",C=(ci.get(m)||0)+1,k=(i.get(m)||0)+1;ci.set(m,C),i.set(m,k),s.push(m),C===1&&P&&ul.set(m,!0),k===1&&m.setAttribute(n,"true"),P||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return h(t),l.clear(),Xu++,function(){s.forEach(function(d){var m=ci.get(d)-1,T=i.get(d)-1;ci.set(d,m),i.set(d,T),m||(ul.has(d)||d.removeAttribute(r),ul.delete(d)),T||d.removeAttribute(n)}),Xu--,Xu||(ci=new WeakMap,ci=new WeakMap,ul=new WeakMap,dl={})}},fM=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||cM(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),dM(r,o,n,"aria-hidden")):function(){return null}},Lc="Dialog",[_1,U1]=Aa(Lc),[hM,rr]=_1(Lc),z1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,h]=k1({prop:r,defaultProp:o??!1,onChange:i,caller:Lc});return a.jsx(hM,{scope:t,triggerRef:l,contentRef:c,contentId:zu(),titleId:zu(),descriptionId:zu(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(d=>!d),[h]),modal:s,children:n})};z1.displayName=Lc;var B1="DialogTrigger",W1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(B1,n),i=Ut(t,o.triggerRef);return a.jsx(qt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":um(o.open),...r,ref:i,onClick:nn(e.onClick,o.onOpenToggle)})});W1.displayName=B1;var lm="DialogPortal",[mM,G1]=_1(lm,{forceMount:void 0}),H1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=rr(lm,t);return a.jsx(mM,{scope:t,forceMount:n,children:p.Children.map(r,s=>a.jsx(Mc,{present:n||i.open,children:a.jsx(A1,{asChild:!0,container:o,children:s})}))})};H1.displayName=lm;var lc="DialogOverlay",K1=p.forwardRef((e,t)=>{const n=G1(lc,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=rr(lc,e.__scopeDialog);return i.modal?a.jsx(Mc,{present:r||i.open,children:a.jsx(gM,{...o,ref:t})}):null});K1.displayName=lc;var pM=va("DialogOverlay.RemoveScroll"),gM=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(lc,n);return a.jsx(lM,{as:pM,allowPinchZoom:!0,shards:[o.contentRef],children:a.jsx(qt.div,{"data-state":um(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),qo="DialogContent",Y1=p.forwardRef((e,t)=>{const n=G1(qo,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=rr(qo,e.__scopeDialog);return a.jsx(Mc,{present:r||i.open,children:i.modal?a.jsx(yM,{...o,ref:t}):a.jsx(vM,{...o,ref:t})})});Y1.displayName=qo;var yM=p.forwardRef((e,t)=>{const n=rr(qo,e.__scopeDialog),r=p.useRef(null),o=Ut(t,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return fM(i)},[]),a.jsx(X1,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nn(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:nn(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0;(s.button===2||l)&&i.preventDefault()}),onFocusOutside:nn(e.onFocusOutside,i=>i.preventDefault())})}),vM=p.forwardRef((e,t)=>{const n=rr(qo,e.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return a.jsx(X1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,l;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),X1=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=e,l=rr(qo,n),c=p.useRef(null),u=Ut(t,c);return CI(),a.jsxs(a.Fragment,{children:[a.jsx(P1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:a.jsx(E1,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":um(l.open),...s,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(wM,{titleId:l.titleId}),a.jsx(SM,{contentRef:c,descriptionId:l.descriptionId})]})]})}),cm="DialogTitle",q1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(cm,n);return a.jsx(qt.h2,{id:o.titleId,...r,ref:t})});q1.displayName=cm;var Q1="DialogDescription",Z1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(Q1,n);return a.jsx(qt.p,{id:o.descriptionId,...r,ref:t})});Z1.displayName=Q1;var J1="DialogClose",eb=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(J1,n);return a.jsx(qt.button,{type:"button",...r,ref:t,onClick:nn(e.onClick,()=>o.onOpenChange(!1))})});eb.displayName=J1;function um(e){return e?"open":"closed"}var tb="DialogTitleWarning",[xM,nb]=QR(tb,{contentName:qo,titleName:cm,docsSlug:"dialog"}),wM=({titleId:e})=>{const t=nb(tb),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},bM="DialogDescriptionWarning",SM=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nb(bM).contentName}}.`;return p.useEffect(()=>{var i;const o=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},TM=z1,kM=W1,CM=H1,EM=K1,NM=Y1,PM=q1,jM=Z1,rb=eb,ob="AlertDialog",[AM,LD]=Aa(ob,[U1]),Mr=U1(),ib=e=>{const{__scopeAlertDialog:t,...n}=e,r=Mr(t);return a.jsx(TM,{...r,...n,modal:!0})};ib.displayName=ob;var RM="AlertDialogTrigger",IM=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Mr(n);return a.jsx(kM,{...o,...r,ref:t})});IM.displayName=RM;var MM="AlertDialogPortal",sb=e=>{const{__scopeAlertDialog:t,...n}=e,r=Mr(t);return a.jsx(CM,{...r,...n})};sb.displayName=MM;var DM="AlertDialogOverlay",ab=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Mr(n);return a.jsx(EM,{...o,...r,ref:t})});ab.displayName=DM;var Oi="AlertDialogContent",[LM,FM]=AM(Oi),$M=$R("AlertDialogContent"),lb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,i=Mr(n),s=p.useRef(null),l=Ut(t,s),c=p.useRef(null);return a.jsx(xM,{contentName:Oi,titleName:cb,docsSlug:"alert-dialog",children:a.jsx(LM,{scope:n,cancelRef:c,children:a.jsxs(NM,{role:"alertdialog",...i,...o,ref:l,onOpenAutoFocus:nn(o.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx($M,{children:r}),a.jsx(VM,{contentRef:s})]})})})});lb.displayName=Oi;var cb="AlertDialogTitle",ub=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Mr(n);return a.jsx(PM,{...o,...r,ref:t})});ub.displayName=cb;var db="AlertDialogDescription",fb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Mr(n);return a.jsx(jM,{...o,...r,ref:t})});fb.displayName=db;var OM="AlertDialogAction",hb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Mr(n);return a.jsx(rb,{...o,...r,ref:t})});hb.displayName=OM;var mb="AlertDialogCancel",pb=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=FM(mb,n),i=Mr(n),s=Ut(t,o);return a.jsx(rb,{...i,...r,ref:s})});pb.displayName=mb;var VM=({contentRef:e})=>{const t=`\`${Oi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Oi}\` by passing a \`${db}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Oi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},_M=ib,UM=sb,gb=ab,yb=lb,vb=hb,xb=pb,wb=ub,bb=fb;const zM=_M,BM=UM,Sb=p.forwardRef(({className:e,...t},n)=>a.jsx(gb,{className:St("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Sb.displayName=gb.displayName;const Tb=p.forwardRef(({className:e,...t},n)=>a.jsxs(BM,{children:[a.jsx(Sb,{}),a.jsx(yb,{ref:n,className:St("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Tb.displayName=yb.displayName;const kb=({className:e,...t})=>a.jsx("div",{className:St("flex flex-col space-y-2 text-center sm:text-left",e),...t});kb.displayName="AlertDialogHeader";const Cb=({className:e,...t})=>a.jsx("div",{className:St("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Cb.displayName="AlertDialogFooter";const Eb=p.forwardRef(({className:e,...t},n)=>a.jsx(wb,{ref:n,className:St("text-lg font-semibold",e),...t}));Eb.displayName=wb.displayName;const Nb=p.forwardRef(({className:e,...t},n)=>a.jsx(bb,{ref:n,className:St("text-sm text-muted-foreground",e),...t}));Nb.displayName=bb.displayName;const Pb=p.forwardRef(({className:e,...t},n)=>a.jsx(vb,{ref:n,className:St(am(),e),...t}));Pb.displayName=vb.displayName;const jb=p.forwardRef(({className:e,...t},n)=>a.jsx(xb,{ref:n,className:St(am({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));jb.displayName=xb.displayName;function Ab(e,[t,n]){return Math.min(n,Math.max(t,e))}var WM=p.createContext(void 0);function GM(e){const t=p.useContext(WM);return e||t||"ltr"}function HM(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function KM(e){const[t,n]=p.useState(void 0);return qi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;s=u.inlineSize,l=u.blockSize}else s=e.offsetWidth,l=e.offsetHeight;n({width:s,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function YM(e){const t=e+"CollectionProvider",[n,r]=Aa(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=C=>{const{scope:k,children:x}=C,v=Qn.useRef(null),w=Qn.useRef(new Map).current;return a.jsx(o,{scope:k,itemMap:w,collectionRef:v,children:x})};s.displayName=t;const l=e+"CollectionSlot",c=va(l),u=Qn.forwardRef((C,k)=>{const{scope:x,children:v}=C,w=i(l,x),R=Ut(k,w.collectionRef);return a.jsx(c,{ref:R,children:v})});u.displayName=l;const h=e+"CollectionItemSlot",d="data-radix-collection-item",m=va(h),T=Qn.forwardRef((C,k)=>{const{scope:x,children:v,...w}=C,R=Qn.useRef(null),M=Ut(k,R),z=i(h,x);return Qn.useEffect(()=>(z.itemMap.set(R,{ref:R,...w}),()=>void z.itemMap.delete(R))),a.jsx(m,{[d]:"",ref:M,children:v})});T.displayName=h;function P(C){const k=i(e+"CollectionConsumer",C);return Qn.useCallback(()=>{const v=k.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(k.itemMap.values()).sort((z,U)=>w.indexOf(z.ref.current)-w.indexOf(U.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:s,Slot:u,ItemSlot:T},P,r]}var Rb=["PageUp","PageDown"],Ib=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Mb={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},as="Slider",[bf,XM,qM]=YM(as),[Db,FD]=Aa(as,[qM]),[QM,Fc]=Db(as),Lb=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:i=1,orientation:s="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:h,onValueChange:d=()=>{},onValueCommit:m=()=>{},inverted:T=!1,form:P,...C}=e,k=p.useRef(new Set),x=p.useRef(0),w=s==="horizontal"?ZM:JM,[R=[],M]=k1({prop:h,defaultProp:u,onChange:ve=>{var Ae;(Ae=[...k.current][x.current])==null||Ae.focus(),d(ve)}}),z=p.useRef(R);function U(ve){const ne=oD(R,ve);J(ve,ne)}function F(ve){J(ve,x.current)}function se(){const ve=z.current[x.current];R[x.current]!==ve&&m(R)}function J(ve,ne,{commit:Ae}={commit:!1}){const oe=lD(i),gt=cD(Math.round((ve-r)/i)*i+r,oe),N=Ab(gt,[r,o]);M((Te=[])=>{const X=nD(Te,N,ne);if(aD(X,c*i)){x.current=X.indexOf(N);const ge=String(X)!==String(Te);return ge&&Ae&&m(X),ge?X:Te}else return Te})}return a.jsx(QM,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:o,valueIndexToChangeRef:x,thumbs:k.current,values:R,orientation:s,form:P,children:a.jsx(bf.Provider,{scope:e.__scopeSlider,children:a.jsx(bf.Slot,{scope:e.__scopeSlider,children:a.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...C,ref:t,onPointerDown:nn(C.onPointerDown,()=>{l||(z.current=R)}),min:r,max:o,inverted:T,onSlideStart:l?void 0:U,onSlideMove:l?void 0:F,onSlideEnd:l?void 0:se,onHomeKeyDown:()=>!l&&J(r,0,{commit:!0}),onEndKeyDown:()=>!l&&J(o,R.length-1,{commit:!0}),onStepKeyDown:({event:ve,direction:ne})=>{if(!l){const gt=Rb.includes(ve.key)||ve.shiftKey&&Ib.includes(ve.key)?10:1,N=x.current,Te=R[N],X=i*gt*ne;J(Te+X,N,{commit:!0})}}})})})})});Lb.displayName=as;var[Fb,$b]=Db(as,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZM=p.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:i,onSlideStart:s,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...h}=e,[d,m]=p.useState(null),T=Ut(t,w=>m(w)),P=p.useRef(void 0),C=GM(o),k=C==="ltr",x=k&&!i||!k&&i;function v(w){const R=P.current||d.getBoundingClientRect(),M=[0,R.width],U=dm(M,x?[n,r]:[r,n]);return P.current=R,U(w-R.left)}return a.jsx(Fb,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:a.jsx(Ob,{dir:C,"data-orientation":"horizontal",...h,ref:T,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const R=v(w.clientX);s==null||s(R)},onSlideMove:w=>{const R=v(w.clientX);l==null||l(R)},onSlideEnd:()=>{P.current=void 0,c==null||c()},onStepKeyDown:w=>{const M=Mb[x?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:M?-1:1})}})})}),JM=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:i,onSlideMove:s,onSlideEnd:l,onStepKeyDown:c,...u}=e,h=p.useRef(null),d=Ut(t,h),m=p.useRef(void 0),T=!o;function P(C){const k=m.current||h.current.getBoundingClientRect(),x=[0,k.height],w=dm(x,T?[r,n]:[n,r]);return m.current=k,w(C-k.top)}return a.jsx(Fb,{scope:e.__scopeSlider,startEdge:T?"bottom":"top",endEdge:T?"top":"bottom",size:"height",direction:T?1:-1,children:a.jsx(Ob,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const k=P(C.clientY);i==null||i(k)},onSlideMove:C=>{const k=P(C.clientY);s==null||s(k)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:C=>{const x=Mb[T?"from-bottom":"from-top"].includes(C.key);c==null||c({event:C,direction:x?-1:1})}})})}),Ob=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:l,onStepKeyDown:c,...u}=e,h=Fc(as,n);return a.jsx(qt.span,{...u,ref:t,onKeyDown:nn(e.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):Rb.concat(Ib).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:nn(e.onPointerDown,d=>{const m=d.target;m.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(m)?m.focus():r(d)}),onPointerMove:nn(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:nn(e.onPointerUp,d=>{const m=d.target;m.hasPointerCapture(d.pointerId)&&(m.releasePointerCapture(d.pointerId),i(d))})})}),Vb="SliderTrack",_b=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=Fc(Vb,n);return a.jsx(qt.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});_b.displayName=Vb;var Sf="SliderRange",Ub=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=Fc(Sf,n),i=$b(Sf,n),s=p.useRef(null),l=Ut(t,s),c=o.values.length,u=o.values.map(m=>Wb(m,o.min,o.max)),h=c>1?Math.min(...u):0,d=100-Math.max(...u);return a.jsx(qt.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:d+"%"}})});Ub.displayName=Sf;var Tf="SliderThumb",zb=p.forwardRef((e,t)=>{const n=XM(e.__scopeSlider),[r,o]=p.useState(null),i=Ut(t,l=>o(l)),s=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return a.jsx(eD,{...e,ref:i,index:s})}),eD=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...i}=e,s=Fc(Tf,n),l=$b(Tf,n),[c,u]=p.useState(null),h=Ut(t,v=>u(v)),d=c?s.form||!!c.closest("form"):!0,m=KM(c),T=s.values[r],P=T===void 0?0:Wb(T,s.min,s.max),C=rD(r,s.values.length),k=m==null?void 0:m[l.size],x=k?iD(k,P,l.direction):0;return p.useEffect(()=>{if(c)return s.thumbs.add(c),()=>{s.thumbs.delete(c)}},[c,s.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${P}% + ${x}px)`},children:[a.jsx(bf.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(qt.span,{role:"slider","aria-label":e["aria-label"]||C,"aria-valuemin":s.min,"aria-valuenow":T,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:h,style:T===void 0?{display:"none"}:e.style,onFocus:nn(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),d&&a.jsx(Bb,{name:o??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:T},r)]})});zb.displayName=Tf;var tD="RadioBubbleInput",Bb=p.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const o=p.useRef(null),i=Ut(o,r),s=HM(t);return p.useEffect(()=>{const l=o.current;if(!l)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&h){const d=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(d)}},[s,t]),a.jsx(qt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});Bb.displayName=tD;function nD(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,i)=>o-i)}function Wb(e,t,n){const i=100/(n-t)*(e-t);return Ab(i,[0,100])}function rD(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function oD(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function iD(e,t,n){const r=e/2,i=dm([0,50],[0,r]);return(r-i(t)*n)*n}function sD(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function aD(e,t){if(t>0){const n=sD(e);return Math.min(...n)>=t}return!0}function dm(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lD(e){return(String(e).split(".")[1]||"").length}function cD(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Gb=Lb,uD=_b,dD=Ub,fD=zb;const fm=p.forwardRef(({className:e,...t},n)=>a.jsxs(Gb,{ref:n,className:St("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(uD,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(dD,{className:"absolute h-full bg-primary"})}),a.jsx(fD,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));fm.displayName=Gb.displayName;const No=[{voice_id:"21m00Tcm4TlvDq8ikWAM",name:"Rachel",description:"Calm narrator"},{voice_id:"AZnzlk1XvdvUeBnXmlld",name:"Alice",description:"British accent"},{voice_id:"EXAVITQu4vr4xnSDxMaL",name:"Lily",description:"Young female voice"},{voice_id:"ErXwobaYiN019PkySvjV",name:"Henry",description:"Narrative voice"},{voice_id:"MF3mGyEYCl7XYWbV9V6O",name:"Elli",description:"Emotional range"},{voice_id:"kdmDKE6EkgrWrrykO9Qt",name:"Alexandra",description:"Super realistic, young female voice that likes to chat"},{voice_id:"L0Dsvb3SLTyegXwtm47J",name:"Archer",description:"Grounded and friendly young British male with charm"},{voice_id:"g6xIsTj2HwM6VR4iXFCw",name:"Jessica Anne Bogart",description:"Empathetic and expressive, great for wellness coaches"},{voice_id:"OYTbf65OHHFELVut7v2H",name:"Hope",description:"Bright and uplifting, perfect for positive interactions"},{voice_id:"dj3G1R1ilKoFKhBnWOzG",name:"Eryn",description:"Friendly and relatable, ideal for casual interactions"},{voice_id:"HDA9tsk27wYi3uq0fPcK",name:"Stuart",description:"Professional & friendly Aussie, ideal for technical assistance"},{voice_id:"1SM7GgM6IMuvQlz2BwM3",name:"Mark",description:"Relaxed and laid back, suitable for nonchalant chats"},{voice_id:"PT4nqlKZfc06VW1BuClj",name:"Angela",description:"Raw and relatable, great listener and down to earth"},{voice_id:"vBKc2FfBKJfcZNyEt1n6",name:"Finn",description:"Tenor pitched, excellent for podcasts and light chats"},{voice_id:"56AoDkrOh6qfVPDXZ7Pt",name:"Cassidy",description:"Engaging and energetic, good for entertainment contexts"},{voice_id:"NOpBlnGInO9m6vDvFkFC",name:"Grandpa Spuds Oxley",description:"Distinctive character voice for unique agents"}],hD=({selectedVoice:e,onVoiceSelect:t,className:n=""})=>{const[r,o]=p.useState(null),[i,s]=p.useState(null),l=u=>{t(u)},c=async(u,h)=>{try{i&&(i.pause(),i.currentTime=0,o(null)),o(u),console.log(`Playing voice preview for: ${h} (${u})`);const d=await vt.generateTTS(u,"Hello, how are you"),m=URL.createObjectURL(d),T=new Audio(m);s(T),T.onended=()=>{console.log("Voice preview finished playing"),o(null),URL.revokeObjectURL(m)},T.onerror=()=>{console.error("Error playing preview audio"),o(null),URL.revokeObjectURL(m)},await T.play(),console.log("Voice preview started playing")}catch(d){console.error("Error playing voice preview:",d),o(null)}};return Qn.useEffect(()=>()=>{i&&(i.pause(),i.src&&URL.revokeObjectURL(i.src))},[i]),a.jsxs("div",{className:`space-y-4 ${n}`,children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Choose a Voice"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Select a voice for your story narration"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsx(Nt,{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx(wt,{className:"p-0",children:a.jsx("div",{className:"space-y-0",children:No.slice(0,Math.ceil(No.length/2)).map((u,h)=>a.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-all duration-200 ${h!==No.length-1?"border-b border-gray-100":""} ${e===u.voice_id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",onClick:()=>l(u.voice_id),children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:u.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:u.name}),a.jsx("p",{className:"text-sm text-gray-500",children:u.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fe,{onClick:d=>{d.stopPropagation(),c(u.voice_id,u.name)},disabled:r===u.voice_id,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100",children:r===u.voice_id?a.jsx(Dt,{className:"w-4 h-4 animate-spin text-blue-600"}):a.jsx(Lo,{className:"w-4 h-4 text-blue-600"})}),e===u.voice_id&&a.jsx(Hi,{className:"w-6 h-6 text-blue-600 fill-current"})]})]},u.voice_id))})})}),a.jsx(Nt,{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx(wt,{className:"p-0",children:a.jsx("div",{className:"space-y-0",children:No.slice(Math.ceil(No.length/2)).map((u,h)=>a.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-all duration-200 ${h!==No.slice(Math.ceil(No.length/2)).length-1?"border-b border-gray-100":""} ${e===u.voice_id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",onClick:()=>l(u.voice_id),children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:u.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:u.name}),a.jsx("p",{className:"text-sm text-gray-500",children:u.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fe,{onClick:d=>{d.stopPropagation(),c(u.voice_id,u.name)},disabled:r===u.voice_id,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100",children:r===u.voice_id?a.jsx(Dt,{className:"w-4 h-4 animate-spin text-blue-600"}):a.jsx(Lo,{className:"w-4 h-4 text-blue-600"})}),e===u.voice_id&&a.jsx(Hi,{className:"w-6 h-6 text-blue-600 fill-current"})]})]},u.voice_id))})})})]})]})};class mD{isElectron(){return typeof window<"u"&&"electronAPI"in window}getElectronAPI(){if(!this.isElectron())throw new Error("Audio storage is only available in Electron environment");return window.electronAPI}async saveAudioFile(t,n,r){if(!this.isElectron())throw new Error("Audio storage requires Electron environment");try{const o=await r.arrayBuffer(),i=new Uint8Array(o),s=await this.getElectronAPI().audio.saveAudioFile(t,n,i);return console.log(` Audio file saved for story ${t}, chunk ${n}:`,s.relativePath),{id:n,fileName:s.fileName,relativePath:s.relativePath,filePath:s.filePath}}catch(o){throw console.error("Failed to save audio file:",o),o}}async loadAudioFile(t){if(!this.isElectron())throw new Error("Audio loading requires Electron environment");try{if(!await this.getElectronAPI().audio.fileExists(t))throw new Error(`Audio file not found: ${t}`);const r=await this.getElectronAPI().audio.loadAudioFile(t),o=new Blob([r],{type:"audio/mpeg"}),i=URL.createObjectURL(o);return console.log(` Audio file loaded: ${t} -> ${i}`),i}catch(n){throw console.error("Failed to load audio file:",n),n}}async saveAudioManifest(t,n){if(!this.isElectron())throw new Error("Audio manifest saving requires Electron environment");try{await this.getElectronAPI().audio.saveManifest(t,n),console.log(` Audio manifest saved for story ${t}`)}catch(r){throw console.error("Failed to save audio manifest:",r),r}}async deleteStoryAudio(t){if(!this.isElectron()){console.warn("Audio deletion is only available in Electron environment");return}try{await this.getElectronAPI().audio.deleteStoryAudio(t),console.log(` Audio files deleted for story ${t}`)}catch(n){throw console.error("Failed to delete story audio:",n),n}}async fileExists(t){if(!this.isElectron())return!1;try{return await this.getElectronAPI().audio.fileExists(t)}catch(n){return console.error("Failed to check file existence:",n),!1}}async getAudioDirectory(){if(!this.isElectron())throw new Error("Audio directory access requires Electron environment");try{return await this.getElectronAPI().audio.getAudioDirectory()}catch(t){throw console.error("Failed to get audio directory:",t),t}}getRelativePath(t,n){return`audio/story-${t}/${n}.mp3`}createManifest(t,n,r){return{storyId:t,voiceId:n,generatedAt:new Date().toISOString(),chunks:r.map(o=>({id:o.id,fileName:`${o.id}.mp3`,relativePath:o.relativePath,text:o.text,duration:o.duration,startTime:o.startTime}))}}}const br=new mD,Xy={"21m00Tcm4TlvDq8ikWAM":{name:"Rachel",description:"Calm narrator"},AZnzlk1XvdvUeBnXmlld:{name:"Alice",description:"British accent"},EXAVITQu4vr4xnSDxMaL:{name:"Lily",description:"Young female voice"},ErXwobaYiN019PkySvjV:{name:"Henry",description:"Narrative voice"},MF3mGyEYCl7XYWbV9V6O:{name:"Elli",description:"Emotional range"},kdmDKE6EkgrWrrykO9Qt:{name:"Alexandra",description:"Super realistic, young female voice that likes to chat"},L0Dsvb3SLTyegXwtm47J:{name:"Archer",description:"Grounded and friendly young British male with charm"},g6xIsTj2HwM6VR4iXFCw:{name:"Jessica Anne Bogart",description:"Empathetic and expressive, great for wellness coaches"},OYTbf65OHHFELVut7v2H:{name:"Hope",description:"Bright and uplifting, perfect for positive interactions"},dj3G1R1ilKoFKhBnWOzG:{name:"Eryn",description:"Friendly and relatable, ideal for casual interactions"},HDA9tsk27wYi3uq0fPcK:{name:"Stuart",description:"Professional & friendly Aussie, ideal for technical assistance"},"1SM7GgM6IMuvQlz2BwM3":{name:"Mark",description:"Relaxed and laid back, suitable for nonchalant chats"},PT4nqlKZfc06VW1BuClj:{name:"Angela",description:"Raw and relatable, great listener and down to earth"},vBKc2FfBKJfcZNyEt1n6:{name:"Finn",description:"Tenor pitched, excellent for podcasts and light chats"},"56AoDkrOh6qfVPDXZ7Pt":{name:"Cassidy",description:"Engaging and energetic, good for entertainment contexts"},NOpBlnGInO9m6vDvFkFC:{name:"Grandpa Spuds Oxley",description:"Distinctive character voice for unique agents"}},qy=({storyContent:e,selectedVoiceId:t,generatedAudioVoiceId:n,onAudioGenerated:r,onNext:o,onAudioControlRef:i,className:s="",autoStart:l=!1,storyId:c,existingAudioChunks:u})=>{const[h,d]=p.useState(!1),[m,T]=p.useState([]),[P,C]=p.useState(-1),[k,x]=p.useState(!1),[v,w]=p.useState(0),[R,M]=p.useState(0),[z,U]=p.useState(!1),[F,se]=p.useState(null),[J,ve]=p.useState(null);p.useEffect(()=>{console.log("=== STATE CHANGE ===",{allGenerated:z,isGenerating:h,audioChunksLength:m.length,chunksWithValidBlobs:m.filter(V=>V.blobUrl&&V.blobUrl.startsWith("blob:")).length,generatedChunks:m.filter(V=>V.isGenerated).length})},[z,h,m]),p.useEffect(()=>{if(!h&&z&&m.length>0){const V=m.filter(I=>I.blobUrl&&I.blobUrl.startsWith("blob:"));console.log("=== GENERATION COMPLETED - UI SHOULD SWITCH TO PLAYBACK ===",{allGenerated:z,isGenerating:h,totalChunks:m.length,validChunks:V.length,shouldShowPlayback:!h&&z})}},[h,z,m]);const ne=p.useRef([]),Ae=p.useRef(null),oe=p.useRef(),gt=V=>{let I=V.split(/\n\s*\n/).filter(K=>K.trim().length>0);const O=[];return I.forEach(K=>{if(K.length<=2500)O.push(K.trim());else{const le=K.split(/[.!?]+/).filter(Ie=>Ie.trim().length>0);let de="";le.forEach((Ie,Ee)=>{const We=Ie.trim();de.length+We.length+1<=2500?de+=(de?". ":"")+We:(de&&O.push(de+"."),de=We),Ee===le.length-1&&de&&O.push(de+".")})}}),O},N=V=>{const I=V.split(/\s+/).length;return Math.max(2,Math.round(I/150*60))};p.useEffect(()=>{if(u&&u.length>0){console.log("Loading existing audio chunks:",u),(async()=>{const le=[];let de=!0;for(const Ee of u){let We,rt;if(c&&Ee.filePath&&!Ee.filePath.startsWith("blob:"))try{rt=Ee.filePath,We=await br.loadAudioFile(rt),console.log(` Loaded audio from disk: ${rt}`)}catch(zt){console.warn(`Failed to load audio from disk: ${zt}`),de=!1}else Ee.filePath&&Ee.filePath.startsWith("blob:")&&(console.warn(`Chunk ${Ee.id} has blob URL that may be invalid`),de=!1);le.push({id:Ee.id,name:Ee.name,text:Ee.text,duration:Ee.duration,startTime:Ee.startTime,filePath:We||rt||"",blobUrl:We,relativePath:rt,isGenerated:!!We})}console.log("Mapped chunks:",le.map(Ee=>({id:Ee.id,hasBlobUrl:!!Ee.blobUrl,hasRelativePath:!!Ee.relativePath,isGenerated:Ee.isGenerated}))),T(le),U(de),ne.current=new Array(le.length).fill(null),le.forEach((Ee,We)=>{if(Ee.blobUrl)try{const rt=new Audio(Ee.blobUrl);ne.current[We]=rt,console.log(`Created audio element for chunk ${Ee.id} at index ${We}`),rt.onerror=()=>{console.error(`Error loading audio chunk ${Ee.id} - marking for regeneration`),T(zt=>zt.map(jn=>jn.id===Ee.id?{...jn,blobUrl:"",isGenerated:!1}:jn)),U(!1)},rt.onloadedmetadata=()=>{console.log(`Loaded audio chunk ${Ee.id}, duration: ${rt.duration}s`)}}catch(rt){console.error(`Failed to create audio element for chunk ${Ee.id}:`,rt)}});const Ie=le.reduce((Ee,We)=>Ee+We.duration,0);M(Ie)})();return}const V=gt(e);let I=0;const O=V.map((K,le)=>{const de=N(K),Ie={id:`chunk-${le+1}`,name:`Paragraph ${le+1}`,text:K,duration:de,startTime:I,filePath:"",isGenerated:!1};return I+=de,Ie});T(O),M(I),ne.current=new Array(O.length).fill(null)},[e,u]),p.useEffect(()=>{l&&m.length>0&&!z&&!h&&(console.log("Auto-starting audio generation..."),me())},[l,m,z,h]),p.useEffect(()=>{i&&i({handlePlayPause:At,isPlaying:()=>k})},[i]);const Te=V=>{if(V.audioBlob){const I=URL.createObjectURL(V.audioBlob);return console.log(`Recreated blob URL for chunk ${V.id}:`,I),T(O=>O.map(K=>K.id===V.id?{...K,blobUrl:I}:K)),I}return console.warn(`Cannot recreate blob URL for chunk ${V.id} - no stored blob available`),null},X=async V=>{const I=m[V];if(!(!I||I.isGenerated))try{const O=await vt.generateTTS(t,I.text);let K,le=URL.createObjectURL(O);if(c)try{K=(await br.saveAudioFile(c,I.id,O)).relativePath,console.log(` Audio saved to disk: ${K}`)}catch(Ie){console.warn(`Failed to save audio to disk, using blob URL: ${Ie}`)}const de=new Audio(le);ne.current[V]=de,await new Promise(Ie=>{de.onloadedmetadata=()=>{const Ee=de.duration;T(rt=>{const zt=[...rt];zt[V]={...zt[V],duration:Ee,blobUrl:le,audioBlob:O,relativePath:K,isGenerated:!0};let jn=0;return zt.forEach(xo=>{xo.startTime=jn,jn+=xo.duration}),zt});let We=0;T(rt=>(We=rt.reduce((zt,jn)=>zt+jn.duration,0),rt)),M(We),Ie()},de.onerror=()=>{console.error(`Failed to load audio for chunk ${V}`),Ie()}})}catch(O){throw console.error(`Error generating audio for chunk ${V}:`,O),O}},ge=async V=>{console.log(`Starting generation for chunk ${V+1}/${m.length}`),await X(V),console.log(`Completed generation for chunk ${V+1}/${m.length}`),C(V)},me=async()=>{console.log("=== STARTING AUDIO GENERATION ==="),d(!0),C(0);try{for(let V=0;V<m.length;V++){console.log(`Generating chunk ${V+1}/${m.length}`);try{await ge(V),console.log(`Successfully generated chunk ${V+1}/${m.length}`)}catch(I){console.error(`Error generating chunk ${V+1}:`,I);continue}}console.log("All audio chunks generated successfully"),T(V=>{const I=V.map(O=>({...O,isGenerated:!0}));return console.log("Calling onAudioGenerated with final chunks:",I),r(I,R),I}),console.log("=== AUDIO GENERATION COMPLETED SUCCESSFULLY ==="),C(-1),d(!1),U(!0),setTimeout(()=>{console.log("Final state verification:",{allGenerated:!0,isGenerating:!1,shouldShowPlayback:!0})},50)}catch(V){console.error("Error generating audio:",V),U(!1),d(!1),C(-1)}console.log("=== AUDIO GENERATION PROCESS FINISHED ===")},je=V=>{const I=Math.floor(V/60),O=Math.floor(V%60);return`${I}:${O.toString().padStart(2,"0")}`},Ue=V=>{if(!Ae.current||!z||R===0)return;const I=Ae.current.getBoundingClientRect(),O=V.clientX-I.left,K=Math.max(0,Math.min(O/I.width,1)),le=K*R;console.log(`Timeline clicked: seeking to ${le.toFixed(2)}s of ${R.toFixed(2)}s (${(K*100).toFixed(1)}%)`),w(le),De(le)},De=V=>{console.log(`Seeking to time: ${V.toFixed(2)}s`),Rt(),be(),ne.current.forEach(de=>{de&&de.pause()});const I=m.find(de=>de.isGenerated&&V>=de.startTime&&V<de.startTime+de.duration);if(!I){console.warn(`No chunk found for time ${V.toFixed(2)}s`);return}const O=m.findIndex(de=>de.id===I.id),K=V-I.startTime;console.log(`Found chunk ${I.id} at index ${O}, seeking to offset ${K.toFixed(2)}s`);let le=ne.current[O];if(!le&&I.blobUrl&&(console.log(`Creating new audio element for chunk ${I.id}`),le=new Audio(I.blobUrl),ne.current[O]=le,pe(le,O,"seek")),le)try{if(le.currentTime=K,se(le),console.log(` Audio seeked to ${K.toFixed(2)}s in chunk ${I.id}`),console.log(` Timeline position maintained at: ${V.toFixed(2)}s`),k){const de=le.play();de!==void 0&&de.then(()=>{console.log(` Resumed playback from ${K.toFixed(2)}s`),oe.current||Ve()}).catch(Ie=>{console.error("Failed to resume playback after seeking:",Ie),x(!1)})}}catch(de){console.error(`Failed to seek audio for chunk ${I.id}:`,de)}else console.error(`No audio element available for chunk ${I.id}`)},At=()=>{var V;if(console.log("=== AUDIO PLAYBACK DEBUG ==="),console.log("Play/Pause clicked. Current state:",{isPlaying:k,currentTime:v,totalDuration:R,audioChunksLength:m.length,allGenerated:z}),m.length===0){console.error("No audio chunks available for playback");return}if(console.log("Audio chunks for playback:",m.map(I=>({id:I.id,name:I.name,hasBlobUrl:!!I.blobUrl,blobUrl:I.blobUrl,startTime:I.startTime,duration:I.duration}))),k)console.log("Pausing playback"),gn();else{if(v>0){Be();return}console.log(" Starting playback from beginning"),Rt(),be(),ne.current.forEach(O=>{O&&O!==F&&O.pause()}),x(!0);const I=m.find(O=>O.isGenerated&&v>=O.startTime&&v<O.startTime+O.duration);if(I&&I.blobUrl){console.log("Found active chunk for playback:",{id:I.id,name:I.name,startTime:I.startTime,duration:I.duration,currentTime:v,offsetInChunk:v-I.startTime,blobUrl:I.blobUrl});try{const O=new Audio;O.src=I.blobUrl,O.onerror=()=>{console.warn("Blob URL appears invalid, attempting to recreate...");const K=Te(I);K&&(console.log("Successfully recreated blob URL:",K),I.blobUrl=K)}}catch{console.warn("Preflight check failed, will attempt recreation on error")}try{const O=m.findIndex(Ie=>Ie.id===I.id);let K=ne.current[O];K?console.log("Using pre-existing audio element for chunk",I.id):(console.log("Creating new audio element for chunk",I.id),K=new Audio(I.blobUrl),ne.current[O]=K),K.onloadeddata=()=>{console.log("Audio loaded successfully, duration:",K.duration)},K.oncanplaythrough=()=>{console.log("Audio can play through")},K.onerror=Ie=>{console.error("Audio error:",Ie),console.error("Audio error details:",{error:K.error,networkState:K.networkState,readyState:K.readyState,src:K.src}),console.log("Attempting to recreate blob URL and audio element...");try{const Ee=Te(I);if(Ee){const We=new Audio(Ee);ne.current[O]=We,se(We),We.currentTime=v-I.startTime,We.play().catch(rt=>{console.error("Failed to play recreated audio:",rt),x(!1)})}else console.error("Could not recreate blob URL - no stored blob available"),x(!1)}catch(Ee){console.error("Failed to recreate audio element:",Ee),x(!1)}},pe(K,O,"playback"),O===m.length-1&&console.log(` This is the last chunk (${O}) - will loop to beginning when finished`),(!K.src||K.src!==I.blobUrl)&&(console.log("Setting audio source to:",I.blobUrl),K.src=I.blobUrl);const le=v-I.startTime;console.log(` Starting playback in chunk ${I.id} at offset ${le.toFixed(2)}s (global time: ${v.toFixed(2)}s)`),K.currentTime=le,console.log(` Audio element seeked to: ${K.currentTime.toFixed(2)}s`),se(K),console.log(` Current audio set for chunk: ${I.id}`),Fe(K,I,O);const de=K.play();de!==void 0&&de.then(()=>{console.log(" Audio playback started successfully"),oe.current||(console.log(" Starting time update loop for indicator movement"),Ve()),console.log(" Time update loop should now be running")}).catch(Ie=>{console.error("Error playing audio:",Ie),x(!1)})}catch(O){console.error("Error creating audio element:",O),x(!1)}}else{console.warn("No active chunk found or chunk has no blobUrl",{activeChunk:I?{id:I.id,blobUrl:I.blobUrl,isValidBlobUrl:(V=I.blobUrl)==null?void 0:V.startsWith("blob:")}:null,currentTime:v,audioChunks:m.map(K=>{var le;return{id:K.id,startTime:K.startTime,duration:K.duration,hasBlobUrl:!!K.blobUrl,isValidBlobUrl:(le=K.blobUrl)==null?void 0:le.startsWith("blob:"),isGenerated:K.isGenerated}})});const O=m.find(K=>K.isGenerated&&K.blobUrl&&K.blobUrl.startsWith("blob:"));if(O){console.log("No chunk found for current time, starting with first available chunk:",O.name);try{const K=new Audio(O.blobUrl),le=m.findIndex(Ie=>Ie.id===O.id);le>=0&&(ne.current[le]=K),se(K),w(O.startTime),Fe(K,O,le),pe(K,le,"first-chunk"),K.onerror=Ie=>{console.error("Error playing first chunk:",Ie),x(!1)};const de=K.play();de!==void 0&&de.then(()=>{console.log(" First chunk playback started"),oe.current||(console.log(" Starting time update loop for first chunk"),Ve())}).catch(Ie=>{console.error("Error playing first chunk:",Ie),x(!1)})}catch(K){console.error("Error creating audio for first chunk:",K),x(!1)}}else console.error("No audio chunks have valid blobUrl"),x(!1),m.some(le=>le.isGenerated&&(!le.blobUrl||!le.blobUrl.startsWith("blob:")))&&console.warn("Audio was previously generated but blob URLs are invalid. Audio may need to be regenerated.")}}},Ve=()=>{oe.current&&cancelAnimationFrame(oe.current),console.log(" Time update loop started for smooth indicator movement"),oe.current=requestAnimationFrame(at)},at=()=>{if(!F){k&&(oe.current=requestAnimationFrame(at));return}if(F.paused||F.ended){if(F.ended){console.log(" Current audio ended, onended handler will manage transition/restart"),k&&(oe.current=requestAnimationFrame(at));return}if(F.paused&&k){console.log(" Audio paused but isPlaying=true, continuing time loop for restart"),k&&(oe.current=requestAnimationFrame(at));return}else if(F.paused&&!k){console.log(" Audio paused and isPlaying=false, stopping time updates"),oe.current&&(cancelAnimationFrame(oe.current),oe.current=void 0);return}}const V=ne.current.findIndex(I=>I===F);if(V>=0&&V<m.length){const I=m[V];if(I&&I.isGenerated){const O=I.startTime+F.currentTime,K=Math.min(Math.max(O,0),R);if(w(K),F.ended)if(console.log(" Chunk ended, checking if this is the last chunk"),V===m.length-1){console.log(" Last chunk ended in updateTimePosition - restarting from beginning"),pr();return}else{console.log(" Chunk ended, maintaining current time position for transition");const de=I.startTime+I.duration;w(Math.min(de,R));return}}}oe.current=requestAnimationFrame(at)},gn=()=>{console.log(" Pausing audio playback - maintaining position"),ne.current.forEach(V=>{V&&V.pause()}),F&&F.pause(),J&&J.pause(),oe.current&&(cancelAnimationFrame(oe.current),oe.current=void 0,console.log(" Time update loop paused")),x(!1),Qe(!1),Pe(!1),console.log(` Paused at position: ${v.toFixed(2)}s`)},Be=()=>{console.log(` Resuming playback from position: ${v.toFixed(2)}s`),Rt(),be();const V=m.find(I=>I.isGenerated&&v>=I.startTime&&v<I.startTime+I.duration);if(V&&V.blobUrl){const I=m.findIndex(de=>de.id===V.id);let O=ne.current[I];O||(console.log(` Creating audio element for resume at chunk ${I}`),O=new Audio(V.blobUrl),ne.current[I]=O,pe(O,I,"resume")),se(O);const K=v-V.startTime;O.currentTime=K,console.log(` Resuming chunk ${I} at offset ${K.toFixed(2)}s`),x(!0);const le=O.play();le&&le.then(()=>{console.log(" Successfully resumed playback"),oe.current||Ve()}).catch(de=>{console.error(" Failed to resume playback:",de),x(!1)})}else console.log(" No active chunk found for resume position"),w(0),m.find(O=>O.isGenerated)&&At()},yn=()=>{console.log(" Stopping all audio playback"),ne.current.forEach(V=>{V&&(V.pause(),V.currentTime=0)}),F&&(F.pause(),F.currentTime=0,se(null)),J&&(J.pause(),J.currentTime=0),oe.current&&(cancelAnimationFrame(oe.current),oe.current=void 0,console.log(" Time update loop stopped")),x(!1),w(0),Qe(!1),Pe(!1)};p.useEffect(()=>()=>{console.log("AudioPreview unmounting - cleaning up resources"),J!=null&&J.src&&J.src.startsWith("blob:")&&URL.revokeObjectURL(J.src),oe.current&&cancelAnimationFrame(oe.current),F&&F.pause()},[]),p.useEffect(()=>()=>{J!=null&&J.src&&J.src.startsWith("blob:")&&(console.log("Cleaning up previous preview audio"),URL.revokeObjectURL(J.src))},[J]);const ye=Xy[t]||{name:"Unknown Voice",description:"Voice not found"},Xe=n?Xy[n]||{name:"Unknown Voice",description:"Voice not found"}:null,[Tt,Qe]=p.useState(!1),[re,Pe]=p.useState(!1),[Le,an]=p.useState(null),ln=V=>{if(!Ae.current||R===0)return;const I=Ae.current.getBoundingClientRect(),O=V.clientX-I.left,le=Math.max(0,Math.min(O/I.width,1))*R;an(le)},or=()=>{an(null)},Fe=(V,I,O)=>{console.log(` Setting up time updates for chunk ${O}`),V.ontimeupdate=()=>{if(!V.paused&&!V.ended){const le=I.startTime+V.currentTime,de=Math.min(le,R);w(de),Math.floor(de)!==Math.floor(de-.5)&&console.log(` Time indicator moving: ${de.toFixed(2)}s (chunk ${O})`)}};const K=setInterval(()=>{if(!V.paused&&!V.ended&&V===F){const le=I.startTime+V.currentTime,de=Math.min(le,R);w(de)}else(V.paused||V.ended)&&clearInterval(K)},100)},pr=()=>{console.log(" End of playback reached - restarting from beginning"),console.log(` Total chunks available for loop: ${m.length}`),ne.current.forEach(I=>{I&&(I.pause(),I.currentTime=0)}),w(0),console.log(" Maintaining isPlaying = true during loop restart"),x(!0);const V=m.find(I=>I.isGenerated&&I.blobUrl);if(V){console.log(" Restarting playback from first chunk:",V.id),console.log(` This will loop through all ${m.length} chunks again`);const I=m.findIndex(le=>le.id===V.id);let O=ne.current[I];O||(console.log(" Creating new audio element for restart"),O=new Audio(V.blobUrl),ne.current[I]=O,Fe(O,V,I),pe(O,I,"restart")),se(O),O.currentTime=0,oe.current||(console.log(" Starting time update loop before audio restart"),Ve()),console.log(" Starting loop playback...");const K=O.play();K&&K.then(()=>{console.log(" Successfully restarted playback from beginning"),console.log(" UI should show pause button (isPlaying = true)"),x(!0),oe.current||(console.log(" Ensuring time update loop continues"),Ve())}).catch(le=>{console.error(" Failed to restart playback:",le),x(!1)})}else console.log(" No first chunk available for restart - stopping playback"),x(!1),se(null)},pe=(V,I,O="")=>{console.log(` Setting up chunk advancement for chunk ${I} (${O})`),V.onended=()=>{console.log(` Chunk ${I} ended (${O}), advancing...`),console.log(`${O} chunk audio that ended:`,V),console.log("Current audio state:",F),console.log("Is audio ended?",V.ended),console.log("Audio current time:",V.currentTime),console.log("Audio duration:",V.duration);const K=I===m.length-1;console.log(` Is this the last chunk? ${K} (${I}/${m.length-1})`),K?(console.log(" Last chunk finished - restarting from beginning for loop"),pr()):(console.log(` Attempting to advance from ${O} chunk...`),_n()||(console.log(" No more chunks available - restarting from beginning"),pr()))},V.onerror=K=>{console.error(` Error in chunk ${I} (${O}):`,K),setTimeout(()=>{_n()||x(!1)},10)}},Rt=()=>{console.log(" Ensuring all audio elements have proper chunk advancement"),ne.current.forEach((V,I)=>{V&&(!V.onended||V.onended.toString().indexOf("advanceToNextChunk")===-1)&&(console.log(` Setting up missing advancement for chunk ${I}`),pe(V,I,"existing"))})},be=()=>{console.log(" Ensuring all audio elements have proper time updates"),ne.current.forEach((V,I)=>{if(V&&m[I]){const O=m[I];console.log(` Setting up time updates for existing chunk ${I}`),V.ontimeupdate=()=>{if(!V.paused&&!V.ended){const K=O.startTime+V.currentTime,le=Math.min(K,R);w(le)}}}})},vn=V=>{console.log(` Advancing from index ${V}`);for(let I=V+1;I<m.length;I++){const O=m[I];if(console.log(` Checking chunk ${I}:`,{exists:!!O,isGenerated:O==null?void 0:O.isGenerated,hasBlobUrl:!!(O!=null&&O.blobUrl)}),O&&O.isGenerated&&O.blobUrl){console.log(` Found next chunk: ${O.id} at index ${I}`);let K=ne.current[I];if(K?console.log(` Reusing existing audio element for chunk ${I}`):(console.log(` Creating new audio element for chunk ${I}`),K=new Audio(O.blobUrl),ne.current[I]=K,K.ontimeupdate=()=>{if(K&&K===F&&!K.paused&&!K.ended){const le=O.startTime+K.currentTime,de=Math.min(le,R);w(de)}},pe(K,I,"advance")),K){console.log(` Switching currentAudio to chunk ${I}`),se(K),K.currentTime=0,console.log(" Ensuring isPlaying remains true during chunk transition"),x(!0),console.log(` Starting playback of chunk ${I}`);const le=K.play();le&&le.then(()=>{console.log(` Successfully started chunk ${I}`),console.log(" Confirming isPlaying state: true"),x(!0),oe.current||(console.log(` Restarting time update loop for chunk ${I}`),Ve())}).catch(de=>{console.error(` Failed to play chunk ${I}:`,de),vn(I)||x(!1)})}else return console.log(` nextAudio is null for chunk ${I}`),!1;return!0}}return console.log(" No more chunks available"),!1},_n=()=>{if(console.log(" advanceToNextChunk called"),console.log("Current audio:",F),console.log("Audio chunks:",m.map(I=>({id:I.id,isGenerated:I.isGenerated,hasBlobUrl:!!I.blobUrl}))),console.log("Audio refs:",ne.current.map((I,O)=>({index:O,exists:!!I,src:I==null?void 0:I.src}))),!F)return console.log(" No currentAudio, cannot advance"),!1;const V=ne.current.findIndex(I=>I===F);if(console.log(` Current chunk index: ${V}`),console.log("Searching for currentAudio:",F),console.log("In audioRefs.current:",ne.current),V===-1){console.log(" Current audio not found in refs, cannot advance"),console.log("Trying alternative approach - finding by ended audio...");const I=ne.current.findIndex(O=>O&&O.ended);return console.log(` Found ended audio at index: ${I}`),I>=0?(console.log(" Using ended audio index as current chunk index"),vn(I)):!1}if(console.log(` Looking for chunks after index ${V}`),console.log(`Total chunks available: ${m.length}`),V>=m.length-1)return console.log(" Already at or past the last chunk - no advancement possible"),!1;for(let I=V+1;I<m.length;I++){const O=m[I];if(console.log(` Checking chunk ${I}:`,{exists:!!O,isGenerated:O==null?void 0:O.isGenerated,hasBlobUrl:!!(O!=null&&O.blobUrl),chunkId:O==null?void 0:O.id,startTime:O==null?void 0:O.startTime,duration:O==null?void 0:O.duration}),O&&O.isGenerated&&O.blobUrl){console.log(` Found next chunk: ${O.id} at index ${I}`);let K=ne.current[I];K?console.log(` Reusing existing audio element for chunk ${I}`):(console.log(` Creating new audio element for chunk ${I}`),K=new Audio(O.blobUrl),ne.current[I]=K,K.ontimeupdate=()=>{if(K&&K===F&&!K.paused&&!K.ended){const de=O.startTime+K.currentTime,Ie=Math.min(de,R);w(Ie)}},pe(K,I,"advance")),console.log(` Switching currentAudio to chunk ${I}`),se(K),K.currentTime=0,console.log(" Ensuring isPlaying remains true during chunk transition"),x(!0),console.log(` Starting playback of chunk ${I}`);const le=K.play();return le&&le.then(()=>{console.log(` Successfully started chunk ${I}`),console.log(" Confirming isPlaying state: true"),x(!0),oe.current||(console.log(` Restarting time update loop for chunk ${I}`),Ve())}).catch(de=>{console.error(` Failed to play chunk ${I}:`,de),_n()||x(!1)}),!0}}return console.log(" No more chunks available"),!1},yo=async()=>{try{yn(),Qe(!0),console.log("Playing selected voice preview for:",t,"with text: 'Hello, how are you'");const V=await vt.generateTTS(t,"Hello, how are you"),I=URL.createObjectURL(V),O=new Audio(I);ve(O),O.onended=()=>{console.log("Selected voice preview finished playing"),Qe(!1),URL.revokeObjectURL(I)},O.onerror=()=>{console.error("Error playing selected voice preview"),Qe(!1),URL.revokeObjectURL(I)},await O.play(),console.log("Selected voice preview started playing")}catch(V){console.error("Error playing selected voice preview:",V),Qe(!1)}},vo=async()=>{if(n)try{yn(),Pe(!0),console.log("Playing generated voice preview for:",n,"with text: 'Hello, how are you'");const V=await vt.generateTTS(n,"Hello, how are you"),I=URL.createObjectURL(V),O=new Audio(I);ve(O),O.onended=()=>{console.log("Generated voice preview finished playing"),Pe(!1),URL.revokeObjectURL(I)},O.onerror=()=>{console.error("Error playing generated voice preview"),Pe(!1),URL.revokeObjectURL(I)},await O.play(),console.log("Generated voice preview started playing")}catch(V){console.error("Error playing generated voice preview:",V),Pe(!1)}};return a.jsxs("div",{className:`space-y-6 ${s}`,children:[a.jsxs("div",{className:"space-y-3",children:[Xe&&n!==t&&a.jsx(Nt,{className:"bg-white border border-green-200 rounded-xl overflow-hidden",children:a.jsx(wt,{className:"p-0",children:a.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:Xe.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:Xe.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[Xe.description,"  Used for current audio"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(fe,{onClick:vo,disabled:re,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-green-100",children:re?a.jsx(Dt,{className:"w-4 h-4 animate-spin text-green-600"}):a.jsx(Lo,{className:"w-4 h-4 text-green-600"})})})]})})}),a.jsx(Nt,{className:"bg-white border border-blue-200 rounded-xl overflow-hidden",children:a.jsx(wt,{className:"p-0",children:a.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border-blue-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:ye.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:ye.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[ye.description," "," ",Xe&&n!==t?"Selected for next generation":"Current voice"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(fe,{onClick:yo,disabled:Tt,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100",children:Tt?a.jsx(Dt,{className:"w-4 h-4 animate-spin text-blue-600"}):a.jsx(Lo,{className:"w-4 h-4 text-blue-600"})})})]})})})]}),z?a.jsxs("div",{className:"space-y-6",children:[(()=>m.some(I=>I.isGenerated&&(!I.blobUrl||!I.blobUrl.startsWith("blob:")))?a.jsx(Nt,{className:"border-orange-200 bg-orange-50",children:a.jsx(wt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Kd,{className:"w-5 h-5 text-orange-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-orange-800",children:"Audio needs to be regenerated"}),a.jsx("p",{className:"text-sm text-orange-700",children:"The audio was previously generated but is no longer available for playback."})]}),a.jsxs(fe,{onClick:()=>{U(!1),T(I=>I.map(O=>({...O,blobUrl:"",isGenerated:!1})))},size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:[a.jsx(Li,{className:"w-4 h-4 mr-2"}),"Regenerate"]})]})})}):null)(),a.jsx(Nt,{children:a.jsx(wt,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx(fe,{onClick:At,className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:!m.some(V=>V.blobUrl&&V.blobUrl.startsWith("blob:")),children:k?a.jsx(jx,{className:"w-5 h-5"}):a.jsx(Lo,{className:"w-5 h-5"})}),a.jsx(fe,{onClick:yn,variant:"outline",children:a.jsx(Rx,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{ref:Ae,className:"relative h-3 bg-gray-200 rounded-full cursor-pointer hover:bg-gray-300 transition-colors group",onClick:Ue,onMouseMove:ln,onMouseLeave:or,children:[a.jsx("div",{className:"absolute h-full bg-blue-600 rounded-full",style:{width:`${R>0?v/R*100:0}%`,transition:k?"none":"width 0.15s ease-out"}}),m.map(V=>{if(!V.isGenerated)return null;const I=R>0?V.startTime/R*100:0,O=R>0?V.duration/R*100:0;return a.jsx("div",{className:"absolute h-full bg-blue-200 rounded-full opacity-50",style:{left:`${I}%`,width:`${O}%`}},V.id)}),Le!==null&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute w-3 h-3 bg-blue-400 rounded-full border border-white shadow-md transform -translate-y-0.5 -translate-x-1.5 opacity-75",style:{left:`${R>0?Le/R*100:0}%`}}),a.jsxs("div",{className:"absolute bg-gray-800 text-white text-xs px-2 py-1 rounded transform -translate-x-1/2 -translate-y-8 pointer-events-none",style:{left:`${R>0?Le/R*100:0}%`},children:[je(Le),a.jsx("div",{className:"absolute left-1/2 top-full w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-800 transform -translate-x-1/2"})]})]}),a.jsx("div",{className:"absolute w-5 h-5 bg-blue-600 rounded-full border-2 border-white shadow-lg transform -translate-y-1 -translate-x-2.5 cursor-grab active:cursor-grabbing hover:scale-110 group-hover:opacity-100 opacity-90",style:{left:`${R>0?v/R*100:0}%`,transition:k?"none":"left 0.15s ease-out, transform 0.2s ease-out"}})]}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[a.jsx("span",{children:je(v)}),a.jsx("span",{children:je(R)})]})]}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:m.map(V=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-medium",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:V.name}),a.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[V.text.substring(0,100),"..."]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:je(V.duration)})]},V.id))})]})})}),a.jsx("div",{className:"flex justify-center",children:a.jsxs(fe,{onClick:()=>{yn(),o()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3",children:[a.jsx(kl,{className:"w-5 h-5 mr-2"}),"Create Video"]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4",children:[u&&u.length>0&&!h&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 max-w-md mx-auto",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(zo,{className:"w-5 h-5 text-yellow-600 mr-2"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Regenerating Audio"}),a.jsx("p",{className:"text-sm text-yellow-600",children:"Previous audio will be replaced with new voice"})]})]})}),!h&&m.length>0&&a.jsxs(fe,{onClick:me,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3",children:[a.jsx(Lo,{className:"w-5 h-5 mr-2"}),u&&u.length>0?`Regenerate Audio (${m.length} parts)`:`Generate Audio (${m.length} parts)`]})]}),h&&a.jsx(Nt,{children:a.jsx(wt,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-medium",children:"Generating Audio..."}),a.jsxs("p",{className:"text-gray-600",children:["Processing part ",P+1," of"," ",m.length]})]}),a.jsx("div",{className:"space-y-2",children:m.map((V,I)=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${I<P?"bg-green-500 text-white":I===P?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:I<P?"":I===P?a.jsx(Dt,{className:"w-3 h-3 animate-spin"}):I+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:V.name}),a.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[V.text.substring(0,100),"..."]})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["~",je(V.duration)]})]},V.id))}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${P/m.length*100}%`}})})]})})})]})]})},Ro=p.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,className:St("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ro.displayName="Input";class pD{isElectron(){return typeof window<"u"&&"electronAPI"in window}getElectronAPI(){if(!this.isElectron())throw new Error("Media storage is only available in Electron environment");return window.electronAPI}getLocalFileUrl(t){if(!this.isElectron())throw new Error("Local file URLs require Electron environment");return`local-file://${t}`}async getThumbnailUrl(t,n){return n==="image"?this.loadImageAsBase64(t):this.loadMediaFile(t)}async saveMediaFile(t,n,r,o,i,s,l){if(!this.isElectron())throw new Error("Media storage requires Electron environment");try{const c=await r.arrayBuffer(),u=new Uint8Array(c);let h,d;const m=n.endsWith("_thumb"),T=m?n.replace("_thumb",""):n;if(m)h=o==="video"?`pexels_video_${s}_${T}_thumb.jpg`:`pexels_photo_${s}_${T}_thumb.jpg`,d="image/jpeg";else if(o==="video")h=`pexels_video_${s}_${n}.mp4`,d="video/mp4";else{const C=i.includes(".png")?".png":".jpg";h=`pexels_photo_${s}_${n}${C}`,d=C===".png"?"image/png":"image/jpeg"}console.log(` Generated filename for ${o} ${n}: ${h}`);const P=await this.getElectronAPI().media.saveMediaFile(t,n,u,h,d);if(!P||!P.success)throw new Error((P==null?void 0:P.error)||"Failed to save media file");return{id:n,fileName:h,relativePath:P.relativePath,filePath:P.filePath,type:o,originalUrl:i,pexelsId:s,photographer:l}}catch(c){throw console.error("Error saving media file:",c),c}}async loadMediaFile(t){if(!this.isElectron())throw new Error("Media storage requires Electron environment");try{const n=await this.getElectronAPI().media.loadMediaFile(t);if(!n||!n.success)throw new Error((n==null?void 0:n.error)||"Failed to load media file");const r=new Uint8Array(n.data),o=new Blob([r]);return URL.createObjectURL(o)}catch(n){throw console.error("Error loading media file:",n),n}}async loadImageAsBase64(t){if(!this.isElectron())throw new Error("Base64 image loading requires Electron environment");try{const n=await this.getElectronAPI().media.loadImageAsBase64(t);if(!n||!n.success)throw new Error((n==null?void 0:n.error)||"Failed to load image as base64");return n.dataUrl}catch(n){throw console.error("Error loading image as base64:",n),n}}async fileExists(t){if(!this.isElectron())return!1;try{const n=await this.getElectronAPI().media.fileExists(t);return(n==null?void 0:n.exists)||!1}catch(n){return console.error("Error checking media file existence:",n),!1}}async getMediaManifest(t){if(!this.isElectron())return null;try{const n=await this.getElectronAPI().media.getMediaManifest(t);return(n==null?void 0:n.manifest)||null}catch(n){return console.error("Error getting media manifest:",n),null}}async deleteStoryMedia(t){if(!this.isElectron())return!1;try{const n=await this.getElectronAPI().media.deleteStoryMedia(t);return(n==null?void 0:n.success)||!1}catch(n){return console.error("Error deleting story media:",n),!1}}async cleanupMedia(){if(!this.isElectron())return!1;try{const t=await this.getElectronAPI().media.cleanupMedia();return(t==null?void 0:t.success)||!1}catch(t){return console.error("Error cleaning up media:",t),!1}}}const zr=new pD,Qy=Object.defineProperty({__proto__:null,mediaStorageService:zr},Symbol.toStringTag,{value:"Module"}),gD=({className:e="",onPrevious:t,onSaveAndFinish:n,onRender:r,storyContent:o="",selectedVoiceId:i="",videoStyle:s="landscape",savedVideoAssets:l,audioChunks:c=[],storyId:u,initialStory:h,onVideoAssetsUpdate:d,onTranscriptInfoUpdate:m,onStockMediaInfoUpdate:T,onSentenceTranscriptsUpdate:P,hasRenderFailed:C=!1,onRetryRender:k,mediaItems:x,setMediaItems:v,timelineItems:w,setTimelineItems:R,layers:M,setLayers:z})=>{var Wm;const U=p.useRef(null),F=p.useRef(null),se=p.useRef(0),J=p.useRef(0),ve=p.useRef(null),ne=p.useRef(new Map),Ae=p.useRef(null),oe=p.useRef(null),gt=p.useRef(null),N=p.useRef(null),Te=p.useRef(0),X=p.useRef(null),ge=p.useRef(!1),me=p.useRef(null),je=p.useRef(new Map),[Ue,De]=p.useState(!0),[At,Ve]=p.useState(null),[at,gn]=p.useState([]),[Be,yn]=p.useState([]),ye=x??at,Xe=v??gn,Tt=w??Be,Qe=R??yn,[re,Pe]=p.useState(80),[Le,an]=p.useState(60),[ln,or]=p.useState(40),[Fe,pr]=p.useState(!1),[pe,Rt]=p.useState(0),[be,vn]=p.useState(0),[_n,yo]=p.useState([]),vo=p.useRef([]),[V,I]=p.useState([]),O=p.useRef([]),[K,le]=p.useState(!1),[de,Ie]=p.useState(!1),[Ee,We]=p.useState(!1),[rt,zt]=p.useState(!1),[jn,xo]=p.useState(!1),[ls,$c]=p.useState(0),[ti,Oc]=p.useState(!1),[Vc,Ra]=p.useState([{id:"voice-layer",name:"Voice Over",visible:!0,locked:!1,items:[],type:"voiceover",duration:0}]),Se=M??Vc,W=z??Ra,[Z,Q]=p.useState("voice-layer"),[$e,Ke]=p.useState(0),[ce,ot]=p.useState(null),[Ge,Bt]=p.useState(null),[ie,It]=p.useState(null),[gr,ze]=p.useState(null),[xn,yr]=p.useState(!1),[vr,Un]=p.useState("Initializing..."),[Qt,_c]=p.useState(null),[Zb,Jb]=p.useState(0),[Ia,pm]=p.useState(0),[ae,ir]=p.useState(null),[Uc,Ma]=p.useState("none"),[zc,gm]=p.useState(null),[Bc,ym]=p.useState(null),[Ye,Wc]=p.useState(null),[vm,Gc]=p.useState(null),[xm,Hc]=p.useState("default"),[eS,wm]=p.useState(null),[wo,cs]=p.useState(null);p.useEffect(()=>{},[ae]);const[us,bm]=p.useState(null),[Wt,Sm]=p.useState(null),[tS,nS]=p.useState(0),[Kc,rS]=p.useState(0),[zn,oS]=p.useState(1),[Da,RD]=p.useState(0),Tm=5,Yc=5,[km,iS]=p.useState(["Arial","Helvetica","Times New Roman","Courier New","Verdana","Georgia","Palatino","Garamond","Bookman","Comic Sans MS","Trebuchet MS","Arial Black","Impact","Lucida Sans Unicode","Tahoma","Lucida Console","Monaco","Courier","serif","sans-serif","monospace","cursive","fantasy"]),sS=()=>km;p.useEffect(()=>{typeof window<"u"&&(window.getVideoEditorFonts=sS)},[km]);const Xc=f=>f.replace(/\\/g,"/"),aS=async f=>{if(je.current.has(f))return je.current.get(f);try{const y=await zr.loadImageAsBase64(f);return je.current.set(f,y),y}catch(y){throw console.error(` Failed to create base64 for ${f}:`,y),y}},lS=async()=>{const f=["Arial","Helvetica","Helvetica Neue","Calibri","Segoe UI","Roboto","Open Sans","Lato","Source Sans Pro","Montserrat","Poppins","Inter","System UI","San Francisco","Avenir","Futura","Century Gothic","Trebuchet MS","Verdana","Tahoma","Geneva","Lucida Grande","Lucida Sans Unicode","Arial Black","Impact","Franklin Gothic Medium","Arial Narrow","Times New Roman","Times","Georgia","Garamond","Palatino","Book Antiqua","Minion Pro","Adobe Garamond Pro","Baskerville","Caslon","Bodoni","Didot","Trajan Pro","Optima","Perpetua","Rockwell","Clarendon","Playfair Display","Merriweather","Libre Baskerville","Courier New","Courier","Monaco","Menlo","Consolas","Inconsolata","Source Code Pro","Fira Code","JetBrains Mono","Roboto Mono","SF Mono","Lucida Console","Liberation Mono","Comic Sans MS","Papyrus","Brush Script MT","Lucida Handwriting","Marker Felt","Chalkduster","Noteworthy","Snell Roundhand","Bradley Hand","Trattatello","Zapfino","Herculanum","Roboto","Open Sans","Lato","Montserrat","Oswald","Source Sans Pro","Slabo 27px","Raleway","PT Sans","Lora","Ubuntu","PT Serif","Playfair Display","Merriweather","Nunito","Poppins","Rubik","Work Sans","Fira Sans","Noto Sans","Mukti","Karla"],y=[],b=document.createElement("canvas").getContext("2d");if(!b)return f.slice(0,20);const A="mmmmmmmmmmlli",E="72px";b.font=`${E} monospace`;const S=b.measureText(A).width;for(const B of f)try{b.font=`${E} "${B}", monospace`;const L=b.measureText(A).width;if(Math.abs(L-S)>1)y.push(B);else{b.font=`${E} "${B}", serif`;const q=b.measureText(A).width;Math.abs(q-S)>1&&y.push(B)}}catch{continue}const j=["Arial","Helvetica","Times New Roman","Courier New","Verdana","Georgia","serif","sans-serif","monospace"];return[...new Set([...y,...j])]},Cm=async f=>{const y=ne.current.get(f);if(y)return y;const g=ye.find(b=>b.id===f);if(!g||g.type!=="voiceover"&&g.type!=="audio")return null;try{let b=null;if(g.previewUrl&&g.previewUrl.startsWith("blob:"))b=g.previewUrl;else if(g.filePath)if(g.filePath.startsWith("blob:"))b=g.filePath;else{const E=Xc(g.filePath);if(!await br.fileExists(E))throw new Error(`Audio file not found: ${E}`);try{b=await br.loadAudioFile(E)}catch(j){throw new Error(`Failed to load from storage: ${j}`)}}if(!b)throw new Error(`No valid audio URL for media ${f}`);const A=new Audio(b);return await new Promise((E,S)=>{const j=setTimeout(()=>{S(new Error("Audio load timeout"))},5e3);A.onloadeddata=()=>{clearTimeout(j),E(!0)},A.onerror=D=>{clearTimeout(j),S(D)},A.load()}),ne.current.set(f,A),A}catch(b){throw new Error(`Failed to load audio for playback ${f}: ${b}`)}},qe=p.useRef(null),bo=p.useRef(null),Bn=p.useRef(new Map),Dr=p.useRef(new Map),kt=p.useRef(!1),ni=()=>{if(console.log(" INIT: Attempting to initialize preview canvas..."),!qe.current){console.error(" INIT FAIL: previewCanvasRef.current is null");return}const f=qe.current.getContext("2d");if(!f){console.error(" INIT FAIL: Cannot get 2D context from canvas");return}bo.current=f,kt.current=!0,console.log(" INIT SUCCESS: Canvas initialized successfully"),La()},La=()=>{if(!qe.current)return;const f=qe.current.parentElement;if(!f)return;const y=f.clientWidth,g=f.clientHeight;let b,A;switch(s){case"square":b=Math.min(y,g),A=b;break;case"vertical":b=Math.min(y,g*9/16),A=b*16/9;break;case"landscape":default:A=Math.min(g,y*9/16),b=A*16/9;break}qe.current.width=b,qe.current.height=A;const E=bo.current;E&&(E.fillStyle="#000000",E.fillRect(0,0,b,A)),lt(pe,0)},qc=async f=>new Promise((y,g)=>{const b=document.createElement("video");b.preload="metadata",b.src=f,b.onloadedmetadata=async()=>{try{b.currentTime=Math.min(1,b.duration*.1),await new Promise(E=>{b.onseeked=()=>{try{const S=document.createElement("canvas");S.width=b.videoWidth,S.height=b.videoHeight;const j=S.getContext("2d");if(j){j.drawImage(b,0,0,S.width,S.height);const D=S.toDataURL("image/jpeg",.7);y(D)}else g(new Error("Could not get canvas context"))}catch(S){g(S)}E()},setTimeout(()=>{try{const S=document.createElement("canvas");S.width=b.videoWidth||320,S.height=b.videoHeight||240;const j=S.getContext("2d");if(j){j.drawImage(b,0,0,S.width,S.height);const D=S.toDataURL("image/jpeg",.7);y(D)}else g(new Error("Could not get canvas context"))}catch(S){g(S)}E()},2e3)})}catch(E){g(E)}},b.onerror=()=>{g(new Error("Failed to load video for thumbnail generation"))},b.load(),setTimeout(()=>{b.src="",b.load()},5e3)}),So=async f=>{if(f.type==="video"){const y=Bn.current.get(f.id);if(y)return y;try{const g=document.createElement("video");let b;if(f.previewUrl)b=f.previewUrl,console.log(` Loading video ${f.id} from previewUrl (blob): ${b.substring(0,50)}...`);else if(f.filePath){console.log(` Loading video ${f.id} from filesystem: ${f.filePath}...`);try{b=await zr.loadMediaFile(f.filePath),console.log(` Created blob URL for video ${f.id}: ${b.substring(0,50)}...`)}catch(S){throw console.warn(` Failed to load video ${f.id} from filesystem:`,S),new Error(`Cannot load video from ${f.filePath}`)}}else throw new Error(`No valid source for video ${f.id}`);g.src=b,g.preload="auto",g.muted=!1;const A=f.volume||100,E=Le;return g.volume=f.muted?0:A*E/1e4,f.source==="pexels"&&b.startsWith("http")&&console.warn(` NETWORK REQUEST DETECTED: Pexels video ${f.id} is using network URL instead of local file!`),await new Promise((S,j)=>{const D=()=>g.readyState>=1&&g.videoWidth>0&&g.videoHeight>0?(S(),!0):!1;g.onloadedmetadata=()=>{D()||setTimeout(()=>{D()},100)},g.onloadeddata=()=>{D()},g.oncanplay=()=>{D()},g.onerror=()=>{j(new Error("Failed to load video"))},g.load(),setTimeout(()=>{g.readyState>=1?S():j(new Error("Video loading timeout"))},5e3)}),Bn.current.set(f.id,g),console.log(` Video element loaded and set for ${f.id}`),setTimeout(()=>{kt.current&&lt(pe,0)},50),g}catch(g){return console.warn(` VIDEO LOAD FAIL: ${f.id} failed to load. Error:`,g),null}}else if(f.type==="image"){const y=Dr.current.get(f.id);if(y)return y;try{const g=new Image;let b;if(f.filePath){console.log(` Loading image ${f.id} as base64: ${f.filePath}...`);try{b=await zr.loadImageAsBase64(f.filePath),console.log(` Using base64 data URL for image ${f.id}: ${b.substring(0,50)}...`)}catch(A){throw console.warn(` Failed to load image as base64 ${f.id}:`,A),new Error(`Cannot load image from ${f.filePath}`)}}else if(f.previewUrl)b=f.previewUrl,console.log(` Loading image ${f.id} from previewUrl (fallback): ${b.substring(0,50)}...`);else if(f.thumbnailUrl)b=f.thumbnailUrl,console.log(` Loading image ${f.id} from thumbnailUrl (fallback): ${b.substring(0,50)}...`);else throw new Error(`No valid source for image ${f.id}`);return await new Promise((A,E)=>{g.onload=()=>{A()},g.onerror=()=>E(new Error("Failed to load image")),g.src=b}),Dr.current.set(f.id,g),console.log(` Image element loaded and set for ${f.id}`),setTimeout(()=>{kt.current&&lt(pe,0)},50),g}catch(g){return console.warn(` IMAGE LOAD FAIL: ${f.id} failed to load. Error:`,g),null}}return null},Em=()=>{const f=qe.current,y=bo.current;if(!f||!y)return console.warn(" Canvas health check failed: Canvas or context is null"),!1;if(f.width<=0||f.height<=0)return console.warn(" Canvas health check failed: Invalid canvas dimensions",{width:f.width,height:f.height}),!1;try{const g=y.getImageData(0,0,1,1);if(!g||!g.data)return console.warn(" Canvas health check failed: Cannot get image data"),!1}catch(g){return console.warn(" Canvas health check failed: Context error",g),!1}return!0},lt=(f=pe,y=0)=>{if(console.log(` renderPreviewFrame called at time ${f} (retry: ${y})`),!Em()){console.warn(" Canvas health check failed, attempting recovery..."),kt.current=!1,setTimeout(()=>{ni(),y<3&&lt(f,y+1)},100);return}if(!kt.current){if(console.warn(` RENDER FAIL: Canvas not initialized yet (canvasInitializedRef.current: ${kt.current}, previewCanvasRef: ${!!qe.current}, previewContextRef: ${!!bo.current})`),y<5){const S=Math.min(100*Math.pow(2,y),2e3);if(console.log(` RETRY: Will retry rendering in ${S}ms (attempt ${y+1}/5)`),me.current&&clearTimeout(me.current),qe.current&&!kt.current){console.log(" RETRY: Attempting early canvas initialization...");try{ni()}catch(j){console.warn(" RETRY: Early initialization failed:",j)}}me.current=setTimeout(()=>{lt(f,y+1)},S)}else{console.error(" RENDER FAIL: Canvas failed to initialize after 5 retries. Trying to force initialization..."),console.log(` FORCE INIT: Canvas state - canvasRef: ${!!qe.current}, contextRef: ${!!bo.current}, initialized: ${kt.current}`);try{qe.current?(console.log(" FORCE INIT: Attempting to reinitialize canvas..."),ni(),setTimeout(()=>{console.log(` FORCE INIT: Retry after forced initialization. Canvas initialized: ${kt.current}`),lt(f,0)},300)):console.error(" CRITICAL: Canvas element is null, cannot force initialization")}catch(S){console.error(" CRITICAL: Cannot initialize canvas:",S)}}return}if(!bo.current||!qe.current){if(console.warn(" RENDER FAIL: Canvas context or canvas ref not available"),y<3){const S=200+y*100;console.log(` RETRY: Canvas context missing, retrying in ${S}ms (attempt ${y+1}/3)`),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{lt(f,y+1)},S)}else console.error(" RENDER FAIL: Canvas context unavailable after retries");return}me.current&&(clearTimeout(me.current),me.current=null),y>0&&console.log(` RENDER SUCCESS: Canvas ready after ${y} retries!`);const g=bo.current,b=qe.current;console.log(` Canvas size: ${b.width}x${b.height}`),console.log(` Layers count: ${Se.length}`),console.log(` Media items count: ${ye.length}`),g.fillStyle="#000000",g.fillRect(0,0,b.width,b.height);let A=0,E=0;[...Se].reverse().forEach((S,j)=>{if(console.log(` Processing layer ${j}: ${S.name} (${S.items.length} items, visible: ${S.visible})`),!S.visible){console.warn(` SKIP: Layer "${S.name}" is not visible`);return}S.items.forEach((D,B)=>{if(console.log(` Processing item ${B}: ${D.id} (${D.startTime}-${D.startTime+D.duration}) mediaId: ${D.mediaId}`),f>=D.startTime&&f<D.startTime+D.duration){console.log(` Item ${D.id} is in time range`);const L=ye.find(H=>H.id===D.mediaId);if(!L){console.warn(` RENDER FAIL: MediaItem not found for item.mediaId: ${D.mediaId}`),console.warn("Available mediaItems:",ye.map(H=>({id:H.id,name:H.name,type:H.type}))),E++;return}console.log(` Found mediaItem: ${L.name} (${L.type})`);const q=D.geometry||{x:0,y:0,width:1,height:1,rotation:0},_=q.x*b.width,Y=q.y*b.height,$=q.width*b.width,G=q.height*b.height,te=q.rotation||0;if(console.log(` Geometry: x=${_.toFixed(1)}, y=${Y.toFixed(1)}, w=${$.toFixed(1)}, h=${G.toFixed(1)}`),g.save(),te!==0?(g.translate(_+$/2,Y+G/2),g.rotate(te*Math.PI/180),g.translate(-($/2),-(G/2))):g.translate(_,Y),L.type==="video"){const H=Bn.current.get(L.id);if(!H)console.warn(` RENDER FAIL: Video element not found in ref for ${L.id}`),console.warn("Available video refs:",Array.from(Bn.current.keys())),E++;else if(console.log(` Video element found: readyState=${H.readyState}, width=${H.videoWidth}, height=${H.videoHeight}, src=${H.src.substring(0,50)}...`),H&&(H.readyState>=1||H.videoWidth>0&&H.videoHeight>0))try{g.drawImage(H,0,0,$,G),console.log(` Successfully rendered video ${L.id}`),A++}catch(ue){console.warn(` RENDER FAIL: Error drawing video ${L.id}:`,ue),E++}else console.warn(` RENDER FAIL: Video ${L.id} not ready - readyState: ${H.readyState}, dimensions: ${H.videoWidth}x${H.videoHeight}`),E++}else if(L.type==="image"){const H=Dr.current.get(L.id);if(!H)console.warn(` RENDER FAIL: Image element not found in ref for ${L.id}`),console.warn("Available image refs:",Array.from(Dr.current.keys())),E++;else if(console.log(` Image element found: complete=${H.complete}, naturalWidth=${H.naturalWidth}, src=${H.src.substring(0,50)}...`),H.complete&&H.naturalWidth>0)try{g.drawImage(H,0,0,$,G),console.log(` Successfully rendered image ${L.id}`),A++}catch(ue){console.warn(` RENDER FAIL: Error drawing image ${L.id}:`,ue),E++}else console.warn(` RENDER FAIL: Image ${L.id} not loaded - complete: ${H.complete}, naturalWidth: ${H.naturalWidth}`),E++}else if(L.type==="text"&&L.text){const H=L.fontFamily||"Arial",ue=Math.min($,G)*.1,we=L.fontBold?"bold":"normal",Ne=L.fontItalic?"italic":"normal";g.font=`${Ne} ${we} ${ue}px ${H}`,g.fillStyle=L.fontColor||"#ffffff",g.strokeStyle="#000000",g.lineWidth=2,g.textAlign="center",g.textBaseline="middle",g.shadowColor="rgba(0, 0, 0, 0.8)",g.shadowBlur=4,g.shadowOffsetX=2,g.shadowOffsetY=2,!L.backgroundTransparent&&L.backgroundColor&&L.backgroundColor!=="#000000"&&(g.save(),g.fillStyle=L.backgroundColor,g.fillRect(0,0,$,G),g.restore(),g.fillStyle=L.fontColor||"#ffffff");const _e=$/2,Ft=L.text.split(" "),wn=$*.99,Ze=[];let Zt=Ft[0]||"";for(let Sn=1;Sn<Ft.length;Sn++){const Fr=Ft[Sn],cn=Zt+" "+Fr;g.measureText(cn).width>wn&&Zt.length>0?(Ze.push(Zt),Zt=Fr):Zt=cn}Zt.length>0&&Ze.push(Zt);let bn,Jt;g.textBaseline="middle",Ze.length===1?(bn=G,Jt=G/2):(bn=G/Ze.length,Jt=bn/2),Ze.forEach((Sn,Fr)=>{const cn=Jt+Fr*bn;let ht=ue;if(Ze.length===1){const Wn=g.measureText(Sn),Oa=$*.9*(ue/Wn.width),eu=G*.8;ht=Math.min(Oa,eu,ue*2)}else{const Wn=Math.max(...Ze.map(wT=>g.measureText(wT).width)),Oa=$*.9*(ue/Wn),eu=bn*.7;ht=Math.min(Oa,eu,ue*1.5)}Math.abs(ht-ue)>1&&(g.font=`${L.fontItalic?"italic":"normal"} ${L.fontBold?"bold":"normal"} ${ht}px ${H}`),g.strokeText(Sn,_e,cn),g.fillText(Sn,_e,cn),g.font=`${Ne} ${we} ${ue}px ${H}`}),g.shadowColor="transparent",g.shadowBlur=0,g.shadowOffsetX=0,g.shadowOffsetY=0}g.restore(),ae&&ae.id===D.id&&(L.type==="image"||L.type==="video"||L.type==="text")&&(cS(g,_,Y,$,G),L.type==="text"&&(g.save(),g.strokeStyle="#00ff00",g.lineWidth=1,g.setLineDash([2,2]),g.strokeRect(_,Y,$,G),g.restore())),g.restore()}else console.log(` SKIP: Item ${D.id} not in time range (current: ${f})`)})}),console.log(` RENDER SUMMARY: ${A} items rendered, ${E} items skipped`),E>0&&A===0?console.warn(` NO ITEMS RENDERED! All ${E} items were skipped. Check the warnings above.`):A>0&&console.log(` RENDER SUCCESS: ${A} items displayed on canvas`)},cS=(f,y,g,b,A)=>{f.strokeStyle="#00aaff",f.lineWidth=2,f.setLineDash([5,5]),f.strokeRect(y,g,b,A),f.setLineDash([]);const E=8,S=[{name:"tl",x:y-E/2,y:g-E/2},{name:"tr",x:y+b-E/2,y:g-E/2},{name:"bl",x:y-E/2,y:g+A-E/2},{name:"br",x:y+b-E/2,y:g+A-E/2},{name:"t",x:y+b/2-E/2,y:g-E/2},{name:"b",x:y+b/2-E/2,y:g+A-E/2},{name:"l",x:y-E/2,y:g+A/2-E/2},{name:"r",x:y+b-E/2,y:g+A/2-E/2}];f.fillStyle="#00aaff",f.strokeStyle="#ffffff",f.lineWidth=1,S.forEach(j=>{f.fillRect(j.x,j.y,E,E),f.strokeRect(j.x,j.y,E,E)})};p.useEffect(()=>{vo.current=_n},[_n]),p.useEffect(()=>{O.current=V},[V]);const uS=async f=>{const y=Fe;if(Fe&&To(),oe.current){const E=oe.current.clientWidth,S=f/be*E;Ke(S)}_n.forEach(E=>{E.pause(),E.currentTime=0}),yo([]),O.current.forEach(E=>{E.pause()}),I([]);const g=[];for(const E of Se)if(E.visible){for(const S of E.items)if(f>=S.startTime&&f<S.startTime+S.duration){const j=ye.find(D=>D.id===S.mediaId);if(!j)continue;if(j.type==="video"){const D=new Promise(async B=>{const L=await So(j);if(L){const q=Math.max(0,f-S.startTime);L.currentTime=q;const _=()=>{L.removeEventListener("seeked",_),B()};L.addEventListener("seeked",_),setTimeout(()=>{L.removeEventListener("seeked",_),B()},500)}else B()});g.push(D)}}}const A=Se.flatMap(E=>E.visible?E.items:[]).filter(E=>f>=E.startTime&&f<E.startTime+E.duration);for(const E of A){const S=new Promise(async j=>{try{const D=ye.find(B=>B.id===E.mediaId);if(D&&(D.type==="voiceover"||D.type==="audio")){const B=await Cm(E.mediaId);if(B){const L=f-E.startTime;B.currentTime=L,y&&(await B.play(),yo(q=>[...q,B]))}}}catch(D){Ve(`Failed to seek audio ${E.mediaId}: ${D}`)}j()});g.push(S)}await Promise.all(g),Rt(f),lt(f),y&&Jc()},Qc=async f=>{if(!f||be===0)return;const g=(performance.now()-se.current)/1e3,b=J.current+g;if(b>=be){console.log(" Timeline reached end, resetting to beginning..."),To(),Rt(0),J.current=0,se.current=performance.now(),await uS(0),setTimeout(()=>{if(oe.current&&be>0){const E=oe.current.clientWidth,S=0/be*E;console.log(` Resetting indicator position to: ${S}px (0/${be}s)`),Ke(S)}else console.log(" Setting indicator position to 0 (fallback)"),Ke(0)},50);return}const A=Math.min(b,be);Rt(A),lt(A),GS(),f&&b<be&&(F.current=requestAnimationFrame(()=>Qc(f)))},Nm=f=>{if(!qe.current)return{x:0,y:0};const y=qe.current,g=y.getBoundingClientRect();return{x:(f.clientX-g.left)*(y.width/g.width),y:(f.clientY-g.top)*(y.height/g.height)}},Pm=(f,y)=>{if(!qe.current)return null;const g=qe.current;for(const b of Se)if(b.visible)for(const A of b.items){const E=ye.find(_=>_.id===A.mediaId);if(!E||E.type!=="image"&&E.type!=="video"&&E.type!=="text"||!(pe>=A.startTime&&pe<A.startTime+A.duration))continue;const j=A.geometry||{x:0,y:0,width:1,height:1},D=j.x*g.width,B=j.y*g.height,L=j.width*g.width,q=j.height*g.height;if(f>=D&&f<=D+L&&y>=B&&y<=B+q)return A}return null},jm=(f,y,g)=>{if(!qe.current)return null;const b=qe.current,A=g.geometry||{x:0,y:0,width:1,height:1},E=A.x*b.width,S=A.y*b.height,j=A.width*b.width,D=A.height*b.height,B=15,L=[{name:"tl",x:E,y:S},{name:"tr",x:E+j,y:S},{name:"bl",x:E,y:S+D},{name:"br",x:E+j,y:S+D},{name:"t",x:E+j/2,y:S},{name:"b",x:E+j/2,y:S+D},{name:"l",x:E,y:S+D/2},{name:"r",x:E+j,y:S+D/2}];for(const q of L)if(Math.abs(f-q.x)<=B&&Math.abs(y-q.y)<=B)return q.name;return null},dS=(f,y)=>{if(Uc==="move")return"move";if(Uc==="resize")switch(zc){case"tl":case"br":return"nw-resize";case"tr":case"bl":return"ne-resize";case"t":case"b":return"n-resize";case"l":case"r":return"e-resize";default:return"nwse-resize"}const g=Pm(f,y);if(g){if(ae&&g.id===ae.id){const b=jm(f,y,g);if(b)switch(b){case"tl":case"br":return"nw-resize";case"tr":case"bl":return"ne-resize";case"t":case"b":return"n-resize";case"l":case"r":return"e-resize";default:return"nwse-resize"}}if(ae&&g.id===ae.id){const b=ye.find(A=>A.id===g.mediaId);if(b&&(b.type==="image"||b.type==="video"))return"move"}else{const b=ye.find(A=>A.id===g.mediaId);if(b&&(b.type==="image"||b.type==="video"))return"pointer"}}return"default"},fS=f=>{const y=Nm(f),g=Pm(y.x,y.y);if(g){ir(g);const b=jm(y.x,y.y,g);b?(Ma("resize"),gm(b),Wc(g.geometry||{x:0,y:0,width:1,height:1})):(Ma("move"),Wc(g.geometry||{x:0,y:0,width:1,height:1})),ym(y)}else ir(null),Ma("none")},hS=(f,y)=>{const g=Nm(f),b=dS(g.x,g.y);if(b!==xm&&Hc(b),!ae||!Bc||!Ye||!qe.current)return;const A=qe.current,E=(g.x-Bc.x)/A.width,S=(g.y-Bc.y)/A.height;let j={...Ye};if(y==="move")j.x=Math.max(0,Math.min(1-j.width,Ye.x+E)),j.y=Math.max(0,Math.min(1-j.height,Ye.y+S));else if(y==="resize"&&zc){switch(zc){case"tl":j.width=Math.max(.05,Ye.width-E),j.height=Math.max(.05,Ye.height-S),j.x=Ye.x+Ye.width-j.width,j.y=Ye.y+Ye.height-j.height;break;case"tr":j.width=Math.max(.05,Ye.width+E),j.height=Math.max(.05,Ye.height-S),j.y=Ye.y+Ye.height-j.height;break;case"bl":j.width=Math.max(.05,Ye.width-E),j.height=Math.max(.05,Ye.height+S),j.x=Ye.x+Ye.width-j.width;break;case"br":j.width=Math.max(.05,Ye.width+E),j.height=Math.max(.05,Ye.height+S);break;case"t":j.height=Math.max(.05,Ye.height-S),j.y=Ye.y+Ye.height-j.height;break;case"b":j.height=Math.max(.05,Ye.height+S);break;case"l":j.width=Math.max(.05,Ye.width-E),j.x=Ye.x+Ye.width-j.width;break;case"r":j.width=Math.max(.05,Ye.width+E);break}j.x=Math.max(0,Math.min(1-j.width,j.x)),j.y=Math.max(0,Math.min(1-j.height,j.y)),j.width=Math.min(1-j.x,j.width),j.height=Math.min(1-j.y,j.height)}pS(ae.id,j)},Am=()=>{ae&&Zc(ae.id),Ma("none"),gm(null),ym(null),Wc(null)},mS=()=>{Hc("default"),Am()},pS=(f,y)=>{const g=Tt.find(b=>b.id===f);if(g){const b=ye.find(A=>A.id===g.mediaId);b&&b.type==="text"&&bS(f,y),Xe(A=>A.map(E=>E.id===g.mediaId?{...E,x:y.x,y:y.y,width:y.width,height:y.height}:E))}W(b=>b.map(A=>({...A,items:A.items.map(E=>E.id===f?{...E,geometry:y}:E)}))),ir(b=>b&&b.id===f?{...b,geometry:y}:b),kt.current&&lt(pe),ri()};p.useEffect(()=>(lS().then(f=>{iS(f)}),setTimeout(()=>{ni(),window.addEventListener("resize",La)},100),ye.forEach(f=>{!Bn.current.has(f.id)&&!Dr.current.has(f.id)&&So(f).then(()=>{}).catch(y=>{console.error(` Failed to load media element ${f.id}:`,y)})}),()=>{window.removeEventListener("resize",La),Bn.current.forEach(f=>{f.pause(),f.src="",f.load()}),Bn.current.clear(),Dr.current.clear(),ye.forEach(f=>{f.thumbnailUrl&&f.thumbnailUrl.startsWith("blob:")&&URL.revokeObjectURL(f.thumbnailUrl),f.previewUrl&&f.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(f.previewUrl),f.filePath&&f.filePath.startsWith("blob:")&&URL.revokeObjectURL(f.filePath)})}),[]),p.useEffect(()=>{ae&&ye.find(y=>y.id===ae.mediaId&&y.type==="text")&&setTimeout(()=>{kt.current&&lt(pe)},50)},[ae==null?void 0:ae.id,pe]),p.useEffect(()=>{ye.filter(y=>y.type==="text").length>0&&kt.current&&lt(pe)},[JSON.stringify(ye.filter(f=>f.type==="text").map(f=>({id:f.id,fontFamily:f.fontFamily,fontSize:f.fontSize,fontColor:f.fontColor,backgroundColor:f.backgroundColor,backgroundTransparent:f.backgroundTransparent,fontBold:f.fontBold,fontItalic:f.fontItalic,text:f.text})))]),p.useEffect(()=>{La(),kt.current&&lt(0)},[s]),p.useEffect(()=>{const f=ye.filter(y=>(y.type==="voiceover"||y.type==="audio")&&y.name.includes("(Part")&&!ne.current.has(y.id));f.length>0&&Dm(f).catch(y=>{console.error("Failed to preload split audio elements:",y)}),console.log(` MEDIA LOADING: Processing ${ye.length} media items for element loading`),ye.forEach((y,g)=>{const b=Bn.current.has(y.id),A=Dr.current.has(y.id);if(console.log(` Item ${g}: ${y.id} (${y.type}) - videoRef: ${b}, imageRef: ${A}`),!b&&!A){console.log(` Loading element for ${y.id}...`);const E=Rm(y);So(E)}else console.log(` Element already loaded for ${y.id}`)}),console.log(` REFS STATUS: ${Bn.current.size} video refs, ${Dr.current.size} image refs`)},[ye]);const Rm=f=>{var y;return f.previewUrl&&f.previewUrl.startsWith("blob:")?(console.warn(` BLOB URL FIX: Clearing invalid blob URL for ${f.id}: ${f.previewUrl.substring(0,30)}... 
       Will use filePath: ${(y=f.filePath)==null?void 0:y.substring(0,50)}...`),{...f,previewUrl:void 0}):f};p.useEffect(()=>{if(ye.length>0&&!ge.current&&ye.some(y=>y.previewUrl&&y.previewUrl.startsWith("blob:"))){const y=ye.map(Rm);Xe(y),ge.current=!0,setTimeout(()=>{kt.current&&lt(pe)},100)}},[ye.length]),p.useEffect(()=>()=>{me.current&&(clearTimeout(me.current),me.current=null)},[]);const To=()=>{if(oe.current){const f=oe.current.clientWidth,y=$e/f*be;Rt(y),J.current=y}pr(!1),vo.current.forEach(f=>f.pause()),O.current.forEach(f=>f.pause()),F.current&&(cancelAnimationFrame(F.current),F.current=null),ve.current&&(clearInterval(ve.current),ve.current=null)},gS=()=>{var f;return(f=U.current)==null?void 0:f.click()},[yS,Fa]=p.useState(!1),[vS,ds]=p.useState(!1),xS=()=>Fa(!0),Zc=f=>{const y=Tt.find(g=>g.id===f);if(y&&y.geometry){const g=y.geometry;Xe(b=>b.map(A=>A.id===y.mediaId?{...A,x:g.x,y:g.y,width:g.width,height:g.height}:A))}},An=(f,y)=>{Xe(g=>g.map(b=>b.id===f?{...b,...y}:b)),(y.x!==void 0||y.y!==void 0||y.width!==void 0||y.height!==void 0)&&(Qe(g=>g.map(b=>{var A,E,S,j,D;return b.mediaId===f?{...b,geometry:{...b.geometry,x:y.x??((A=b.geometry)==null?void 0:A.x)??0,y:y.y??((E=b.geometry)==null?void 0:E.y)??0,width:y.width??((S=b.geometry)==null?void 0:S.width)??1,height:y.height??((j=b.geometry)==null?void 0:j.height)??1,rotation:((D=b.geometry)==null?void 0:D.rotation)??0}}:b})),W(g=>g.map(b=>({...b,items:b.items.map(A=>{var E,S,j,D,B;return A.mediaId===f?{...A,geometry:{...A.geometry,x:y.x??((E=A.geometry)==null?void 0:E.x)??0,y:y.y??((S=A.geometry)==null?void 0:S.y)??0,width:y.width??((j=A.geometry)==null?void 0:j.width)??1,height:y.height??((D=A.geometry)==null?void 0:D.height)??1,rotation:((B=A.geometry)==null?void 0:B.rotation)??0}}:A})})))),kt.current&&lt(pe),ri()};p.useEffect(()=>{ae&&Zc(ae.id)},[ae==null?void 0:ae.id,ae==null?void 0:ae.geometry]);const wS=(f,y=1920,g=1080,b={})=>{const E=document.createElement("canvas").getContext("2d");if(!E)return{x:.1,y:.8,width:.8,height:.15};const{fontFamily:S="Arial",fontSize:j=Math.min(y,g)*.04,fontWeight:D="normal",fontStyle:B="normal",maxWidthRatio:L=.8,position:q="bottom",forceFullWidth:_=!1,minHeight:Y=.12}=b;E.font=`${B} ${D} ${j}px ${S}`;const $=_?.95:L,G=f.split(" "),te=y*$,H=[];let ue=G[0]||"";for(let cn=1;cn<G.length;cn++){const ht=G[cn],Wn=ue+" "+ht;E.measureText(Wn).width>te&&ue.length>0?(H.push(ue),ue=ht):ue=Wn}ue.length>0&&H.push(ue);let we=0,Ne=0,_e=0;H.forEach(cn=>{const ht=E.measureText(cn);let Wn=0;ht.actualBoundingBoxLeft!==void 0&&ht.actualBoundingBoxRight!==void 0?Wn=ht.actualBoundingBoxLeft+ht.actualBoundingBoxRight:Wn=ht.width,Wn>we&&(we=Wn),ht.actualBoundingBoxAscent!==void 0&&ht.actualBoundingBoxDescent!==void 0&&(ht.actualBoundingBoxAscent>Ne&&(Ne=ht.actualBoundingBoxAscent),ht.actualBoundingBoxDescent>_e&&(_e=ht.actualBoundingBoxDescent))});let Ft=we,wn;if(H.length===1)wn=Ne+_e||j*.8;else{const cn=Ne+_e||j*.8,ht=j*.1;wn=cn+(H.length-1)*(cn+ht)}_&&(Ft=y*$),Ft=Math.max(Ft,j*.5),wn=Math.max(wn,j*.5);const Ze=g*Y;wn=Math.max(wn,Ze);const Zt=Math.min(Ft/y,$),bn=Math.min(wn/g,.4);let Jt=(1-Zt)/2,Sn;const Fr=.005;switch(q){case"top":Sn=Fr;break;case"center":Sn=(1-bn)/2;break;case"bottom":default:Sn=Math.max(1-bn-Fr,0);break}return{x:Jt,y:Sn,width:Zt,height:bn,rotation:0}},bS=(f,y)=>{const g=Tt.find(we=>we.id===f);if(!g)return;const b=ye.find(we=>we.id===g.mediaId);if(!b||b.type!=="text"||!b.text)return;const A=qe.current,E=(A==null?void 0:A.width)||1920,S=(A==null?void 0:A.height)||1080,j=y.width*E,D=y.height*S,L=document.createElement("canvas").getContext("2d");if(!L)return;const q=b.fontSize||Math.min(E,S)*.04;L.font=`${b.fontItalic?"italic":"normal"} ${b.fontBold?"bold":"normal"} ${q}px ${b.fontFamily||"Arial"}`;const _=b.text.split(" "),Y=[];let $=_[0]||"";for(let we=1;we<_.length;we++){const Ne=_[we],_e=$+" "+Ne;L.measureText(_e).width>j*.9&&$.length>0?(Y.push($),$=Ne):$=_e}$.length>0&&Y.push($);const G=Math.max(...Y.map(we=>L.measureText(we).width)),te=Y.length*q*1.1,H=G>j*.9,ue=te>D*.8;if(H||ue){const we=j*.9/G,Ne=D*.8/te,_e=Math.min(we,Ne),Ft=Math.max(q*_e,8);Xe(wn=>wn.map(Ze=>Ze.id===b.id?{...Ze,fontSize:Ft}:Ze))}},SS=(f,y=0)=>{const g=qe.current,b=(g==null?void 0:g.width)||1920,A=(g==null?void 0:g.height)||1080,E=Tt.find(q=>{var _,Y;return q.startTime===y&&(((_=ye.find($=>$.id===q.mediaId))==null?void 0:_.type)==="voiceover"||((Y=ye.find($=>$.id===q.mediaId))==null?void 0:Y.type)==="audio")}),S=(E==null?void 0:E.duration)||0;console.log(` AUDIO DURATION: Audio timeline item duration: ${S}s, Audio start time: ${y}s`);const j=f.segments.map(q=>{const _=(q.end-q.start)/Math.max(...f.segments.map($=>$.end)),Y=S*_;return console.log(` SEGMENT DURATION: "${q.text.substring(0,30)}..." - Original: ${q.end-q.start}s, Proportional: ${Y.toFixed(2)}s`),{id:`text_segment_${q.id}_${Date.now()}`,name:`Text: ${q.text.substring(0,30)}${q.text.length>30?"...":""}`,type:"text",duration:Y,filePath:"",text:q.text,fontFamily:"Arial",fontSize:Math.min(b,A)*.04,fontBold:!1,fontItalic:!1,fontColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.7)",backgroundTransparent:!1}});Xe(q=>{const _=q.filter($=>$.type==="text").map($=>$.id),Y=j.filter($=>!_.includes($.id));return Y.length>0?(console.log(` CREATE TRANSCRIPT: Adding ${Y.length} new text media items from transcript`),[...q,...Y]):(console.log(" CREATE TRANSCRIPT: All text items already exist, skipping duplicates"),q)});const D=j.map((q,_)=>{const Y=f.segments[_],$=wS(Y.text,b,A,{fontFamily:q.fontFamily,fontSize:q.fontSize,fontWeight:q.fontBold?"bold":"normal",fontStyle:q.fontItalic?"italic":"normal",position:"bottom",padding:0,forceFullWidth:!0,minHeight:.2}),G=Y.start/Math.max(...f.segments.map(ue=>ue.end)),te=y+S*G,H=te+q.duration;return console.log(` TRANSCRIPT SEGMENT: "${Y.text.substring(0,30)}..." - Original: ${Y.start}s-${Y.end}s, Timeline: ${te.toFixed(2)}s-${H.toFixed(2)}s, Duration: ${q.duration.toFixed(2)}s`),{id:`timeline_${q.id}`,mediaId:q.id,startTime:te,duration:q.duration,track:0,geometry:$}});W(q=>{const _=q.findIndex(Y=>Y.type==="text");if(_!==-1){const Y=[...q],$=Y[_].items.map(te=>te.id),G=D.filter(te=>!$.includes(te.id));return G.length>0?(console.log(` CREATE TRANSCRIPT: Adding ${G.length} new timeline items to existing text layer`),Y[_]={...Y[_],items:[...Y[_].items,...G]}):console.log(" CREATE TRANSCRIPT: All timeline items already exist in text layer, skipping duplicates"),Y}else{const Y={id:`text_layer_${Date.now()}`,name:"Text",type:"text",visible:!0,locked:!1,items:D};return console.log(` CREATE TRANSCRIPT: Creating new text layer with ${D.length} timeline items`),[...q,Y]}}),Qe(q=>{const _=q.map($=>$.id),Y=D.filter($=>!_.includes($.id));return Y.length>0?(console.log(` CREATE TRANSCRIPT: Adding ${Y.length} new timeline items to global timeline`),[...q,...Y]):(console.log(" CREATE TRANSCRIPT: All timeline items already exist globally, skipping duplicates"),q)});const B=Math.max(...f.segments.map(q=>q.end));B>be&&vn(B);const L={sentences:f.segments.map((q,_)=>{const Y=j[_],$=q.start/Math.max(...f.segments.map(te=>te.end)),G=y+S*$;return{id:Y.id,text:q.text,startTime:G,duration:Y.duration,endTime:G+Y.duration,audioChunkId:void 0,chapterNumber:void 0}}),totalDuration:y+S,language:"en",savedAt:new Date().toISOString()};P&&P(L),setTimeout(()=>{ri()},100)},Im=async(f,y,g,b)=>{const A=g.startsWith("video/")?"video":g.startsWith("image/")?"image":g.startsWith("audio/")?"audio":null;if(!A)return console.warn(` Unsupported file type: ${g} for ${y}`),null;try{let E=0,S="";const j=URL.createObjectURL(f);if(A==="video"){const _=document.createElement("video");_.preload="metadata",_.src=j,await new Promise(Y=>{_.onloadedmetadata=async()=>{E=_.duration,_.currentTime=1,await new Promise($=>{_.onseeked=()=>{const G=document.createElement("canvas");G.width=_.videoWidth,G.height=_.videoHeight;const te=G.getContext("2d");te==null||te.drawImage(_,0,0,G.width,G.height),S=G.toDataURL("image/jpeg"),$()}}),Y()},_.onerror=()=>Y()})}else if(A==="audio"){const _=new Audio(j);await new Promise(Y=>{let $=!1;const G=()=>{$||($=!0,Y())};_.onloadedmetadata=()=>{E=_.duration,G()},_.onloadeddata=()=>{E===0&&_.duration>0&&(E=_.duration)},_.oncanplaythrough=()=>{E===0&&_.duration>0&&(E=_.duration)},_.onerror=te=>{console.error(" Audio loading error:",{fileName:y,error:te,src:j.substring(0,50)+"..."}),G()},_.load(),setTimeout(()=>{$||(console.warn(` Audio loading timeout for ${y}, duration: ${E}`),G())},3e3)})}let D=j,B=j,L=j;if(u)try{if(D=(await zr.saveMediaFile(u,b,f,A==="video"?"video":"image",j,"local","User")).relativePath,B=j,A==="image")try{L=await zr.loadImageAsBase64(D)}catch(Y){console.warn("Failed to load image as base64 for thumbnail, using blob URL:",Y),L=j}else L=S}catch(_){console.warn("Failed to save media file to filesystem, using blob URL:",_),B=j,L=j}return{id:b,name:y.split(".")[0],type:A,duration:E,filePath:D,previewUrl:B,thumbnailUrl:S||(A==="image"?L:""),text:""}}catch(E){return console.error(`Failed to process file ${y}:`,E instanceof Error?E.message:"Unknown error"),null}},TS=async f=>{if(!u)return console.error("Story ID is required to import saved stock media"),[];const y=[];for(const g of f){if(!g.fileData){console.warn(` No file data for stock item ${g.id}, skipping`);continue}try{const b=`stock-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,A=new Uint8Array(g.fileData.fileBuffer),E=new Blob([A],{type:g.fileData.fileType}),S=await Im(E,g.fileData.fileName,g.fileData.fileType,b);if(S){if(S.source=g.source,S.pexelsId=g.pexelsId,S.photographer=g.photographer,S.searchQuery=g.searchQuery,S.name=`${g.name} (${g.photographer})`,S.segmentId=g.segmentId,g.thumbnailData)try{if(g.type==="image"){const j=btoa(String.fromCharCode(...new Uint8Array(g.thumbnailData.fileBuffer))),D=g.thumbnailData.fileType;S.thumbnailUrl=`data:${D};base64,${j}`}else{const j=btoa(String.fromCharCode(...new Uint8Array(g.thumbnailData.fileBuffer))),D=g.thumbnailData.fileType;S.thumbnailUrl=`data:${D};base64,${j}`}}catch(j){console.warn(`Failed to process thumbnail for stock item ${g.id}:`,j)}if(g.type==="image"){const j=g.endTime-g.startTime;S.duration=j,console.log(` STOCK IMAGE: Using transcript duration ${j}s instead of default 5s for ${g.name}`)}y.push(S)}}catch(b){console.error(` Failed to import stock media ${g.id}:`,b);continue}}return Xe(g=>{const b=g.map(E=>E.id),A=y.filter(E=>!b.includes(E.id));return A.length>0?(console.log(` IMPORT STOCK: Adding ${A.length} new stock media items (${y.length-A.length} duplicates skipped)`),[...g,...A]):(console.log(` IMPORT STOCK: All ${y.length} stock media items already exist, skipping duplicates`),g)}),y},kS=async(f,y)=>{const g=qe.current,b=(g==null?void 0:g.width)||1920,A=(g==null?void 0:g.height)||1080;console.log(` STOCK MAPPING: Mapping ${f.length} imported media items to ${y.length} original stock items`);const E=f.map(Y=>{const $=y.find(_e=>_e.segmentId===Y.segmentId);if(!$)return console.warn(` No original stock data found for imported media ${Y.id} with segmentId ${Y.segmentId}`),null;console.log(` STOCK MAPPING: Successfully mapped imported media ${Y.id} to segment ${$.segmentId}`);const G=$.width/$.height,te=b/A;let H,ue,we,Ne;return G>te?(H=A*G,ue=A,we=(b-H)/2,Ne=0):(H=b,ue=b/G,we=0,Ne=(A-ue)/2),{id:`timeline_pexels_${Y.id}`,mediaId:Y.id,startTime:$.startTime,duration:$.endTime-$.startTime,track:0,geometry:{x:we/b,y:Ne/A,width:H/b,height:ue/A,rotation:0}}}).filter(Boolean),S="stocks-layer",j=Se.findIndex(Y=>Y.id===S);let D;if(j>=0)D=Se.map(Y=>{if(Y.id===S){const $=Y.items.map(te=>te.id),G=E.filter(te=>!$.includes(te.id));return G.length>0?(console.log(` ADD STOCK: Adding ${G.length} new stock timeline items to existing layer (${E.length-G.length} duplicates skipped)`),{...Y,items:[...Y.items,...G]}):(console.log(` ADD STOCK: All ${E.length} stock timeline items already exist in layer, skipping duplicates`),Y)}return Y});else{const Y={id:S,name:"Stock Media",visible:!0,locked:!1,items:E,type:"footage",duration:Math.max(...y.map(G=>G.endTime))};let $=-1;for(let G=Se.length-1;G>=0;G--)if(Se[G].type==="text"){$=G;break}$>=0?(D=[...Se.slice(0,$+1),Y,...Se.slice($+1)],console.log(` ADD STOCK: Inserted stock media layer after text layer at index ${$}`)):(D=[Y,...Se],console.log(" ADD STOCK: No text layers found, added stock media layer at top"))}console.log(` RESTORATION FLOW: Setting ${D.length} layers with stock media`),W(D);const B=Math.max(...y.map(Y=>Y.endTime));B>be&&vn(B);const L=f.map(async Y=>{try{return await So(Y),console.log(` Stock media element loaded: ${Y.id}`),!0}catch($){return console.error(` Failed to load stock media element ${Y.id}:`,$),!1}}),_=(await Promise.all(L)).filter(Boolean).length;console.log(` STOCK MEDIA LOADED: ${_}/${f.length} items ready for rendering`),console.log(" Auto-render will be triggered by useEffect hooks when layers change")},CS=async f=>{try{const y=await TS(f);if(y.length===0){console.warn(" No media items were successfully imported");return}await kS(y,f)}catch(y){throw console.error(" Failed to create stock media layer:",y),y}},ES=async()=>{if(!u){Ve("Story ID is required for stock media fetching");return}if(Se.filter(y=>y.type==="text").length===0){Ve("No transcript found. Please generate transcript first.");return}ds(!0)},NS=async f=>{if(!u){Ve("Story ID is required for stock media fetching");return}try{if(Un("Fetching related stock media..."),yr(!0),ds(!1),f.length===0){Ve("No transcript segments selected for stock media generation."),yr(!1);return}Un(`Searching for media based on ${f.length} transcript segments...`),console.log(` STOCK MEDIA: Requesting stock media for ${f.length} transcript segments:`,f.map(g=>({id:g.id,text:g.text.substring(0,50)+"..."})));const y=await vt.fetchStockMedia(f,u);console.log(` STOCK MEDIA: Received ${y.stockMedia.length} stock media items from backend`),Un("Creating stock media layer..."),await CS(y.stockMedia),Un(` Stock media completed! ${y.totalItems} items added to media library and timeline.`),setTimeout(()=>{yr(!1)},1e3)}catch(y){console.error(" Failed to fetch stock media:",y),Ve(y instanceof Error?y.message:"Failed to fetch stock media"),yr(!1)}},PS=async f=>{if(!u){Ve("Story ID is required for transcript processing");return}try{yr(!0),Un("Loading audio file..."),Fa(!1);let y;if(f.filePath.startsWith("blob:"))y=await(await fetch(f.filePath)).arrayBuffer();else try{y=await window.electronAPI.audio.loadAudioFile(f.filePath)}catch(B){throw new Error(`Failed to load audio file: ${B}`)}const b=(B=>{var _;const L=(_=B.split(".").pop())==null?void 0:_.toLowerCase();return{mp3:"audio/mpeg",wav:"audio/wav",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",webm:"audio/webm"}[L||""]||"audio/mpeg"})(f.name),A=new Blob([y],{type:b}),E=new File([A],f.name,{type:b});Un("Generating transcript with AI...");const S=await vt.generateTranscript(E,u,f.id);Un("Creating text layers...");const j=Tt.find(B=>B.mediaId===f.id),D=(j==null?void 0:j.startTime)||0;console.log(` TRANSCRIPT: Audio file "${f.name}" starts at ${D}s in timeline`),SS(S,D)}catch(y){console.error(" Failed to generate transcript:",y),Ve(y instanceof Error?y.message:"Failed to generate transcript")}finally{yr(!1)}},jS=()=>{const f=ye.filter(y=>y.type==="voiceover");return f.length===0?a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-4 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-64",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No voiceover items found"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Generate some voiceover audio first to create transcripts."}),a.jsx(fe,{size:"sm",onClick:()=>Fa(!1),className:"mt-2 text-xs",children:"Close"})]}):a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-3 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-80  overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Select Voiceover for Transcript"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>Fa(!1),className:"text-xs h-6 w-6 p-0",children:a.jsx(Ti,{className:"w-3 h-3"})})]}),a.jsx("div",{className:"space-y-2",children:f.map(y=>{var g;return a.jsxs("div",{onClick:()=>PS(y),className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-100 hover:border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ug,{className:"w-4 h-4 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium truncate max-w-48",children:y.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[(g=y.duration)==null?void 0:g.toFixed(1),"s"]})]})]}),a.jsx(fe,{size:"sm",className:"text-xs h-7",children:"Generate"})]},y.id)})})]})},AS=()=>{const f=ye.filter(g=>g.type==="voiceover"||g.type==="audio"),y=[];for(const g of f){const b=Se.filter(E=>E.type==="text"),A=[];for(const E of b)for(const S of E.items){const j=ye.find(D=>D.id===S.mediaId);j&&j.text&&(j.text&&g.text&&j.text.includes(g.text)||g.text&&j.text&&g.text.includes(j.text))&&A.push({id:parseInt(S.id)||A.length,start:S.startTime,end:S.startTime+S.duration,text:j.text})}A.length>0&&y.push({id:g.id,name:g.name,duration:g.duration,mediaItem:g,segments:A})}return y.length===0?a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-4 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-64",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No audio clips with transcripts found"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Generate some audio clips with transcripts first to create stock media."}),a.jsx(fe,{size:"sm",onClick:()=>ds(!1),className:"mt-2 text-xs",children:"Close"})]}):a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-3 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-96 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Select Audio Clips for Stock Media Generation"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>ds(!1),className:"text-xs h-6 w-6 p-0",children:a.jsx(Ti,{className:"w-3 h-3"})})]}),a.jsx("div",{className:"space-y-2 mb-3",children:y.map(g=>a.jsxs("div",{onClick:()=>NS(g.segments),className:"flex items-start justify-between p-2 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-100 hover:border-gray-200",children:[a.jsxs("div",{className:"flex items-start space-x-2 flex-1",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("p",{className:"text-sm font-medium truncate max-w-48",children:g.name}),a.jsxs("span",{className:"text-xs text-gray-500",children:[g.duration.toFixed(1),"s"]})]}),a.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:g.segments.map(b=>b.text).join(" ")})]})]}),a.jsx(fe,{size:"sm",className:"text-xs h-7",children:"Generate"})]},g.id))}),a.jsx("div",{className:"flex space-x-2",children:a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>ds(!1),children:"Cancel"})})]})},RS=async f=>{const y=f.target.files;if(!(!y||y.length===0)){if(!u){Ve("Story ID is required to save media files");return}for(const g of Array.from(y))try{const b=`custom-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,A=await Im(g,g.name,g.type,b);A&&Xe(E=>E.map(j=>j.id).includes(A.id)?(console.log(` MANUAL IMPORT: File "${A.name}" already exists, skipping duplicate`),E):(console.log(` MANUAL IMPORT: Adding new file "${A.name}"`),[...E,A]))}catch(b){console.error(` Failed to import file ${g.name}:`,b),Ve(b instanceof Error?b.message:"Failed to process file")}f.target.value=""}},IS=()=>{if(Se.length>=Tm)return;const f={id:`layer-${Se.length+1}`,name:`Layer ${Se.length+1}`,visible:!0,locked:!1,items:[],type:"main"};W(y=>[f,...y]),Q(f.id)},MS=async(f,y,g,b)=>{const A=await DS(f.filePath),E=A.sampleRate,S=A.numberOfChannels,j=Math.floor(y*E),D=j,B=A.length-j,L=new(window.AudioContext||window.webkitAudioContext),q=L.createBuffer(S,D,E);for(let Ze=0;Ze<S;Ze++){const Zt=A.getChannelData(Ze),bn=q.getChannelData(Ze);for(let Jt=0;Jt<D;Jt++)bn[Jt]=Zt[Jt]}const _=L.createBuffer(S,B,E);for(let Ze=0;Ze<S;Ze++){const Zt=A.getChannelData(Ze),bn=_.getChannelData(Ze);for(let Jt=0;Jt<B;Jt++)bn[Jt]=Zt[j+Jt]}const Y=await Mm(q),$=await Mm(_),G=Date.now(),te=`${f.id}_split1_${G}`,H=`${f.id}_split2_${G}`,ue=URL.createObjectURL(Y),we=URL.createObjectURL($);let Ne=ue,_e=we;if(u)try{Ne=(await br.saveAudioFile(u,te,Y)).relativePath,_e=(await br.saveAudioFile(u,H,$)).relativePath}catch(Ze){console.warn("Failed to save split audio to storage, using blob URLs:",Ze)}const Ft={id:te,name:`${f.name} (Part 1)`,type:f.type,duration:g,filePath:Ne,text:f.text||"",previewUrl:ue},wn={id:H,name:`${f.name} (Part 2)`,type:f.type,duration:b,filePath:_e,text:f.text||"",previewUrl:we};return L.close(),{firstPartMediaItem:Ft,secondPartMediaItem:wn}},DS=async f=>{let y;try{if(f.startsWith("blob:"))y=await(await fetch(f)).arrayBuffer();else{const b=await br.loadAudioFile(f);y=await(await fetch(b)).arrayBuffer()}if(!(y instanceof ArrayBuffer))throw new Error(`Invalid audio data type: ${typeof y}, expected ArrayBuffer`);if(y.byteLength===0)throw new Error("Audio data is empty");const g=new(window.AudioContext||window.webkitAudioContext);try{const b=await g.decodeAudioData(y.slice());return g.close(),b}catch(b){throw g.close(),console.error("Failed to decode audio data:",b),new Error(`Failed to decode audio: ${b}`)}}catch(g){throw console.error("Failed to load audio buffer:",g),new Error(`Failed to load audio buffer: ${g}`)}},Mm=async f=>{const y=f.length,g=f.sampleRate,b=f.numberOfChannels,A=new ArrayBuffer(44+y*b*2),E=new DataView(A),S=(D,B)=>{for(let L=0;L<B.length;L++)E.setUint8(D+L,B.charCodeAt(L))};S(0,"RIFF"),E.setUint32(4,36+y*b*2,!0),S(8,"WAVE"),S(12,"fmt "),E.setUint32(16,16,!0),E.setUint16(20,1,!0),E.setUint16(22,b,!0),E.setUint32(24,g,!0),E.setUint32(28,g*b*2,!0),E.setUint16(32,b*2,!0),E.setUint16(34,16,!0),S(36,"data"),E.setUint32(40,y*b*2,!0);let j=44;for(let D=0;D<y;D++)for(let B=0;B<b;B++){const L=f.getChannelData(B)[D],q=Math.max(-1,Math.min(1,L))*32767;E.setInt16(j,q,!0),j+=2}return new Blob([A],{type:"audio/wav"})},Dm=async f=>{for(const y of f)if(y.type==="voiceover"||y.type==="audio")try{const g=y.previewUrl||y.filePath;if(!g){console.warn(` No audio URL for split file: ${y.id}`);continue}const b=new Audio(g);await new Promise((A,E)=>{const S=setTimeout(()=>{console.error(` Audio load timeout for split file: ${y.id}`),E(new Error("Audio load timeout"))},1e4);b.onloadeddata=()=>{clearTimeout(S),A()},b.onerror=j=>{clearTimeout(S),console.error(` Failed to load split audio: ${y.id} (${y.name})`,{error:j,audioUrl:g.substring(0,100),readyState:b.readyState,networkState:b.networkState}),E(j)},b.load()}),ne.current.set(y.id,b)}catch(g){console.error(` Failed to preload audio for ${y.id} (${y.name}):`,g)}},LS=async()=>{if(!ae){console.warn(" Split failed: No timeline item selected for splitting");return}const f=ae.startTime,y=ae.startTime+ae.duration;if(pe<=f||pe>=y){console.warn(` Split failed: Current time (${pe.toFixed(2)}s) is not within the selected item's duration (${f.toFixed(2)}s - ${y.toFixed(2)}s)`);return}const g=ye.find(S=>S.id===ae.mediaId);if(!g){console.error(" Split failed: Original media item not found");return}const b=pe-f,A=b,E=y-pe;try{if(g.type==="voiceover"||g.type==="audio"){const{firstPartMediaItem:S,secondPartMediaItem:j}=await MS(g,b,A,E),D={...ae,id:`${ae.id}_part1_${Date.now()}`,mediaId:S.id,duration:A,geometry:ae.geometry?{...ae.geometry}:void 0},B={...ae,id:`${ae.id}_part2_${Date.now()}`,mediaId:j.id,startTime:pe,duration:E,geometry:ae.geometry?{...ae.geometry}:void 0};Xe(_=>[..._.filter(G=>G.id!==g.id),S,j]);const L=ne.current.get(g.id);L&&(L.pause(),L.src="",ne.current.delete(g.id)),g.previewUrl&&g.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(g.previewUrl),g.filePath&&g.filePath.startsWith("blob:")&&URL.revokeObjectURL(g.filePath);const q=Se.map(_=>({..._,items:_.items.map(Y=>Y.id===ae.id?[D,B]:Y).flat()}));W(q),fs(q),ir(D),await Dm([S,j])}else{const S={...ae,id:`${ae.id}_part1_${Date.now()}`,duration:A,geometry:ae.geometry?{...ae.geometry}:void 0},j={...ae,id:`${ae.id}_part2_${Date.now()}`,startTime:pe,duration:E,geometry:ae.geometry?{...ae.geometry}:void 0},D=Se.map(B=>({...B,items:B.items.map(L=>L.id===ae.id?[S,j]:L).flat()}));W(D),fs(D),ir(S)}}catch(S){console.error(" Split failed:",S),Ve(`Failed to split item: ${S instanceof Error?S.message:"Unknown error"}`)}},Lm=(f,y)=>{const g=y.getBoundingClientRect(),b=f.clientX-g.left,A=g.width;return b/A*be},Fm=(f,y,g)=>{const b=Se.find(E=>E.id===f);if(!b)return!1;const A=y+g;return b.items.some(E=>{const S=E.startTime+E.duration;return y<S&&A>E.startTime})},FS=(f,y)=>{if(!ce)return;f.preventDefault();const g=f.currentTarget,b=Lm(f,g);let A;ce.type==="image"?A=Yc:ce.type==="audio"||ce.type==="voiceover"?A=ce.duration&&ce.duration>0?ce.duration:5:ce.type==="video"?A=ce.duration||5:A=5,Fm(y,b,A)?(f.dataTransfer.dropEffect="none",cs(null)):(f.dataTransfer.dropEffect="copy",cs({layerId:y,time:b}))},$S=f=>{const y=f.relatedTarget;(!y||!f.currentTarget.contains(y))&&cs(null)},OS=(f,y)=>{if(f.preventDefault(),!ce)return;const g=Lm(f,f.currentTarget);let b;if(ce.type==="image"?b=Yc:ce.type==="audio"||ce.type==="voiceover"?b=ce.duration&&ce.duration>0?ce.duration:5:ce.type==="video"?b=ce.duration||5:b=5,Fm(y,g,b)){ot(null),cs(null);return}const A=b,E={id:`timeline_${ce.id}_${Date.now()}`,mediaId:ce.id,startTime:g,duration:A,track:Se.findIndex(j=>j.id===y)+1,geometry:ce.type==="image"||ce.type==="video"?{x:0,y:0,width:1,height:1,rotation:0}:void 0},S=Se.map(j=>j.id===y?{...j,items:[...j.items,E]}:j);W(S),fs(S),(ce.type==="image"||ce.type==="video")&&ir(E),ot(null),cs(null)},VS=f=>{const y=Se.find(g=>g.id===f);if(!(y&&y.type==="voiceover")){if(y&&y.type==="text"){const g=y.items.map(b=>b.mediaId);Xe(b=>b.filter(A=>!g.includes(A.id))),Qe(b=>b.filter(A=>!g.includes(A.mediaId)))}if(W(g=>g.filter(b=>b.id!==f)),Z===f){const g=Se.filter(b=>b.id!==f);Q(g.length>0?g[0].id:"")}}},_S=f=>{W(y=>y.map(g=>g.id===f?{...g,visible:!g.visible}:g))},US=f=>{W(y=>y.map(g=>g.id===f?{...g,locked:!g.locked}:g))},zS=(f,y)=>{const g=Se.find(b=>b.id===f);if(g&&g.type==="voiceover"){const b=y.replace(/^\s*/,"");W(A=>A.map(E=>E.id===f?{...E,name:b}:E));return}W(b=>b.map(A=>A.id===f?{...A,name:y}:A))};p.useEffect(()=>{(async()=>{try{if(De(!0),Ve(null),!(c!=null&&c.length)){De(!1);return}if(ti){if(oe.current){const S=oe.current.clientWidth,j=pe/be*S;Ke(j)}De(!1);return}if(l&&!Ee){De(!1);return}const y=c.filter(S=>!(!S||typeof S!="object"||!S.id||!S.filePath));if(y.length===0)throw new Error("No valid audio chunks found");const g=y.map(S=>({id:S.id,name:S.name||S.id,type:"voiceover",duration:S.duration,filePath:Xc(S.filePath),text:S.text}));let b=0;const A=g.map(S=>{const j={id:`timeline_${S.id}`,mediaId:S.id,startTime:b,duration:S.duration,track:1};return b+=S.duration,j});for(const S of g)if(S.filePath){const j=Xc(S.filePath);if(!await br.fileExists(j))throw new Error(`Audio file not found: ${j}`)}ye.length===0?(Xe(g),Qe(A)):Tt.filter(j=>A.some(D=>D.id===j.id)).length===0&&Qe(j=>[...A,...j]);const E=g.reduce((S,j)=>S+j.duration,0);vn(E),W(S=>{const j=S.find(D=>D.id==="voice-layer");return j&&j.items.length>0?S:S.map(D=>D.id==="voice-layer"?{...D,items:A,duration:E}:D)}),Oc(!0),xo(!0),De(!1),setTimeout(()=>{console.warn(" Starting delayed canvas re-initialization with retry logic...");const S=(j=0)=>{console.warn(` Canvas re-initialization attempt ${j+1}/5...`);try{ni(),lt(pe);const L=qe.current;if(L&&L.width>0&&L.height>0){const q=L.getContext("2d");if(q){const _=q.getImageData(0,0,1,1);if(_&&_.data){console.log(" Canvas re-initialization successful on attempt",j+1);return}}}j<5-1?(console.log(` Canvas initialization attempt ${j+1} failed, retrying in 500ms...`),setTimeout(()=>{S(j+1)},500)):console.error(" Failed to initialize canvas after maximum retries (5 attempts)")}catch(L){console.error(` Canvas initialization attempt ${j+1} failed:`,L),j<5-1?setTimeout(()=>{S(j+1)},500):console.error(" Failed to initialize canvas after maximum retries due to errors")}};S()},3e3)}catch(y){Ve(y instanceof Error?y.message:"Failed to initialize editor"),De(!1)}})()},[c,ti]),p.useEffect(()=>{const f=()=>{if(oe.current&&!Fe){const y=oe.current.clientWidth,g=pe/be*y;Ke(g)}};return f(),window.addEventListener("resize",f),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("resize",f),document.removeEventListener("visibilitychange",f)}},[pe,be,Fe]),p.useEffect(()=>{const f=c.length;f!==ls&&(ti||(xo(!1),$c(f)))},[c,ls,ti]),p.useEffect(()=>{var f,y,g,b;if(l&&!Ee&&!de){if(Ie(!0),l.layers&&l.layers.length>0){const A=Se.some(E=>E.id!=="voice-layer"&&E.items.length>0);W(A?E=>{var B;const S=[...E];if(!S.some(L=>L.id==="voice-layer")&&l.layers){const L=l.layers.find(q=>q.id==="voice-layer");L&&S.push(L)}return(((B=l.layers)==null?void 0:B.filter(L=>L.type==="text"))||[]).forEach(L=>{var _;S.find(Y=>Y.type==="text"&&Y.id===L.id)||(console.log(` PRESERVING TEXT LAYER: Adding saved text layer "${L.name}" with ${((_=L.items)==null?void 0:_.length)||0} items`),S.push(L))}),S}:l.layers),(f=l.editorSettings)!=null&&f.selectedLayerId&&Q(l.editorSettings.selectedLayerId)}if(l.audioChunks&&l.audioChunks.length>0){const A=l.audioChunks.map(D=>({id:D.id,name:D.name,type:"voiceover",duration:D.duration,filePath:D.blobUrl,text:D.text}));let E=0;const S=l.audioChunks.map(D=>{const B={id:`timeline_${D.id}`,mediaId:D.id,startTime:E,duration:D.duration,track:1};return E+=D.duration,B});if((async()=>{const D=l.audioChunks;if(!(!Array.isArray(D)||D.length===0))for(const B of D)try{let L=null;if(B.filePath&&!B.filePath.startsWith("blob:"))try{L=await br.loadAudioFile(B.filePath)}catch{L=null}else B.blobUrl&&B.blobUrl.startsWith("blob:")&&(L=B.blobUrl);if(L){const q=new Audio(L);try{await new Promise((_,Y)=>{const $=setTimeout(()=>{Y(new Error("Audio load timeout"))},5e3);q.onloadeddata=()=>{clearTimeout($),_(!0)},q.onerror=G=>{clearTimeout($),Y(G)},q.load()}),ne.current.set(B.id,q)}catch(_){console.warn(`Failed to load audio element for chunk ${B.id}:`,_)}}}catch(L){console.warn(`Failed to restore audio for chunk ${B.id}:`,L)}})().then(()=>{We(!0)}).catch(()=>{We(!0)}).finally(()=>{Ie(!1)}),ye.length===0?(Xe(A),Qe(S)):Tt.filter(B=>S.some(L=>L.id===B.id)).length===0&&Qe(B=>[...S,...B]),vn(((y=l.timeline)==null?void 0:y.totalDuration)||0),Rt(((g=l.timeline)==null?void 0:g.currentTime)||0),(b=l.editorSettings)!=null&&b.volumeSettings){const{voiceover:D=80,footage:B=60,soundtrack:L=40}=l.editorSettings.volumeSettings;Pe(D),an(B),or(L)}return}else We(!0),Ie(!1)}else Ee||(We(!0),Ie(!1))},[o,i,l,c,Ee,de,jn,ls]);const BS=()=>{switch(s){case"square":return"aspect-square";case"vertical":return"aspect-[9/16]";case"landscape":default:return"aspect-video"}},ri=()=>{if(!d)return;const f=ye.filter(S=>S.type==="text");f.length>0&&console.log(` SAVE TO DB: Saving ${f.length} text items to database:`,f.map(S=>{var j;return{id:S.id,name:S.name,text:((j=S.text)==null?void 0:j.substring(0,50))+(S.text&&S.text.length>50?"...":""),fontFamily:S.fontFamily,fontSize:S.fontSize}}));const y={storyContent:o,audioChunks:c,totalAudioDuration:(c==null?void 0:c.reduce((S,j)=>S+(j.duration||0),0))||0,voiceoverSettings:{selectedVoiceId:i,volume:re},savedAt:new Date().toISOString()},g=ye.filter(S=>S.source==="pexels"&&(S.type==="video"||S.type==="image")),b=Tt.filter(S=>g.some(j=>j.id===S.mediaId)),A={items:g.map(S=>{var D;const j=b.find(B=>B.mediaId===S.id);return{id:S.id,name:S.name,type:S.type,pexelsId:S.pexelsId?String(S.pexelsId):void 0,photographer:S.photographer,localFilePath:S.filePath||"",thumbnailLocalPath:(D=S.thumbnailUrl)!=null&&D.startsWith("blob:")?"":S.thumbnailUrl||"",originalUrl:"",width:S.width||0,height:S.height||0,duration:S.duration||0,startTime:(j==null?void 0:j.startTime)||0,endTime:((j==null?void 0:j.startTime)||0)+((j==null?void 0:j.duration)||S.duration||0),track:(j==null?void 0:j.track)||0,searchQuery:S.searchQuery,downloadedAt:new Date().toISOString()}}),savedAt:new Date().toISOString()},E={transcriptInfo:y,stockMediaInfo:A,voice:i?{id:i,name:"Selected Voice",isSelected:!0}:null,mediaLibrary:ye.map(S=>{const j={id:S.id,name:S.name,type:S.type,duration:S.duration,filePath:S.filePath,text:S.text||"",thumbnailUrl:S.thumbnailUrl&&S.thumbnailUrl.startsWith("data:")?S.thumbnailUrl:"",previewUrl:""};return S.type==="text"&&(j.fontFamily=S.fontFamily||"Arial",j.fontSize=S.fontSize||48,j.fontBold=S.fontBold||!1,j.fontItalic=S.fontItalic||!1,j.fontColor=S.fontColor||"#ffffff",j.backgroundColor=S.backgroundColor||"rgba(0, 0, 0, 0.7)",j.backgroundTransparent=S.backgroundTransparent??!1,S.x!==void 0&&(j.x=S.x),S.y!==void 0&&(j.y=S.y),S.width!==void 0&&(j.width=S.width),S.height!==void 0&&(j.height=S.height),console.log(` SAVE TEXT: Saving text item "${S.name}" with font ${S.fontFamily}, size ${S.fontSize}`)),j}),audioChunks:ye.filter(S=>S.type==="voiceover").map(S=>{const j=Tt.find(D=>D.mediaId===S.id);return{id:S.id,name:S.name,text:S.text||"",duration:S.duration||0,startTime:(j==null?void 0:j.startTime)||0,blobUrl:S.filePath,isGenerated:!0,filePath:S.filePath}}),layers:Se.map(S=>({id:S.id,name:S.name,visible:S.visible,locked:S.locked,type:S.type,items:S.items,duration:S.duration})),timeline:{totalDuration:be,currentTime:pe,tracks:Se.map(S=>({id:S.id,name:S.name,type:S.type||"main",items:S.items.map(j=>({...j,track:j.track}))}))},editorSettings:{selectedLayerId:Z,volumeSettings:{voiceover:re,footage:Le,soundtrack:ln},videoStyle:s}};d(E),m&&m(y),T&&T(A)};p.useEffect(()=>{zt(!1)},[l]);const WS=async()=>{var y,g,b,A,E,S,j,D;if(!l)return;const f=l.transcriptInfo;if(((g=(y=h==null?void 0:h.sentenceTranscripts)==null?void 0:y.sentences)==null?void 0:g.length)>0)try{const B=qe.current,L=(B==null?void 0:B.width)||1920,q=(B==null?void 0:B.height)||1080,_=h.sentenceTranscripts.sentences.map(G=>({id:G.id,name:`Text: ${G.text.substring(0,30)}${G.text.length>30?"...":""}`,type:"text",duration:G.duration,filePath:"",text:G.text,fontFamily:"Arial",fontSize:Math.min(L,q)*.04,fontBold:!1,fontItalic:!1,fontColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.7)",backgroundTransparent:!1})),Y=h.sentenceTranscripts.sentences.map(G=>{const te={x:L*.1,y:q*.8,width:L*.8,height:q*.1};return{id:`timeline_${G.id}`,mediaId:G.id,startTime:G.startTime,duration:G.duration,track:1,geometry:te}});Xe(G=>{const te=G.filter(ue=>ue.type==="text").map(ue=>ue.id),H=_.filter(ue=>!te.includes(ue.id));return H.length>0?(console.log(` RESTORE TRANSCRIPT: Adding ${H.length} text media items from sentence transcripts`),[...G,...H]):G}),W(G=>{const te=G.findIndex(H=>H.type==="text");if(te!==-1){const H=[...G],ue=H[te].items.map(Ne=>Ne.id),we=Y.filter(Ne=>!ue.includes(Ne.id));return we.length>0&&(console.log(` RESTORE TRANSCRIPT: Adding ${we.length} text timeline items to existing text layer`),H[te]={...H[te],items:[...H[te].items,...we]}),H}else{const H={id:`restored_text_layer_${Date.now()}`,name:"Text",type:"text",visible:!0,locked:!1,items:Y};return console.log(` RESTORE TRANSCRIPT: Creating new text layer with ${Y.length} text items`),[...G,H]}}),Qe(G=>{const te=G.map(ue=>ue.id),H=Y.filter(ue=>!te.includes(ue.id));return H.length>0?(console.log(` RESTORE TRANSCRIPT: Adding ${H.length} text timeline items to global timeline`),[...G,...H]):G});const $=Math.max(...h.sentenceTranscripts.sentences.map(G=>G.endTime));$>be&&vn($)}catch(B){console.error(" RESTORE: Failed to restore sentence transcripts:",B)}if(l.stockMediaInfo){const B=l.stockMediaInfo;if(B.items&&B.items.length>0){const L=[],q=[];for(const _ of B.items)try{const Y=await zr.loadMediaFile(_.localFilePath);let $="";if(_.type==="video")try{$=await qc(Y)}catch(H){console.warn(` Failed to generate video thumbnail for restored ${_.id}:`,H),$=""}else if(_.type==="image")try{$=await zr.loadImageAsBase64(_.localFilePath)}catch(H){console.warn(` Failed to load image as base64 for restored stock item ${_.id}:`,H),$=Y}const G={id:_.id,name:_.name,type:_.type,source:"pexels",filePath:_.localFilePath,previewUrl:Y,thumbnailUrl:$,duration:_.duration||0,width:_.width,height:_.height,volume:60,pexelsId:_.pexelsId?Number(_.pexelsId):void 0,photographer:_.photographer,searchQuery:_.searchQuery},te={id:`timeline-stock-${_.id}`,startTime:_.startTime,duration:_.duration||0,mediaId:_.id,track:_.track};L.push(G),q.push(te)}catch(Y){console.error(` Failed to restore stock media item ${_.id}:`,Y);continue}if(L.length>0){Xe($=>{const G=$.map(H=>H.id),te=L.filter(H=>!G.includes(H.id));return te.length>0?(console.log(` RESTORE STOCK: Adding ${te.length} restored stock media items (${L.length-te.length} duplicates skipped)`),[...$,...te]):(console.log(` RESTORE STOCK: All ${L.length} stock media items already exist, skipping duplicates`),$)});const _="stocks-layer";W($=>{const G=[...$],te=G.findIndex(H=>H.id===_);if(te>=0){const H=G[te].items.map(we=>we.id),ue=q.filter(we=>!H.includes(we.id));ue.length>0?(console.log(` RESTORE LAYER: Adding ${ue.length} timeline items to existing stocks layer (${q.length-ue.length} duplicates skipped)`),G[te]={...G[te],items:[...G[te].items,...ue],duration:Math.max(G[te].duration??0,Math.max(...B.items.map(we=>we.endTime)))}):console.log(` RESTORE LAYER: All ${q.length} timeline items already exist in stocks layer, skipping duplicates`)}else{const H={id:_,name:"Stock Media",visible:!0,locked:!1,items:q,type:"footage",duration:Math.max(...B.items.map(ue=>ue.endTime))};G.unshift(H)}return G}),Qe($=>{const G=$.map(H=>H.id),te=q.filter(H=>!G.includes(H.id));return te.length>0?(console.log(` RESTORE TIMELINE: Adding ${te.length} restored stock timeline items (${q.length-te.length} duplicates skipped)`),[...$,...te]):(console.log(` RESTORE TIMELINE: All ${q.length} stock timeline items already exist, skipping duplicates`),$)});for(const $ of L)try{await So($)}catch(G){console.error(` Failed to load stock media element ${$.id}:`,G)}const Y=Math.max(...B.items.map($=>$.endTime));Y>be&&vn(Y),setTimeout(()=>{lt(pe),Rt(pe+.001),setTimeout(()=>{Rt(pe)},100)},1e3)}}}try{if(De(!0),(b=l.mediaLibrary)!=null&&b.length){const _=(await Promise.all(l.mediaLibrary.map(async $=>{let G=$.filePath,te=$.thumbnailUrl,H=$.previewUrl;if(!G.startsWith("blob:")&&($.type==="image"||$.type==="video"))try{const{mediaStorageService:we}=await wr(()=>Promise.resolve().then(()=>Qy),void 0,import.meta.url),Ne=await we.loadMediaFile(G);if(H=Ne,!te||te.startsWith("blob:"))if($.type==="video")try{te=await qc(Ne)}catch(_e){console.warn(` Failed to generate video thumbnail for ${$.id}:`,_e),te=""}else try{te=await aS(G)}catch(_e){console.warn(` Base64 failed for stock image ${$.id}, using blob URL:`,_e),te=Ne}}catch(we){console.warn(`Failed to create blob URL for media item ${$.id}:`,we),H=G,(!te||te.startsWith("blob:"))&&(te=G)}else if(G.startsWith("blob:"))if(console.warn(`Found old blob URL for ${$.id}, attempting to regenerate...`),$.filePath&&!$.filePath.startsWith("blob:"))try{const{mediaStorageService:we}=await wr(()=>Promise.resolve().then(()=>Qy),void 0,import.meta.url),Ne=await we.loadMediaFile($.filePath);if(H=Ne,!te||te.startsWith("blob:"))if($.type==="video")try{te=await qc(Ne)}catch(_e){console.warn(` Failed to regenerate video thumbnail for ${$.id}:`,_e),te=""}else te=Ne}catch(we){console.warn(`Failed to regenerate blob URL for ${$.id}:`,we),H=G,te=te||G}else H=G,te=te||G;const ue={...$,filePath:G,thumbnailUrl:te,previewUrl:H};return $.type==="text"&&console.log(` RESTORE TEXT: Loading text item "${$.name}"`,{text:$.text,fontFamily:$.fontFamily,fontSize:$.fontSize,fontColor:$.fontColor,backgroundColor:$.backgroundColor,geometry:{x:$.x,y:$.y,width:$.width,height:$.height}}),ue}))).filter($=>$!==null),Y=_.filter($=>$.type==="text");Y.length>0&&console.log(` RESTORE FROM DB: Loading ${Y.length} text items from database:`,Y.map($=>{var G;return{id:$.id,name:$.name,text:((G=$.text)==null?void 0:G.substring(0,50))+($.text&&$.text.length>50?"...":""),fontFamily:$.fontFamily,fontSize:$.fontSize}})),Xe($=>{if($.length===0)return console.log(` RESTORE MEDIA: Setting ${_.length} restored media items (fresh restore)`),_;{const G=$.map(H=>H.id),te=_.filter(H=>!G.includes(H.id));return te.length>0?(console.log(` PRESERVE MEDIA: Adding ${te.length} missing media items to existing ${$.length} items`),[...$,...te]):(console.log(` PRESERVE MEDIA: All ${_.length} media items already exist, preserving lifted state`),$)}})}if((A=l.layers)!=null&&A.length){W(_=>{if(_.length<=1)return console.log(` RESTORE LAYERS: Setting ${l.layers.length} restored layers (fresh restore)`),l.layers;{console.log(` PRESERVE LAYERS: Merging ${l.layers.length} restored layers with ${_.length} existing layers`);const Y=[..._];return l.layers.forEach($=>{const G=Y.findIndex(te=>te.id===$.id);G>=0?Y[G]=$:Y.push($)}),Y}});const q=[];if(l.layers.forEach(_=>{_.items&&q.push(..._.items)}),Qe(_=>{if(_.length===0)return console.log(` RESTORE TIMELINE: Setting ${q.length} restored timeline items (fresh restore)`),q;{const Y=_.map(G=>G.id),$=q.filter(G=>!Y.includes(G.id));return $.length>0?(console.log(` PRESERVE TIMELINE: Adding ${$.length} restored timeline items to existing ${_.length} items`),[..._,...$]):(console.log(` PRESERVE TIMELINE: All ${q.length} timeline items already exist, preserving lifted state`),_)}}),!rt){if(f){const _=f;if(_.audioChunks&&_.audioChunks.length>0){const Y=_.audioChunks.map(H=>H.id);if(ye.filter(H=>H.source==="transcript"&&Y.includes(H.id)).length===_.audioChunks.length){zt(!0);return}const G=_.audioChunks.map((H,ue)=>{var we;return{id:H.id,name:H.name||`Audio Part ${ue+1}`,type:"voiceover",source:"transcript",filePath:H.filePath,previewUrl:H.filePath,thumbnailUrl:"",duration:H.duration,width:0,height:0,volume:((we=_.voiceoverSettings)==null?void 0:we.volume)||80,text:H.text,startTime:H.startTime}}),te=_.audioChunks.map(H=>({id:`timeline-voice-${H.id}`,startTime:H.startTime,duration:H.duration,mediaId:H.id,track:0}));Xe(H=>{const ue=new Set(H.map(_e=>_e.id)),we=G.filter(_e=>!ue.has(_e.id));return we.length===0?H:[...H,...we]}),W(H=>{const ue=[...H],we=ue.findIndex(Ne=>Ne.type==="voiceover");if(we>=0){const Ne=new Set(ue[we].items.map(Ft=>Ft.id)),_e=te.filter(Ft=>!Ne.has(Ft.id));if(_e.length===0)return ue;ue[we]={...ue[we],items:[...ue[we].items,..._e],duration:Math.max(ue[we].duration??0,_.totalAudioDuration??0)}}else{const Ne={id:"voice-layer",name:"Voice Over",visible:!0,locked:!1,items:te,type:"voiceover",duration:_.totalAudioDuration||0};ue.push(Ne)}return ue}),W(H=>{const ue=H.flatMap(Ne=>Ne.items.map(_e=>({..._e,track:H.indexOf(Ne)}))),we=H.find(Ne=>Ne.type==="voiceover");return Qe(ue),H});for(const H of G)try{await So(H)}catch(ue){console.error(" Failed to load voice audio element",H.id,ue)}_.totalAudioDuration&&_.totalAudioDuration>be&&vn(_.totalAudioDuration),setTimeout(()=>{lt(pe),Rt(pe+.001),setTimeout(()=>{Rt(pe)},100)},500),zt(!0)}}}}const B=l.editorSettings;B&&(Pe(((E=B.volumeSettings)==null?void 0:E.voiceover)??80),an(((S=B.volumeSettings)==null?void 0:S.footage)??60),or(((j=B.volumeSettings)==null?void 0:j.soundtrack)??40),B.selectedLayerId&&Q(B.selectedLayerId));const L=l.timeline;L&&(vn(L.totalDuration??0),Rt(L.currentTime??0)),(D=l.audioChunks)!=null&&D.length,De(!1)}catch(B){console.error("Error restoring video assets:",B),Ve("Failed to restore video assets"),De(!1)}};p.useEffect(()=>{l&&!Ee&&!de&&WS()},[l,Ee,de,rt]),p.useEffect(()=>{(ye.length>0||Tt.length>0||Se.length>0)&&ri()},[ye,Tt,Se,Z,re,Le,ln,be,s]),p.useEffect(()=>{if(pe>0&&!Fe){const f=setTimeout(()=>{ri()},1e3);return()=>clearTimeout(f)}},[pe,Fe]),p.useEffect(()=>{const f=[];Se.forEach(b=>{b.items&&f.push(...b.items)});const y=JSON.stringify(Tt),g=JSON.stringify(f);y!==g&&Qe(f)},[Se]),p.useEffect(()=>{kt.current&&(lt(pe),Hc("default"))},[ae,Se]),p.useEffect(()=>{if(kt.current){const f=setTimeout(()=>{lt(pe)},50);return()=>clearTimeout(f)}},[pe]),p.useEffect(()=>{const f=setInterval(()=>{kt.current&&!Em()&&(console.warn(" Periodic health check: Canvas is unhealthy, attempting recovery..."),kt.current=!1,setTimeout(()=>{ni(),lt(pe)},100))},5e3);return()=>clearInterval(f)},[pe]),p.useEffect(()=>{if(oe.current&&be>0){const f=oe.current.clientWidth,y=pe/be*f;Ke(y)}},[pe,be]);const GS=()=>{if(!gt.current||!oe.current||!Fe)return;const f=gt.current,y=oe.current,g=f.clientWidth,b=y.clientWidth,A=pe/be*b,E=f.scrollLeft,S=A,j=E+g*.2,D=E+g*.8;if(S<j||S>D){const B=S-g*.5;setTimeout(()=>{f.scrollTo({left:Math.max(0,B),behavior:"smooth"})},100)}};p.useEffect(()=>{const f=y=>{if(ae)switch(y.key){case"Delete":case"Backspace":y.preventDefault(),fT(ae.id),ir(null);break;case"Escape":y.preventDefault(),ir(null);break}};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[ae]);const Jc=async()=>{pr(!0);const f=[],y=[];for(const g of Se)if(g.visible){for(const b of g.items)if(pe>=b.startTime&&pe<b.startTime+b.duration){const E=ye.find(S=>S.id===b.mediaId);if(!E){console.warn(` Media item not found for mediaId: ${b.mediaId}`);continue}if(E.type==="video"){const S=await So(E);if(S){const j=E.volume||100,D=Le;S.volume=E.muted?0:j*D/1e4;const B=pe-b.startTime;S.currentTime=B,await S.play(),y.push(S)}}else if(E.type==="voiceover"||E.type==="audio")try{const S=await Cm(E.id);if(S){const j=E.volume||100;let D=100;E.type==="voiceover"?D=re:E.type==="audio"&&(D=ln),S.volume=E.muted?0:j*D/1e4;const B=pe-b.startTime;S.currentTime=B,await S.play(),f.push(S)}else console.warn(` Failed to load audio element for: ${E.id}`)}catch(S){console.error(` Error loading audio for ${E.id}:`,S)}}}yo(f),I(y),se.current=performance.now(),F.current=requestAnimationFrame(()=>Qc(Fe))},HS=async f=>{if(!Ae.current)return;const y=Ae.current.getBoundingClientRect(),g=96,b=y.width-g,A=f.clientX-y.left-g;if(A<0)return;const S=Math.max(0,Math.min(A/b,1))*be,j=Math.max(0,Math.min(S,be));return Rt(j),j};p.useEffect(()=>()=>{_n.forEach(f=>{var g;const y=f.cloneNode();(g=f.parentNode)==null||g.replaceChild(y,f),y.pause()})},[]),Qn.useEffect(()=>{const f=async g=>{if(K&&Ae.current){const b=Fe;b&&To(),await HS(g),b&&await Jc()}},y=()=>{le(!1)};return K&&(document.addEventListener("mousemove",f),document.addEventListener("mouseup",y)),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",y)}},[K,Fe]),p.useEffect(()=>(Fe||ve.current&&(clearInterval(ve.current),ve.current=null),()=>{ve.current&&(clearInterval(ve.current),ve.current=null)}),[Fe]),p.useEffect(()=>{const f=y=>{y.key==="Escape"&&Qt&&(Gc(null),_c(null),X.current&&(cancelAnimationFrame(X.current),X.current=null))};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[Qt]),p.useEffect(()=>()=>{F.current&&(cancelAnimationFrame(F.current),F.current=null),ve.current&&(clearInterval(ve.current),ve.current=null),X.current&&(cancelAnimationFrame(X.current),X.current=null)},[]);const $m=()=>oe.current?oe.current.clientWidth/be*zn:800/be*zn,Lr=p.useRef(null),oi=p.useRef(zn),ii=p.useRef(be),Om=p.useRef(0);p.useEffect(()=>{oe.current&&oe.current.clientWidth!==Om.current&&(Om.current=oe.current.clientWidth,Lr.current=null)},[(Wm=oe.current)==null?void 0:Wm.clientWidth]);const Vm=()=>{if(Lr.current===null||oi.current!==zn||ii.current!==be){const f=$m(),y=50,g=100,b=g/f,A=[.01,.02,.05,.1,.2,.25,.5,1,2,5,10,15,30,60,120,300,600],E=y/f;for(const S of A){const j=S*f;if(j>=y&&j<=g)return Lr.current=S,oi.current=zn,ii.current=be,S}if(b>=E){const S=Math.max(E,Math.min(b,1));return Lr.current=S,oi.current=zn,ii.current=be,S}return Lr.current=A[0],oi.current=zn,ii.current=be,A[0]}return Lr.current},KS=()=>be*zn*100,YS=f=>{const y=Vm();if(y<1)return y<=.01?`${f.toFixed(3)}s`:y<=.02?`${f.toFixed(2)}s`:y<=.05?`${f.toFixed(2)}s`:y<=.1?`${f.toFixed(1)}s`:y<=.2?`${f.toFixed(1)}s`:y<=.25?`${f.toFixed(1)}s`:`${f.toFixed(1)}s`;if(f<60)return`${Math.floor(f)}s`;{const g=Math.floor(f/60),b=Math.floor(f%60);return b===0?`${g}m`:`${g}m${b}s`}},XS=async f=>{if(!oe.current)return;const y=Lr.current,g=oi.current,b=ii.current,A=oe.current.getBoundingClientRect(),E=f.clientX-A.left+Da,S=oe.current.clientWidth,j=E/S,D=be*j,B=D/be*oe.current.clientWidth-Da;Ke(B),se.current=performance.now(),J.current=D,Rt(D),lt(D),setTimeout(()=>{Lr.current=y,oi.current=g,ii.current=b},0)},_m=f=>{if(!oe.current||!Fe)return;Te.current||(Te.current=f);const y=f-Te.current;Te.current=f;const b=$m()*y/1e3;Ke(A=>A+b),Fe&&(N.current=requestAnimationFrame(_m))};if(p.useEffect(()=>(Fe?(Te.current=0,N.current=requestAnimationFrame(_m)):N.current&&cancelAnimationFrame(N.current),()=>{N.current&&cancelAnimationFrame(N.current)}),[Fe]),p.useEffect(()=>{if(oe.current&&!Fe){const f=oe.current.clientWidth,y=pe/be*f-Da;Ke(y)}},[pe,be,Fe,Da]),p.useEffect(()=>{O.current.forEach(f=>{let y=null;for(const[g,b]of Bn.current.entries())if(b===f){y=g;break}if(y){const g=ye.find(b=>b.id===y);if(g){const b=g.volume||100,A=Le;f.volume=g.muted?0:b*A/1e4}}})},[Le,V,ye]),p.useEffect(()=>{Bn.current.forEach((f,y)=>{const g=ye.find(b=>b.id===y);if(g){const b=g.volume||100,A=Le;f.volume=g.muted?0:b*A/1e4}})},[Le,ye]),p.useEffect(()=>{vo.current.forEach(f=>{let y=null;for(const[g,b]of ne.current.entries())if(b===f){y=g;break}if(y){const g=ye.find(b=>b.id===y);if(g){const b=g.volume||100;let A=100;g.type==="voiceover"?A=re:g.type==="audio"&&(A=ln),f.volume=g.muted?0:b*A/1e4}}})},[re,ln,_n,ye]),p.useEffect(()=>{ne.current.forEach((f,y)=>{const g=ye.find(b=>b.id===y);if(g){const b=g.volume||100;let A=100;g.type==="voiceover"?A=re:g.type==="audio"&&(A=ln),f.volume=g.muted?0:b*A/1e4}})},[re,ln,ye]),de)return a.jsx("div",{className:`bg-gray-50 flex flex-col items-center justify-center ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(Dt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Video Editor"}),a.jsx("p",{className:"text-gray-600",children:"Restoring audio assets..."})]})});const qS=async()=>{if(Fe)To();else try{await Jc(),Qc(!0)}catch{Ve("Failed to start playback"),pr(!1)}},$a=f=>{const y=Math.floor(f/60),g=Math.floor(f%60);return`${y}:${g.toString().padStart(2,"0")}`},QS=()=>xn?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-500 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generating Transcript"})]}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("p",{className:"text-gray-600 mb-2",children:"AI is processing your audio file..."}),a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:vr})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"This may take a few moments depending on audio length"})]})}):null;if(Ue)return a.jsx("div",{className:`flex items-center justify-center h-full ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading video editor..."})]})});if(At)return a.jsx("div",{className:`flex items-center justify-center h-full ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:""}),a.jsx("p",{className:"text-gray-900 font-medium mb-2",children:"Failed to load video editor"}),a.jsx("p",{className:"text-gray-600",children:At}),t&&a.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-900",children:"Go Back"})]})});const ZS=f=>{var y,g;if(f.type==="image"){const b=f.thumbnailUrl||f.filePath;return a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg overflow-hidden",children:a.jsx("img",{src:b,alt:f.name,className:"w-full h-full object-cover"})})}else if(f.type==="video"&&f.thumbnailUrl){const b=f.thumbnailUrl;return f.source==="pexels"&&b.startsWith("http")&&console.warn(` THUMBNAIL NETWORK REQUEST: Pexels ${f.type} ${f.id} is using network URL for thumbnail!`,{thumbnailUrl:(y=f.thumbnailUrl)==null?void 0:y.substring(0,50),filePath:(g=f.filePath)==null?void 0:g.substring(0,50),actualSrc:b.substring(0,50)}),a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg overflow-hidden",children:a.jsx("img",{src:b,alt:f.name,className:"w-full h-full object-cover"})})}return a.jsxs("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:[f.type==="voiceover"&&a.jsx(zo,{className:"w-4 h-4"}),f.type==="video"&&a.jsx(Xd,{className:"w-4 h-4"}),f.type==="audio"&&a.jsx(ug,{className:"w-4 h-4"}),f.type==="text"&&a.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-xs font-bold text-gray-600",children:"T"})]})},JS=f=>{ot(f)},eT=(f,y)=>{f.preventDefault(),Bt(y)},tT=()=>{Bt(null)},nT=(f,y)=>{It(y),f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/plain",y)},rT=(f,y)=>{f.preventDefault(),f.dataTransfer.dropEffect="move",ie&&ie!==y&&ze(y)},oT=()=>{ze(null)},iT=(f,y)=>{if(f.preventDefault(),ze(null),!ie||ie===y){It(null);return}const g=Se.findIndex(S=>S.id===ie),b=Se.findIndex(S=>S.id===y);if(g===-1||b===-1){It(null);return}const A=[...Se],E=A[g];A.splice(g,1),A.splice(b,0,E),W(A),It(null)},sT=()=>{It(null),ze(null)},aT=(f,y)=>{if(f.preventDefault(),Bt(null),!ce)return;let g;ce.type==="image"?g=Yc:ce.type==="audio"||ce.type==="voiceover"?g=ce.duration&&ce.duration>0?ce.duration:5:ce.type==="video"?g=ce.duration||5:g=5;const b={id:`timeline_${ce.id}_${Date.now()}`,mediaId:ce.id,startTime:0,duration:g,track:Se.findIndex(E=>E.id===y)+1,geometry:ce.type==="image"||ce.type==="video"?{x:0,y:0,width:1,height:1,rotation:0}:void 0},A=Se.map(E=>{if(E.id===y){const S=E.items.length>0?E.items.reduce((j,D)=>D.startTime+D.duration>j.startTime+j.duration?D:j):null;return b.startTime=S?S.startTime+S.duration:0,b.startTime+b.duration,{...E,items:[...E.items,b]}}return E});W(A),fs(A),(ce.type==="image"||ce.type==="video")&&ir(b),ot(null),ot(null)},lT=f=>a.jsx(Nt,{className:"cursor-move hover:shadow-md transition-shadow border border-gray-200",draggable:!0,onDragStart:()=>JS(f),children:a.jsx(wt,{className:"p-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[ZS(f),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:f.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[f.type==="voiceover"&&`${Math.round(f.duration||0)}s`,f.type==="video"&&`${f.duration}s video`,f.type==="image"&&"Image (5s)",f.type==="audio"&&`${f.duration}s audio`]})]}),f.type!=="voiceover"&&a.jsx("button",{onClick:()=>{f.thumbnailUrl&&f.thumbnailUrl.startsWith("blob:")&&URL.revokeObjectURL(f.thumbnailUrl),f.previewUrl&&f.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(f.previewUrl),f.filePath&&f.filePath.startsWith("blob:")&&URL.revokeObjectURL(f.filePath),Xe(y=>y.filter(g=>g.id!==f.id)),W(y=>y.map(g=>({...g,items:g.items.filter(b=>b.mediaId!==f.id)})))},className:"p-1 hover:bg-gray-100 rounded",children:a.jsx(Ti,{className:"w-4 h-4 text-gray-500"})})]})})},f.id),cT=(f,y)=>{f.stopPropagation(),Fe&&To();const g=Se.find(A=>A.items.some(E=>E.id===y.id));if(g!=null&&g.locked)return;f.target.classList.contains("resize-handle")||(_c(y),Jb(f.clientX),pm(y.startTime))},uT=(f,y,g)=>{const b=Se.find(A=>A.id===g);return b?b.items.some(A=>{if(A.id===f.id)return!1;const E=y+f.duration,S=A.startTime+A.duration;return y<S&&E>A.startTime}):!1},dT=f=>{if(!Qt||!oe.current)return;const y=Se.find(j=>j.items.some(D=>D.id===Qt.id));if(!y||y.locked)return;const g=oe.current.clientWidth,A=(f.clientX-Zb)/g*be,S=Math.max(0,Ia+A);Gc(S),X.current&&cancelAnimationFrame(X.current),X.current=requestAnimationFrame(()=>{uT(Qt,S,y.id)||W(j=>j.map(D=>({...D,items:D.items.map(B=>B.id===Qt.id?{...B,startTime:S}:B)}))),X.current=null})},Um=()=>{if(Qt){Gc(null),X.current&&(cancelAnimationFrame(X.current),X.current=null);const f=Se.find(y=>y.items.some(g=>g.id===Qt.id));f&&f.items.find(y=>y.id===Qt.id)}_c(null)},fs=f=>{const y=[];f.forEach(g=>{g.items&&y.push(...g.items)}),Qe(y)},fT=f=>{const y=Se.map(g=>({...g,items:g.items.filter(b=>b.id!==f)}));W(y),fs(y)},hT=f=>{const y=ye.find(L=>L.id===f.mediaId);if(!y)return null;const g=Se.find(L=>L.items.some(q=>q.id===f.id)),b=(g==null?void 0:g.locked)||!1,A=(Qt==null?void 0:Qt.id)===f.id,E=(Wt==null?void 0:Wt.id)===f.id,S=(ae==null?void 0:ae.id)===f.id,j=pe>=f.startTime&&pe<f.startTime+f.duration,D=S&&!j,B=L=>{L.preventDefault(),L.stopPropagation(),b?console.warn(" Cannot select locked timeline item:",f.id):(ir(f),kt.current&&lt(pe))};return a.jsxs("div",{className:`absolute top-1 h-6 rounded-sm flex items-center px-2 select-none
          ${b?"cursor-not-allowed opacity-50":"cursor-pointer"}
          ${A?"shadow-lg z-30":""}
          ${E?"shadow-lg z-40":""}
          ${S?"z-20":"z-10"}
          group
          ${y.type==="video"?"bg-purple-100 border border-purple-500":y.type==="image"?"bg-green-100 border border-green-500":y.type==="text"?"bg-orange-100 border border-orange-500":"bg-blue-100 border border-blue-500"}
          transition-all duration-150
          hover:shadow-md`,style:{left:A&&vm!==null?`${vm/be*100}%`:`${f.startTime/be*100}%`,width:`${f.duration/be*100}%`,minWidth:"8px",opacity:D?.7:1,transition:A?"transform 0.1s ease-out":"transform 0.2s ease-out",boxShadow:S?`inset 0 0 0 2px ${y.type==="video"?"#7c3aed":y.type==="image"?"#059669":y.type==="text"?"#ea580c":"#2563eb"}`:A||E?"0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1)":void 0},onMouseDown:L=>{const q=L.target;!q.classList.contains("resize-handle")&&!q.closest(".resize-handle")&&(L.stopPropagation(),b||cT(L,f))},onClick:B,children:[!b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"resize-handle absolute left-0 top-0 bottom-0 w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 hover:bg-blue-200 z-30",onMouseDown:L=>{L.stopPropagation(),zm(L,f,"left")},onClick:L=>{L.preventDefault(),L.stopPropagation()}}),a.jsx("div",{className:"resize-handle absolute right-0 top-0 bottom-0 w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 hover:bg-blue-200 z-30",onMouseDown:L=>{L.stopPropagation(),zm(L,f,"right")},onClick:L=>{L.preventDefault(),L.stopPropagation()}})]}),a.jsx("div",{className:"flex items-center justify-between w-full select-none",children:a.jsx("span",{className:"text-[11px] font-medium truncate px-1 select-none flex-1 cursor-pointer",onClick:B,title:S?"Press Delete or Backspace to remove":"",children:y.name})}),(A||E)&&a.jsxs("div",{className:"absolute -bottom-3 left-1/2 transform -translate-x-1/2 text-[10px] text-gray-500 bg-white px-1 rounded shadow select-none pointer-events-none",children:[$a(f.startTime)," -"," ",$a(f.startTime+f.duration)]})]},f.id)},mT=()=>{const f=ae?ye.find(E=>E.id===ae.mediaId):null;if(!f)return a.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ax,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Select a timeline item to edit properties"})]})});const y=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(zo,{className:"w-4 h-4 mr-2"}),"Audio Controls"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Volume"}),a.jsxs("span",{className:"text-xs text-gray-500",children:[f.volume||100,"%"]})]}),a.jsx(fm,{value:[f.volume||100],onValueChange:([E])=>An(f.id,{volume:E}),max:100,step:1,className:"w-full",disabled:f.muted})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`mute-${f.id}`,checked:f.muted||!1,onChange:E=>An(f.id,{muted:E.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),a.jsxs("label",{htmlFor:`mute-${f.id}`,className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Mute ",f.type==="video"?"video":"audio"]})]})]})]}),g=(E,S=0)=>Math.round((E||S)*100)/100,b=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(gN,{className:"w-4 h-4 mr-2"}),"Position & Size"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"X Position"}),a.jsx(Ro,{type:"number",min:"0",max:"1",step:"0.01",value:g(f.x,0),onChange:E=>An(f.id,{x:parseFloat(E.target.value)}),className:"text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Y Position"}),a.jsx(Ro,{type:"number",min:"0",max:"1",step:"0.01",value:g(f.y,0),onChange:E=>An(f.id,{y:parseFloat(E.target.value)}),className:"text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Width"}),a.jsx(Ro,{type:"number",min:"0.1",max:"1",step:"0.01",value:g(f.width,1),onChange:E=>An(f.id,{width:parseFloat(E.target.value)}),className:"text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Height"}),a.jsx(Ro,{type:"number",min:"0.1",max:"1",step:"0.01",value:g(f.height,1),onChange:E=>An(f.id,{height:parseFloat(E.target.value)}),className:"text-xs"})]})]})]}),A=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(fg,{className:"w-4 h-4 mr-2"}),"Text Styling"]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Font Family"}),a.jsxs("select",{value:f.fontFamily||"Arial",onChange:E=>An(f.id,{fontFamily:E.target.value}),className:"w-full text-xs border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"Arial",children:"Arial"}),a.jsx("option",{value:"Helvetica",children:"Helvetica"}),a.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),a.jsx("option",{value:"Georgia",children:"Georgia"}),a.jsx("option",{value:"Verdana",children:"Verdana"}),a.jsx("option",{value:"Trebuchet MS",children:"Trebuchet MS"}),a.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"}),a.jsx("option",{value:"Impact",children:"Impact"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Font Style"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(fe,{variant:f.fontBold?"default":"outline",size:"sm",onClick:()=>An(f.id,{fontBold:!f.fontBold}),children:a.jsx(aN,{className:"w-4 h-4"})}),a.jsx(fe,{variant:f.fontItalic?"default":"outline",size:"sm",onClick:()=>An(f.id,{fontItalic:!f.fontItalic}),children:a.jsx(dN,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Font Color"}),a.jsx(Ro,{type:"color",value:f.fontColor||"#ffffff",onChange:E=>An(f.id,{fontColor:E.target.value}),className:"w-full h-8"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Background Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ro,{type:"color",value:f.backgroundColor||"#000000",onChange:E=>An(f.id,{backgroundColor:E.target.value}),className:"flex-1 h-8",disabled:f.backgroundTransparent}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",id:"backgroundTransparent",checked:f.backgroundTransparent||!1,onChange:E=>An(f.id,{backgroundTransparent:E.target.checked}),className:"w-4 h-4"}),a.jsx("label",{htmlFor:"backgroundTransparent",className:"text-xs text-gray-700 cursor-pointer",children:"Transparent"})]})]})]})]});return a.jsxs("div",{className:"flex-1 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Selected Item"}),a.jsx("p",{className:"text-sm text-gray-600",children:f.name}),a.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[f.type,"  ",f.duration.toFixed(1),"s"]})]}),(f.type==="audio"||f.type==="voiceover"||f.type==="video")&&y(),(f.type==="image"||f.type==="video"||f.type==="text")&&b(),f.type==="text"&&A()]})},pT=()=>a.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col h-full",children:[a.jsx(Xi,{className:"pb-3 h-[70px]",children:a.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[a.jsx(fe,{size:"sm",onClick:gS,className:"text-xs flex items-center justify-center",children:a.jsx(ua,{className:"w-4 h-4 "})}),a.jsxs("div",{className:"relative",children:[a.jsx(fe,{size:"sm",onClick:xS,className:"text-xs bg-blue-600 hover:bg-blue-700 flex items-center justify-center",children:a.jsx(fg,{className:"w-4 h-4 "})}),yS&&jS(),vS&&AS()]}),a.jsx(fe,{size:"sm",onClick:ES,className:"text-xs bg-purple-600 hover:bg-purple-700 flex items-center justify-center",children:a.jsx(uN,{className:"w-4 h-4 "})})]})}),a.jsxs(wt,{className:"flex-1 overflow-y-auto min-h-[50vh]  h-[calc(100vh-70px-220px)]",children:[a.jsx("input",{type:"file",ref:U,className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:RS}),a.jsx("div",{className:"space-y-2 overflow-y-auto h-full",children:(()=>{const f=ye.filter(b=>b.type!=="text"),y=f.filter(b=>b.type==="video");return y.filter(b=>b.source==="pexels").length===0&&y.length>0&&console.warn(` Found ${y.length} videos but 0 Pexels videos in media panel`),f.map(lT)})()})]})]}),gT=()=>a.jsx("div",{className:"text-gray-400 cursor-move px-1",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]})]})}),yT=f=>{switch(f){case"voiceover":return a.jsx(zo,{className:"w-4 h-4 text-blue-500"});case"main":return a.jsx(fN,{className:"w-4 h-4 text-purple-500"});default:return a.jsx(Rx,{className:"w-4 h-4 text-gray-500"})}},zm=(f,y,g)=>{f.stopPropagation(),Fe&&To();const b=Se.find(A=>A.items.some(E=>E.id===y.id));b!=null&&b.locked||(bm(g),Sm(y),nS(f.clientX),rS(y.duration),pm(y.startTime))},vT=f=>{if(!Wt||!oe.current||!us)return;const y=Se.find(D=>D.items.some(B=>B.id===Wt.id));if(!y||y.locked)return;const g=oe.current.clientWidth,A=(f.clientX-tS)/g*be;let E=Wt.startTime,S=Wt.duration;if(us==="left"){const D=Ia+Kc-.5,B=Math.max(0,Math.min(D,Ia+A));E=B,S=Kc-(B-Ia)}else S=Math.max(.5,Kc+A);y.items.some(D=>{if(D.id===Wt.id)return!1;const B=E+S,L=D.startTime+D.duration;return E>=D.startTime&&E<L||B>D.startTime&&B<=L||E<=D.startTime&&B>=L})||W(D=>D.map(B=>({...B,items:B.items.map(L=>L.id===Wt.id?{...L,startTime:E,duration:S}:L)})))},Bm=()=>{if(Wt){const f=Se.find(y=>y.items.some(g=>g.id===Wt.id));if(f){const y=f.items.find(g=>g.id===Wt.id);y&&W(g=>g.map(b=>({...b,items:b.items.map(A=>A.id===Wt.id?{...A,startTime:y.startTime,duration:y.duration}:A)})))}}bm(null),Wt&&Zc(Wt.id),Sm(null)},xT=()=>a.jsxs("div",{className:"h-[220px] bg-white border-t border-gray-200 flex select-none",children:[a.jsx("style",{children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          height: 12px;
          width: 12px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
        }
        .slider::-moz-range-thumb {
          height: 12px;
          width: 12px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          border: none;
        }
      `}),a.jsxs("div",{className:"w-64 bg-gray-50 flex flex-col border-r border-gray-200 select-none",children:[a.jsx("div",{className:"h-8 px-2 border-b border-gray-200 bg-white flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs(fe,{size:"sm",onClick:LS,disabled:!ae||pe<=(ae==null?void 0:ae.startTime)||pe>=(ae==null?void 0:ae.startTime)+(ae==null?void 0:ae.duration),className:"h-6 px-2 text-[11px] bg-orange-500 hover:bg-orange-600 text-white justify-center disabled:opacity-50",title:ae?pe<=(ae==null?void 0:ae.startTime)||pe>=(ae==null?void 0:ae.startTime)+(ae==null?void 0:ae.duration)?"Move time indicator within selected item range to split":"Split selected item at current time":"Select a timeline item to split",children:[a.jsx(vN,{className:"w-3 h-3 mr-1"}),"Split"]}),a.jsxs(fe,{size:"sm",onClick:IS,disabled:Se.length>=Tm,className:"h-6 px-2 text-[11px] bg-blue-500 hover:bg-blue-600 text-white justify-center",children:[a.jsx(ua,{className:"w-3 h-3 mr-1"}),"Add Layer"]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:zn,onChange:f=>oS(parseFloat(f.target.value)),className:"w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",title:`Timeline Scale: ${zn}x`}),a.jsxs("span",{className:"text-xs text-gray-600 w-8",children:[zn,"x"]})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:Se.map(f=>a.jsx("div",{draggable:!0,className:`h-8 min-h-[32px] border-b border-gray-200 flex items-center cursor-move
                ${Z===f.id?"bg-blue-50":"hover:bg-gray-100"}
                ${Ge===f.id?"bg-blue-100":""}
                ${gr===f.id?"bg-green-100 border-green-300":""}
                ${ie===f.id?"opacity-30":""}
                ${!f.visible&&"opacity-50"}
                transition-all duration-200`,onClick:()=>Q(f.id),onDragStart:y=>nT(y,f.id),onDragOver:y=>{ie?rT(y,f.id):eT(y,f.id)},onDragLeave:()=>{ie?oT():tT()},onDrop:y=>{ie?iT(y,f.id):aT(y,f.id)},onDragEnd:sT,children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 px-2 w-full h-full",children:[a.jsx(gT,{}),yT(f.type||"main"),a.jsx("div",{className:"flex-1 flex items-center min-w-0",children:a.jsx("input",{type:"text",value:(f.type==="voiceover"||f.type==="text"?" ":"")+f.name,onChange:y=>zS(f.id,y.target.value),className:`flex-1 text-xs bg-transparent border-none focus:ring-1 focus:ring-blue-500 rounded px-1 text-gray-700 ${eS===f.id?"select-text":"select-none"}`,onClick:y=>y.stopPropagation(),onFocus:()=>wm(f.id),onBlur:()=>wm(null)})}),a.jsx("button",{onClick:y=>{y.stopPropagation(),_S(f.id)},className:`p-1 rounded-sm hover:bg-gray-200 ${f.visible?"text-gray-600":"text-gray-400"}`,title:f.visible?"Hide layer":"Show layer",children:f.visible?a.jsx(Ex,{className:"w-3 h-3"}):a.jsx(Cx,{className:"w-3 h-3"})}),a.jsx("button",{onClick:y=>{y.stopPropagation(),US(f.id)},className:`p-1 rounded-sm hover:bg-gray-200 ${f.locked?"text-red-500":"text-gray-400"}`,title:f.locked?"Unlock layer":"Lock layer",children:f.locked?a.jsx(Px,{className:"w-3 h-3"}):a.jsx(bN,{className:"w-3 h-3"})}),Se.length>1&&f.type!=="voiceover"&&a.jsx("button",{onClick:y=>{y.stopPropagation(),VS(f.id)},className:"p-1 rounded-sm hover:bg-gray-200 text-gray-400 hover:text-red-500",children:a.jsx(Ti,{className:"w-3 h-3"})})]})},f.id))})]}),a.jsx("div",{ref:gt,className:"flex-1 overflow-x-auto overflow-y-hidden",children:a.jsxs("div",{className:"flex flex-col bg-white",style:{width:`${KS()}px`},children:[a.jsxs("div",{ref:oe,onClick:XS,className:"h-8 min-h-[32px] border-b border-gray-200 relative bg-gray-50 flex items-center cursor-pointer select-none",children:[(()=>{const f=Vm();return Array.from({length:Math.ceil(be/f)},(y,g)=>{const b=g*f;return b>be?null:a.jsxs("div",{className:"absolute h-full flex flex-col items-center",style:{left:`${b/be*100}%`,transform:"translateX(-50%)"},children:[a.jsx("div",{className:"w-px h-2 bg-gray-300"}),a.jsx("span",{className:"text-[10px] text-gray-600 select-none whitespace-nowrap",children:YS(b)})]},b)})})(),a.jsxs("div",{className:"absolute top-0 bottom-0 z-50 pointer-events-none transition-transform duration-100 ease-linear",style:{transform:`translateX(${$e}px)`,transition:Fe?"none":"transform 0.2s ease-out"},children:[a.jsx("div",{className:"w-px h-full bg-red-500"}),a.jsx("div",{className:"absolute -top-1 -translate-x-1/2 w-0 h-0 border-4 border-transparent border-t-red-500"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto relative bg-gray-50 select-none",onMouseMove:f=>{us&&Wt?vT(f):Qt&&dT(f)},onMouseUp:()=>{us?Bm():Qt&&Um()},onMouseLeave:()=>{us?Bm():Qt&&Um()},children:Se.map(f=>a.jsxs("div",{className:`h-8 min-h-[32px] border-b border-gray-200 relative bg-white group
                  ${!f.visible&&"opacity-50"} 
                  ${Z===f.id?"bg-blue-50":""}
                  ${f.locked?"cursor-not-allowed":""}
                  ${(wo==null?void 0:wo.layerId)===f.id?"bg-green-100 ring-2 ring-green-300":""}
                  transition-all duration-150`,onClick:()=>Q(f.id),onDragOver:y=>FS(y,f.id),onDragLeave:$S,onDrop:y=>OS(y,f.id),children:[f.items.map(y=>hT(y)),(wo==null?void 0:wo.layerId)===f.id&&a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-green-500 z-20 pointer-events-none",style:{left:`${wo.time/be*100}%`},children:a.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-b-3 border-transparent border-b-green-500"})})]},f.id))})]})})]});return a.jsxs("div",{className:`h-screen bg-gray-50 flex flex-col ${e}`,children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between h-[70px]",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(fe,{variant:"outline",onClick:()=>{Fe&&To(),t==null||t()},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Previous"]}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Video Editor"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>{ri(),n==null||n()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Save & Finish"]}),C?a.jsxs(fe,{onClick:k,className:"bg-orange-600 hover:bg-orange-700 text-white",children:[a.jsx(Li,{className:"w-4 h-4 mr-2"}),"Retry Render"]}):a.jsxs(fe,{onClick:r,className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Xd,{className:"w-4 h-4 mr-2"}),"Render"]})]})]}),a.jsxs("div",{className:"flex-1 flex max-h-[calc(100vh-70px-220px)]",children:[pT(),a.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900",children:[a.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:a.jsx(Nt,{className:`w-full max-w-4xl ${BS()} bg-black border-gray-600 overflow-hidden rounded-none`,children:a.jsx(wt,{className:"p-0 h-full w-full flex items-center justify-center bg-black",children:a.jsx("canvas",{ref:qe,className:"max-w-full max-h-full w-full h-full object-contain",style:{backgroundColor:"black",cursor:xm},onMouseDown:fS,onMouseMove:f=>{hS(f,Uc)},onMouseUp:Am,onMouseLeave:mS})})})}),a.jsxs("div",{className:"bg-gray-800 p-4 flex items-center justify-center space-x-4",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:qS,disabled:be===0,className:"text-white hover:bg-gray-700 disabled:opacity-50",children:Fe?a.jsx(jx,{className:"w-5 h-5"}):a.jsx(Lo,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-white text-sm",children:[$a(pe)," / ",$a(be)]})]})]}),a.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col",children:[a.jsx(Xi,{className:"pb-3",children:a.jsx(ja,{className:"text-lg",children:"Properties Panel"})}),a.jsxs(wt,{className:"flex-1 overflow-y-auto",children:[mT(),QS()]})]})]}),xT()]})};var hm="Progress",mm=100,[yD,$D]=Aa(hm),[vD,xD]=yD(hm),Hb=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:i=wD,...s}=e;(o||o===0)&&!Zy(o)&&console.error(bD(`${o}`,"Progress"));const l=Zy(o)?o:mm;r!==null&&!Jy(r,l)&&console.error(SD(`${r}`,"Progress"));const c=Jy(r,l)?r:null,u=cc(c)?i(c,l):void 0;return a.jsx(vD,{scope:n,value:c,max:l,children:a.jsx(qt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":cc(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Xb(c,l),"data-value":c??void 0,"data-max":l,...s,ref:t})})});Hb.displayName=hm;var Kb="ProgressIndicator",Yb=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,o=xD(Kb,n);return a.jsx(qt.div,{"data-state":Xb(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});Yb.displayName=Kb;function wD(e,t){return`${Math.round(e/t*100)}%`}function Xb(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function cc(e){return typeof e=="number"}function Zy(e){return cc(e)&&!isNaN(e)&&e>0}function Jy(e,t){return cc(e)&&!isNaN(e)&&e<=t&&e>=0}function bD(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${mm}\`.`}function SD(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${mm} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var qb=Hb,TD=Yb;const Qb=p.forwardRef(({className:e,value:t,...n},r)=>a.jsx(qb,{ref:r,className:St("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:a.jsx(TD,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Qb.displayName=qb.displayName;const kD=({onBackToEditor:e,onSaveComplete:t})=>{const[n,r]=p.useState("rendering"),[o,i]=p.useState(0),[s,l]=p.useState(null),[c,u]=p.useState(null),[h,d]=p.useState("");p.useEffect(()=>{const P=async(C,{progress:k,error:x,filePath:v})=>{if(console.log("Render progress update received:",{progress:k,error:x,filePath:v}),x)r("error"),d(x);else if(v){r("complete"),l(v),i(100);try{const w=await window.electron.loadRenderedVideo(v);if(w.success){const R=new Uint8Array(w.data),M=new Blob([R],{type:"video/mp4"}),z=URL.createObjectURL(M);u(z)}else console.error("Failed to load rendered video:",w.error)}catch(w){console.error("Error loading rendered video for preview:",w)}}else i(k)};return window.electron.onRenderProgress(P),()=>{window.electron.removeRenderProgressListener(P)}},[]),p.useEffect(()=>()=>{c&&URL.revokeObjectURL(c)},[c]);const m=async()=>{s&&await window.electron.saveRenderedVideo(s)&&t()},T=()=>{switch(n){case"rendering":return a.jsxs("div",{className:"text-center",children:[a.jsx(Dt,{className:"w-10 h-10 mx-auto animate-spin text-blue-600 mb-3"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Rendering Video..."}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Please wait, this may take a few moments."}),a.jsx(Qb,{value:o,className:"w-full"}),a.jsxs("p",{className:"text-base font-mono mt-3",children:[o.toFixed(2),"%"]})]});case"complete":return a.jsxs("div",{className:"text-center",children:[a.jsx(Hi,{className:"w-10 h-10 mx-auto text-green-600 mb-3"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Preview your video below and save it to your computer."}),c&&a.jsx("video",{src:c,controls:!0,className:"w-full rounded-lg mb-4",onError:P=>{console.error("Video loading error:",P),console.error("Video URL:",c)}}),a.jsxs("div",{className:"flex space-x-3 justify-center",children:[a.jsxs(fe,{onClick:m,size:"lg",children:[a.jsx(kx,{className:"w-5 h-5 mr-2"}),"Save Video"]}),a.jsx(fe,{variant:"outline",onClick:e,size:"lg",children:"Back to Editor"})]})]});case"error":return a.jsxs("div",{className:"text-center",children:[a.jsx(Mx,{className:"w-10 h-10 mx-auto text-red-600 mb-3"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Render Failed"}),a.jsx("p",{className:"text-gray-500 mb-3",children:"An error occurred during rendering."}),a.jsx(Nt,{className:"bg-red-50 text-red-800 p-3 text-left",children:a.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm",children:h})})]})}};return a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},className:" flex flex-col items-center justify-center",children:a.jsx(Nt,{className:"w-full max-w-4xl",children:a.jsx(wt,{className:"p-6",children:T()})})})},CD=[{value:"landscape",label:"Landscape",description:"Wide format (16:9)"},{value:"square",label:"Square",description:"Square format (1:1)"},{value:"vertical",label:"Vertical",description:"Portrait format (9:16)"}],ED=["Fantasy","Science Fiction","Mystery","Romance","Adventure","Horror","Comedy","Drama","Thriller","Historical Fiction","Fable","Nature Walks","Seasons & Weathers","Scientific Facts","History","Mindfulness & Meditations","Motivations"],ND=["English","Spanish","Portuguese","French","German","Italian","Dutch","Russian","Chinese","Ukrainian","Romanian","Turkish","Hindi","Arabic","Japanese","Korean","Swedish","Finnish","Malay"],PD=["awe","wonder","joy","sadness","grief","love","fear","anxiety","hope","nostalgia","betrayal","anger","revenge","guilt","shame","relief","pride","humiliation","admiration","loneliness","tension","suspense","serenity","confusion","anticipation","shock","heartbreak","triumph","empathy","regret","elation","dread","awkwardness","frustration","paranoia","compassion","determination","envy","jealousy","desperation","courage","melancholy","satisfaction","curiosity","vindication","helplessness","delight","disgust","peace","resentment","inspiration","justice","disbelief","euphoria","bittersweetness"],jD=()=>{var Ra,Se;const e=ns(),t=Jo(),{addToast:n}=rs(),[r,o]=p.useState(1),[i,s]=p.useState(!1),[l,c]=p.useState(!1),[u,h]=p.useState(!1),[d,m]=p.useState(!1),[T,P]=p.useState(!1),[C,k]=p.useState(!1),[x,v]=p.useState(void 0),[w,R]=p.useState(null),[M,z]=p.useState(!1),[U,F]=p.useState(!1),[se,J]=p.useState(!1),[ve,ne]=p.useState(!1),Ae=W=>({"21m00Tcm4TlvDq8ikWAM":"Rachel",AZnzlk1XvdvUeBnXmlld:"Alice",EXAVITQu4vr4xnSDxMaL:"Lily",ErXwobaYiN019PkySvjV:"Henry",MF3mGyEYCl7XYWbV9V6O:"Elli",kdmDKE6EkgrWrrykO9Qt:"Alexandra",L0Dsvb3SLTyegXwtm47J:"Archer",g6xIsTj2HwM6VR4iXFCw:"Jessica Anne Bogart",OYTbf65OHHFELVut7v2H:"Hope",dj3G1R1ilKoFKhBnWOzG:"Eryn",HDA9tsk27wYi3uq0fPcK:"Stuart","1SM7GgM6IMuvQlz2BwM3":"Mark",PT4nqlKZfc06VW1BuClj:"Angela",vBKc2FfBKJfcZNyEt1n6:"Finn","56AoDkrOh6qfVPDXZ7Pt":"Cassidy",NOpBlnGInO9m6vDvFkFC:"Grandpa Spuds Oxley"})[W]||"Unknown Voice",oe=(W,Z)=>{const Q=W.map($e=>({id:$e.id,name:$e.name,text:$e.text,duration:$e.duration,startTime:$e.startTime,filePath:$e.filePath||$e.relativePath||$e.blobUrl||""}));Be({audioChunks:Q,totalAudioDuration:Z}),F(!0),v(N.selectedVoiceId)},gt={videoStyle:"landscape",storyName:"",duration:180,genre:"",mainPrompt:"",language:"English",additionalContext:[],videoToneEmotions:[],selectedVoiceId:void 0},[N,Te]=p.useState(gt),[X,ge]=p.useState(null),[me,je]=p.useState([]),[Ue,De]=p.useState([]),[At,Ve]=p.useState([{id:"voice-layer",name:"Voice Over",visible:!0,locked:!1,items:[],type:"voiceover",duration:0}]);p.useEffect(()=>{if(!N.storyId){const W=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;Be({storyId:W})}},[]);const at=8,gn=(W,Z)=>W.length!==Z.length?!1:W.every((Q,$e)=>Q===Z[$e]);p.useEffect(()=>{(async()=>{var Q,$e,Ke,ce,ot;const Z=(Q=t.state)==null?void 0:Q.storyId;if(console.log(" DEBUG: Story ID:",Z),Z!=null){z(!0);try{const{apiService:Ge}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url),Bt=await Ge.getStory(Z);if(console.log(" DEBUG: API Response:",Bt),Bt.success){const ie=Bt.data.story;console.log(" DEBUG: Loaded story data:",ie);let It=ie.content||"",gr=ie.storySummary||"";if(ie.content&&ie.content.includes("*****")){const Un=ie.content.split("*****");Un.length>=3&&(It=Un[0].trim(),gr=Un[2].trim())}const ze={videoStyle:ie.videoStyle||"landscape",storyName:ie.title,duration:ie.duration||180,genre:ie.genre||"Fable",mainPrompt:ie.mainPrompt||"",language:ie.language||"English",additionalContext:ie.additionalContext||[],videoToneEmotions:ie.videoToneEmotions||[],generatedContent:It,storyId:ie.id,isDraft:ie.isDraft,currentStep:ie.currentStep||1,maxStepReached:ie.maxStepReached||ie.currentStep||1,storySummary:ie.storySummary||gr,chapterSummaries:ie.chapterSummaries||[],youtubeTitle:ie.youtubeTitle||"",youtubeDescription:ie.youtubeDescription||"",youtubeTags:ie.youtubeTags||"",stockFootageTerms:ie.stockFootageTerms||"",chapters:ie.chapters||[],currentChapter:ie.currentChapter||0,totalChapters:ie.totalChapters||0,selectedVoiceId:ie.selectedVoiceId,audioChunks:ie.audioChunks,totalAudioDuration:ie.totalAudioDuration,videoAssets:ie.videoAssets};console.log(" DEBUG: Setting story data:",ze),console.log(" DEBUG: Loaded videoAssets from database:",{hasVideoAssets:!!ze.videoAssets,videoAssetsKeys:ze.videoAssets?Object.keys(ze.videoAssets):[],mediaLibraryCount:((Ke=($e=ze.videoAssets)==null?void 0:$e.mediaLibrary)==null?void 0:Ke.length)||0,layersCount:((ot=(ce=ze.videoAssets)==null?void 0:ce.layers)==null?void 0:ot.length)||0}),Te(ze),ze.audioChunks&&ze.audioChunks.length>0&&ze.selectedVoiceId&&(v(ze.selectedVoiceId),F(!0)),ge(ze);let xn=1;const yr=ie.maxStepReached||1;ie.videoAssets&&ie.videoAssets.audioChunks&&ie.videoAssets.audioChunks.length>0?(xn=7,h(!0),F(!0)):ie.audioChunks&&ie.audioChunks.length>0?(xn=6,h(!0),F(!0),J(!0)):ie.selectedVoiceId?(xn=6,h(!0)):ie.status==="completed"||ie.content?(xn=5,h(!0)):xn=Math.max(ie.currentStep||1,yr),o(xn),ie.content&&h(!0);const vr=ie.status==="completed"||ie.content?"Story completed - you can review and edit the generated content":`Continuing from step ${ie.currentStep||1}`;n({type:"info",title:"Story Loaded",message:vr})}}catch(Ge){console.error("Error loading story:",Ge),n({type:"error",title:"Load Failed",message:"Failed to load story data"})}finally{z(!1)}}})()},[(Ra=t.state)==null?void 0:Ra.storyId,n]);const Be=W=>{Te(Z=>{const Q={...Z,...W};return!X&&!N.storyId&&ge(gt),Q})};p.useEffect(()=>{(async()=>{if(N.selectedVoiceId&&N.storyId&&N.generatedContent)try{const{apiService:Z}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url);await Z.updateStory(N.storyId,{selectedVoiceId:N.selectedVoiceId}),console.log("Voice selection auto-saved")}catch(Z){console.error("Failed to auto-save voice selection:",Z)}})()},[N.selectedVoiceId]);const yn=()=>{if(w&&w.isPlaying()&&w.handlePlayPause(),r<at){const W=r+1;o(W),Be({maxStepReached:Math.max(N.maxStepReached||1,W)})}},ye=()=>{w&&w.isPlaying()&&w.handlePlayPause(),r>1&&o(W=>W-1)},Xe=W=>{switch(W){case 1:return N.storyName.trim().length>0;case 2:return N.duration>=30&&N.genre!=="";case 3:return N.mainPrompt.trim().length>0;case 4:return!0;case 5:return!!(N.generatedContent&&N.generatedContent.length>0);case 6:return!!N.selectedVoiceId;case 7:return!0;default:return!1}},Tt=async()=>{s(!0),h(!1),Be({generatedContent:"",storySummary:"",chapterSummaries:[],youtubeTitle:"",youtubeDescription:"",youtubeTags:"",stockFootageTerms:"",chapters:[],currentChapter:0,totalChapters:0}),o(5);try{const{apiService:W}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url);n({type:"info",title:"Generating Story Structure",message:"Creating story outline and metadata..."}),await W.generateStoryStructure({title:N.storyName,genre:N.genre,duration:N.duration,mainPrompt:N.mainPrompt,language:N.language,additionalContext:N.additionalContext,videoToneEmotions:N.videoToneEmotions},Z=>{Z.type==="start"?n({type:"info",title:"Generating Structure",message:Z.message}):Z.type},Z=>{Z&&(Te(Q=>({...Q,storySummary:Z.storySummary,chapterSummaries:Z.chapterSummaries,youtubeTitle:Z.youtubeTitle,youtubeDescription:Z.youtubeDescription,youtubeTags:Z.youtubeTags,stockFootageTerms:Z.stockFootageTerms,totalChapters:Z.chapterSummaries.length,currentChapter:0})),Qe(Z.chapterSummaries,Z.storySummary))},Z=>{s(!1),h(!1),n({type:"error",title:"Structure Generation Failed",message:Z.message||"Failed to generate story structure"})})}catch(W){s(!1),h(!1),n({type:"error",title:"Generation Failed",message:W instanceof Error?W.message:"Failed to generate story"})}},Qe=async(W,Z)=>{const{apiService:Q}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url),$e=[];let Ke=0;const ce=async()=>{if(Ke>=W.length){const Ge=$e.sort((ie,It)=>ie.number-It.number).map(ie=>ie.content).join(`

`);Te(ie=>({...ie,generatedContent:Ge,chapters:$e})),s(!1),h(!0);const Bt=Ge.split(/\s+/).length;n({type:"success",title:"Story Generated!",message:`Your amazing story has been created successfully! (${Bt} words)`});return}const ot=W[Ke];Te(Ge=>({...Ge,currentChapter:ot.number})),await Q.generateChapterContent({chapterSummary:ot.summary,chapterNumber:ot.number,storySummary:Z,topic:N.mainPrompt,genre:N.genre,language:N.language,duration:N.duration,videoToneEmotions:N.videoToneEmotions},Ge=>{Ge.type==="start"||Ge.type==="chunk"&&Te(Bt=>{const ie=[...Bt.chapters||[]],It=ie.findIndex(ze=>ze.number===ot.number);It>=0?ie[It]={...ie[It],content:(ie[It].content||"")+Ge.content}:ie.push({number:ot.number,content:Ge.content});const gr=ie.sort((ze,xn)=>ze.number-xn.number).map(ze=>ze.content).join(`

`);return{...Bt,chapters:ie,generatedContent:gr}})},Ge=>{Ge&&($e.push({number:Ge.chapterNumber,content:Ge.chapterContent}),n({type:"success",title:`Chapter ${Ge.chapterNumber} Complete`,message:`Chapter ${Ge.chapterNumber} has been generated successfully!`})),Ke++,ce()},Ge=>{s(!1),h(!1),n({type:"error",title:`Chapter ${ot.number} Generation Failed`,message:Ge.message||`Failed to generate chapter ${ot.number}`})})};await ce()},re=()=>{w&&w.isPlaying()&&w.handlePlayPause();const W=X||gt,Z=N.storyName!==W.storyName||N.videoStyle!==W.videoStyle||N.duration!==W.duration||N.genre!==W.genre||N.mainPrompt!==W.mainPrompt||N.language!==W.language||!gn(N.additionalContext,W.additionalContext)||!gn(N.videoToneEmotions,W.videoToneEmotions)||N.generatedContent!==W.generatedContent||(X?r!==X.currentStep:r!==1)||i||u;console.log(" DEBUG: Change detection:",{hasChanges:Z,currentStory:N,originalStory:W,currentStep:r,originalStep:X==null?void 0:X.currentStep}),Z?(console.log(" DEBUG: Changes detected, showing confirmation dialog"),m(!0)):(console.log(" DEBUG: No changes detected, navigating directly"),w&&w.handlePlayPause(),e("/dashboard"))},Pe=()=>{m(!1),w&&w.handlePlayPause(),e("/dashboard")},Le=async()=>{var W,Z,Q,$e,Ke,ce;w&&w.isPlaying()&&w.handlePlayPause(),c(!0);try{const{apiService:ot}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url),Ge=N.generatedContent?`${N.generatedContent}

*****
${N.youtubeTitle}

${N.youtubeDescription}

${N.youtubeTags}

${N.stockFootageTerms}
*****
${N.storySummary}
*****`:"";if(N.storyId&&!N.storyId.startsWith("temp-"))console.log(" Attempting to update existing story:",{storyId:N.storyId,storyName:N.storyName,storyIdType:typeof N.storyId,storyIdLength:(W=N.storyId)==null?void 0:W.length,isTemp:(Z=N.storyId)==null?void 0:Z.startsWith("temp-")}),(await ot.updateStory(N.storyId,{title:N.storyName,content:Ge,genre:N.genre,duration:N.duration,isDraft:!0,currentStep:r,maxStepReached:N.maxStepReached,videoStyle:N.videoStyle,language:N.language,additionalContext:N.additionalContext,videoToneEmotions:N.videoToneEmotions,mainPrompt:N.mainPrompt,storySummary:N.storySummary,chapterSummaries:N.chapterSummaries,youtubeTitle:N.youtubeTitle,youtubeDescription:N.youtubeDescription,youtubeTags:N.youtubeTags,stockFootageTerms:N.stockFootageTerms,chapters:N.chapters,totalChapters:N.totalChapters,selectedVoiceId:N.selectedVoiceId,audioChunks:N.audioChunks,totalAudioDuration:N.totalAudioDuration,videoAssets:N.videoAssets,transcriptInfo:N.transcriptInfo,stockMediaInfo:N.stockMediaInfo})).success&&(n({type:"success",title:"Draft Updated!",message:"Your story has been saved as a draft"}),e("/dashboard",{state:{refresh:!0}}));else{console.log(" Creating new story as draft:",{storyName:N.storyName,hasStoryId:!!N.storyId,storyId:N.storyId,isTemp:(Q=N.storyId)==null?void 0:Q.startsWith("temp-"),reason:N.storyId?"Temporary story ID":"No story ID"});const ie=await ot.createStory({title:N.storyName,content:Ge,genre:N.genre,duration:N.duration,isDraft:!0,currentStep:r,maxStepReached:N.maxStepReached,videoStyle:N.videoStyle,language:N.language,additionalContext:N.additionalContext,videoToneEmotions:N.videoToneEmotions,mainPrompt:N.mainPrompt,storySummary:N.storySummary,chapterSummaries:N.chapterSummaries,youtubeTitle:N.youtubeTitle,youtubeDescription:N.youtubeDescription,youtubeTags:N.youtubeTags,stockFootageTerms:N.stockFootageTerms,chapters:N.chapters,totalChapters:N.totalChapters,selectedVoiceId:N.selectedVoiceId,audioChunks:N.audioChunks,totalAudioDuration:N.totalAudioDuration,videoAssets:N.videoAssets,transcriptInfo:N.transcriptInfo,stockMediaInfo:N.stockMediaInfo});ie.success&&(($e=N.storyId)!=null&&$e.startsWith("temp-")&&((ce=(Ke=ie.data)==null?void 0:Ke.story)!=null&&ce.id)&&(console.log(" Converting temporary story ID to real ID:",{oldId:N.storyId,newId:ie.data.story.id}),Be({storyId:ie.data.story.id})),n({type:"success",title:"Draft Saved!",message:"Your story has been saved as a draft"}),e("/dashboard",{state:{refresh:!0}}))}}catch(ot){console.error("Error saving draft:",ot),n({type:"error",title:"Save Failed",message:"Failed to save draft"})}finally{c(!1),m(!1)}},an=async()=>{s(!0),h(!1),Be({generatedContent:"",storySummary:"",chapterSummaries:[],youtubeTitle:"",youtubeDescription:"",youtubeTags:"",stockFootageTerms:"",chapters:[],currentChapter:0,totalChapters:0});try{const{apiService:W}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url);n({type:"info",title:"Regenerating Story Structure",message:"Creating new story outline and metadata..."}),await W.generateStoryStructure({title:N.storyName,genre:N.genre,duration:N.duration,mainPrompt:N.mainPrompt,language:N.language,additionalContext:N.additionalContext,videoToneEmotions:N.videoToneEmotions},Z=>{Z.type==="start"?n({type:"info",title:"Regenerating Structure",message:Z.message}):Z.type},Z=>{Z&&(Te(Q=>({...Q,storySummary:Z.storySummary,chapterSummaries:Z.chapterSummaries,youtubeTitle:Z.youtubeTitle,youtubeDescription:Z.youtubeDescription,youtubeTags:Z.youtubeTags,stockFootageTerms:Z.stockFootageTerms,totalChapters:Z.chapterSummaries.length,currentChapter:0})),Qe(Z.chapterSummaries,Z.storySummary))},Z=>{s(!1),h(!1),n({type:"error",title:"Regeneration Failed",message:Z.message||"Failed to regenerate story structure"})})}catch(W){s(!1),h(!1),n({type:"error",title:"Regeneration Failed",message:W instanceof Error?W.message:"Failed to regenerate story"})}},ln=async()=>{var W,Z,Q,$e,Ke,ce,ot,Ge,Bt,ie,It,gr;if(w&&w.handlePlayPause(),!N.generatedContent){n({type:"error",title:"No Content to Save",message:"Please generate a story first"});return}c(!0);try{const{apiService:ze}=await wr(()=>Promise.resolve().then(()=>ko),void 0,import.meta.url),xn=`${N.generatedContent}

*****
${N.youtubeTitle}

${N.youtubeDescription}

${N.youtubeTags}

${N.stockFootageTerms}
*****
${N.storySummary}
*****`;if(N.storyId&&!N.storyId.startsWith("temp-")){console.log(" Attempting to update existing story (Save & Finish):",{storyId:N.storyId,storyName:N.storyName,storyIdType:typeof N.storyId,storyIdLength:(W=N.storyId)==null?void 0:W.length,isTemp:(Z=N.storyId)==null?void 0:Z.startsWith("temp-")});const vr=await ze.updateStory(N.storyId,{title:N.storyName,content:xn,genre:N.genre,duration:N.duration,videoStyle:N.videoStyle,language:N.language,additionalContext:N.additionalContext,videoToneEmotions:N.videoToneEmotions,mainPrompt:N.mainPrompt,storySummary:N.storySummary,chapterSummaries:N.chapterSummaries,youtubeTitle:N.youtubeTitle,youtubeDescription:N.youtubeDescription,youtubeTags:N.youtubeTags,stockFootageTerms:N.stockFootageTerms,chapters:N.chapters,totalChapters:N.totalChapters,selectedVoiceId:N.selectedVoiceId,audioChunks:N.audioChunks,totalAudioDuration:N.totalAudioDuration,videoAssets:N.videoAssets,transcriptInfo:N.transcriptInfo,stockMediaInfo:N.stockMediaInfo});if(console.log(" CreateStoryScreen: Saving story with videoAssets (update):",{hasVideoAssets:!!N.videoAssets,storyId:N.storyId,mediaLibraryCount:(($e=(Q=N.videoAssets)==null?void 0:Q.mediaLibrary)==null?void 0:$e.length)||0,layersCount:((ce=(Ke=N.videoAssets)==null?void 0:Ke.layers)==null?void 0:ce.length)||0}),vr.success)n({type:"success",title:"Story Updated!",message:"Your story has been updated"}),e("/dashboard",{state:{refresh:!0}});else throw new Error("Failed to update story")}else{console.log(" Creating new story (Save & Finish):",{storyName:N.storyName,hasStoryId:!!N.storyId,storyId:N.storyId,isTemp:(ot=N.storyId)==null?void 0:ot.startsWith("temp-"),reason:N.storyId?"Temporary story ID":"No story ID"});const vr=await ze.createStory({title:N.storyName,content:xn,genre:N.genre,duration:N.duration,isDraft:!0,currentStep:at,videoStyle:N.videoStyle,language:N.language,additionalContext:N.additionalContext,videoToneEmotions:N.videoToneEmotions,mainPrompt:N.mainPrompt,storySummary:N.storySummary,chapterSummaries:N.chapterSummaries,youtubeTitle:N.youtubeTitle,youtubeDescription:N.youtubeDescription,youtubeTags:N.youtubeTags,stockFootageTerms:N.stockFootageTerms,chapters:N.chapters,totalChapters:N.totalChapters,selectedVoiceId:N.selectedVoiceId,audioChunks:N.audioChunks,totalAudioDuration:N.totalAudioDuration,videoAssets:N.videoAssets,transcriptInfo:N.transcriptInfo,stockMediaInfo:N.stockMediaInfo});if(console.log(" CreateStoryScreen: Saving story with videoAssets (create):",{hasVideoAssets:!!N.videoAssets,storyId:N.storyId,mediaLibraryCount:((Bt=(Ge=N.videoAssets)==null?void 0:Ge.mediaLibrary)==null?void 0:Bt.length)||0,layersCount:((It=(ie=N.videoAssets)==null?void 0:ie.layers)==null?void 0:It.length)||0}),vr.success)(gr=N.storyId)!=null&&gr.startsWith("temp-")&&console.log(" Converting temporary story ID to real ID (Save & Finish):",{oldId:N.storyId,newId:vr.data.story.id}),Be({storyId:vr.data.story.id}),n({type:"success",title:"Story Saved!",message:"Your story has been saved"}),e("/dashboard",{state:{refresh:!0}});else throw new Error("Failed to save story")}}catch(ze){console.error("Error saving story:",ze),n({type:"error",title:"Save Failed",message:ze instanceof Error?ze.message:"Failed to save story to local database"})}finally{c(!1)}},or=()=>{N.additionalContext.length<5&&Be({additionalContext:[...N.additionalContext,""]})},Fe=W=>{Be({additionalContext:N.additionalContext.filter((Z,Q)=>Q!==W)})},pr=(W,Z)=>{const Q=[...N.additionalContext];Q[W]=Z,Be({additionalContext:Q})},pe=W=>{const Z=N.videoToneEmotions;Z.includes(W)?Be({videoToneEmotions:Z.filter(Q=>Q!==W)}):Z.length<4&&Be({videoToneEmotions:[...Z,W]})},Rt=W=>{if(W<1)return"Less than 1 minute";if(W===1)return"1 minute";if(W<60)return`${W} minutes`;const Z=Math.floor(W/60),Q=W%60;return Q===0?`${Z} hour${Z>1?"s":""}`:`${Z} hour${Z>1?"s":""} ${Q} minute${Q>1?"s":""}`},be=W=>W<=5?"Short Story":W<=15?"Medium Story":W<=30?"Long Story":"Epic Story",vn=W=>{switch(W){case 1:return a.jsx(qr,{className:"w-5 h-5"});case 2:return a.jsx(xN,{className:"w-5 h-5"});case 3:return a.jsx(yN,{className:"w-5 h-5"});case 4:return a.jsx(SN,{className:"w-5 h-5"});case 5:return i?a.jsx(Dt,{className:"w-5 h-5 animate-spin"}):a.jsx(Fo,{className:"w-5 h-5"});case 6:return a.jsx(zo,{className:"w-5 h-5"});case 7:return a.jsx(Xd,{className:"w-5 h-5"});default:return a.jsx(Fo,{className:"w-5 h-5"})}},_n=W=>{switch(W){case 1:return"Story Title & Video Style";case 2:return"Story Length & Genre";case 3:return"Story Description";case 4:return"Language & Context";case 5:return i?"Generating Story...":"Story Generation & Review";case 6:return"Voice Selection";case 7:return"Video Creation";default:return""}},yo=W=>{Be({audioChunks:W.audioChunks,totalAudioDuration:W.totalAudioDuration})},vo=W=>{var Z,Q;console.log(" CreateStoryScreen: Updating video assets:",{hasVideoAssets:!!W,hasMediaLibrary:!!(W!=null&&W.mediaLibrary),mediaLibraryCount:((Z=W==null?void 0:W.mediaLibrary)==null?void 0:Z.length)||0,hasLayers:!!(W!=null&&W.layers),layersCount:((Q=W==null?void 0:W.layers)==null?void 0:Q.length)||0,storyId:N.storyId}),Be({videoAssets:W})},V=W=>{console.log(" Updating transcript info:",W),Te(Z=>({...Z,transcriptInfo:W}))},I=W=>{console.log(" Updating stock media info:",W),Te(Z=>({...Z,stockMediaInfo:W}))},O=W=>{console.log(" Updating sentence transcripts:",W),Te(Z=>({...Z,sentenceTranscripts:W}))},K=()=>{N.videoAssets?(console.log("Starting render process from frontend...",N.videoAssets),window.electron.startRender(N.videoAssets),ne(!1),o(8)):console.error("Render clicked but no videoAssets found in storyData.")},le=()=>{ne(!0),o(7)},de=()=>{ln()},Ie=()=>{ne(!1),K()},Ee=()=>{var W,Z;switch(r){case 1:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(Fi,{type:"text",label:"Story Title",placeholder:"Enter your story title",value:N.storyName,onChange:Q=>Be({storyName:Q}),icon:"user",required:!0}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Video Style ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:CD.map(Q=>a.jsxs(xe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Be({videoStyle:Q.value}),className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${N.videoStyle===Q.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[a.jsx("div",{className:"font-medium",children:Q.label}),a.jsx("div",{className:"text-sm opacity-75",children:Q.description})]},Q.value))})]})]})},"step1");case 2:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Story Length ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-semibold text-blue-600",children:Rt(N.duration/60)}),a.jsx("div",{className:"text-xs text-gray-500",children:be(N.duration/60)})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(fm,{value:[N.duration],onValueChange:([Q])=>Be({duration:Q}),max:7200,min:60,step:60,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"1 min"}),a.jsx("span",{children:"30 min"}),a.jsx("span",{children:"60 min"}),a.jsx("span",{children:"120 min"})]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4",children:[300,900,1800,3600].map(Q=>a.jsxs(xe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Be({duration:Q}),className:`p-2 rounded-lg border-2 transition-all duration-200 text-xs ${N.duration===Q?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[Q/60,"m"]},Q))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Genre ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:ED.map(Q=>a.jsx(xe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Be({genre:Q}),className:`p-3 rounded-lg border-2 transition-all duration-200 ${N.genre===Q?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:Q},Q))})]})]})},"step2");case 3:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Story Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:N.mainPrompt,onChange:Q=>Be({mainPrompt:Q.target.value}),placeholder:"Describe your story idea, plot, or any specific elements you'd like to include...",className:"min-w-[500px] p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:6})]})})},"step3");case 4:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Language"}),a.jsx("select",{value:N.language,onChange:Q=>Be({language:Q.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ND.map(Q=>a.jsx("option",{value:Q,children:Q},Q))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Context (Optional)"}),a.jsxs("div",{className:"space-y-2",children:[N.additionalContext.map((Q,$e)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:Q,onChange:Ke=>pr($e,Ke.target.value),placeholder:"Enter additional context...",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>Fe($e),className:"text-red-600 border-red-200 hover:bg-red-50",children:a.jsx(Ti,{className:"w-4 h-4"})})]},$e)),N.additionalContext.length<5&&a.jsxs(fe,{variant:"outline",onClick:or,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[a.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add Context"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Video Tone & Emotions (Optional - Max 4)"}),a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Selected: ",N.videoToneEmotions.length,"/4"]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 max-h-48 overflow-y-auto",children:PD.map(Q=>a.jsx(xe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>pe(Q),disabled:!N.videoToneEmotions.includes(Q)&&N.videoToneEmotions.length>=4,className:`p-2 rounded-lg border-2 transition-all duration-200 text-xs ${N.videoToneEmotions.includes(Q)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:Q},Q))})]})]})},"step4");case 5:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[i?a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Dt,{className:"w-5 h-5 text-blue-600 animate-spin"}),a.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:N.currentChapter&&N.totalChapters?`Generating Chapter ${N.currentChapter} of ${N.totalChapters}...`:"Generating Story Structure..."})]}),a.jsx("p",{className:"text-blue-700 text-sm",children:N.currentChapter&&N.totalChapters?`AI is creating Chapter ${N.currentChapter} content. Please wait while the story unfolds!`:"AI is creating your story outline and metadata. This will be followed by chapter generation."})]}):u&&N.generatedContent?a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Hi,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Story Generated Successfully!"})]}),a.jsxs("p",{className:"text-green-700 text-sm",children:["Your story has been created with"," ",N.totalChapters||0," chapters. You can now review and edit it below."]}),N.youtubeTitle&&a.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-green-200",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-1",children:"YouTube Metadata Generated:"}),a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"Title:"})," ",N.youtubeTitle]}),a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"Description:"})," ",N.youtubeDescription]}),a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"Tags:"})," ",N.youtubeTags]})]})]}):a.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Fo,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Ready to Generate"})]}),a.jsx("p",{className:"text-yellow-700 text-sm",children:"Click the generate button to start creating your story. This will first generate the story structure and metadata, then create each chapter's content."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i?"Generating Story Content...":"Generated Story Content"}),a.jsx("textarea",{value:N.generatedContent||"",onChange:Q=>Be({generatedContent:Q.target.value}),placeholder:i?"Generating...":"No content generated yet...",disabled:i,className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none min-h-64",rows:12})]}),u&&N.storySummary&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Story Summary"}),a.jsx("div",{className:"w-full p-4 border border-gray-300 rounded-lg bg-gray-50 min-h-32",children:a.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:N.storySummary})})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(fe,{variant:"outline",onClick:ye,className:"flex-1 text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Previous"]}),u&&N.generatedContent&&a.jsxs(fe,{variant:"outline",onClick:()=>{N.generatedContent&&(navigator.clipboard.writeText(N.generatedContent),n({type:"success",title:"Copied!",message:"Story content copied to clipboard"}))},className:"flex-1",children:[a.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]}),u&&N.generatedContent&&a.jsxs(fe,{onClick:an,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white",children:[a.jsx(Li,{className:"w-4 h-4 mr-2"}),"Regenerate"]}),u&&N.generatedContent&&a.jsxs(fe,{onClick:yn,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(kl,{className:"w-4 h-4 mr-2"}),"Next: Choose Voice"]}),!i&&!N.generatedContent&&a.jsxs(fe,{onClick:Tt,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[a.jsx(Fo,{className:"w-4 h-4 mr-2"}),"Generate Story"]})]})]})},"step5");case 6:return a.jsxs(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:[!se&&a.jsxs(a.Fragment,{children:[a.jsx(hD,{selectedVoice:N.selectedVoiceId,onVoiceSelect:Q=>{console.log("Voice selected:",Q),Be({selectedVoiceId:Q})},className:"max-w-4xl mx-auto"}),a.jsxs("div",{className:"flex space-x-3 max-w-4xl mx-auto",children:[a.jsxs(fe,{variant:"outline",onClick:ye,className:"flex-1 text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Previous"]}),N.selectedVoiceId&&a.jsxs(fe,{onClick:()=>{console.log("Proceeding to audio generation"),J(!0),N.audioChunks&&N.audioChunks.length>0&&F(!0)},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(kl,{className:"w-4 h-4 mr-2"}),"Generate Audio"]})]})]}),se&&N.selectedVoiceId&&!U&&a.jsxs(a.Fragment,{children:[N.audioChunks&&N.audioChunks.length>0&&a.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kd,{className:"w-5 h-5 text-orange-600 mr-2"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-orange-800",children:"Replace Existing Audio"}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Generating new audio with"," ",a.jsx("strong",{children:Ae(N.selectedVoiceId||"")})," ","will completely replace your current audio."]})]})]})})}),a.jsx(qy,{storyContent:N.generatedContent||"",selectedVoiceId:N.selectedVoiceId,generatedAudioVoiceId:x,existingAudioChunks:(W=N.audioChunks)==null?void 0:W.map(Q=>({id:Q.id,name:Q.name||`Audio Part ${Q.id}`,text:Q.text||"",duration:Q.duration,startTime:Q.startTime||0,filePath:Q.filePath||Q.relativePath||Q.blobUrl||"",relativePath:Q.relativePath,blobUrl:Q.blobUrl})),autoStart:C,storyId:N.storyId,onAudioControlRef:R,onAudioGenerated:(Q,$e)=>{const Ke=Q.map(ce=>({id:ce.id,name:ce.name||`Audio Part ${ce.id}`,text:ce.text||"",duration:ce.duration,startTime:ce.startTime||0,filePath:ce.filePath||ce.relativePath||ce.blobUrl||""}));oe(Ke,$e),k(!1)},onNext:yn,className:"max-w-4xl mx-auto"}),a.jsxs("div",{className:"flex justify-between max-w-4xl mx-auto",children:[a.jsxs(fe,{variant:"outline",onClick:()=>{console.log("Going back to voice selection - preserving voice and audio data"),J(!1)},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Back to Voice Selection"]}),a.jsxs(fe,{variant:"outline",onClick:ye,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Previous Step"]})]})]}),se&&N.selectedVoiceId&&U&&a.jsxs(a.Fragment,{children:[a.jsx(Nt,{className:"max-w-4xl mx-auto mb-6",children:a.jsx(wt,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(zo,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Audio Options"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Selected voice for next generation:"," ",a.jsx("strong",{children:Ae(N.selectedVoiceId||"")})]})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(fe,{onClick:()=>{console.log("Going back to change voice"),w&&w.isPlaying()&&w.handlePlayPause(),J(!1)},variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Change Voice"]}),a.jsxs(fe,{onClick:()=>{console.log("Showing regenerate confirmation dialog"),P(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[a.jsx(Li,{className:"w-4 h-4 mr-2"}),"Regenerate Audio"]})]})]})})}),x&&a.jsx(Nt,{className:"max-w-4xl mx-auto mb-4 border-green-200 bg-green-50",children:a.jsx(wt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(zo,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-green-800",children:"Generated Audio"}),a.jsxs("p",{className:"text-sm text-green-700",children:["Voice used:"," ",a.jsx("strong",{children:Ae(x)})]})]})]})})}),a.jsx(qy,{storyContent:N.generatedContent||"",selectedVoiceId:N.selectedVoiceId,generatedAudioVoiceId:x,existingAudioChunks:(Z=N.audioChunks)==null?void 0:Z.map(Q=>({id:Q.id,name:Q.name||`Audio Part ${Q.id}`,text:Q.text||"",duration:Q.duration,startTime:Q.startTime||0,filePath:Q.filePath||Q.relativePath||Q.blobUrl||"",relativePath:Q.relativePath,blobUrl:Q.blobUrl})),storyId:N.storyId,onAudioControlRef:R,onAudioGenerated:(Q,$e)=>{const Ke=Q.map(ce=>({id:ce.id,name:ce.name||`Audio Part ${ce.id}`,text:ce.text||"",duration:ce.duration,startTime:ce.startTime||0,filePath:ce.filePath||ce.relativePath||ce.blobUrl||""}));oe(Ke,$e)},onNext:yn,className:"max-w-4xl mx-auto"}),a.jsxs("div",{className:"flex justify-between max-w-4xl mx-auto",children:[a.jsxs(fe,{variant:"outline",onClick:()=>{console.log("Change Voice clicked - preserving voice selection and saving current audio"),w&&w.isPlaying()&&w.handlePlayPause(),console.log("Change Voice clicked - keeping audio visible"),J(!1)},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Change Voice"]}),a.jsxs(fe,{variant:"outline",onClick:ye,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Previous Step"]})]})]})]},"step6");case 7:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"h-full",children:a.jsx(gD,{className:"w-full h-full",storyContent:N.generatedContent||"",selectedVoiceId:N.selectedVoiceId||"",videoStyle:N.videoStyle||"landscape",savedVideoAssets:N.videoAssets,audioChunks:N.audioChunks,storyId:N.storyId,initialStory:N,onPrevious:ti,onSaveAndFinish:Oc,onRender:Vc,onVideoAssetsUpdate:vo,onAudioDataUpdate:yo,onTranscriptInfoUpdate:V,onStockMediaInfoUpdate:I,onSentenceTranscriptsUpdate:O,hasRenderFailed:ve,onRetryRender:Ie,mediaItems:me,setMediaItems:je,timelineItems:Ue,setTimelineItems:De,layers:At,setLayers:Ve})},"step7");case 8:return a.jsx(kD,{onBackToEditor:le,onSaveComplete:de});default:return a.jsx(xe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},children:$c()},`step-${r}`)}},We=()=>a.jsx("div",{children:"Story Name Step"}),rt=()=>a.jsx("div",{children:"Duration Step"}),zt=()=>a.jsx("div",{children:"Prompt Step"}),jn=()=>a.jsx("div",{children:"Language Step"}),xo=()=>a.jsx("div",{children:"Generation Step"}),ls=()=>a.jsx("div",{children:"Voice Selection Step"}),$c=()=>{switch(r){case 1:return We();case 2:return rt();case 3:return zt();case 4:return jn();case 5:return xo();case 6:return ls();default:return We()}},ti=()=>ye(),Oc=()=>ln(),Vc=()=>K();return a.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[a.jsx(xe.header,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.6},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 shadow-sm",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(xe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring",stiffness:200},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(qr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(Se=t.state)!=null&&Se.storyId?"Edit Story":"Create New Story"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",r," of ",at]})]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:re,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})})}),r!==7&&a.jsxs(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"flex items-center justify-center mb-8",children:a.jsx("div",{className:"flex items-center justify-center w-full max-w-2xl",children:Array.from({length:at},(W,Z)=>a.jsxs(xe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4+Z*.1,duration:.5,type:"spring",stiffness:200},className:"flex items-center justify-center",children:[a.jsx("div",{className:`min-w-12 min-h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${Z+1<=r?"bg-gradient-to-r from-blue-600 to-purple-600 border-transparent text-white":"bg-white border-gray-300 text-gray-400"}`,children:vn(Z+1)}),Z<at-1&&a.jsx("div",{className:`h-1 w-20 mx-0 transition-all duration-300 ${Z+1<r?"bg-gradient-to-r from-blue-600 to-purple-600":"bg-gray-200"}`})]},Z+1))})}),r!==7&&a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(xe.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.5},className:"text-2xl font-bold text-gray-900 mb-2",children:_n(r)}),a.jsx(xe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-gray-600",children:"Let's create something amazing together"})]})]}),r===7?a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.6},className:"flex-1",children:M?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Story..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we load your story data"})]})}):a.jsx(Og,{mode:"wait",children:Ee()})}):a.jsx("div",{className:"min-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:a.jsx(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.6},children:a.jsx(Nt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:a.jsxs(wt,{className:"p-8 max-w-4xl",children:[M?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Story..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we load your story data"})]})}):a.jsx(Og,{mode:"wait",children:Ee()}),!M&&r<5&&a.jsxs(xe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200",children:[a.jsxs(fe,{variant:"outline",onClick:ye,disabled:r===1,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Previous"]}),a.jsxs(fe,{onClick:yn,disabled:!Xe(r),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",children:["Next",a.jsx(kl,{className:"w-4 h-4 ml-2"})]})]})]})})})}),d&&a.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Kd,{className:"w-6 h-6 text-yellow-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Back to Dashboard"})]}),a.jsx("p",{className:"text-gray-600 mb-6",children:"What would you like to do with your current progress?"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(fe,{onClick:Le,disabled:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[l?a.jsx(Dt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Save & Exit"]}),a.jsx(fe,{onClick:Pe,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:"Don't Save"}),a.jsx(fe,{variant:"outline",onClick:()=>m(!1),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})}),a.jsx(zM,{open:T,onOpenChange:P,children:a.jsxs(Tb,{children:[a.jsxs(kb,{children:[a.jsxs(Eb,{className:"flex items-center space-x-2",children:[a.jsx(Li,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{children:"Regenerate Audio"})]}),a.jsxs(Nb,{children:["Are you sure you want to regenerate the audio? This will replace your current audio",x?` (voice: ${Ae(x)})`:""," ","with new audio using"," ",a.jsx("strong",{children:Ae(N.selectedVoiceId||"")}),"."]})]}),a.jsxs(Cb,{children:[a.jsx(jb,{children:"Cancel"}),a.jsx(Pb,{onClick:()=>{console.log("Confirmed regeneration with voice:",Ae(N.selectedVoiceId||"")),console.log("Starting immediate regeneration..."),Be({audioChunks:void 0,totalAudioDuration:void 0}),F(!1),v(void 0),k(!0),P(!1)},className:"bg-blue-600 hover:bg-blue-700",children:"Yes, Regenerate"})]})]})})]})},AD=()=>a.jsx(QN,{children:a.jsx(JN,{children:a.jsx(HE,{children:a.jsxs(VE,{children:[a.jsx(ui,{path:"/login",element:a.jsx(GR,{})}),a.jsx(ui,{path:"/register",element:a.jsx(KR,{})}),a.jsx(ui,{path:"/dashboard",element:a.jsx(gg,{children:a.jsx(YR,{})})}),a.jsx(ui,{path:"/create-story",element:a.jsx(gg,{children:a.jsx(jD,{})})}),a.jsx(ui,{path:"*",element:a.jsx(Sx,{to:"/dashboard",replace:!0})})]})})})});qu.createRoot(document.getElementById("root")).render(a.jsx(Qn.StrictMode,{children:a.jsx(AD,{})}));
