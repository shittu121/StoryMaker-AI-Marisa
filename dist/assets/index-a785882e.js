var tC=Object.defineProperty;var nC=(e,t,n)=>t in e?tC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var eo=(e,t,n)=>(nC(e,typeof t!="symbol"?t+"":t,n),n);function rC(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function I0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var D0={exports:{}},Fc={},M0={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),oC=Symbol.for("react.portal"),iC=Symbol.for("react.fragment"),sC=Symbol.for("react.strict_mode"),aC=Symbol.for("react.profiler"),lC=Symbol.for("react.provider"),cC=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),dC=Symbol.for("react.suspense"),fC=Symbol.for("react.memo"),hC=Symbol.for("react.lazy"),Cp=Symbol.iterator;function mC(e){return e===null||typeof e!="object"?null:(e=Cp&&e[Cp]||e["@@iterator"],typeof e=="function"?e:null)}var L0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$0=Object.assign,F0={};function xs(e,t,n){this.props=e,this.context=t,this.refs=F0,this.updater=n||L0}xs.prototype.isReactComponent={};xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function O0(){}O0.prototype=xs.prototype;function eh(e,t,n){this.props=e,this.context=t,this.refs=F0,this.updater=n||L0}var th=eh.prototype=new O0;th.constructor=eh;$0(th,xs.prototype);th.isPureReactComponent=!0;var kp=Array.isArray,V0=Object.prototype.hasOwnProperty,nh={current:null},_0={key:!0,ref:!0,__self:!0,__source:!0};function U0(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)V0.call(t,r)&&!_0.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Ha,type:e,key:i,ref:s,props:o,_owner:nh.current}}function pC(e,t){return{$$typeof:Ha,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ha}function gC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ep=/\/+/g;function Ru(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gC(""+e.key):t.toString(36)}function Vl(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ha:case oC:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+Ru(s,0):r,kp(o)?(n="",e!=null&&(n=e.replace(Ep,"$&/")+"/"),Vl(o,t,n,"",function(u){return u})):o!=null&&(rh(o)&&(o=pC(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Ep,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",kp(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ru(i,l);s+=Vl(i,t,n,c,o)}else if(c=mC(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ru(i,l++),s+=Vl(i,t,n,c,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function fl(e,t,n){if(e==null)return e;var r=[],o=0;return Vl(e,r,"","",function(i){return t.call(n,i,o++)}),r}function yC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vn={current:null},_l={transition:null},vC={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:_l,ReactCurrentOwner:nh};function z0(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:fl,forEach:function(e,t,n){fl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fl(e,function(){t++}),t},toArray:function(e){return fl(e,function(t){return t})||[]},only:function(e){if(!rh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=xs;_e.Fragment=iC;_e.Profiler=aC;_e.PureComponent=eh;_e.StrictMode=sC;_e.Suspense=dC;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vC;_e.act=z0;_e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$0({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=nh.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)V0.call(t,c)&&!_0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ha,type:e.type,key:o,ref:i,props:r,_owner:s}};_e.createContext=function(e){return e={$$typeof:cC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lC,_context:e},e.Consumer=e};_e.createElement=U0;_e.createFactory=function(e){var t=U0.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:uC,render:e}};_e.isValidElement=rh;_e.lazy=function(e){return{$$typeof:hC,_payload:{_status:-1,_result:e},_init:yC}};_e.memo=function(e,t){return{$$typeof:fC,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=_l.transition;_l.transition={};try{e()}finally{_l.transition=t}};_e.unstable_act=z0;_e.useCallback=function(e,t){return vn.current.useCallback(e,t)};_e.useContext=function(e){return vn.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return vn.current.useDeferredValue(e)};_e.useEffect=function(e,t){return vn.current.useEffect(e,t)};_e.useId=function(){return vn.current.useId()};_e.useImperativeHandle=function(e,t,n){return vn.current.useImperativeHandle(e,t,n)};_e.useInsertionEffect=function(e,t){return vn.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return vn.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return vn.current.useMemo(e,t)};_e.useReducer=function(e,t,n){return vn.current.useReducer(e,t,n)};_e.useRef=function(e){return vn.current.useRef(e)};_e.useState=function(e){return vn.current.useState(e)};_e.useSyncExternalStore=function(e,t,n){return vn.current.useSyncExternalStore(e,t,n)};_e.useTransition=function(){return vn.current.useTransition()};_e.version="18.3.1";M0.exports=_e;var p=M0.exports;const ar=I0(p),oh=rC({__proto__:null,default:ar},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xC=p,wC=Symbol.for("react.element"),bC=Symbol.for("react.fragment"),SC=Object.prototype.hasOwnProperty,TC=xC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CC={key:!0,ref:!0,__self:!0,__source:!0};function B0(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)SC.call(t,r)&&!CC.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:wC,type:e,key:i,ref:s,props:o,_owner:TC.current}}Fc.Fragment=bC;Fc.jsx=B0;Fc.jsxs=B0;D0.exports=Fc;var a=D0.exports,Ed={},W0={exports:{}},Ln={},G0={exports:{}},H0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(f,re){var ve=f.length;f.push(re);e:for(;0<ve;){var Me=ve-1>>>1,Le=f[Me];if(0<o(Le,re))f[Me]=re,f[ve]=Le,ve=Me;else break e}}function n(f){return f.length===0?null:f[0]}function r(f){if(f.length===0)return null;var re=f[0],ve=f.pop();if(ve!==re){f[0]=ve;e:for(var Me=0,Le=f.length,Ye=Le>>>1;Me<Ye;){var Be=2*(Me+1)-1,cn=f[Be],Ze=Be+1,Fn=f[Ze];if(0>o(cn,ve))Ze<Le&&0>o(Fn,cn)?(f[Me]=Fn,f[Ze]=ve,Me=Ze):(f[Me]=cn,f[Be]=ve,Me=Be);else if(Ze<Le&&0>o(Fn,ve))f[Me]=Fn,f[Ze]=ve,Me=Ze;else break e}}return re}function o(f,re){var ve=f.sortIndex-re.sortIndex;return ve!==0?ve:f.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],m=1,h=null,g=3,E=!1,j=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(f){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=f)r(u),re.sortIndex=re.expirationTime,t(c,re);else break;re=n(u)}}function A(f){if(C=!1,T(f),!j)if(n(c)!==null)j=!0,He($);else{var re=n(u);re!==null&&Ie(A,re.startTime-f)}}function $(f,re){j=!1,C&&(C=!1,S(_),_=-1),E=!0;var ve=g;try{for(T(re),h=n(c);h!==null&&(!(h.expirationTime>re)||f&&!be());){var Me=h.callback;if(typeof Me=="function"){h.callback=null,g=h.priorityLevel;var Le=Me(h.expirationTime<=re);re=e.unstable_now(),typeof Le=="function"?h.callback=Le:h===n(c)&&r(c),T(re)}else r(c);h=n(c)}if(h!==null)var Ye=!0;else{var Be=n(u);Be!==null&&Ie(A,Be.startTime-re),Ye=!1}return Ye}finally{h=null,g=ve,E=!1}}var Y=!1,K=null,_=-1,ae=5,J=-1;function be(){return!(e.unstable_now()-J<ae)}function ne(){if(K!==null){var f=e.unstable_now();J=f;var re=!0;try{re=K(!0,f)}finally{re?Oe():(Y=!1,K=null)}}else Y=!1}var Oe;if(typeof b=="function")Oe=function(){b(ne)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Dt=ie.port2;ie.port1.onmessage=ne,Oe=function(){Dt.postMessage(null)}}else Oe=function(){P(ne,0)};function He(f){K=f,Y||(Y=!0,Oe())}function Ie(f,re){_=P(function(){f(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(f){f.callback=null},e.unstable_continueExecution=function(){j||E||(j=!0,He($))},e.unstable_forceFrameRate=function(f){0>f||125<f?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<f?Math.floor(1e3/f):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(f){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var ve=g;g=re;try{return f()}finally{g=ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(f,re){switch(f){case 1:case 2:case 3:case 4:case 5:break;default:f=3}var ve=g;g=f;try{return re()}finally{g=ve}},e.unstable_scheduleCallback=function(f,re,ve){var Me=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Me+ve:Me):ve=Me,f){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ve+Le,f={id:m++,callback:re,priorityLevel:f,startTime:ve,expirationTime:Le,sortIndex:-1},ve>Me?(f.sortIndex=ve,t(u,f),n(c)===null&&f===n(u)&&(C?(S(_),_=-1):C=!0,Ie(A,ve-Me))):(f.sortIndex=Le,t(c,f),j||E||(j=!0,He($))),f},e.unstable_shouldYield=be,e.unstable_wrapCallback=function(f){var re=g;return function(){var ve=g;g=re;try{return f.apply(this,arguments)}finally{g=ve}}}})(H0);G0.exports=H0;var kC=G0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=p,Mn=kC;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K0=new Set,ga={};function pi(e,t){ls(e,t),ls(e+"Capture",t)}function ls(e,t){for(ga[e]=t,e=0;e<t.length;e++)K0.add(t[e])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=Object.prototype.hasOwnProperty,NC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Np={},Pp={};function PC(e){return Nd.call(Pp,e)?!0:Nd.call(Np,e)?!1:NC.test(e)?Pp[e]=!0:(Np[e]=!0,!1)}function jC(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AC(e,t,n,r){if(t===null||typeof t>"u"||jC(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xn(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qt[e]=new xn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qt[t]=new xn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qt[e]=new xn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qt[e]=new xn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qt[e]=new xn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qt[e]=new xn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qt[e]=new xn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qt[e]=new xn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qt[e]=new xn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ih=/[\-:]([a-z])/g;function sh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ih,sh);Qt[t]=new xn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ih,sh);Qt[t]=new xn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ih,sh);Qt[t]=new xn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qt[e]=new xn(e,1,!1,e.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qt[e]=new xn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ah(e,t,n,r){var o=Qt.hasOwnProperty(t)?Qt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AC(t,n,o,r)&&(n=null),r||o===null?PC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wr=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hl=Symbol.for("react.element"),Li=Symbol.for("react.portal"),$i=Symbol.for("react.fragment"),lh=Symbol.for("react.strict_mode"),Pd=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),jd=Symbol.for("react.suspense"),Ad=Symbol.for("react.suspense_list"),uh=Symbol.for("react.memo"),so=Symbol.for("react.lazy"),q0=Symbol.for("react.offscreen"),jp=Symbol.iterator;function Vs(e){return e===null||typeof e!="object"?null:(e=jp&&e[jp]||e["@@iterator"],typeof e=="function"?e:null)}var St=Object.assign,Iu;function Qs(e){if(Iu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Iu=t&&t[1]||""}return`
`+Iu+e}var Du=!1;function Mu(e,t){if(!e||Du)return"";Du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var c=`
`+o[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{Du=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qs(e):""}function RC(e){switch(e.tag){case 5:return Qs(e.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return e=Mu(e.type,!1),e;case 11:return e=Mu(e.type.render,!1),e;case 1:return e=Mu(e.type,!0),e;default:return""}}function Rd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $i:return"Fragment";case Li:return"Portal";case Pd:return"Profiler";case lh:return"StrictMode";case jd:return"Suspense";case Ad:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case X0:return(e.displayName||"Context")+".Consumer";case Y0:return(e._context.displayName||"Context")+".Provider";case ch:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uh:return t=e.displayName||null,t!==null?t:Rd(e.type)||"Memo";case so:t=e._payload,e=e._init;try{return Rd(e(t))}catch{}}return null}function IC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(t);case 8:return t===lh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ko(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DC(e){var t=Q0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ml(e){e._valueTracker||(e._valueTracker=DC(e))}function Z0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function oc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Id(e,t){var n=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ap(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ko(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function J0(e,t){t=t.checked,t!=null&&ah(e,"checked",t,!1)}function Dd(e,t){J0(e,t);var n=ko(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Md(e,t.type,n):t.hasOwnProperty("defaultValue")&&Md(e,t.type,ko(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Md(e,t,n){(t!=="number"||oc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zs=Array.isArray;function Ji(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ko(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ld(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ip(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(Zs(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ko(n)}}function ev(e,t){var n=ko(t.value),r=ko(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Dp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pl,nv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pl=pl||document.createElement("div"),pl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ya(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MC=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(e){MC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),na[t]=na[e]})});function rv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||na.hasOwnProperty(e)&&na[e]?(""+t).trim():t+"px"}function ov(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=rv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var LC=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fd(e,t){if(t){if(LC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function Od(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=null;function dh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _d=null,es=null,ts=null;function Mp(e){if(e=Xa(e)){if(typeof _d!="function")throw Error(te(280));var t=e.stateNode;t&&(t=zc(t),_d(e.stateNode,e.type,t))}}function iv(e){es?ts?ts.push(e):ts=[e]:es=e}function sv(){if(es){var e=es,t=ts;if(ts=es=null,Mp(e),t)for(e=0;e<t.length;e++)Mp(t[e])}}function av(e,t){return e(t)}function lv(){}var Lu=!1;function cv(e,t,n){if(Lu)return e(t,n);Lu=!0;try{return av(e,t,n)}finally{Lu=!1,(es!==null||ts!==null)&&(lv(),sv())}}function va(e,t){var n=e.stateNode;if(n===null)return null;var r=zc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var Ud=!1;if(Or)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Ud=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Ud=!1}function $C(e,t,n,r,o,i,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var ra=!1,ic=null,sc=!1,zd=null,FC={onError:function(e){ra=!0,ic=e}};function OC(e,t,n,r,o,i,s,l,c){ra=!1,ic=null,$C.apply(FC,arguments)}function VC(e,t,n,r,o,i,s,l,c){if(OC.apply(this,arguments),ra){if(ra){var u=ic;ra=!1,ic=null}else throw Error(te(198));sc||(sc=!0,zd=u)}}function gi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lp(e){if(gi(e)!==e)throw Error(te(188))}function _C(e){var t=e.alternate;if(!t){if(t=gi(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Lp(o),e;if(i===r)return Lp(o),t;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function dv(e){return e=_C(e),e!==null?fv(e):null}function fv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fv(e);if(t!==null)return t;e=e.sibling}return null}var hv=Mn.unstable_scheduleCallback,$p=Mn.unstable_cancelCallback,UC=Mn.unstable_shouldYield,zC=Mn.unstable_requestPaint,At=Mn.unstable_now,BC=Mn.unstable_getCurrentPriorityLevel,fh=Mn.unstable_ImmediatePriority,mv=Mn.unstable_UserBlockingPriority,ac=Mn.unstable_NormalPriority,WC=Mn.unstable_LowPriority,pv=Mn.unstable_IdlePriority,Oc=null,kr=null;function GC(e){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Oc,e,void 0,(e.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:YC,HC=Math.log,KC=Math.LN2;function YC(e){return e>>>=0,e===0?32:31-(HC(e)/KC|0)|0}var gl=64,yl=4194304;function Js(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=Js(l):(i&=s,i!==0&&(r=Js(i)))}else s=n&~o,s!==0?r=Js(s):i!==0&&(r=Js(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ur(t),o=1<<n,r|=e[n],t&=~o;return r}function XC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-ur(i),l=1<<s,c=o[s];c===-1?(!(l&n)||l&r)&&(o[s]=XC(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gv(){var e=gl;return gl<<=1,!(gl&4194240)&&(gl=64),e}function $u(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ka(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ur(t),e[t]=n}function QC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-ur(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function hh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ur(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ke=0;function yv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vv,mh,xv,wv,bv,Wd=!1,vl=[],po=null,go=null,yo=null,xa=new Map,wa=new Map,lo=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fp(e,t){switch(e){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":xa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(t.pointerId)}}function Us(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Xa(t),t!==null&&mh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function JC(e,t,n,r,o){switch(t){case"focusin":return po=Us(po,e,t,n,r,o),!0;case"dragenter":return go=Us(go,e,t,n,r,o),!0;case"mouseover":return yo=Us(yo,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return xa.set(i,Us(xa.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,wa.set(i,Us(wa.get(i)||null,e,t,n,r,o)),!0}return!1}function Sv(e){var t=Xo(e.target);if(t!==null){var n=gi(t);if(n!==null){if(t=n.tag,t===13){if(t=uv(n),t!==null){e.blockedOn=t,bv(e.priority,function(){xv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vd=r,n.target.dispatchEvent(r),Vd=null}else return t=Xa(n),t!==null&&mh(t),e.blockedOn=n,!1;t.shift()}return!0}function Op(e,t,n){Ul(e)&&n.delete(t)}function ek(){Wd=!1,po!==null&&Ul(po)&&(po=null),go!==null&&Ul(go)&&(go=null),yo!==null&&Ul(yo)&&(yo=null),xa.forEach(Op),wa.forEach(Op)}function zs(e,t){e.blockedOn===t&&(e.blockedOn=null,Wd||(Wd=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,ek)))}function ba(e){function t(o){return zs(o,e)}if(0<vl.length){zs(vl[0],e);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(po!==null&&zs(po,e),go!==null&&zs(go,e),yo!==null&&zs(yo,e),xa.forEach(t),wa.forEach(t),n=0;n<lo.length;n++)r=lo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lo.length&&(n=lo[0],n.blockedOn===null);)Sv(n),n.blockedOn===null&&lo.shift()}var ns=Wr.ReactCurrentBatchConfig,cc=!0;function tk(e,t,n,r){var o=Ke,i=ns.transition;ns.transition=null;try{Ke=1,ph(e,t,n,r)}finally{Ke=o,ns.transition=i}}function nk(e,t,n,r){var o=Ke,i=ns.transition;ns.transition=null;try{Ke=4,ph(e,t,n,r)}finally{Ke=o,ns.transition=i}}function ph(e,t,n,r){if(cc){var o=Gd(e,t,n,r);if(o===null)Hu(e,t,r,uc,n),Fp(e,r);else if(JC(o,e,t,n,r))r.stopPropagation();else if(Fp(e,r),t&4&&-1<ZC.indexOf(e)){for(;o!==null;){var i=Xa(o);if(i!==null&&vv(i),i=Gd(e,t,n,r),i===null&&Hu(e,t,r,uc,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Hu(e,t,r,null,n)}}var uc=null;function Gd(e,t,n,r){if(uc=null,e=dh(r),e=Xo(e),e!==null)if(t=gi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uc=e,null}function Tv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BC()){case fh:return 1;case mv:return 4;case ac:case WC:return 16;case pv:return 536870912;default:return 16}default:return 16}}var uo=null,gh=null,zl=null;function Cv(){if(zl)return zl;var e,t=gh,n=t.length,r,o="value"in uo?uo.value:uo.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return zl=o.slice(e,1<r?1-r:void 0)}function Bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xl(){return!0}function Vp(){return!1}function $n(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xl:Vp,this.isPropagationStopped=Vp,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),t}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yh=$n(ws),Ya=St({},ws,{view:0,detail:0}),rk=$n(Ya),Fu,Ou,Bs,Vc=St({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bs&&(Bs&&e.type==="mousemove"?(Fu=e.screenX-Bs.screenX,Ou=e.screenY-Bs.screenY):Ou=Fu=0,Bs=e),Fu)},movementY:function(e){return"movementY"in e?e.movementY:Ou}}),_p=$n(Vc),ok=St({},Vc,{dataTransfer:0}),ik=$n(ok),sk=St({},Ya,{relatedTarget:0}),Vu=$n(sk),ak=St({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),lk=$n(ak),ck=St({},ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uk=$n(ck),dk=St({},ws,{data:0}),Up=$n(dk),fk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mk[e])?!!t[e]:!1}function vh(){return pk}var gk=St({},Ya,{key:function(e){if(e.key){var t=fk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yk=$n(gk),vk=St({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zp=$n(vk),xk=St({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),wk=$n(xk),bk=St({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sk=$n(bk),Tk=St({},Vc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ck=$n(Tk),kk=[9,13,27,32],xh=Or&&"CompositionEvent"in window,oa=null;Or&&"documentMode"in document&&(oa=document.documentMode);var Ek=Or&&"TextEvent"in window&&!oa,kv=Or&&(!xh||oa&&8<oa&&11>=oa),Bp=String.fromCharCode(32),Wp=!1;function Ev(e,t){switch(e){case"keyup":return kk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fi=!1;function Nk(e,t){switch(e){case"compositionend":return Nv(t);case"keypress":return t.which!==32?null:(Wp=!0,Bp);case"textInput":return e=t.data,e===Bp&&Wp?null:e;default:return null}}function Pk(e,t){if(Fi)return e==="compositionend"||!xh&&Ev(e,t)?(e=Cv(),zl=gh=uo=null,Fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kv&&t.locale!=="ko"?null:t.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jk[e.type]:t==="textarea"}function Pv(e,t,n,r){iv(r),t=dc(t,"onChange"),0<t.length&&(n=new yh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ia=null,Sa=null;function Ak(e){Vv(e,0)}function _c(e){var t=_i(e);if(Z0(t))return e}function Rk(e,t){if(e==="change")return t}var jv=!1;if(Or){var _u;if(Or){var Uu="oninput"in document;if(!Uu){var Hp=document.createElement("div");Hp.setAttribute("oninput","return;"),Uu=typeof Hp.oninput=="function"}_u=Uu}else _u=!1;jv=_u&&(!document.documentMode||9<document.documentMode)}function Kp(){ia&&(ia.detachEvent("onpropertychange",Av),Sa=ia=null)}function Av(e){if(e.propertyName==="value"&&_c(Sa)){var t=[];Pv(t,Sa,e,dh(e)),cv(Ak,t)}}function Ik(e,t,n){e==="focusin"?(Kp(),ia=t,Sa=n,ia.attachEvent("onpropertychange",Av)):e==="focusout"&&Kp()}function Dk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _c(Sa)}function Mk(e,t){if(e==="click")return _c(t)}function Lk(e,t){if(e==="input"||e==="change")return _c(t)}function $k(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:$k;function Ta(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Nd.call(t,o)||!fr(e[o],t[o]))return!1}return!0}function Yp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xp(e,t){var n=Yp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yp(n)}}function Rv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iv(){for(var e=window,t=oc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oc(e.document)}return t}function wh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Fk(e){var t=Iv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Rv(n.ownerDocument.documentElement,n)){if(r!==null&&wh(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Xp(n,i);var s=Xp(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ok=Or&&"documentMode"in document&&11>=document.documentMode,Oi=null,Hd=null,sa=null,Kd=!1;function qp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||Oi==null||Oi!==oc(r)||(r=Oi,"selectionStart"in r&&wh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Ta(sa,r)||(sa=r,r=dc(Hd,"onSelect"),0<r.length&&(t=new yh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Oi)))}function wl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vi={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},zu={},Dv={};Or&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function Uc(e){if(zu[e])return zu[e];if(!Vi[e])return e;var t=Vi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dv)return zu[e]=t[n];return e}var Mv=Uc("animationend"),Lv=Uc("animationiteration"),$v=Uc("animationstart"),Fv=Uc("transitionend"),Ov=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(e,t){Ov.set(e,t),pi(t,[e])}for(var Bu=0;Bu<Qp.length;Bu++){var Wu=Qp[Bu],Vk=Wu.toLowerCase(),_k=Wu[0].toUpperCase()+Wu.slice(1);jo(Vk,"on"+_k)}jo(Mv,"onAnimationEnd");jo(Lv,"onAnimationIteration");jo($v,"onAnimationStart");jo("dblclick","onDoubleClick");jo("focusin","onFocus");jo("focusout","onBlur");jo(Fv,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Zp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,VC(r,t,void 0,e),e.currentTarget=null}function Vv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&o.isPropagationStopped())break e;Zp(o,l,u),i=c}else for(s=0;s<r.length;s++){if(l=r[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&o.isPropagationStopped())break e;Zp(o,l,u),i=c}}}if(sc)throw e=zd,sc=!1,zd=null,e}function ct(e,t){var n=t[Zd];n===void 0&&(n=t[Zd]=new Set);var r=e+"__bubble";n.has(r)||(_v(t,e,2,!1),n.add(r))}function Gu(e,t,n){var r=0;t&&(r|=4),_v(n,e,r,t)}var bl="_reactListening"+Math.random().toString(36).slice(2);function Ca(e){if(!e[bl]){e[bl]=!0,K0.forEach(function(n){n!=="selectionchange"&&(Uk.has(n)||Gu(n,!1,e),Gu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bl]||(t[bl]=!0,Gu("selectionchange",!1,t))}}function _v(e,t,n,r){switch(Tv(t)){case 1:var o=tk;break;case 4:o=nk;break;default:o=ph}n=o.bind(null,t,n,e),o=void 0,!Ud||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hu(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;l!==null;){if(s=Xo(l),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}l=l.parentNode}}r=r.return}cv(function(){var u=i,m=dh(n),h=[];e:{var g=Ov.get(e);if(g!==void 0){var E=yh,j=e;switch(e){case"keypress":if(Bl(n)===0)break e;case"keydown":case"keyup":E=yk;break;case"focusin":j="focus",E=Vu;break;case"focusout":j="blur",E=Vu;break;case"beforeblur":case"afterblur":E=Vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=_p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=ik;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=wk;break;case Mv:case Lv:case $v:E=lk;break;case Fv:E=Sk;break;case"scroll":E=rk;break;case"wheel":E=Ck;break;case"copy":case"cut":case"paste":E=uk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=zp}var C=(t&4)!==0,P=!C&&e==="scroll",S=C?g!==null?g+"Capture":null:g;C=[];for(var b=u,T;b!==null;){T=b;var A=T.stateNode;if(T.tag===5&&A!==null&&(T=A,S!==null&&(A=va(b,S),A!=null&&C.push(ka(b,A,T)))),P)break;b=b.return}0<C.length&&(g=new E(g,j,null,n,m),h.push({event:g,listeners:C}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",g&&n!==Vd&&(j=n.relatedTarget||n.fromElement)&&(Xo(j)||j[Vr]))break e;if((E||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,E?(j=n.relatedTarget||n.toElement,E=u,j=j?Xo(j):null,j!==null&&(P=gi(j),j!==P||j.tag!==5&&j.tag!==6)&&(j=null)):(E=null,j=u),E!==j)){if(C=_p,A="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(C=zp,A="onPointerLeave",S="onPointerEnter",b="pointer"),P=E==null?g:_i(E),T=j==null?g:_i(j),g=new C(A,b+"leave",E,n,m),g.target=P,g.relatedTarget=T,A=null,Xo(m)===u&&(C=new C(S,b+"enter",j,n,m),C.target=T,C.relatedTarget=P,A=C),P=A,E&&j)t:{for(C=E,S=j,b=0,T=C;T;T=Ai(T))b++;for(T=0,A=S;A;A=Ai(A))T++;for(;0<b-T;)C=Ai(C),b--;for(;0<T-b;)S=Ai(S),T--;for(;b--;){if(C===S||S!==null&&C===S.alternate)break t;C=Ai(C),S=Ai(S)}C=null}else C=null;E!==null&&Jp(h,g,E,C,!1),j!==null&&P!==null&&Jp(h,P,j,C,!0)}}e:{if(g=u?_i(u):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var $=Rk;else if(Gp(g))if(jv)$=Lk;else{$=Dk;var Y=Ik}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&($=Mk);if($&&($=$(e,u))){Pv(h,$,n,m);break e}Y&&Y(e,g,u),e==="focusout"&&(Y=g._wrapperState)&&Y.controlled&&g.type==="number"&&Md(g,"number",g.value)}switch(Y=u?_i(u):window,e){case"focusin":(Gp(Y)||Y.contentEditable==="true")&&(Oi=Y,Hd=u,sa=null);break;case"focusout":sa=Hd=Oi=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,qp(h,n,m);break;case"selectionchange":if(Ok)break;case"keydown":case"keyup":qp(h,n,m)}var K;if(xh)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Fi?Ev(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(kv&&n.locale!=="ko"&&(Fi||_!=="onCompositionStart"?_==="onCompositionEnd"&&Fi&&(K=Cv()):(uo=m,gh="value"in uo?uo.value:uo.textContent,Fi=!0)),Y=dc(u,_),0<Y.length&&(_=new Up(_,e,null,n,m),h.push({event:_,listeners:Y}),K?_.data=K:(K=Nv(n),K!==null&&(_.data=K)))),(K=Ek?Nk(e,n):Pk(e,n))&&(u=dc(u,"onBeforeInput"),0<u.length&&(m=new Up("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:u}),m.data=K))}Vv(h,t)})}function ka(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dc(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=va(e,n),i!=null&&r.unshift(ka(e,i,o)),i=va(e,t),i!=null&&r.push(ka(e,i,o))),e=e.return}return r}function Ai(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jp(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,o?(c=va(n,i),c!=null&&s.unshift(ka(n,c,l))):o||(c=va(n,i),c!=null&&s.push(ka(n,c,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var zk=/\r\n?/g,Bk=/\u0000|\uFFFD/g;function eg(e){return(typeof e=="string"?e:""+e).replace(zk,`
`).replace(Bk,"")}function Sl(e,t,n){if(t=eg(t),eg(e)!==t&&n)throw Error(te(425))}function fc(){}var Yd=null,Xd=null;function qd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,Wk=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,Gk=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(e){return tg.resolve(null).then(e).catch(Hk)}:Qd;function Hk(e){setTimeout(function(){throw e})}function Ku(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ba(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ba(t)}function vo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ng(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Tr="__reactFiber$"+bs,Ea="__reactProps$"+bs,Vr="__reactContainer$"+bs,Zd="__reactEvents$"+bs,Kk="__reactListeners$"+bs,Yk="__reactHandles$"+bs;function Xo(e){var t=e[Tr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vr]||n[Tr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ng(e);e!==null;){if(n=e[Tr])return n;e=ng(e)}return t}e=n,n=e.parentNode}return null}function Xa(e){return e=e[Tr]||e[Vr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function zc(e){return e[Ea]||null}var Jd=[],Ui=-1;function Ao(e){return{current:e}}function dt(e){0>Ui||(e.current=Jd[Ui],Jd[Ui]=null,Ui--)}function it(e,t){Ui++,Jd[Ui]=e.current,e.current=t}var Eo={},an=Ao(Eo),Cn=Ao(!1),li=Eo;function cs(e,t){var n=e.type.contextTypes;if(!n)return Eo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function kn(e){return e=e.childContextTypes,e!=null}function hc(){dt(Cn),dt(an)}function rg(e,t,n){if(an.current!==Eo)throw Error(te(168));it(an,t),it(Cn,n)}function Uv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(te(108,IC(e)||"Unknown",o));return St({},n,r)}function mc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,li=an.current,it(an,e),it(Cn,Cn.current),!0}function og(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=Uv(e,t,li),r.__reactInternalMemoizedMergedChildContext=e,dt(Cn),dt(an),it(an,e)):dt(Cn),it(Cn,n)}var Mr=null,Bc=!1,Yu=!1;function zv(e){Mr===null?Mr=[e]:Mr.push(e)}function Xk(e){Bc=!0,zv(e)}function Ro(){if(!Yu&&Mr!==null){Yu=!0;var e=0,t=Ke;try{var n=Mr;for(Ke=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mr=null,Bc=!1}catch(o){throw Mr!==null&&(Mr=Mr.slice(e+1)),hv(fh,Ro),o}finally{Ke=t,Yu=!1}}return null}var zi=[],Bi=0,pc=null,gc=0,Un=[],zn=0,ci=null,Lr=1,$r="";function Go(e,t){zi[Bi++]=gc,zi[Bi++]=pc,pc=e,gc=t}function Bv(e,t,n){Un[zn++]=Lr,Un[zn++]=$r,Un[zn++]=ci,ci=e;var r=Lr;e=$r;var o=32-ur(r)-1;r&=~(1<<o),n+=1;var i=32-ur(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Lr=1<<32-ur(t)+o|n<<o|r,$r=i+e}else Lr=1<<i|n<<o|r,$r=e}function bh(e){e.return!==null&&(Go(e,1),Bv(e,1,0))}function Sh(e){for(;e===pc;)pc=zi[--Bi],zi[Bi]=null,gc=zi[--Bi],zi[Bi]=null;for(;e===ci;)ci=Un[--zn],Un[zn]=null,$r=Un[--zn],Un[zn]=null,Lr=Un[--zn],Un[zn]=null}var Dn=null,In=null,mt=!1,cr=null;function Wv(e,t){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ig(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dn=e,In=vo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dn=e,In=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ci!==null?{id:Lr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dn=e,In=null,!0):!1;default:return!1}}function ef(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tf(e){if(mt){var t=In;if(t){var n=t;if(!ig(e,t)){if(ef(e))throw Error(te(418));t=vo(n.nextSibling);var r=Dn;t&&ig(e,t)?Wv(r,n):(e.flags=e.flags&-4097|2,mt=!1,Dn=e)}}else{if(ef(e))throw Error(te(418));e.flags=e.flags&-4097|2,mt=!1,Dn=e}}}function sg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dn=e}function Tl(e){if(e!==Dn)return!1;if(!mt)return sg(e),mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qd(e.type,e.memoizedProps)),t&&(t=In)){if(ef(e))throw Gv(),Error(te(418));for(;t;)Wv(e,t),t=vo(t.nextSibling)}if(sg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){In=vo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}In=null}}else In=Dn?vo(e.stateNode.nextSibling):null;return!0}function Gv(){for(var e=In;e;)e=vo(e.nextSibling)}function us(){In=Dn=null,mt=!1}function Th(e){cr===null?cr=[e]:cr.push(e)}var qk=Wr.ReactCurrentBatchConfig;function Ws(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function Cl(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ag(e){var t=e._init;return t(e._payload)}function Hv(e){function t(S,b){if(e){var T=S.deletions;T===null?(S.deletions=[b],S.flags|=16):T.push(b)}}function n(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function r(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function o(S,b){return S=So(S,b),S.index=0,S.sibling=null,S}function i(S,b,T){return S.index=T,e?(T=S.alternate,T!==null?(T=T.index,T<b?(S.flags|=2,b):T):(S.flags|=2,b)):(S.flags|=1048576,b)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function l(S,b,T,A){return b===null||b.tag!==6?(b=td(T,S.mode,A),b.return=S,b):(b=o(b,T),b.return=S,b)}function c(S,b,T,A){var $=T.type;return $===$i?m(S,b,T.props.children,A,T.key):b!==null&&(b.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===so&&ag($)===b.type)?(A=o(b,T.props),A.ref=Ws(S,b,T),A.return=S,A):(A=ql(T.type,T.key,T.props,null,S.mode,A),A.ref=Ws(S,b,T),A.return=S,A)}function u(S,b,T,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=nd(T,S.mode,A),b.return=S,b):(b=o(b,T.children||[]),b.return=S,b)}function m(S,b,T,A,$){return b===null||b.tag!==7?(b=oi(T,S.mode,A,$),b.return=S,b):(b=o(b,T),b.return=S,b)}function h(S,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=td(""+b,S.mode,T),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hl:return T=ql(b.type,b.key,b.props,null,S.mode,T),T.ref=Ws(S,null,b),T.return=S,T;case Li:return b=nd(b,S.mode,T),b.return=S,b;case so:var A=b._init;return h(S,A(b._payload),T)}if(Zs(b)||Vs(b))return b=oi(b,S.mode,T,null),b.return=S,b;Cl(S,b)}return null}function g(S,b,T,A){var $=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return $!==null?null:l(S,b,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case hl:return T.key===$?c(S,b,T,A):null;case Li:return T.key===$?u(S,b,T,A):null;case so:return $=T._init,g(S,b,$(T._payload),A)}if(Zs(T)||Vs(T))return $!==null?null:m(S,b,T,A,null);Cl(S,T)}return null}function E(S,b,T,A,$){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(T)||null,l(b,S,""+A,$);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case hl:return S=S.get(A.key===null?T:A.key)||null,c(b,S,A,$);case Li:return S=S.get(A.key===null?T:A.key)||null,u(b,S,A,$);case so:var Y=A._init;return E(S,b,T,Y(A._payload),$)}if(Zs(A)||Vs(A))return S=S.get(T)||null,m(b,S,A,$,null);Cl(b,A)}return null}function j(S,b,T,A){for(var $=null,Y=null,K=b,_=b=0,ae=null;K!==null&&_<T.length;_++){K.index>_?(ae=K,K=null):ae=K.sibling;var J=g(S,K,T[_],A);if(J===null){K===null&&(K=ae);break}e&&K&&J.alternate===null&&t(S,K),b=i(J,b,_),Y===null?$=J:Y.sibling=J,Y=J,K=ae}if(_===T.length)return n(S,K),mt&&Go(S,_),$;if(K===null){for(;_<T.length;_++)K=h(S,T[_],A),K!==null&&(b=i(K,b,_),Y===null?$=K:Y.sibling=K,Y=K);return mt&&Go(S,_),$}for(K=r(S,K);_<T.length;_++)ae=E(K,S,_,T[_],A),ae!==null&&(e&&ae.alternate!==null&&K.delete(ae.key===null?_:ae.key),b=i(ae,b,_),Y===null?$=ae:Y.sibling=ae,Y=ae);return e&&K.forEach(function(be){return t(S,be)}),mt&&Go(S,_),$}function C(S,b,T,A){var $=Vs(T);if(typeof $!="function")throw Error(te(150));if(T=$.call(T),T==null)throw Error(te(151));for(var Y=$=null,K=b,_=b=0,ae=null,J=T.next();K!==null&&!J.done;_++,J=T.next()){K.index>_?(ae=K,K=null):ae=K.sibling;var be=g(S,K,J.value,A);if(be===null){K===null&&(K=ae);break}e&&K&&be.alternate===null&&t(S,K),b=i(be,b,_),Y===null?$=be:Y.sibling=be,Y=be,K=ae}if(J.done)return n(S,K),mt&&Go(S,_),$;if(K===null){for(;!J.done;_++,J=T.next())J=h(S,J.value,A),J!==null&&(b=i(J,b,_),Y===null?$=J:Y.sibling=J,Y=J);return mt&&Go(S,_),$}for(K=r(S,K);!J.done;_++,J=T.next())J=E(K,S,_,J.value,A),J!==null&&(e&&J.alternate!==null&&K.delete(J.key===null?_:J.key),b=i(J,b,_),Y===null?$=J:Y.sibling=J,Y=J);return e&&K.forEach(function(ne){return t(S,ne)}),mt&&Go(S,_),$}function P(S,b,T,A){if(typeof T=="object"&&T!==null&&T.type===$i&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case hl:e:{for(var $=T.key,Y=b;Y!==null;){if(Y.key===$){if($=T.type,$===$i){if(Y.tag===7){n(S,Y.sibling),b=o(Y,T.props.children),b.return=S,S=b;break e}}else if(Y.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===so&&ag($)===Y.type){n(S,Y.sibling),b=o(Y,T.props),b.ref=Ws(S,Y,T),b.return=S,S=b;break e}n(S,Y);break}else t(S,Y);Y=Y.sibling}T.type===$i?(b=oi(T.props.children,S.mode,A,T.key),b.return=S,S=b):(A=ql(T.type,T.key,T.props,null,S.mode,A),A.ref=Ws(S,b,T),A.return=S,S=A)}return s(S);case Li:e:{for(Y=T.key;b!==null;){if(b.key===Y)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(S,b.sibling),b=o(b,T.children||[]),b.return=S,S=b;break e}else{n(S,b);break}else t(S,b);b=b.sibling}b=nd(T,S.mode,A),b.return=S,S=b}return s(S);case so:return Y=T._init,P(S,b,Y(T._payload),A)}if(Zs(T))return j(S,b,T,A);if(Vs(T))return C(S,b,T,A);Cl(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(n(S,b.sibling),b=o(b,T),b.return=S,S=b):(n(S,b),b=td(T,S.mode,A),b.return=S,S=b),s(S)):n(S,b)}return P}var ds=Hv(!0),Kv=Hv(!1),yc=Ao(null),vc=null,Wi=null,Ch=null;function kh(){Ch=Wi=vc=null}function Eh(e){var t=yc.current;dt(yc),e._currentValue=t}function nf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rs(e,t){vc=e,Ch=Wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sn=!0),e.firstContext=null)}function Hn(e){var t=e._currentValue;if(Ch!==e)if(e={context:e,memoizedValue:t,next:null},Wi===null){if(vc===null)throw Error(te(308));Wi=e,vc.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var qo=null;function Nh(e){qo===null?qo=[e]:qo.push(e)}function Yv(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Nh(t)):(n.next=o.next,o.next=n),t.interleaved=n,_r(e,r)}function _r(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ao=!1;function Ph(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,_r(e,n)}return o=r.interleaved,o===null?(t.next=t,Nh(r)):(t.next=o.next,o.next=t),r.interleaved=t,_r(e,n)}function Wl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hh(e,n)}}function lg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xc(e,t,n,r){var o=e.updateQueue;ao=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==s&&(l===null?m.firstBaseUpdate=u:l.next=u,m.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;s=0,m=u=c=null,l=i;do{var g=l.lane,E=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,C=l;switch(g=t,E=n,C.tag){case 1:if(j=C.payload,typeof j=="function"){h=j.call(E,h,g);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=C.payload,g=typeof j=="function"?j.call(E,h,g):j,g==null)break e;h=St({},h,g);break e;case 2:ao=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=o.effects,g===null?o.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(u=m=E,c=h):m=m.next=E,s|=g;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;g=l,l=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(1);if(m===null&&(c=h),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);di|=s,e.lanes=s,e.memoizedState=h}}function cg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(te(191,o));o.call(r)}}}var qa={},Er=Ao(qa),Na=Ao(qa),Pa=Ao(qa);function Qo(e){if(e===qa)throw Error(te(174));return e}function jh(e,t){switch(it(Pa,t),it(Na,e),it(Er,qa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$d(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$d(t,e)}dt(Er),it(Er,t)}function fs(){dt(Er),dt(Na),dt(Pa)}function qv(e){Qo(Pa.current);var t=Qo(Er.current),n=$d(t,e.type);t!==n&&(it(Na,e),it(Er,n))}function Ah(e){Na.current===e&&(dt(Er),dt(Na))}var vt=Ao(0);function wc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xu=[];function Rh(){for(var e=0;e<Xu.length;e++)Xu[e]._workInProgressVersionPrimary=null;Xu.length=0}var Gl=Wr.ReactCurrentDispatcher,qu=Wr.ReactCurrentBatchConfig,ui=0,bt=null,Vt=null,Gt=null,bc=!1,aa=!1,ja=0,Qk=0;function tn(){throw Error(te(321))}function Ih(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fr(e[n],t[n]))return!1;return!0}function Dh(e,t,n,r,o,i){if(ui=i,bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gl.current=e===null||e.memoizedState===null?tE:nE,e=n(r,o),aa){i=0;do{if(aa=!1,ja=0,25<=i)throw Error(te(301));i+=1,Gt=Vt=null,t.updateQueue=null,Gl.current=rE,e=n(r,o)}while(aa)}if(Gl.current=Sc,t=Vt!==null&&Vt.next!==null,ui=0,Gt=Vt=bt=null,bc=!1,t)throw Error(te(300));return e}function Mh(){var e=ja!==0;return ja=0,e}function Sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?bt.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function Kn(){if(Vt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Gt===null?bt.memoizedState:Gt.next;if(t!==null)Gt=t,Vt=e;else{if(e===null)throw Error(te(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Gt===null?bt.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function Aa(e,t){return typeof t=="function"?t(e):t}function Qu(e){var t=Kn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=Vt,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,c=null,u=i;do{var m=u.lane;if((ui&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,s=r):c=c.next=h,bt.lanes|=m,di|=m}u=u.next}while(u!==null&&u!==i);c===null?s=r:c.next=l,fr(r,t.memoizedState)||(Sn=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,bt.lanes|=i,di|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zu(e){var t=Kn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);fr(i,t.memoizedState)||(Sn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Qv(){}function Zv(e,t){var n=bt,r=Kn(),o=t(),i=!fr(r.memoizedState,o);if(i&&(r.memoizedState=o,Sn=!0),r=r.queue,Lh(tx.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,Ra(9,ex.bind(null,n,r,o,t),void 0,null),Ht===null)throw Error(te(349));ui&30||Jv(n,t,o)}return o}function Jv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=bt.updateQueue,t===null?(t={lastEffect:null,stores:null},bt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ex(e,t,n,r){t.value=n,t.getSnapshot=r,nx(t)&&rx(e)}function tx(e,t,n){return n(function(){nx(t)&&rx(e)})}function nx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fr(e,n)}catch{return!0}}function rx(e){var t=_r(e,1);t!==null&&dr(t,e,1,-1)}function ug(e){var t=Sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t.queue=e,e=e.dispatch=eE.bind(null,bt,e),[t.memoizedState,e]}function Ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=bt.updateQueue,t===null?(t={lastEffect:null,stores:null},bt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ox(){return Kn().memoizedState}function Hl(e,t,n,r){var o=Sr();bt.flags|=e,o.memoizedState=Ra(1|t,n,void 0,r===void 0?null:r)}function Wc(e,t,n,r){var o=Kn();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var s=Vt.memoizedState;if(i=s.destroy,r!==null&&Ih(r,s.deps)){o.memoizedState=Ra(t,n,i,r);return}}bt.flags|=e,o.memoizedState=Ra(1|t,n,i,r)}function dg(e,t){return Hl(8390656,8,e,t)}function Lh(e,t){return Wc(2048,8,e,t)}function ix(e,t){return Wc(4,2,e,t)}function sx(e,t){return Wc(4,4,e,t)}function ax(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lx(e,t,n){return n=n!=null?n.concat([e]):null,Wc(4,4,ax.bind(null,t,e),n)}function $h(){}function cx(e,t){var n=Kn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ih(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ux(e,t){var n=Kn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ih(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dx(e,t,n){return ui&21?(fr(n,t)||(n=gv(),bt.lanes|=n,di|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Sn=!0),e.memoizedState=n)}function Zk(e,t){var n=Ke;Ke=n!==0&&4>n?n:4,e(!0);var r=qu.transition;qu.transition={};try{e(!1),t()}finally{Ke=n,qu.transition=r}}function fx(){return Kn().memoizedState}function Jk(e,t,n){var r=bo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hx(e))mx(t,n);else if(n=Yv(e,t,n,r),n!==null){var o=yn();dr(n,e,r,o),px(n,t,r)}}function eE(e,t,n){var r=bo(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hx(e))mx(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,fr(l,s)){var c=t.interleaved;c===null?(o.next=o,Nh(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=Yv(e,t,o,r),n!==null&&(o=yn(),dr(n,e,r,o),px(n,t,r))}}function hx(e){var t=e.alternate;return e===bt||t!==null&&t===bt}function mx(e,t){aa=bc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function px(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hh(e,n)}}var Sc={readContext:Hn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},tE={readContext:Hn,useCallback:function(e,t){return Sr().memoizedState=[e,t===void 0?null:t],e},useContext:Hn,useEffect:dg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4194308,4,ax.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hl(4,2,e,t)},useMemo:function(e,t){var n=Sr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jk.bind(null,bt,e),[r.memoizedState,e]},useRef:function(e){var t=Sr();return e={current:e},t.memoizedState=e},useState:ug,useDebugValue:$h,useDeferredValue:function(e){return Sr().memoizedState=e},useTransition:function(){var e=ug(!1),t=e[0];return e=Zk.bind(null,e[1]),Sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=bt,o=Sr();if(mt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Ht===null)throw Error(te(349));ui&30||Jv(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,dg(tx.bind(null,r,i,e),[e]),r.flags|=2048,Ra(9,ex.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Sr(),t=Ht.identifierPrefix;if(mt){var n=$r,r=Lr;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ja++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Qk++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nE={readContext:Hn,useCallback:cx,useContext:Hn,useEffect:Lh,useImperativeHandle:lx,useInsertionEffect:ix,useLayoutEffect:sx,useMemo:ux,useReducer:Qu,useRef:ox,useState:function(){return Qu(Aa)},useDebugValue:$h,useDeferredValue:function(e){var t=Kn();return dx(t,Vt.memoizedState,e)},useTransition:function(){var e=Qu(Aa)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:Qv,useSyncExternalStore:Zv,useId:fx,unstable_isNewReconciler:!1},rE={readContext:Hn,useCallback:cx,useContext:Hn,useEffect:Lh,useImperativeHandle:lx,useInsertionEffect:ix,useLayoutEffect:sx,useMemo:ux,useReducer:Zu,useRef:ox,useState:function(){return Zu(Aa)},useDebugValue:$h,useDeferredValue:function(e){var t=Kn();return Vt===null?t.memoizedState=e:dx(t,Vt.memoizedState,e)},useTransition:function(){var e=Zu(Aa)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:Qv,useSyncExternalStore:Zv,useId:fx,unstable_isNewReconciler:!1};function sr(e,t){if(e&&e.defaultProps){t=St({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:St({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gc={isMounted:function(e){return(e=e._reactInternals)?gi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yn(),o=bo(e),i=Fr(r,o);i.payload=t,n!=null&&(i.callback=n),t=xo(e,i,o),t!==null&&(dr(t,e,o,r),Wl(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yn(),o=bo(e),i=Fr(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=xo(e,i,o),t!==null&&(dr(t,e,o,r),Wl(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yn(),r=bo(e),o=Fr(n,r);o.tag=2,t!=null&&(o.callback=t),t=xo(e,o,r),t!==null&&(dr(t,e,r,n),Wl(t,e,r))}};function fg(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Ta(n,r)||!Ta(o,i):!0}function gx(e,t,n){var r=!1,o=Eo,i=t.contextType;return typeof i=="object"&&i!==null?i=Hn(i):(o=kn(t)?li:an.current,r=t.contextTypes,i=(r=r!=null)?cs(e,o):Eo),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function hg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Gc.enqueueReplaceState(t,t.state,null)}function of(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ph(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Hn(i):(i=kn(t)?li:an.current,o.context=cs(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(rf(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Gc.enqueueReplaceState(o,o.state,null),xc(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function hs(e,t){try{var n="",r=t;do n+=RC(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Ju(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function sf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oE=typeof WeakMap=="function"?WeakMap:Map;function yx(e,t,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cc||(Cc=!0,gf=r),sf(e,t)},n}function vx(e,t,n){n=Fr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){sf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sf(e,t),typeof r!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function mg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oE;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=vE.bind(null,e,t,n),t.then(e,e))}function pg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gg(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fr(-1,1),t.tag=2,xo(n,t,1))),n.lanes|=1),e)}var iE=Wr.ReactCurrentOwner,Sn=!1;function mn(e,t,n,r){t.child=e===null?Kv(t,null,n,r):ds(t,e.child,n,r)}function yg(e,t,n,r,o){n=n.render;var i=t.ref;return rs(t,o),r=Dh(e,t,n,r,i,o),n=Mh(),e!==null&&!Sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ur(e,t,o)):(mt&&n&&bh(t),t.flags|=1,mn(e,t,r,o),t.child)}function vg(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Wh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,xx(e,t,i,r,o)):(e=ql(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(s,r)&&e.ref===t.ref)return Ur(e,t,o)}return t.flags|=1,e=So(i,r),e.ref=t.ref,e.return=t,t.child=e}function xx(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(Ta(i,r)&&e.ref===t.ref)if(Sn=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Sn=!0);else return t.lanes=e.lanes,Ur(e,t,o)}return af(e,t,n,r,o)}function wx(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Hi,Rn),Rn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,it(Hi,Rn),Rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,it(Hi,Rn),Rn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,it(Hi,Rn),Rn|=r;return mn(e,t,o,n),t.child}function bx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function af(e,t,n,r,o){var i=kn(n)?li:an.current;return i=cs(t,i),rs(t,o),n=Dh(e,t,n,r,i,o),r=Mh(),e!==null&&!Sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ur(e,t,o)):(mt&&r&&bh(t),t.flags|=1,mn(e,t,n,o),t.child)}function xg(e,t,n,r,o){if(kn(n)){var i=!0;mc(t)}else i=!1;if(rs(t,o),t.stateNode===null)Kl(e,t),gx(t,n,r),of(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Hn(u):(u=kn(n)?li:an.current,u=cs(t,u));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||c!==u)&&hg(t,s,r,u),ao=!1;var g=t.memoizedState;s.state=g,xc(t,r,s,o),c=t.memoizedState,l!==r||g!==c||Cn.current||ao?(typeof m=="function"&&(rf(t,n,m,r),c=t.memoizedState),(l=ao||fg(t,n,l,r,g,c,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Xv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:sr(t.type,l),s.props=u,h=t.pendingProps,g=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Hn(c):(c=kn(n)?li:an.current,c=cs(t,c));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||g!==c)&&hg(t,s,r,c),ao=!1,g=t.memoizedState,s.state=g,xc(t,r,s,o);var j=t.memoizedState;l!==h||g!==j||Cn.current||ao?(typeof E=="function"&&(rf(t,n,E,r),j=t.memoizedState),(u=ao||fg(t,n,u,r,g,j,c)||!1)?(m||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,j,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,j,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),s.props=r,s.state=j,s.context=c,r=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return lf(e,t,n,r,i,o)}function lf(e,t,n,r,o,i){bx(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&og(t,n,!1),Ur(e,t,i);r=t.stateNode,iE.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=ds(t,e.child,null,i),t.child=ds(t,null,l,i)):mn(e,t,l,i),t.memoizedState=r.state,o&&og(t,n,!0),t.child}function Sx(e){var t=e.stateNode;t.pendingContext?rg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rg(e,t.context,!1),jh(e,t.containerInfo)}function wg(e,t,n,r,o){return us(),Th(o),t.flags|=256,mn(e,t,n,r),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function uf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tx(e,t,n){var r=t.pendingProps,o=vt.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),it(vt,o&1),e===null)return tf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Yc(s,r,0,null),e=oi(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=uf(n),t.memoizedState=cf,e):Fh(t,s));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return sE(e,t,s,r,l,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=So(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=So(l,i):(i=oi(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?uf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=cf,r}return i=e.child,e=i.sibling,r=So(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fh(e,t){return t=Yc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kl(e,t,n,r){return r!==null&&Th(r),ds(t,e.child,null,n),e=Fh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sE(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Ju(Error(te(422))),kl(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Yc({mode:"visible",children:r.children},o,0,null),i=oi(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ds(t,e.child,null,s),t.child.memoizedState=uf(s),t.memoizedState=cf,i);if(!(t.mode&1))return kl(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(te(419)),r=Ju(i,r,void 0),kl(e,t,s,r)}if(l=(s&e.childLanes)!==0,Sn||l){if(r=Ht,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,_r(e,o),dr(r,e,o,-1))}return Bh(),r=Ju(Error(te(421))),kl(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=xE.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,In=vo(o.nextSibling),Dn=t,mt=!0,cr=null,e!==null&&(Un[zn++]=Lr,Un[zn++]=$r,Un[zn++]=ci,Lr=e.id,$r=e.overflow,ci=t),t=Fh(t,r.children),t.flags|=4096,t)}function bg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nf(e.return,t,n)}function ed(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Cx(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(mn(e,t,r.children,n),r=vt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bg(e,n,t);else if(e.tag===19)bg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(it(vt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&wc(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ed(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&wc(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ed(t,!0,n,null,i);break;case"together":ed(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ur(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),di|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=So(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=So(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function aE(e,t,n){switch(t.tag){case 3:Sx(t),us();break;case 5:qv(t);break;case 1:kn(t.type)&&mc(t);break;case 4:jh(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;it(yc,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(it(vt,vt.current&1),t.flags|=128,null):n&t.child.childLanes?Tx(e,t,n):(it(vt,vt.current&1),e=Ur(e,t,n),e!==null?e.sibling:null);it(vt,vt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Cx(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),it(vt,vt.current),r)break;return null;case 22:case 23:return t.lanes=0,wx(e,t,n)}return Ur(e,t,n)}var kx,df,Ex,Nx;kx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};Ex=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qo(Er.current);var i=null;switch(n){case"input":o=Id(e,o),r=Id(e,r),i=[];break;case"select":o=St({},o,{value:void 0}),r=St({},r,{value:void 0}),i=[];break;case"textarea":o=Ld(e,o),r=Ld(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=fc)}Fd(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ga.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ga.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ct("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Nx=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gs(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lE(e,t,n){var r=t.pendingProps;switch(Sh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(t),null;case 1:return kn(t.type)&&hc(),nn(t),null;case 3:return r=t.stateNode,fs(),dt(Cn),dt(an),Rh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cr!==null&&(xf(cr),cr=null))),df(e,t),nn(t),null;case 5:Ah(t);var o=Qo(Pa.current);if(n=t.type,e!==null&&t.stateNode!=null)Ex(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return nn(t),null}if(e=Qo(Er.current),Tl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Tr]=t,r[Ea]=i,e=(t.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(o=0;o<ea.length;o++)ct(ea[o],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":Ap(r,i),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ct("invalid",r);break;case"textarea":Ip(r,i),ct("invalid",r)}Fd(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Sl(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Sl(r.textContent,l,e),o=["children",""+l]):ga.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ct("scroll",r)}switch(n){case"input":ml(r),Rp(r,i,!0);break;case"textarea":ml(r),Dp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fc)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Tr]=t,e[Ea]=r,kx(e,t,!1,!1),t.stateNode=e;e:{switch(s=Od(n,r),n){case"dialog":ct("cancel",e),ct("close",e),o=r;break;case"iframe":case"object":case"embed":ct("load",e),o=r;break;case"video":case"audio":for(o=0;o<ea.length;o++)ct(ea[o],e);o=r;break;case"source":ct("error",e),o=r;break;case"img":case"image":case"link":ct("error",e),ct("load",e),o=r;break;case"details":ct("toggle",e),o=r;break;case"input":Ap(e,r),o=Id(e,r),ct("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=St({},r,{value:void 0}),ct("invalid",e);break;case"textarea":Ip(e,r),o=Ld(e,r),ct("invalid",e);break;default:o=r}Fd(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ov(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nv(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ya(e,c):typeof c=="number"&&ya(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ga.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ct("scroll",e):c!=null&&ah(e,i,c,s))}switch(n){case"input":ml(e),Rp(e,r,!1);break;case"textarea":ml(e),Dp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ko(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ji(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ji(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=fc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nn(t),null;case 6:if(e&&t.stateNode!=null)Nx(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=Qo(Pa.current),Qo(Er.current),Tl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Tr]=t,(i=r.nodeValue!==n)&&(e=Dn,e!==null))switch(e.tag){case 3:Sl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tr]=t,t.stateNode=r}return nn(t),null;case 13:if(dt(vt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mt&&In!==null&&t.mode&1&&!(t.flags&128))Gv(),us(),t.flags|=98560,i=!1;else if(i=Tl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(te(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Tr]=t}else us(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nn(t),i=!1}else cr!==null&&(xf(cr),cr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vt.current&1?_t===0&&(_t=3):Bh())),t.updateQueue!==null&&(t.flags|=4),nn(t),null);case 4:return fs(),df(e,t),e===null&&Ca(t.stateNode.containerInfo),nn(t),null;case 10:return Eh(t.type._context),nn(t),null;case 17:return kn(t.type)&&hc(),nn(t),null;case 19:if(dt(vt),i=t.memoizedState,i===null)return nn(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Gs(i,!1);else{if(_t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=wc(e),s!==null){for(t.flags|=128,Gs(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return it(vt,vt.current&1|2),t.child}e=e.sibling}i.tail!==null&&At()>ms&&(t.flags|=128,r=!0,Gs(i,!1),t.lanes=4194304)}else{if(!r)if(e=wc(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!mt)return nn(t),null}else 2*At()-i.renderingStartTime>ms&&n!==1073741824&&(t.flags|=128,r=!0,Gs(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=At(),t.sibling=null,n=vt.current,it(vt,r?n&1|2:n&1),t):(nn(t),null);case 22:case 23:return zh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rn&1073741824&&(nn(t),t.subtreeFlags&6&&(t.flags|=8192)):nn(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function cE(e,t){switch(Sh(t),t.tag){case 1:return kn(t.type)&&hc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(),dt(Cn),dt(an),Rh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ah(t),null;case 13:if(dt(vt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dt(vt),null;case 4:return fs(),null;case 10:return Eh(t.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var El=!1,on=!1,uE=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Gi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pt(e,t,r)}else n.current=null}function ff(e,t,n){try{n()}catch(r){Pt(e,t,r)}}var Sg=!1;function dE(e,t){if(Yd=cc,e=Iv(),wh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,c=-1,u=0,m=0,h=e,g=null;t:for(;;){for(var E;h!==n||o!==0&&h.nodeType!==3||(l=s+o),h!==i||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(E=h.firstChild)!==null;)g=h,h=E;for(;;){if(h===e)break t;if(g===n&&++u===o&&(l=s),g===i&&++m===r&&(c=s),(E=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=E}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xd={focusedElem:e,selectionRange:n},cc=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var C=j.memoizedProps,P=j.memoizedState,S=t.stateNode,b=S.getSnapshotBeforeUpdate(t.elementType===t.type?C:sr(t.type,C),P);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(A){Pt(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return j=Sg,Sg=!1,j}function la(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&ff(t,n,i)}o=o.next}while(o!==r)}}function Hc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Px(e){var t=e.alternate;t!==null&&(e.alternate=null,Px(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tr],delete t[Ea],delete t[Zd],delete t[Kk],delete t[Yk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jx(e){return e.tag===5||e.tag===3||e.tag===4}function Tg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fc));else if(r!==4&&(e=e.child,e!==null))for(mf(e,t,n),e=e.sibling;e!==null;)mf(e,t,n),e=e.sibling}function pf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pf(e,t,n),e=e.sibling;e!==null;)pf(e,t,n),e=e.sibling}var Yt=null,lr=!1;function to(e,t,n){for(n=n.child;n!==null;)Ax(e,t,n),n=n.sibling}function Ax(e,t,n){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Oc,n)}catch{}switch(n.tag){case 5:on||Gi(n,t);case 6:var r=Yt,o=lr;Yt=null,to(e,t,n),Yt=r,lr=o,Yt!==null&&(lr?(e=Yt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(lr?(e=Yt,n=n.stateNode,e.nodeType===8?Ku(e.parentNode,n):e.nodeType===1&&Ku(e,n),ba(e)):Ku(Yt,n.stateNode));break;case 4:r=Yt,o=lr,Yt=n.stateNode.containerInfo,lr=!0,to(e,t,n),Yt=r,lr=o;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&ff(n,t,s),o=o.next}while(o!==r)}to(e,t,n);break;case 1:if(!on&&(Gi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pt(n,t,l)}to(e,t,n);break;case 21:to(e,t,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,to(e,t,n),on=r):to(e,t,n);break;default:to(e,t,n)}}function Cg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new uE),t.forEach(function(r){var o=wE.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function tr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Yt=l.stateNode,lr=!1;break e;case 3:Yt=l.stateNode.containerInfo,lr=!0;break e;case 4:Yt=l.stateNode.containerInfo,lr=!0;break e}l=l.return}if(Yt===null)throw Error(te(160));Ax(i,s,o),Yt=null,lr=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){Pt(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rx(t,e),t=t.sibling}function Rx(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tr(t,e),wr(e),r&4){try{la(3,e,e.return),Hc(3,e)}catch(C){Pt(e,e.return,C)}try{la(5,e,e.return)}catch(C){Pt(e,e.return,C)}}break;case 1:tr(t,e),wr(e),r&512&&n!==null&&Gi(n,n.return);break;case 5:if(tr(t,e),wr(e),r&512&&n!==null&&Gi(n,n.return),e.flags&32){var o=e.stateNode;try{ya(o,"")}catch(C){Pt(e,e.return,C)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&J0(o,i),Od(l,s);var u=Od(l,i);for(s=0;s<c.length;s+=2){var m=c[s],h=c[s+1];m==="style"?ov(o,h):m==="dangerouslySetInnerHTML"?nv(o,h):m==="children"?ya(o,h):ah(o,m,h,u)}switch(l){case"input":Dd(o,i);break;case"textarea":ev(o,i);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Ji(o,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ji(o,!!i.multiple,i.defaultValue,!0):Ji(o,!!i.multiple,i.multiple?[]:"",!1))}o[Ea]=i}catch(C){Pt(e,e.return,C)}}break;case 6:if(tr(t,e),wr(e),r&4){if(e.stateNode===null)throw Error(te(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(C){Pt(e,e.return,C)}}break;case 3:if(tr(t,e),wr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ba(t.containerInfo)}catch(C){Pt(e,e.return,C)}break;case 4:tr(t,e),wr(e);break;case 13:tr(t,e),wr(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(_h=At())),r&4&&Cg(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(on=(u=on)||m,tr(t,e),on=u):tr(t,e),wr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(ye=e,m=e.child;m!==null;){for(h=ye=m;ye!==null;){switch(g=ye,E=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:Gi(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(C){Pt(r,n,C)}}break;case 5:Gi(g,g.return);break;case 22:if(g.memoizedState!==null){Eg(h);continue}}E!==null?(E.return=g,ye=E):Eg(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{o=h.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rv("display",s))}catch(C){Pt(e,e.return,C)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(C){Pt(e,e.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tr(t,e),wr(e),r&4&&Cg(e);break;case 21:break;default:tr(t,e),wr(e)}}function wr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jx(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ya(o,""),r.flags&=-33);var i=Tg(e);pf(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Tg(e);mf(e,l,s);break;default:throw Error(te(161))}}catch(c){Pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fE(e,t,n){ye=e,Ix(e)}function Ix(e,t,n){for(var r=(e.mode&1)!==0;ye!==null;){var o=ye,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||El;if(!s){var l=o.alternate,c=l!==null&&l.memoizedState!==null||on;l=El;var u=on;if(El=s,(on=c)&&!u)for(ye=o;ye!==null;)s=ye,c=s.child,s.tag===22&&s.memoizedState!==null?Ng(o):c!==null?(c.return=s,ye=c):Ng(o);for(;i!==null;)ye=i,Ix(i),i=i.sibling;ye=o,El=l,on=u}kg(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ye=i):kg(e)}}function kg(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:on||Hc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!on)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:sr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cg(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cg(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&ba(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}on||t.flags&512&&hf(t)}catch(g){Pt(t,t.return,g)}}if(t===e){ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,ye=n;break}ye=t.return}}function Eg(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ye=n;break}ye=t.return}}function Ng(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hc(4,t)}catch(c){Pt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Pt(t,o,c)}}var i=t.return;try{hf(t)}catch(c){Pt(t,i,c)}break;case 5:var s=t.return;try{hf(t)}catch(c){Pt(t,s,c)}}}catch(c){Pt(t,t.return,c)}if(t===e){ye=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ye=l;break}ye=t.return}}var hE=Math.ceil,Tc=Wr.ReactCurrentDispatcher,Oh=Wr.ReactCurrentOwner,Wn=Wr.ReactCurrentBatchConfig,We=0,Ht=null,Ft=null,qt=0,Rn=0,Hi=Ao(0),_t=0,Ia=null,di=0,Kc=0,Vh=0,ca=null,bn=null,_h=0,ms=1/0,Ir=null,Cc=!1,gf=null,wo=null,Nl=!1,fo=null,kc=0,ua=0,yf=null,Yl=-1,Xl=0;function yn(){return We&6?At():Yl!==-1?Yl:Yl=At()}function bo(e){return e.mode&1?We&2&&qt!==0?qt&-qt:qk.transition!==null?(Xl===0&&(Xl=gv()),Xl):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:Tv(e.type)),e):1}function dr(e,t,n,r){if(50<ua)throw ua=0,yf=null,Error(te(185));Ka(e,n,r),(!(We&2)||e!==Ht)&&(e===Ht&&(!(We&2)&&(Kc|=n),_t===4&&co(e,qt)),En(e,r),n===1&&We===0&&!(t.mode&1)&&(ms=At()+500,Bc&&Ro()))}function En(e,t){var n=e.callbackNode;qC(e,t);var r=lc(e,e===Ht?qt:0);if(r===0)n!==null&&$p(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$p(n),t===1)e.tag===0?Xk(Pg.bind(null,e)):zv(Pg.bind(null,e)),Gk(function(){!(We&6)&&Ro()}),n=null;else{switch(yv(r)){case 1:n=fh;break;case 4:n=mv;break;case 16:n=ac;break;case 536870912:n=pv;break;default:n=ac}n=_x(n,Dx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Dx(e,t){if(Yl=-1,Xl=0,We&6)throw Error(te(327));var n=e.callbackNode;if(os()&&e.callbackNode!==n)return null;var r=lc(e,e===Ht?qt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ec(e,r);else{t=r;var o=We;We|=2;var i=Lx();(Ht!==e||qt!==t)&&(Ir=null,ms=At()+500,ri(e,t));do try{gE();break}catch(l){Mx(e,l)}while(1);kh(),Tc.current=i,We=o,Ft!==null?t=0:(Ht=null,qt=0,t=_t)}if(t!==0){if(t===2&&(o=Bd(e),o!==0&&(r=o,t=vf(e,o))),t===1)throw n=Ia,ri(e,0),co(e,r),En(e,At()),n;if(t===6)co(e,r);else{if(o=e.current.alternate,!(r&30)&&!mE(o)&&(t=Ec(e,r),t===2&&(i=Bd(e),i!==0&&(r=i,t=vf(e,i))),t===1))throw n=Ia,ri(e,0),co(e,r),En(e,At()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:Ho(e,bn,Ir);break;case 3:if(co(e,r),(r&130023424)===r&&(t=_h+500-At(),10<t)){if(lc(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){yn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Qd(Ho.bind(null,e,bn,Ir),t);break}Ho(e,bn,Ir);break;case 4:if(co(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-ur(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hE(r/1960))-r,10<r){e.timeoutHandle=Qd(Ho.bind(null,e,bn,Ir),r);break}Ho(e,bn,Ir);break;case 5:Ho(e,bn,Ir);break;default:throw Error(te(329))}}}return En(e,At()),e.callbackNode===n?Dx.bind(null,e):null}function vf(e,t){var n=ca;return e.current.memoizedState.isDehydrated&&(ri(e,t).flags|=256),e=Ec(e,t),e!==2&&(t=bn,bn=n,t!==null&&xf(t)),e}function xf(e){bn===null?bn=e:bn.push.apply(bn,e)}function mE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!fr(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function co(e,t){for(t&=~Vh,t&=~Kc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ur(t),r=1<<n;e[n]=-1,t&=~r}}function Pg(e){if(We&6)throw Error(te(327));os();var t=lc(e,0);if(!(t&1))return En(e,At()),null;var n=Ec(e,t);if(e.tag!==0&&n===2){var r=Bd(e);r!==0&&(t=r,n=vf(e,r))}if(n===1)throw n=Ia,ri(e,0),co(e,t),En(e,At()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ho(e,bn,Ir),En(e,At()),null}function Uh(e,t){var n=We;We|=1;try{return e(t)}finally{We=n,We===0&&(ms=At()+500,Bc&&Ro())}}function fi(e){fo!==null&&fo.tag===0&&!(We&6)&&os();var t=We;We|=1;var n=Wn.transition,r=Ke;try{if(Wn.transition=null,Ke=1,e)return e()}finally{Ke=r,Wn.transition=n,We=t,!(We&6)&&Ro()}}function zh(){Rn=Hi.current,dt(Hi)}function ri(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wk(n)),Ft!==null)for(n=Ft.return;n!==null;){var r=n;switch(Sh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hc();break;case 3:fs(),dt(Cn),dt(an),Rh();break;case 5:Ah(r);break;case 4:fs();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:Eh(r.type._context);break;case 22:case 23:zh()}n=n.return}if(Ht=e,Ft=e=So(e.current,null),qt=Rn=t,_t=0,Ia=null,Vh=Kc=di=0,bn=ca=null,qo!==null){for(t=0;t<qo.length;t++)if(n=qo[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}qo=null}return e}function Mx(e,t){do{var n=Ft;try{if(kh(),Gl.current=Sc,bc){for(var r=bt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}bc=!1}if(ui=0,Gt=Vt=bt=null,aa=!1,ja=0,Oh.current=null,n===null||n.return===null){_t=1,Ia=t,Ft=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=qt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=pg(s);if(E!==null){E.flags&=-257,gg(E,s,l,i,t),E.mode&1&&mg(i,u,t),t=E,c=u;var j=t.updateQueue;if(j===null){var C=new Set;C.add(c),t.updateQueue=C}else j.add(c);break e}else{if(!(t&1)){mg(i,u,t),Bh();break e}c=Error(te(426))}}else if(mt&&l.mode&1){var P=pg(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),gg(P,s,l,i,t),Th(hs(c,l));break e}}i=c=hs(c,l),_t!==4&&(_t=2),ca===null?ca=[i]:ca.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var S=yx(i,c,t);lg(i,S);break e;case 1:l=c;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(wo===null||!wo.has(T)))){i.flags|=65536,t&=-t,i.lanes|=t;var A=vx(i,l,t);lg(i,A);break e}}i=i.return}while(i!==null)}Fx(n)}catch($){t=$,Ft===n&&n!==null&&(Ft=n=n.return);continue}break}while(1)}function Lx(){var e=Tc.current;return Tc.current=Sc,e===null?Sc:e}function Bh(){(_t===0||_t===3||_t===2)&&(_t=4),Ht===null||!(di&268435455)&&!(Kc&268435455)||co(Ht,qt)}function Ec(e,t){var n=We;We|=2;var r=Lx();(Ht!==e||qt!==t)&&(Ir=null,ri(e,t));do try{pE();break}catch(o){Mx(e,o)}while(1);if(kh(),We=n,Tc.current=r,Ft!==null)throw Error(te(261));return Ht=null,qt=0,_t}function pE(){for(;Ft!==null;)$x(Ft)}function gE(){for(;Ft!==null&&!UC();)$x(Ft)}function $x(e){var t=Vx(e.alternate,e,Rn);e.memoizedProps=e.pendingProps,t===null?Fx(e):Ft=t,Oh.current=null}function Fx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cE(n,t),n!==null){n.flags&=32767,Ft=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_t=6,Ft=null;return}}else if(n=lE(n,t,Rn),n!==null){Ft=n;return}if(t=t.sibling,t!==null){Ft=t;return}Ft=t=e}while(t!==null);_t===0&&(_t=5)}function Ho(e,t,n){var r=Ke,o=Wn.transition;try{Wn.transition=null,Ke=1,yE(e,t,n,r)}finally{Wn.transition=o,Ke=r}return null}function yE(e,t,n,r){do os();while(fo!==null);if(We&6)throw Error(te(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(QC(e,i),e===Ht&&(Ft=Ht=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nl||(Nl=!0,_x(ac,function(){return os(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wn.transition,Wn.transition=null;var s=Ke;Ke=1;var l=We;We|=4,Oh.current=null,dE(e,n),Rx(n,e),Fk(Xd),cc=!!Yd,Xd=Yd=null,e.current=n,fE(n),zC(),We=l,Ke=s,Wn.transition=i}else e.current=n;if(Nl&&(Nl=!1,fo=e,kc=o),i=e.pendingLanes,i===0&&(wo=null),GC(n.stateNode),En(e,At()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Cc)throw Cc=!1,e=gf,gf=null,e;return kc&1&&e.tag!==0&&os(),i=e.pendingLanes,i&1?e===yf?ua++:(ua=0,yf=e):ua=0,Ro(),null}function os(){if(fo!==null){var e=yv(kc),t=Wn.transition,n=Ke;try{if(Wn.transition=null,Ke=16>e?16:e,fo===null)var r=!1;else{if(e=fo,fo=null,kc=0,We&6)throw Error(te(331));var o=We;for(We|=4,ye=e.current;ye!==null;){var i=ye,s=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ye=u;ye!==null;){var m=ye;switch(m.tag){case 0:case 11:case 15:la(8,m,i)}var h=m.child;if(h!==null)h.return=m,ye=h;else for(;ye!==null;){m=ye;var g=m.sibling,E=m.return;if(Px(m),m===u){ye=null;break}if(g!==null){g.return=E,ye=g;break}ye=E}}}var j=i.alternate;if(j!==null){var C=j.child;if(C!==null){j.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}ye=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ye=s;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,ye=S;break e}ye=i.return}}var b=e.current;for(ye=b;ye!==null;){s=ye;var T=s.child;if(s.subtreeFlags&2064&&T!==null)T.return=s,ye=T;else e:for(s=b;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Hc(9,l)}}catch($){Pt(l,l.return,$)}if(l===s){ye=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,ye=A;break e}ye=l.return}}if(We=o,Ro(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Oc,e)}catch{}r=!0}return r}finally{Ke=n,Wn.transition=t}}return!1}function jg(e,t,n){t=hs(n,t),t=yx(e,t,1),e=xo(e,t,1),t=yn(),e!==null&&(Ka(e,1,t),En(e,t))}function Pt(e,t,n){if(e.tag===3)jg(e,e,n);else for(;t!==null;){if(t.tag===3){jg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wo===null||!wo.has(r))){e=hs(n,e),e=vx(t,e,1),t=xo(t,e,1),e=yn(),t!==null&&(Ka(t,1,e),En(t,e));break}}t=t.return}}function vE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yn(),e.pingedLanes|=e.suspendedLanes&n,Ht===e&&(qt&n)===n&&(_t===4||_t===3&&(qt&130023424)===qt&&500>At()-_h?ri(e,0):Vh|=n),En(e,t)}function Ox(e,t){t===0&&(e.mode&1?(t=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):t=1);var n=yn();e=_r(e,t),e!==null&&(Ka(e,t,n),En(e,n))}function xE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ox(e,n)}function wE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),Ox(e,n)}var Vx;Vx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Cn.current)Sn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Sn=!1,aE(e,t,n);Sn=!!(e.flags&131072)}else Sn=!1,mt&&t.flags&1048576&&Bv(t,gc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kl(e,t),e=t.pendingProps;var o=cs(t,an.current);rs(t,n),o=Dh(null,t,r,e,o,n);var i=Mh();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kn(r)?(i=!0,mc(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ph(t),o.updater=Gc,t.stateNode=o,o._reactInternals=t,of(t,r,e,n),t=lf(null,t,r,!0,i,n)):(t.tag=0,mt&&i&&bh(t),mn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Kl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=SE(r),e=sr(r,e),o){case 0:t=af(null,t,r,e,n);break e;case 1:t=xg(null,t,r,e,n);break e;case 11:t=yg(null,t,r,e,n);break e;case 14:t=vg(null,t,r,sr(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:sr(r,o),af(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:sr(r,o),xg(e,t,r,o,n);case 3:e:{if(Sx(t),e===null)throw Error(te(387));r=t.pendingProps,i=t.memoizedState,o=i.element,Xv(e,t),xc(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=hs(Error(te(423)),t),t=wg(e,t,r,n,o);break e}else if(r!==o){o=hs(Error(te(424)),t),t=wg(e,t,r,n,o);break e}else for(In=vo(t.stateNode.containerInfo.firstChild),Dn=t,mt=!0,cr=null,n=Kv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(us(),r===o){t=Ur(e,t,n);break e}mn(e,t,r,n)}t=t.child}return t;case 5:return qv(t),e===null&&tf(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,qd(r,o)?s=null:i!==null&&qd(r,i)&&(t.flags|=32),bx(e,t),mn(e,t,s,n),t.child;case 6:return e===null&&tf(t),null;case 13:return Tx(e,t,n);case 4:return jh(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ds(t,null,r,n):mn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:sr(r,o),yg(e,t,r,o,n);case 7:return mn(e,t,t.pendingProps,n),t.child;case 8:return mn(e,t,t.pendingProps.children,n),t.child;case 12:return mn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,it(yc,r._currentValue),r._currentValue=s,i!==null)if(fr(i.value,s)){if(i.children===o.children&&!Cn.current){t=Ur(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),nf(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(te(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nf(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}mn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,rs(t,n),o=Hn(o),r=r(o),t.flags|=1,mn(e,t,r,n),t.child;case 14:return r=t.type,o=sr(r,t.pendingProps),o=sr(r.type,o),vg(e,t,r,o,n);case 15:return xx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:sr(r,o),Kl(e,t),t.tag=1,kn(r)?(e=!0,mc(t)):e=!1,rs(t,n),gx(t,r,o),of(t,r,o,n),lf(null,t,r,!0,e,n);case 19:return Cx(e,t,n);case 22:return wx(e,t,n)}throw Error(te(156,t.tag))};function _x(e,t){return hv(e,t)}function bE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(e,t,n,r){return new bE(e,t,n,r)}function Wh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SE(e){if(typeof e=="function")return Wh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ch)return 11;if(e===uh)return 14}return 2}function So(e,t){var n=e.alternate;return n===null?(n=Bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ql(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")Wh(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case $i:return oi(n.children,o,i,t);case lh:s=8,o|=8;break;case Pd:return e=Bn(12,n,t,o|2),e.elementType=Pd,e.lanes=i,e;case jd:return e=Bn(13,n,t,o),e.elementType=jd,e.lanes=i,e;case Ad:return e=Bn(19,n,t,o),e.elementType=Ad,e.lanes=i,e;case q0:return Yc(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y0:s=10;break e;case X0:s=9;break e;case ch:s=11;break e;case uh:s=14;break e;case so:s=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Bn(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function oi(e,t,n,r){return e=Bn(7,e,r,t),e.lanes=n,e}function Yc(e,t,n,r){return e=Bn(22,e,r,t),e.elementType=q0,e.lanes=n,e.stateNode={isHidden:!1},e}function td(e,t,n){return e=Bn(6,e,null,t),e.lanes=n,e}function nd(e,t,n){return t=Bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TE(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$u(0),this.expirationTimes=$u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$u(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Gh(e,t,n,r,o,i,s,l,c){return e=new TE(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Bn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(i),e}function CE(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ux(e){if(!e)return Eo;e=e._reactInternals;e:{if(gi(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(kn(n))return Uv(e,n,t)}return t}function zx(e,t,n,r,o,i,s,l,c){return e=Gh(n,r,!0,e,o,i,s,l,c),e.context=Ux(null),n=e.current,r=yn(),o=bo(n),i=Fr(r,o),i.callback=t??null,xo(n,i,o),e.current.lanes=o,Ka(e,o,r),En(e,r),e}function Xc(e,t,n,r){var o=t.current,i=yn(),s=bo(o);return n=Ux(n),t.context===null?t.context=n:t.pendingContext=n,t=Fr(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=xo(o,t,s),e!==null&&(dr(e,o,s,i),Wl(e,o,s)),s}function Nc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ag(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hh(e,t){Ag(e,t),(e=e.alternate)&&Ag(e,t)}function kE(){return null}var Bx=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kh(e){this._internalRoot=e}qc.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Xc(e,t,null,null)};qc.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fi(function(){Xc(null,e,null,null)}),t[Vr]=null}};function qc(e){this._internalRoot=e}qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=wv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lo.length&&t!==0&&t<lo[n].priority;n++);lo.splice(n,0,e),n===0&&Sv(e)}};function Yh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rg(){}function EE(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=Nc(s);i.call(u)}}var s=zx(t,r,e,0,null,!1,!1,"",Rg);return e._reactRootContainer=s,e[Vr]=s.current,Ca(e.nodeType===8?e.parentNode:e),fi(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=Nc(c);l.call(u)}}var c=Gh(e,0,!1,null,null,!1,!1,"",Rg);return e._reactRootContainer=c,e[Vr]=c.current,Ca(e.nodeType===8?e.parentNode:e),fi(function(){Xc(t,c,n,r)}),c}function Zc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var c=Nc(s);l.call(c)}}Xc(t,s,e,o)}else s=EE(n,t,e,o,r);return Nc(s)}vv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Js(t.pendingLanes);n!==0&&(hh(t,n|1),En(t,At()),!(We&6)&&(ms=At()+500,Ro()))}break;case 13:fi(function(){var r=_r(e,1);if(r!==null){var o=yn();dr(r,e,1,o)}}),Hh(e,1)}};mh=function(e){if(e.tag===13){var t=_r(e,134217728);if(t!==null){var n=yn();dr(t,e,134217728,n)}Hh(e,134217728)}};xv=function(e){if(e.tag===13){var t=bo(e),n=_r(e,t);if(n!==null){var r=yn();dr(n,e,t,r)}Hh(e,t)}};wv=function(){return Ke};bv=function(e,t){var n=Ke;try{return Ke=e,t()}finally{Ke=n}};_d=function(e,t,n){switch(t){case"input":if(Dd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=zc(r);if(!o)throw Error(te(90));Z0(r),Dd(r,o)}}}break;case"textarea":ev(e,n);break;case"select":t=n.value,t!=null&&Ji(e,!!n.multiple,t,!1)}};av=Uh;lv=fi;var NE={usingClientEntryPoint:!1,Events:[Xa,_i,zc,iv,sv,Uh]},Hs={findFiberByHostInstance:Xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PE={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dv(e),e===null?null:e.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||kE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{Oc=Pl.inject(PE),kr=Pl}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NE;Ln.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yh(t))throw Error(te(200));return CE(e,t,null,n)};Ln.createRoot=function(e,t){if(!Yh(e))throw Error(te(299));var n=!1,r="",o=Bx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Gh(e,1,!1,null,null,n,!1,r,o),e[Vr]=t.current,Ca(e.nodeType===8?e.parentNode:e),new Kh(t)};Ln.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=dv(t),e=e===null?null:e.stateNode,e};Ln.flushSync=function(e){return fi(e)};Ln.hydrate=function(e,t,n){if(!Qc(t))throw Error(te(200));return Zc(null,e,t,!0,n)};Ln.hydrateRoot=function(e,t,n){if(!Yh(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Bx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=zx(t,null,e,1,n??null,o,!1,i,s),e[Vr]=t.current,Ca(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new qc(t)};Ln.render=function(e,t,n){if(!Qc(t))throw Error(te(200));return Zc(null,e,t,!1,n)};Ln.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(te(40));return e._reactRootContainer?(fi(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[Vr]=null})}),!0):!1};Ln.unstable_batchedUpdates=Uh;Ln.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return Zc(e,t,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function Wx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wx)}catch(e){console.error(e)}}Wx(),W0.exports=Ln;var Xh=W0.exports;const jE=I0(Xh);var Ig=Xh;Ed.createRoot=Ig.createRoot,Ed.hydrateRoot=Ig.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Da.apply(this,arguments)}var ho;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ho||(ho={}));const Dg="popstate";function AE(e){e===void 0&&(e={});function t(r,o){let{pathname:i,search:s,hash:l}=r.location;return wf("",{pathname:i,search:s,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Pc(o)}return IE(t,n,null,e)}function Rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function RE(){return Math.random().toString(36).substr(2,8)}function Mg(e,t){return{usr:e.state,key:e.key,idx:t}}function wf(e,t,n,r){return n===void 0&&(n=null),Da({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ss(t):t,{state:n,key:t&&t.key||r||RE()})}function Pc(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ss(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function IE(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,l=ho.Pop,c=null,u=m();u==null&&(u=0,s.replaceState(Da({},s.state,{idx:u}),""));function m(){return(s.state||{idx:null}).idx}function h(){l=ho.Pop;let P=m(),S=P==null?null:P-u;u=P,c&&c({action:l,location:C.location,delta:S})}function g(P,S){l=ho.Push;let b=wf(C.location,P,S);n&&n(b,P),u=m()+1;let T=Mg(b,u),A=C.createHref(b);try{s.pushState(T,"",A)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(A)}i&&c&&c({action:l,location:C.location,delta:1})}function E(P,S){l=ho.Replace;let b=wf(C.location,P,S);n&&n(b,P),u=m();let T=Mg(b,u),A=C.createHref(b);s.replaceState(T,"",A),i&&c&&c({action:l,location:C.location,delta:0})}function j(P){let S=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof P=="string"?P:Pc(P);return b=b.replace(/ $/,"%20"),Rt(S,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,S)}let C={get action(){return l},get location(){return e(o,s)},listen(P){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(Dg,h),c=P,()=>{o.removeEventListener(Dg,h),c=null}},createHref(P){return t(o,P)},createURL:j,encodeLocation(P){let S=j(P);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:E,go(P){return s.go(P)}};return C}var Lg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lg||(Lg={}));function DE(e,t,n){return n===void 0&&(n="/"),ME(e,t,n,!1)}function ME(e,t,n,r){let o=typeof t=="string"?Ss(t):t,i=qh(o.pathname||"/",n);if(i==null)return null;let s=Hx(e);LE(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=HE(i);l=WE(s[c],u,r)}return l}function Hx(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,s,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Rt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=To([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(Rt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Hx(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:zE(u,i.index),routesMeta:m})};return e.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))o(i,s);else for(let c of Kx(i.path))o(i,s,c)}),t}function Kx(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let s=Kx(r.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),o&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function LE(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:BE(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $E=/^:[\w-]+$/,FE=3,OE=2,VE=1,_E=10,UE=-2,$g=e=>e==="*";function zE(e,t){let n=e.split("/"),r=n.length;return n.some($g)&&(r+=UE),t&&(r+=OE),n.filter(o=>!$g(o)).reduce((o,i)=>o+($E.test(i)?FE:i===""?VE:_E),r)}function BE(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function WE(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,o={},i="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=Fg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Fg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!h)return null;Object.assign(o,h.params),s.push({params:o,pathname:To([i,h.pathname]),pathnameBase:qE(To([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=To([i,h.pathnameBase]))}return s}function Fg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=GE(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce((u,m,h)=>{let{paramName:g,isOptional:E}=m;if(g==="*"){let C=l[h]||"";s=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const j=l[h];return E&&!j?u[g]=void 0:u[g]=(j||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function GE(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Gx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function HE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function KE(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Ss(e):e;return{pathname:n?n.startsWith("/")?n:YE(n,t):t,search:QE(r),hash:ZE(o)}}function YE(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function rd(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XE(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Qh(e,t){let n=XE(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zh(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=Ss(e):(o=Da({},e),Rt(!o.pathname||!o.pathname.includes("?"),rd("?","pathname","search",o)),Rt(!o.pathname||!o.pathname.includes("#"),rd("#","pathname","hash",o)),Rt(!o.search||!o.search.includes("#"),rd("#","search","hash",o)));let i=e===""||o.pathname==="",s=i?"/":o.pathname,l;if(s==null)l=n;else{let h=t.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;o.pathname=g.join("/")}l=h>=0?t[h]:"/"}let c=KE(o,l),u=s&&s!=="/"&&s.endsWith("/"),m=(i||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const To=e=>e.join("/").replace(/\/\/+/g,"/"),qE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),QE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function JE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Yx=["post","put","patch","delete"];new Set(Yx);const eN=["get",...Yx];new Set(eN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ma.apply(this,arguments)}const Jh=p.createContext(null),tN=p.createContext(null),Io=p.createContext(null),Jc=p.createContext(null),Do=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Xx=p.createContext(null);function nN(e,t){let{relative:n}=t===void 0?{}:t;Ts()||Rt(!1);let{basename:r,navigator:o}=p.useContext(Io),{hash:i,pathname:s,search:l}=Qx(e,{relative:n}),c=s;return r!=="/"&&(c=s==="/"?r:To([r,s])),o.createHref({pathname:c,search:l,hash:i})}function Ts(){return p.useContext(Jc)!=null}function yi(){return Ts()||Rt(!1),p.useContext(Jc).location}function qx(e){p.useContext(Io).static||p.useLayoutEffect(e)}function Cs(){let{isDataRoute:e}=p.useContext(Do);return e?pN():rN()}function rN(){Ts()||Rt(!1);let e=p.useContext(Jh),{basename:t,future:n,navigator:r}=p.useContext(Io),{matches:o}=p.useContext(Do),{pathname:i}=yi(),s=JSON.stringify(Qh(o,n.v7_relativeSplatPath)),l=p.useRef(!1);return qx(()=>{l.current=!0}),p.useCallback(function(u,m){if(m===void 0&&(m={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Zh(u,JSON.parse(s),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:To([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,s,i,e])}function Qx(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Io),{matches:o}=p.useContext(Do),{pathname:i}=yi(),s=JSON.stringify(Qh(o,r.v7_relativeSplatPath));return p.useMemo(()=>Zh(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function oN(e,t){return iN(e,t)}function iN(e,t,n,r){Ts()||Rt(!1);let{navigator:o}=p.useContext(Io),{matches:i}=p.useContext(Do),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=yi(),m;if(t){var h;let P=typeof t=="string"?Ss(t):t;c==="/"||(h=P.pathname)!=null&&h.startsWith(c)||Rt(!1),m=P}else m=u;let g=m.pathname||"/",E=g;if(c!=="/"){let P=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(P.length).join("/")}let j=DE(e,{pathname:E}),C=uN(j&&j.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:To([c,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:To([c,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return t&&C?p.createElement(Jc.Provider,{value:{location:Ma({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ho.Pop}},C):C}function sN(){let e=mN(),t=JE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:o},n):null,i)}const aN=p.createElement(sN,null);class lN extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(Do.Provider,{value:this.props.routeContext},p.createElement(Xx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cN(e){let{routeContext:t,match:n,children:r}=e,o=p.useContext(Jh);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Do.Provider,{value:t},r)}function uN(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,l=(o=n)==null?void 0:o.errors;if(l!=null){let m=s.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||Rt(!1),s=s.slice(0,Math.min(s.length,m+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<s.length;m++){let h=s[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=m),h.route.id){let{loaderData:g,errors:E}=n,j=h.route.loader&&g[h.route.id]===void 0&&(!E||E[h.route.id]===void 0);if(h.route.lazy||j){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((m,h,g)=>{let E,j=!1,C=null,P=null;n&&(E=l&&h.route.id?l[h.route.id]:void 0,C=h.route.errorElement||aN,c&&(u<0&&g===0?(gN("route-fallback",!1),j=!0,P=null):u===g&&(j=!0,P=h.route.hydrateFallbackElement||null)));let S=t.concat(s.slice(0,g+1)),b=()=>{let T;return E?T=C:j?T=P:h.route.Component?T=p.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=m,p.createElement(cN,{match:h,routeContext:{outlet:m,matches:S,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?p.createElement(lN,{location:n.location,revalidation:n.revalidation,component:C,error:E,children:b(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):b()},null)}var Zx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Zx||{}),jc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jc||{});function dN(e){let t=p.useContext(Jh);return t||Rt(!1),t}function fN(e){let t=p.useContext(tN);return t||Rt(!1),t}function hN(e){let t=p.useContext(Do);return t||Rt(!1),t}function Jx(e){let t=hN(),n=t.matches[t.matches.length-1];return n.route.id||Rt(!1),n.route.id}function mN(){var e;let t=p.useContext(Xx),n=fN(jc.UseRouteError),r=Jx(jc.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function pN(){let{router:e}=dN(Zx.UseNavigateStable),t=Jx(jc.UseNavigateStable),n=p.useRef(!1);return qx(()=>{n.current=!0}),p.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Ma({fromRouteId:t},i)))},[e,t])}const Og={};function gN(e,t,n){!t&&!Og[e]&&(Og[e]=!0)}function yN(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function ew(e){let{to:t,replace:n,state:r,relative:o}=e;Ts()||Rt(!1);let{future:i,static:s}=p.useContext(Io),{matches:l}=p.useContext(Do),{pathname:c}=yi(),u=Cs(),m=Zh(t,Qh(l,i.v7_relativeSplatPath),c,o==="path"),h=JSON.stringify(m);return p.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:o}),[u,h,o,n,r]),null}function Mi(e){Rt(!1)}function vN(e){let{basename:t="/",children:n=null,location:r,navigationType:o=ho.Pop,navigator:i,static:s=!1,future:l}=e;Ts()&&Rt(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:s,future:Ma({v7_relativeSplatPath:!1},l)}),[c,l,i,s]);typeof r=="string"&&(r=Ss(r));let{pathname:m="/",search:h="",hash:g="",state:E=null,key:j="default"}=r,C=p.useMemo(()=>{let P=qh(m,c);return P==null?null:{location:{pathname:P,search:h,hash:g,state:E,key:j},navigationType:o}},[c,m,h,g,E,j,o]);return C==null?null:p.createElement(Io.Provider,{value:u},p.createElement(Jc.Provider,{children:n,value:C}))}function xN(e){let{children:t,location:n}=e;return oN(bf(t),n)}new Promise(()=>{});function bf(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,o)=>{if(!p.isValidElement(r))return;let i=[...t,o];if(r.type===p.Fragment){n.push.apply(n,bf(r.props.children,i));return}r.type!==Mi&&Rt(!1),!r.props.index||!r.props.children||Rt(!1);let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=bf(r.props.children,i)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sf.apply(this,arguments)}function wN(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function bN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function SN(e,t){return e.button===0&&(!t||t==="_self")&&!bN(e)}const TN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CN="6";try{window.__reactRouterVersion=CN}catch{}const kN="startTransition",Vg=oh[kN];function EN(e){let{basename:t,children:n,future:r,window:o}=e,i=p.useRef();i.current==null&&(i.current=AE({window:o,v5Compat:!0}));let s=i.current,[l,c]=p.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},m=p.useCallback(h=>{u&&Vg?Vg(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>s.listen(m),[s,m]),p.useEffect(()=>yN(r),[r]),p.createElement(vN,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}const NN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tf=p.forwardRef(function(t,n){let{onClick:r,relative:o,reloadDocument:i,replace:s,state:l,target:c,to:u,preventScrollReset:m,viewTransition:h}=t,g=wN(t,TN),{basename:E}=p.useContext(Io),j,C=!1;if(typeof u=="string"&&PN.test(u)&&(j=u,NN))try{let T=new URL(window.location.href),A=u.startsWith("//")?new URL(T.protocol+u):new URL(u),$=qh(A.pathname,E);A.origin===T.origin&&$!=null?u=$+A.search+A.hash:C=!0}catch{}let P=nN(u,{relative:o}),S=jN(u,{replace:s,state:l,target:c,preventScrollReset:m,relative:o,viewTransition:h});function b(T){r&&r(T),T.defaultPrevented||S(T)}return p.createElement("a",Sf({},g,{href:j||P,onClick:C||i?r:b,ref:n,target:c}))});var _g;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_g||(_g={}));var Ug;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ug||(Ug={}));function jN(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:s,viewTransition:l}=t===void 0?{}:t,c=Cs(),u=yi(),m=Qx(e,{relative:s});return p.useCallback(h=>{if(SN(h,n)){h.preventDefault();let g=r!==void 0?r:Pc(u)===Pc(m);c(e,{replace:g,state:o,preventScrollReset:i,relative:s,viewTransition:l})}},[u,c,m,r,o,n,e,i,s,l])}const AN="https://storymaker.nocodelauncher.com/api";class RN{constructor(){eo(this,"baseURL");eo(this,"token",null);this.baseURL=AN}setToken(t){this.token=t}async request(t,n={}){const r=`${this.baseURL}${t}`,o={"Content-Type":"application/json",...n.headers};this.token&&(o.Authorization=`Bearer ${this.token}`);const i={...n,headers:o};try{const s=await fetch(r,i),l=await s.json();if(!s.ok){const c=l.error||`HTTP ${s.status}`,u=new Error(c);throw u.status=s.status,u.response=l,u}return l}catch(s){throw s instanceof Error?s.message.includes("fetch")||s.message.includes("Failed to fetch")?new Error("Network error"):s:new Error("Network error")}}async register(t,n){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:n})})}async login(t,n){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:n})})}async refreshToken(t){return this.request("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:t})})}async logout(){return this.request("/auth/logout",{method:"POST"})}async getProfile(){return this.request("/auth/profile")}async getStories(){try{return{success:!0,data:{stories:(await window.storyDB.getStories()).map(r=>({id:r._id||"",title:r.title,content:r.content,summary:r.summary,genre:r.genre,duration:r.duration,status:r.status,createdAt:r.createdAt||new Date().toISOString(),updatedAt:r.updatedAt||new Date().toISOString(),videoStyle:r.videoStyle,language:r.language,additionalContext:r.additionalContext,videoToneEmotions:r.videoToneEmotions,isDraft:r.isDraft,currentStep:r.currentStep,maxStepReached:r.maxStepReached,mainPrompt:r.mainPrompt,storySummary:r.storySummary,chapterSummaries:r.chapterSummaries,youtubeTitle:r.youtubeTitle,youtubeDescription:r.youtubeDescription,youtubeTags:r.youtubeTags,stockFootageTerms:r.stockFootageTerms,chapters:r.chapters,currentChapter:r.currentChapter,totalChapters:r.totalChapters,selectedVoiceId:r.selectedVoiceId,audioChunks:r.audioChunks,totalAudioDuration:r.totalAudioDuration,transcriptInfo:r.transcriptInfo,sentenceTranscripts:r.sentenceTranscripts,stockMediaInfo:r.stockMediaInfo,videoAssets:r.videoAssets}))}}}catch(t){return console.error("Error getting stories from local database:",t),{success:!1,data:{stories:[]}}}}async getStory(t){try{console.log(" DEBUG: Attempting to get story with ID:",t);const n=await window.storyDB.getStory(t);if(console.log(" DEBUG: Local story result:",n),n)return{success:!0,data:{story:{id:n._id||"",title:n.title,content:n.content,summary:n.summary,genre:n.genre,duration:n.duration,status:n.status,createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),videoStyle:n.videoStyle,language:n.language,additionalContext:n.additionalContext,videoToneEmotions:n.videoToneEmotions,isDraft:n.isDraft,currentStep:n.currentStep,maxStepReached:n.maxStepReached,mainPrompt:n.mainPrompt,storySummary:n.storySummary,chapterSummaries:n.chapterSummaries,youtubeTitle:n.youtubeTitle,youtubeDescription:n.youtubeDescription,youtubeTags:n.youtubeTags,stockFootageTerms:n.stockFootageTerms,chapters:n.chapters,currentChapter:n.currentChapter,totalChapters:n.totalChapters,selectedVoiceId:n.selectedVoiceId,audioChunks:n.audioChunks,totalAudioDuration:n.totalAudioDuration,transcriptInfo:n.transcriptInfo,sentenceTranscripts:n.sentenceTranscripts,stockMediaInfo:n.stockMediaInfo,videoAssets:n.videoAssets}}};throw new Error("Story not found")}catch(n){throw console.error("Error getting story from local database:",n),n}}async createStory(t){try{const n=await window.storyDB.createStory({title:t.title,content:t.content,summary:t.summary,genre:t.genre,duration:t.duration,status:t.isDraft?"draft":"completed",videoStyle:t.videoStyle,language:t.language,additionalContext:t.additionalContext,videoToneEmotions:t.videoToneEmotions,isDraft:t.isDraft,currentStep:t.currentStep,maxStepReached:t.maxStepReached,mainPrompt:t.mainPrompt,storySummary:t.storySummary,chapterSummaries:t.chapterSummaries,youtubeTitle:t.youtubeTitle,youtubeDescription:t.youtubeDescription,youtubeTags:t.youtubeTags,stockFootageTerms:t.stockFootageTerms,chapters:t.chapters,currentChapter:t.currentChapter,totalChapters:t.totalChapters,selectedVoiceId:t.selectedVoiceId,audioChunks:t.audioChunks,totalAudioDuration:t.totalAudioDuration,transcriptInfo:t.transcriptInfo,sentenceTranscripts:t.sentenceTranscripts,stockMediaInfo:t.stockMediaInfo,videoAssets:t.videoAssets});return{success:!0,data:{story:{id:n._id||"",title:n.title,content:n.content,summary:n.summary,genre:n.genre,duration:n.duration,status:n.status,createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),videoStyle:n.videoStyle,language:n.language,additionalContext:n.additionalContext,videoToneEmotions:n.videoToneEmotions,isDraft:n.isDraft,currentStep:n.currentStep,maxStepReached:n.maxStepReached,mainPrompt:n.mainPrompt,storySummary:n.storySummary,chapterSummaries:n.chapterSummaries,youtubeTitle:n.youtubeTitle,youtubeDescription:n.youtubeDescription,youtubeTags:n.youtubeTags,stockFootageTerms:n.stockFootageTerms,chapters:n.chapters,currentChapter:n.currentChapter,totalChapters:n.totalChapters,selectedVoiceId:n.selectedVoiceId,audioChunks:n.audioChunks,totalAudioDuration:n.totalAudioDuration,transcriptInfo:n.transcriptInfo,sentenceTranscripts:n.sentenceTranscripts,stockMediaInfo:n.stockMediaInfo,videoAssets:n.videoAssets}}}}catch(n){throw console.error("Error creating story in local database:",n),n}}async updateStory(t,n){try{const r=await window.storyDB.updateStory(t,n);return{success:!0,data:{story:{id:r._id||"",title:r.title,content:r.content,summary:r.summary,genre:r.genre,duration:r.duration,status:r.status,createdAt:r.createdAt||new Date().toISOString(),updatedAt:r.updatedAt||new Date().toISOString(),videoStyle:r.videoStyle,language:r.language,additionalContext:r.additionalContext,videoToneEmotions:r.videoToneEmotions,isDraft:r.isDraft,currentStep:r.currentStep,maxStepReached:r.maxStepReached,mainPrompt:r.mainPrompt,storySummary:r.storySummary,chapterSummaries:r.chapterSummaries,youtubeTitle:r.youtubeTitle,youtubeDescription:r.youtubeDescription,youtubeTags:r.youtubeTags,stockFootageTerms:r.stockFootageTerms,chapters:r.chapters,currentChapter:r.currentChapter,totalChapters:r.totalChapters,selectedVoiceId:r.selectedVoiceId,audioChunks:r.audioChunks,totalAudioDuration:r.totalAudioDuration,transcriptInfo:r.transcriptInfo,sentenceTranscripts:r.sentenceTranscripts,stockMediaInfo:r.stockMediaInfo,videoAssets:r.videoAssets}}}}catch(r){throw console.error("Error updating story in local database:",r),r}}async deleteStory(t){try{return await window.storyDB.deleteStory(t),{success:!0}}catch(n){return console.error("Error deleting story from local database:",n),{success:!1}}}async generateStoryStructure(t,n,r,o){var i;try{const s=`${this.baseURL}/stories/generate-structure`,l={"Content-Type":"application/json"};this.token&&(l.Authorization=`Bearer ${this.token}`);const c=await fetch(s,{method:"POST",headers:l,body:JSON.stringify(t)});if(!c.ok){const g=await c.json();throw new Error(g.error||`HTTP ${c.status}`)}const u=(i=c.body)==null?void 0:i.getReader();if(!u)throw new Error("No response body");const m=new TextDecoder;let h="";for(;;){const{done:g,value:E}=await u.read();if(g)break;h+=m.decode(E,{stream:!0});const j=h.split(`
`);h=j.pop()||"";for(const C of j)if(C.trim())try{const P=JSON.parse(C);n(P),P.type==="complete"?r({storySummary:P.storySummary,chapterSummaries:P.chapterSummaries,youtubeTitle:P.youtubeTitle,youtubeDescription:P.youtubeDescription,youtubeTags:P.youtubeTags,stockFootageTerms:P.stockFootageTerms}):P.type==="error"&&o(new Error(P.error))}catch(P){console.error("Error parsing chunk:",P)}}}catch(s){console.error("Error in generateStoryStructure:",s),o(s)}}async generateChapterContent(t,n,r,o){var i;try{const s=`${this.baseURL}/stories/generate-chapter`,l={"Content-Type":"application/json"};this.token&&(l.Authorization=`Bearer ${this.token}`);const c=await fetch(s,{method:"POST",headers:l,body:JSON.stringify(t)});if(!c.ok){const g=await c.json();throw new Error(g.error||`HTTP ${c.status}`)}const u=(i=c.body)==null?void 0:i.getReader();if(!u)throw new Error("No response body");const m=new TextDecoder;let h="";for(;;){const{done:g,value:E}=await u.read();if(g)break;h+=m.decode(E,{stream:!0});const j=h.split(`
`);h=j.pop()||"";for(const C of j)if(C.trim())try{const P=JSON.parse(C);n(P),P.type==="complete"?r({chapterContent:P.chapterContent,chapterNumber:P.chapterNumber}):P.type==="error"&&o(new Error(P.error))}catch(P){console.error("Error parsing chunk:",P)}}}catch(s){console.error("Error in generateChapterContent:",s),o(s)}}async generateTTS(t,n){try{const r=`${this.baseURL}/stories/tts`,o={"Content-Type":"application/json"};this.token&&(o.Authorization=`Bearer ${this.token}`);const i=await fetch(r,{method:"POST",headers:o,body:JSON.stringify({voice_id:t,text:n})});if(!i.ok){const l=await i.json();throw new Error(l.error||`HTTP ${i.status}`)}return await i.blob()}catch(r){throw console.error("Error in generateTTS:",r),r}}async fetchMurfVoices(){try{const t=`${this.baseURL}/stories/voices`,n={};this.token&&(n.Authorization=`Bearer ${this.token}`);const r=await fetch(t,{method:"GET",headers:n});if(!r.ok){const o=await r.json();throw new Error(o.error||`HTTP ${r.status}`)}return await r.json()}catch(t){throw console.error("Error fetching Murf voices:",t),t}}async generateTranscript(t,n,r){try{const o=`${this.baseURL}/transcript/generate`,i=new FormData;i.append("audio",t),i.append("storyId",n),i.append("mediaId",r);const s={};this.token&&(s.Authorization=`Bearer ${this.token}`);const l=await fetch(o,{method:"POST",headers:s,body:i});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();if(!c.success)throw new Error(c.error||"Failed to generate transcript");return c.data}catch(o){throw console.error("Error in generateTranscript:",o),o}}async checkTranscriptHealth(){try{const t=`${this.baseURL}/transcript/health`,n={};this.token&&(n.Authorization=`Bearer ${this.token}`);const r=await fetch(t,{method:"GET",headers:n});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(t){throw console.error("Error checking transcript health:",t),t}}async fetchStockMedia(t,n,r){try{const o=`${this.baseURL}/media/fetch-stock-media`,i={"Content-Type":"application/json"};this.token&&(i.Authorization=`Bearer ${this.token}`);const s=r||t.length,l=await fetch(o,{method:"POST",headers:i,body:JSON.stringify({segments:t,storyId:n,totalParagraphs:s})});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();if(!c.success)throw new Error(c.error||"Failed to fetch stock media");return c.data}catch(o){throw console.error("Error in fetchStockMedia:",o),o}}async checkMediaHealth(){try{const t=`${this.baseURL}/media/health`,n={};this.token&&(n.Authorization=`Bearer ${this.token}`);const r=await fetch(t,{method:"GET",headers:n});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(t){throw console.error("Error checking media health:",t),t}}}const ut=new RN,rn=Object.defineProperty({__proto__:null,apiService:ut},Symbol.toStringTag,{value:"Module"});class zg{static parseBackendError(t){var n,r;return typeof t=="string"?t:(r=(n=t==null?void 0:t.response)==null?void 0:n.data)!=null&&r.error?t.response.data.error:t!=null&&t.message?t.message:"An unexpected error occurred"}static validateEmail(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"Please enter a valid email address":"Email is required"}static validatePassword(t){return t?t.length<6?"Password must be at least 6 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t)?null:"Password must contain at least one uppercase letter, one lowercase letter, and one number":"Password is required"}static validatePasswordConfirmation(t,n){return n?t!==n?"Passwords do not match":null:"Please confirm your password"}static getErrorMessage(t){return{"User with this email already exists":"An account with this email already exists. Please try logging in instead.","Invalid email or password":"Invalid email or password. Please check your credentials and try again.","Account is deactivated":"Your account has been deactivated. Please contact support.","Too many requests from this IP, please try again later.":"Too many login attempts. Please wait a few minutes before trying again.","Network error":"Unable to connect to the server. Please check your internet connection.","Valid email is required":"Please enter a valid email address.","Password must be at least 6 characters":"Password must be at least 6 characters long.","Password must contain at least one uppercase letter, one lowercase letter, and one number":"Password must contain at least one uppercase letter, one lowercase letter, and one number."}[t]||t}static isNetworkError(t){return t.includes("Network error")||t.includes("fetch")||t.includes("Failed to fetch")||t.includes("ECONNREFUSED")}static isValidationError(t){return t.includes("Valid email")||t.includes("Password must")||t.includes("required")}static isRateLimitError(t){return t.includes("Too many requests")||t.includes("rate limit")}}const em=()=>(window==null?void 0:window.electronAPI)!==void 0,La=()=>{var e;return em()&&((e=window.electronAPI)==null?void 0:e.secureStorage)!==void 0},IN=()=>{console.log(" Electron Environment Check:"),console.log("  - window.electronAPI:",window.electronAPI),console.log("  - isElectron():",em()),console.log("  - isElectronAPIAvailable():",La()),window.electronAPI&&(console.log("  - Available APIs:",Object.keys(window.electronAPI)),window.electronAPI.secureStorage&&console.log("  - Secure Storage APIs:",Object.keys(window.electronAPI.secureStorage))),console.log("  - User Agent:",navigator.userAgent),console.log("  - Platform:",navigator.platform)},DN=async()=>{if(console.log(" Testing Electron API..."),!em()){console.log(" Electron API not available");return}try{if(console.log(" Platform:",window.electronAPI.platform),console.log(" Versions:",window.electronAPI.versions),window.electronAPI.secureStorage){const e="test-encryption-data";console.log(" Testing secure storage...");const t=await window.electronAPI.secureStorage.encrypt(e);console.log(" Encryption successful");const n=await window.electronAPI.secureStorage.decrypt(t);console.log(" Decryption successful:",n===e)}else console.log(" Secure storage not available");window.electronAPI.app&&console.log(" App controls available"),window.electronAPI.network&&console.log(" Network status available:",window.electronAPI.network.isOnline())}catch(e){console.error(" Electron API test failed:",e)}};class MN{constructor(){eo(this,"STORAGE_KEY","storymaker_auth_encrypted")}async storeAuth(t){try{const n=JSON.stringify(t);if(La()){const r=await window.electronAPI.secureStorage.encrypt(n);localStorage.setItem(this.STORAGE_KEY,r)}else console.warn("Electron API not available, using regular localStorage"),localStorage.setItem(this.STORAGE_KEY,n)}catch(n){console.error("Failed to store auth data securely:",n);try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch{throw new Error("Failed to store authentication data")}}}async getAuth(){try{const t=localStorage.getItem(this.STORAGE_KEY);if(!t)return null;if(La()){const n=await window.electronAPI.secureStorage.decrypt(t),r=JSON.parse(n);return Date.now()>r.expiresAt?(await this.clearAuth(),null):r}else{console.warn("Electron API not available, using regular localStorage");const n=JSON.parse(t);return Date.now()>n.expiresAt?(await this.clearAuth(),null):n}}catch(t){return console.error("Failed to retrieve auth data:",t),await this.clearAuth(),null}}async clearAuth(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Failed to clear auth data:",t)}}async isAuthenticated(){return await this.getAuth()!==null}async getAccessToken(){const t=await this.getAuth();return(t==null?void 0:t.accessToken)||null}async getRefreshToken(){const t=await this.getAuth();return(t==null?void 0:t.refreshToken)||null}async getUser(){const t=await this.getAuth();return(t==null?void 0:t.user)||null}async updateAccessToken(t,n){try{const r=await this.getAuth();if(!r)throw new Error("No stored authentication data");const o={...r,accessToken:t,expiresAt:Date.now()+n*1e3};await this.storeAuth(o)}catch(r){throw console.error("Failed to update access token:",r),r}}}const Bo=new MN;class LN{constructor(){eo(this,"STORAGE_KEY","storymaker_auth_encrypted_v2");eo(this,"ENCRYPTION_KEY","storymaker-auth-key-2024")}async encrypt(t){try{if(window.crypto&&window.crypto.subtle){const n=new TextEncoder,r=await window.crypto.subtle.importKey("raw",n.encode(this.ENCRYPTION_KEY),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),o=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n.encode("storymaker-salt"),iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!0,["encrypt"]),i=window.crypto.getRandomValues(new Uint8Array(12)),s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,n.encode(t)),l=new Uint8Array(s),c=new Uint8Array(i.length+l.length);return c.set(i),c.set(l,i.length),btoa(String.fromCharCode(...c))}else return btoa(unescape(encodeURIComponent(t)))}catch(n){return console.error("Encryption failed:",n),btoa(unescape(encodeURIComponent(t)))}}async decrypt(t){try{if(window.crypto&&window.crypto.subtle){const n=new Uint8Array(atob(t).split("").map(u=>u.charCodeAt(0))),r=n.slice(0,12),o=n.slice(12),i=new TextEncoder,s=await window.crypto.subtle.importKey("raw",i.encode(this.ENCRYPTION_KEY),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),l=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:i.encode("storymaker-salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["decrypt"]),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},l,o);return new TextDecoder().decode(c)}else return decodeURIComponent(escape(atob(t)))}catch(n){return console.error("Decryption failed:",n),decodeURIComponent(escape(atob(t)))}}async storeAuth(t){try{const n=JSON.stringify(t),r=await this.encrypt(n);localStorage.setItem(this.STORAGE_KEY,r),console.log(" Auth data stored using alternative encryption")}catch(n){throw console.error("Failed to store auth data:",n),new Error("Failed to store authentication data")}}async getAuth(){try{const t=localStorage.getItem(this.STORAGE_KEY);if(!t)return null;const n=await this.decrypt(t),r=JSON.parse(n);return Date.now()>r.expiresAt?(await this.clearAuth(),null):r}catch(t){return console.error("Failed to retrieve auth data:",t),await this.clearAuth(),null}}async clearAuth(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Failed to clear auth data:",t)}}async isAuthenticated(){return await this.getAuth()!==null}async getAccessToken(){const t=await this.getAuth();return(t==null?void 0:t.accessToken)||null}async getRefreshToken(){const t=await this.getAuth();return(t==null?void 0:t.refreshToken)||null}async getUser(){const t=await this.getAuth();return(t==null?void 0:t.user)||null}async updateAccessToken(t,n){try{const r=await this.getAuth();if(!r)throw new Error("No stored authentication data");const o={...r,accessToken:t,expiresAt:Date.now()+n*1e3};await this.storeAuth(o)}catch(r){throw console.error("Failed to update access token:",r),r}}}const Ks=new LN;class $N{constructor(){eo(this,"provider",null);eo(this,"providerName",null);this.initializeProvider()}initializeProvider(){La()?(this.provider=Bo,this.providerName="Electron Secure Storage",console.log(" Using Electron Secure Storage")):(this.provider=Ks,this.providerName="Alternative Storage (Web Crypto)",console.log(" Using Alternative Storage with Web Crypto API"))}reinitialize(){this.initializeProvider()}getProviderName(){return this.providerName||"Unknown"}isUsingElectron(){return this.provider===Bo}async storeAuth(t){try{if(!this.provider)throw new Error("No storage provider available");await this.provider.storeAuth(t),console.log(` Auth data stored using ${this.providerName}`)}catch(n){if(console.error(` Failed to store auth data with ${this.providerName}:`,n),this.provider===Bo)console.log(" Falling back to alternative storage..."),this.provider=Ks,this.providerName="Alternative Storage (Fallback)",await this.provider.storeAuth(t),console.log(" Auth data stored using fallback storage");else throw n}}async getAuth(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getAuth()}catch(t){return console.error(` Failed to get auth data with ${this.providerName}:`,t),this.provider===Bo?(console.log(" Falling back to alternative storage..."),this.provider=Ks,this.providerName="Alternative Storage (Fallback)",await this.provider.getAuth()):null}}async clearAuth(){try{if(!this.provider)throw new Error("No storage provider available");await this.provider.clearAuth()}catch(t){console.error(` Failed to clear auth data with ${this.providerName}:`,t)}}async isAuthenticated(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.isAuthenticated()}catch(t){return console.error(` Failed to check authentication with ${this.providerName}:`,t),!1}}async getAccessToken(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getAccessToken()}catch(t){return console.error(` Failed to get access token with ${this.providerName}:`,t),null}}async getRefreshToken(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getRefreshToken()}catch(t){return console.error(` Failed to get refresh token with ${this.providerName}:`,t),null}}async getUser(){try{if(!this.provider)throw new Error("No storage provider available");return await this.provider.getUser()}catch(t){return console.error(` Failed to get user data with ${this.providerName}:`,t),null}}async updateAccessToken(t,n){try{if(!this.provider)throw new Error("No storage provider available");await this.provider.updateAccessToken(t,n)}catch(r){throw console.error(` Failed to update access token with ${this.providerName}:`,r),r}}async migrateToElectron(){if(this.provider===Bo)return console.log(" Already using Electron storage"),!0;if(!La())return console.log(" Electron API not available for migration"),!1;try{const t=await Ks.getAuth();return t?(await Bo.storeAuth(t),await Ks.clearAuth(),this.provider=Bo,this.providerName="Electron Secure Storage (Migrated)",console.log(" Successfully migrated to Electron storage"),!0):(console.log(" No data to migrate"),!0)}catch(t){return console.error(" Migration failed:",t),!1}}async healthCheck(){try{const t={accessToken:"test-token",refreshToken:"test-refresh",user:{id:1,email:"test@example.com",subscriptionStatus:"free"},expiresAt:Date.now()+36e5};if(!this.provider)throw new Error("No storage provider available");await this.provider.storeAuth(t);const n=await this.provider.getAuth();return await this.provider.clearAuth(),{provider:this.providerName||"Unknown",isElectron:this.isUsingElectron(),isWorking:n!==null&&n.accessToken===t.accessToken}}catch(t){return{provider:this.providerName||"Unknown",isElectron:this.isUsingElectron(),isWorking:!1,error:t instanceof Error?t.message:"Unknown error"}}}}const nr=new $N;var FN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ON=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VN=(e,t)=>{const n=p.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,children:l,...c},u)=>p.createElement("svg",{ref:u,...FN,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:`lucide lucide-${ON(e)}`,...c},[...t.map(([m,h])=>p.createElement(m,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var Pe=VN;const tw=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Cf=Pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),or=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ql=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),_N=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),UN=Pe("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),mo=Pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),zN=Pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),hi=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),BN=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),nw=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),rw=Pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ow=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),kf=Pe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),iw=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),WN=Pe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),GN=Pe("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),pt=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),sw=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),HN=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),KN=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),YN=Pe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),XN=Pe("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),Bg=Pe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),qN=Pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),aw=Pe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Wg=Pe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Zo=Pe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),$a=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Co=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),QN=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ZN=Pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),JN=Pe("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),lw=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Jo=Pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),cw=Pe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),e2=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),od=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),t2=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Gg=Pe("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),n2=Pe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),uw=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),r2=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ef=Pe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),ii=Pe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),dw=Pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ki=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function fw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=fw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hw(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=fw(e))&&(r&&(r+=" "),r+=t);return r}function o2(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=mw(t))&&(r&&(r+=" "),r+=n);return r}function mw(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=mw(e[r]))&&(n&&(n+=" "),n+=t);return n}var tm="-";function i2(e){var t=a2(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,o=r===void 0?{}:r;function i(l){var c=l.split(tm);return c[0]===""&&c.length!==1&&c.shift(),pw(c,t)||s2(l)}function s(l,c){var u=n[l]||[];return c&&o[l]?[].concat(u,o[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function pw(e,t){var s;if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),o=r?pw(e.slice(1),r):void 0;if(o)return o;if(t.validators.length!==0){var i=e.join(tm);return(s=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:s.classGroupId}}var Hg=/^\[(.+)\]$/;function s2(e){if(Hg.test(e)){var t=Hg.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function a2(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},o=c2(Object.entries(e.classGroups),n);return o.forEach(function(i){var s=i[0],l=i[1];Nf(l,r,s,t)}),r}function Nf(e,t,n,r){e.forEach(function(o){if(typeof o=="string"){var i=o===""?t:Kg(t,o);i.classGroupId=n;return}if(typeof o=="function"){if(l2(o)){Nf(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(function(s){var l=s[0],c=s[1];Nf(c,Kg(t,l),n,r)})})}function Kg(e,t){var n=e;return t.split(tm).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function l2(e){return e.isThemeGetter}function c2(e,t){return t?e.map(function(n){var r=n[0],o=n[1],i=o.map(function(s){return typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):s});return[r,i]}):e}function u2(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function o(i,s){n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(s){var l=n.get(s);if(l!==void 0)return l;if((l=r.get(s))!==void 0)return o(s,l),l},set:function(s,l){n.has(s)?n.set(s,l):o(s,l)}}}var gw="!";function d2(e){var t=e.separator||":",n=t.length===1,r=t[0],o=t.length;return function(s){for(var l=[],c=0,u=0,m,h=0;h<s.length;h++){var g=s[h];if(c===0){if(g===r&&(n||s.slice(h,h+o)===t)){l.push(s.slice(u,h)),u=h+o;continue}if(g==="/"){m=h;continue}}g==="["?c++:g==="]"&&c--}var E=l.length===0?s:s.substring(u),j=E.startsWith(gw),C=j?E.substring(1):E,P=m&&m>u?m-u:void 0;return{modifiers:l,hasImportantModifier:j,baseClassName:C,maybePostfixModifierPosition:P}}}function f2(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var o=r[0]==="[";o?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function h2(e){return{cache:u2(e.cacheSize),splitModifiers:d2(e),...i2(e)}}var m2=/\s+/;function p2(e,t){var n=t.splitModifiers,r=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(m2).map(function(s){var l=n(s),c=l.modifiers,u=l.hasImportantModifier,m=l.baseClassName,h=l.maybePostfixModifierPosition,g=r(h?m.substring(0,h):m),E=!!h;if(!g){if(!h)return{isTailwindClass:!1,originalClassName:s};if(g=r(m),!g)return{isTailwindClass:!1,originalClassName:s};E=!1}var j=f2(c).join(":"),C=u?j+gw:j;return{isTailwindClass:!0,modifierId:C,classGroupId:g,originalClassName:s,hasPostfixModifier:E}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var l=s.modifierId,c=s.classGroupId,u=s.hasPostfixModifier,m=l+c;return i.has(m)?!1:(i.add(m),o(c,u).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function g2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,i,s=l;function l(u){var m=t[0],h=t.slice(1),g=h.reduce(function(E,j){return j(E)},m());return r=h2(g),o=r.cache.get,i=r.cache.set,s=c,c(u)}function c(u){var m=o(u);if(m)return m;var h=p2(u,r);return i(u,h),h}return function(){return s(o2.apply(null,arguments))}}function lt(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var yw=/^\[(?:([a-z-]+):)?(.+)\]$/i,y2=/^\d+\/\d+$/,v2=new Set(["px","full","screen"]),x2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,w2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,b2=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function rr(e){return ei(e)||v2.has(e)||y2.test(e)||Pf(e)}function Pf(e){return vi(e,"length",N2)}function S2(e){return vi(e,"size",vw)}function T2(e){return vi(e,"position",vw)}function C2(e){return vi(e,"url",P2)}function jl(e){return vi(e,"number",ei)}function ei(e){return!Number.isNaN(Number(e))}function k2(e){return e.endsWith("%")&&ei(e.slice(0,-1))}function Ys(e){return Yg(e)||vi(e,"number",Yg)}function Ue(e){return yw.test(e)}function Xs(){return!0}function no(e){return x2.test(e)}function E2(e){return vi(e,"",j2)}function vi(e,t,n){var r=yw.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function N2(e){return w2.test(e)}function vw(){return!1}function P2(e){return e.startsWith("url(")}function Yg(e){return Number.isInteger(Number(e))}function j2(e){return b2.test(e)}function A2(){var e=lt("colors"),t=lt("spacing"),n=lt("blur"),r=lt("brightness"),o=lt("borderColor"),i=lt("borderRadius"),s=lt("borderSpacing"),l=lt("borderWidth"),c=lt("contrast"),u=lt("grayscale"),m=lt("hueRotate"),h=lt("invert"),g=lt("gap"),E=lt("gradientColorStops"),j=lt("gradientColorStopPositions"),C=lt("inset"),P=lt("margin"),S=lt("opacity"),b=lt("padding"),T=lt("saturate"),A=lt("scale"),$=lt("sepia"),Y=lt("skew"),K=lt("space"),_=lt("translate"),ae=function(){return["auto","contain","none"]},J=function(){return["auto","hidden","clip","visible","scroll"]},be=function(){return["auto",Ue,t]},ne=function(){return[Ue,t]},Oe=function(){return["",rr]},ie=function(){return["auto",ei,Ue]},Dt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},He=function(){return["solid","dashed","dotted","double","none"]},Ie=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},f=function(){return["start","end","center","between","around","evenly","stretch"]},re=function(){return["","0",Ue]},ve=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Me=function(){return[ei,jl]},Le=function(){return[ei,Ue]};return{cacheSize:500,theme:{colors:[Xs],spacing:[rr],blur:["none","",no,Ue],brightness:Me(),borderColor:[e],borderRadius:["none","","full",no,Ue],borderSpacing:ne(),borderWidth:Oe(),contrast:Me(),grayscale:re(),hueRotate:Le(),invert:re(),gap:ne(),gradientColorStops:[e],gradientColorStopPositions:[k2,Pf],inset:be(),margin:be(),opacity:Me(),padding:ne(),saturate:Me(),scale:Me(),sepia:re(),skew:Le(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[no]}],"break-after":[{"break-after":ve()}],"break-before":[{"break-before":ve()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Dt(),[Ue])}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:ae()}],"overscroll-x":[{"overscroll-x":ae()}],"overscroll-y":[{"overscroll-y":ae()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ys]}],basis:[{basis:be()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",Ys]}],"grid-cols":[{"grid-cols":[Xs]}],"col-start-end":[{col:["auto",{span:["full",Ys]},Ue]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Xs]}],"row-start-end":[{row:["auto",{span:[Ys]},Ue]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal"].concat(f())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(f(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(f(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[K]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[K]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ue,t]}],"min-w":[{"min-w":["min","max","fit",Ue,rr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[no]},no,Ue]}],h:[{h:[Ue,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ue,rr]}],"max-h":[{"max-h":[Ue,t,"min","max","fit"]}],"font-size":[{text:["base",no,Pf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jl]}],"font-family":[{font:[Xs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",ei,jl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ue,rr]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(He(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",rr]}],"underline-offset":[{"underline-offset":["auto",Ue,rr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Dt(),[T2])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",S2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},C2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[].concat(He(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:He()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(He())}],"outline-offset":[{"outline-offset":[Ue,rr]}],"outline-w":[{outline:[rr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[rr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",no,E2]}],"shadow-color":[{shadow:[Xs]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":Ie()}],"bg-blend":[{"bg-blend":Ie()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",no,Ue]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[T]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:Le()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:Le()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Ys,Ue]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[Y]}],"skew-y":[{"skew-y":[Y]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[rr,jl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var R2=g2(A2);function It(...e){return R2(hw(e))}const xw=p.createContext(void 0),ks=()=>{const e=p.useContext(xw);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},I2=({children:e})=>{const[t,n]=p.useState([]),r=p.useCallback(i=>{const s=Math.random().toString(36).substr(2,9),l={...i,id:s};n(u=>[...u,l]);const c=i.duration||5e3;setTimeout(()=>{o(s)},c)},[]),o=p.useCallback(i=>{n(s=>s.filter(l=>l.id!==i))},[]);return a.jsxs(xw.Provider,{value:{toasts:t,addToast:r,removeToast:o},children:[e,a.jsx(D2,{})]})},D2=()=>{const{toasts:e,removeToast:t}=ks(),n=o=>{switch(o){case"success":return a.jsx(hi,{className:"h-5 w-5 text-green-500"});case"error":return a.jsx(dw,{className:"h-5 w-5 text-red-500"});case"warning":return a.jsx(tw,{className:"h-5 w-5 text-yellow-500"});case"info":return a.jsx(iw,{className:"h-5 w-5 text-blue-500"})}},r=o=>{switch(o){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}};return a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(o=>a.jsxs("div",{className:It("flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-sm animate-in slide-in-from-right-full duration-300",r(o.type)),children:[n(o.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:o.title}),o.message&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.message})]}),a.jsx("button",{onClick:()=>t(o.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Ki,{className:"h-4 w-4"})})]},o.id))})},ww=p.createContext(void 0),eu=()=>{const e=p.useContext(ww);if(!e)throw new Error("useAuthContext must be used within an AuthProvider");return e},M2=({children:e})=>{const[t,n]=p.useState(!1),[r,o]=p.useState(null),[i,s]=p.useState(!0),[l,c]=p.useState(null),{addToast:u}=ks();p.useEffect(()=>{IN(),DN(),m()},[]);const m=async()=>{try{if(s(!0),!await nr.isAuthenticated()){s(!1);return}const S=await nr.getUser(),b=await nr.getAccessToken();if(!S||!b){await nr.clearAuth(),s(!1);return}ut.setToken(b);try{const T=await ut.getProfile();o(T.data.user),n(!0)}catch{await h()}}catch(P){console.error("Auth initialization failed:",P),await nr.clearAuth()}finally{s(!1)}},h=async()=>{try{const P=await nr.getRefreshToken();if(!P)throw new Error("No refresh token available");const S=await ut.refreshToken(P),b={accessToken:S.data.token,refreshToken:S.data.token,user:S.data.user,expiresAt:Date.now()+7*24*60*60*1e3};await nr.storeAuth(b),ut.setToken(S.data.token),o(S.data.user),n(!0)}catch(P){console.error("Token refresh failed:",P),await nr.clearAuth(),n(!1),o(null)}},g=async(P,S)=>{try{s(!0),c(null);const b=await ut.login(P,S),T={accessToken:b.data.token,refreshToken:b.data.token,user:b.data.user,expiresAt:Date.now()+7*24*60*60*1e3};await nr.storeAuth(T),ut.setToken(b.data.token),console.log("Login successful:",b.data.user),o(b.data.user),n(!0),u({type:"success",title:"Welcome back!",message:`Successfully logged in as ${b.data.user.email}`})}catch(b){console.error("Login failed:",b);const T=zg.parseBackendError(b);throw c(T),u({type:"error",title:"Login Failed",message:T}),b}finally{s(!1)}},E=async(P,S)=>{try{s(!0),c(null);const b=await ut.register(P,S),T={accessToken:b.data.token,refreshToken:b.data.token,user:b.data.user,expiresAt:Date.now()+7*24*60*60*1e3};await nr.storeAuth(T),ut.setToken(b.data.token),o(b.data.user),n(!0),u({type:"success",title:"Account Created!",message:`Welcome to StoryMaker AI, ${b.data.user.email}!`})}catch(b){console.error("Registration failed:",b);const T=zg.parseBackendError(b);throw c(T),u({type:"error",title:"Registration Failed",message:T}),b}finally{s(!1)}},j=async()=>{try{await ut.logout()}catch(P){console.error("Backend logout failed:",P)}finally{await nr.clearAuth(),ut.setToken(null),n(!1),o(null),u({type:"info",title:"Logged Out",message:"You have been successfully logged out"})}},C=()=>{c(null)};return a.jsx(ww.Provider,{value:{isAuthenticated:t,user:r,loading:i,error:l,login:g,register:E,logout:j,clearError:C},children:e})},Xg=({children:e})=>{const{isAuthenticated:t,loading:n}=eu();return n?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(ew,{to:"/login",replace:!0})},nm=p.createContext({});function rm(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const om=typeof window<"u",bw=om?p.useLayoutEffect:p.useEffect,tu=p.createContext(null);function im(e,t){e.indexOf(t)===-1&&e.push(t)}function sm(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const zr=(e,t,n)=>n>t?t:n<e?e:n;let am=()=>{};const Br={},Sw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Tw(e){return typeof e=="object"&&e!==null}const Cw=e=>/^0[^.\s]+$/u.test(e);function lm(e){let t;return()=>(t===void 0&&(t=e()),t)}const Gn=e=>e,L2=(e,t)=>n=>t(e(n)),Qa=(...e)=>e.reduce(L2),Fa=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class cm{constructor(){this.subscriptions=[]}add(t){return im(this.subscriptions,t),()=>sm(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nr=e=>e*1e3,Pr=e=>e/1e3;function kw(e,t){return t?e*(1e3/t):0}const Ew=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,$2=1e-7,F2=12;function O2(e,t,n,r,o){let i,s,l=0;do s=t+(n-t)/2,i=Ew(s,r,o)-e,i>0?n=s:t=s;while(Math.abs(i)>$2&&++l<F2);return s}function Za(e,t,n,r){if(e===t&&n===r)return Gn;const o=i=>O2(i,0,1,e,n);return i=>i===0||i===1?i:Ew(o(i),t,r)}const Nw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Pw=e=>t=>1-e(1-t),jw=Za(.33,1.53,.69,.99),um=Pw(jw),Aw=Nw(um),Rw=e=>(e*=2)<1?.5*um(e):.5*(2-Math.pow(2,-10*(e-1))),dm=e=>1-Math.sin(Math.acos(e)),Iw=Pw(dm),Dw=Nw(dm),V2=Za(.42,0,1,1),_2=Za(0,0,.58,1),Mw=Za(.42,0,.58,1),U2=e=>Array.isArray(e)&&typeof e[0]!="number",Lw=e=>Array.isArray(e)&&typeof e[0]=="number",z2={linear:Gn,easeIn:V2,easeInOut:Mw,easeOut:_2,circIn:dm,circInOut:Dw,circOut:Iw,backIn:um,backInOut:Aw,backOut:jw,anticipate:Rw},B2=e=>typeof e=="string",qg=e=>{if(Lw(e)){am(e.length===4);const[t,n,r,o]=e;return Za(t,n,r,o)}else if(B2(e))return z2[e];return e},Al=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Qg={value:null,addProjectionMetrics:null};function W2(e,t){let n=new Set,r=new Set,o=!1,i=!1;const s=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){s.has(h)&&(m.schedule(h),e()),c++,h(l)}const m={schedule:(h,g=!1,E=!1)=>{const C=E&&o?n:r;return g&&s.add(h),C.has(h)||C.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(l=h,o){i=!0;return}o=!0,[n,r]=[r,n],n.forEach(u),t&&Qg.value&&Qg.value.frameloop[t].push(c),c=0,n.clear(),o=!1,i&&(i=!1,m.process(h))}};return m}const G2=40;function $w(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=Al.reduce((T,A)=>(T[A]=W2(i,t?A:void 0),T),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:m,update:h,preRender:g,render:E,postRender:j}=s,C=()=>{const T=Br.useManualTiming?o.timestamp:performance.now();n=!1,Br.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(T-o.timestamp,G2),1)),o.timestamp=T,o.isProcessing=!0,l.process(o),c.process(o),u.process(o),m.process(o),h.process(o),g.process(o),E.process(o),j.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(C))},P=()=>{n=!0,r=!0,o.isProcessing||e(C)};return{schedule:Al.reduce((T,A)=>{const $=s[A];return T[A]=(Y,K=!1,_=!1)=>(n||P(),$.schedule(Y,K,_)),T},{}),cancel:T=>{for(let A=0;A<Al.length;A++)s[Al[A]].cancel(T)},state:o,steps:s}}const{schedule:yt,cancel:No,state:Xt,steps:id}=$w(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gn,!0);let Zl;function H2(){Zl=void 0}const Tn={now:()=>(Zl===void 0&&Tn.set(Xt.isProcessing||Br.useManualTiming?Xt.timestamp:performance.now()),Zl),set:e=>{Zl=e,queueMicrotask(H2)}},Fw=e=>t=>typeof t=="string"&&t.startsWith(e),fm=Fw("--"),K2=Fw("var(--"),hm=e=>K2(e)?Y2.test(e.split("/*")[0].trim()):!1,Y2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Es={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oa={...Es,transform:e=>zr(0,1,e)},Rl={...Es,default:1},da=e=>Math.round(e*1e5)/1e5,mm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function X2(e){return e==null}const q2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pm=(e,t)=>n=>!!(typeof n=="string"&&q2.test(n)&&n.startsWith(e)||t&&!X2(n)&&Object.prototype.hasOwnProperty.call(n,t)),Ow=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,i,s,l]=r.match(mm);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(s),alpha:l!==void 0?parseFloat(l):1}},Q2=e=>zr(0,255,e),sd={...Es,transform:e=>Math.round(Q2(e))},ti={test:pm("rgb","red"),parse:Ow("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+sd.transform(e)+", "+sd.transform(t)+", "+sd.transform(n)+", "+da(Oa.transform(r))+")"};function Z2(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const jf={test:pm("#"),parse:Z2,transform:ti.transform},Ja=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ro=Ja("deg"),jr=Ja("%"),Ne=Ja("px"),J2=Ja("vh"),eP=Ja("vw"),Zg=(()=>({...jr,parse:e=>jr.parse(e)/100,transform:e=>jr.transform(e*100)}))(),Yi={test:pm("hsl","hue"),parse:Ow("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+jr.transform(da(t))+", "+jr.transform(da(n))+", "+da(Oa.transform(r))+")"},$t={test:e=>ti.test(e)||jf.test(e)||Yi.test(e),parse:e=>ti.test(e)?ti.parse(e):Yi.test(e)?Yi.parse(e):jf.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ti.transform(e):Yi.transform(e),getAnimatableNone:e=>{const t=$t.parse(e);return t.alpha=0,$t.transform(t)}},tP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nP(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(mm))==null?void 0:t.length)||0)+(((n=e.match(tP))==null?void 0:n.length)||0)>0}const Vw="number",_w="color",rP="var",oP="var(",Jg="${}",iP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const l=t.replace(iP,c=>($t.test(c)?(r.color.push(i),o.push(_w),n.push($t.parse(c))):c.startsWith(oP)?(r.var.push(i),o.push(rP),n.push(c)):(r.number.push(i),o.push(Vw),n.push(parseFloat(c))),++i,Jg)).split(Jg);return{values:n,split:l,indexes:r,types:o}}function Uw(e){return Va(e).values}function zw(e){const{split:t,types:n}=Va(e),r=t.length;return o=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],o[s]!==void 0){const l=n[s];l===Vw?i+=da(o[s]):l===_w?i+=$t.transform(o[s]):i+=o[s]}return i}}const sP=e=>typeof e=="number"?0:$t.test(e)?$t.getAnimatableNone(e):e;function aP(e){const t=Uw(e);return zw(e)(t.map(sP))}const Po={test:nP,parse:Uw,createTransformer:zw,getAnimatableNone:aP};function ad(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lP({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,s=0;if(!t)o=i=s=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;o=ad(c,l,e+1/3),i=ad(c,l,e),s=ad(c,l,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function Ac(e,t){return n=>n>0?t:e}const xt=(e,t,n)=>e+(t-e)*n,ld=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},cP=[jf,ti,Yi],uP=e=>cP.find(t=>t.test(e));function ey(e){const t=uP(e);if(!t)return!1;let n=t.parse(e);return t===Yi&&(n=lP(n)),n}const ty=(e,t)=>{const n=ey(e),r=ey(t);if(!n||!r)return Ac(e,t);const o={...n};return i=>(o.red=ld(n.red,r.red,i),o.green=ld(n.green,r.green,i),o.blue=ld(n.blue,r.blue,i),o.alpha=xt(n.alpha,r.alpha,i),ti.transform(o))},Af=new Set(["none","hidden"]);function dP(e,t){return Af.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function fP(e,t){return n=>xt(e,t,n)}function gm(e){return typeof e=="number"?fP:typeof e=="string"?hm(e)?Ac:$t.test(e)?ty:pP:Array.isArray(e)?Bw:typeof e=="object"?$t.test(e)?ty:hP:Ac}function Bw(e,t){const n=[...e],r=n.length,o=e.map((i,s)=>gm(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=o[s](i);return n}}function hP(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=gm(e[o])(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}}function mP(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const i=t.types[o],s=e.indexes[i][r[i]],l=e.values[s]??0;n[o]=l,r[i]++}return n}const pP=(e,t)=>{const n=Po.createTransformer(t),r=Va(e),o=Va(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?Af.has(e)&&!o.values.length||Af.has(t)&&!r.values.length?dP(e,t):Qa(Bw(mP(r,o),o.values),n):Ac(e,t)};function Ww(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?xt(e,t,n):gm(e)(e,t)}const gP=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>yt.update(t,n),stop:()=>No(t),now:()=>Xt.isProcessing?Xt.timestamp:Tn.now()}},Gw=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let i=0;i<o;i++)r+=Math.round(e(i/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Rc=2e4;function ym(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Rc;)t+=n,r=e.next(t);return t>=Rc?1/0:t}function yP(e,t=100,n){const r=n({...e,keyframes:[0,t]}),o=Math.min(ym(r),Rc);return{type:"keyframes",ease:i=>r.next(o*i).value/t,duration:Pr(o)}}const vP=5;function Hw(e,t,n){const r=Math.max(t-vP,0);return kw(n-e(r),t-r)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cd=.001;function xP({duration:e=Nt.duration,bounce:t=Nt.bounce,velocity:n=Nt.velocity,mass:r=Nt.mass}){let o,i,s=1-t;s=zr(Nt.minDamping,Nt.maxDamping,s),e=zr(Nt.minDuration,Nt.maxDuration,Pr(e)),s<1?(o=u=>{const m=u*s,h=m*e,g=m-n,E=Rf(u,s),j=Math.exp(-h);return cd-g/E*j},i=u=>{const h=u*s*e,g=h*n+n,E=Math.pow(s,2)*Math.pow(u,2)*e,j=Math.exp(-h),C=Rf(Math.pow(u,2),s);return(-o(u)+cd>0?-1:1)*((g-E)*j)/C}):(o=u=>{const m=Math.exp(-u*e),h=(u-n)*e+1;return-cd+m*h},i=u=>{const m=Math.exp(-u*e),h=(n-u)*(e*e);return m*h});const l=5/e,c=bP(o,i,l);if(e=Nr(e),isNaN(c))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const wP=12;function bP(e,t,n){let r=n;for(let o=1;o<wP;o++)r=r-e(r)/t(r);return r}function Rf(e,t){return e*Math.sqrt(1-t*t)}const SP=["duration","bounce"],TP=["stiffness","damping","mass"];function ny(e,t){return t.some(n=>e[n]!==void 0)}function CP(e){let t={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...e};if(!ny(e,TP)&&ny(e,SP))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,i=2*zr(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:Nt.mass,stiffness:o,damping:i}}else{const n=xP(e);t={...t,...n,mass:Nt.mass},t.isResolvedFromDuration=!0}return t}function Ic(e=Nt.visualDuration,t=Nt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:m,duration:h,velocity:g,isResolvedFromDuration:E}=CP({...n,velocity:-Pr(n.velocity||0)}),j=g||0,C=u/(2*Math.sqrt(c*m)),P=s-i,S=Pr(Math.sqrt(c/m)),b=Math.abs(P)<5;r||(r=b?Nt.restSpeed.granular:Nt.restSpeed.default),o||(o=b?Nt.restDelta.granular:Nt.restDelta.default);let T;if(C<1){const $=Rf(S,C);T=Y=>{const K=Math.exp(-C*S*Y);return s-K*((j+C*S*P)/$*Math.sin($*Y)+P*Math.cos($*Y))}}else if(C===1)T=$=>s-Math.exp(-S*$)*(P+(j+S*P)*$);else{const $=S*Math.sqrt(C*C-1);T=Y=>{const K=Math.exp(-C*S*Y),_=Math.min($*Y,300);return s-K*((j+C*S*P)*Math.sinh(_)+$*P*Math.cosh(_))/$}}const A={calculatedDuration:E&&h||null,next:$=>{const Y=T($);if(E)l.done=$>=h;else{let K=$===0?j:0;C<1&&(K=$===0?Nr(j):Hw(T,$,Y));const _=Math.abs(K)<=r,ae=Math.abs(s-Y)<=o;l.done=_&&ae}return l.value=l.done?s:Y,l},toString:()=>{const $=Math.min(ym(A),Rc),Y=Gw(K=>A.next($*K).value,$,30);return $+"ms "+Y},toTransition:()=>{}};return A}Ic.applyToOptions=e=>{const t=yP(e,100,Ic);return e.ease=t.ease,e.duration=Nr(t.duration),e.type="keyframes",e};function If({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:s,min:l,max:c,restDelta:u=.5,restSpeed:m}){const h=e[0],g={done:!1,value:h},E=_=>l!==void 0&&_<l||c!==void 0&&_>c,j=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let C=n*t;const P=h+C,S=s===void 0?P:s(P);S!==P&&(C=S-h);const b=_=>-C*Math.exp(-_/r),T=_=>S+b(_),A=_=>{const ae=b(_),J=T(_);g.done=Math.abs(ae)<=u,g.value=g.done?S:J};let $,Y;const K=_=>{E(g.value)&&($=_,Y=Ic({keyframes:[g.value,j(g.value)],velocity:Hw(T,_,g.value),damping:o,stiffness:i,restDelta:u,restSpeed:m}))};return K(0),{calculatedDuration:null,next:_=>{let ae=!1;return!Y&&$===void 0&&(ae=!0,A(_),K(_)),$!==void 0&&_>=$?Y.next(_-$):(!ae&&A(_),g)}}}function kP(e,t,n){const r=[],o=n||Br.mix||Ww,i=e.length-1;for(let s=0;s<i;s++){let l=o(e[s],e[s+1]);if(t){const c=Array.isArray(t)?t[s]||Gn:t;l=Qa(c,l)}r.push(l)}return r}function EP(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(am(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=kP(t,r,o),c=l.length,u=m=>{if(s&&m<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(m<e[h+1]);h++);const g=Fa(e[h],e[h+1],m);return l[h](g)};return n?m=>u(zr(e[0],e[i-1],m)):u}function NP(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Fa(0,t,r);e.push(xt(n,1,o))}}function PP(e){const t=[0];return NP(t,e.length-1),t}function jP(e,t){return e.map(n=>n*t)}function AP(e,t){return e.map(()=>t||Mw).splice(0,e.length-1)}function fa({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=U2(r)?r.map(qg):qg(r),i={done:!1,value:t[0]},s=jP(n&&n.length===t.length?n:PP(t),e),l=EP(s,t,{ease:Array.isArray(o)?o:AP(t,o)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const RP=e=>e!==null;function vm(e,{repeat:t,repeatType:n="loop"},r,o=1){const i=e.filter(RP),l=o<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const IP={decay:If,inertia:If,tween:fa,keyframes:fa,spring:Ic};function Kw(e){typeof e.type=="string"&&(e.type=IP[e.type])}class xm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const DP=e=>e/100;class wm extends xm{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:n}=this.options;n&&n.updatedAt!==Tn.now()&&this.tick(Tn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Kw(t);const{type:n=fa,repeat:r=0,repeatDelay:o=0,repeatType:i,velocity:s=0}=t;let{keyframes:l}=t;const c=n||fa;c!==fa&&typeof l[0]!="number"&&(this.mixKeyframes=Qa(DP,Ww(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=ym(u));const{calculatedDuration:m}=u;this.calculatedDuration=m,this.resolvedDuration=m+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:o,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:m,repeat:h,repeatType:g,repeatDelay:E,type:j,onUpdate:C,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?S<0:S>o;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let T=this.currentTime,A=r;if(h){const _=Math.min(this.currentTime,o)/l;let ae=Math.floor(_),J=_%1;!J&&_>=1&&(J=1),J===1&&ae--,ae=Math.min(ae,h+1),!!(ae%2)&&(g==="reverse"?(J=1-J,E&&(J-=E/l)):g==="mirror"&&(A=s)),T=zr(0,1,J)*l}const $=b?{done:!1,value:m[0]}:A.next(T);i&&($.value=i($.value));let{done:Y}=$;!b&&c!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const K=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return K&&j!==If&&($.value=vm(m,this.options,P,this.speed)),C&&C($.value),K&&this.finish(),$}then(t,n){return this.finished.then(t,n)}get duration(){return Pr(this.calculatedDuration)}get time(){return Pr(this.currentTime)}set time(t){var n;t=Nr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Tn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Pr(this.currentTime))}play(){var o,i;if(this.isStopped)return;const{driver:t=gP,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),(i=(o=this.options).onPlay)==null||i.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function MP(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ni=e=>e*180/Math.PI,Df=e=>{const t=ni(Math.atan2(e[1],e[0]));return Mf(t)},LP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Df,rotateZ:Df,skewX:e=>ni(Math.atan(e[1])),skewY:e=>ni(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Mf=e=>(e=e%360,e<0&&(e+=360),e),ry=Df,oy=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),iy=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),$P={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oy,scaleY:iy,scale:e=>(oy(e)+iy(e))/2,rotateX:e=>Mf(ni(Math.atan2(e[6],e[5]))),rotateY:e=>Mf(ni(Math.atan2(-e[2],e[0]))),rotateZ:ry,rotate:ry,skewX:e=>ni(Math.atan(e[4])),skewY:e=>ni(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Lf(e){return e.includes("scale")?1:0}function $f(e,t){if(!e||e==="none")return Lf(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=$P,o=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=LP,o=l}if(!o)return Lf(t);const i=r[t],s=o[1].split(",").map(OP);return typeof i=="function"?i(s):s[i]}const FP=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return $f(n,t)};function OP(e){return parseFloat(e.trim())}const Ns=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ps=(()=>new Set(Ns))(),sy=e=>e===Es||e===Ne,VP=new Set(["x","y","z"]),_P=Ns.filter(e=>!VP.has(e));function UP(e){const t=[];return _P.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const si={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>$f(t,"x"),y:(e,{transform:t})=>$f(t,"y")};si.translateX=si.x;si.translateY=si.y;const ai=new Set;let Ff=!1,Of=!1,Vf=!1;function Yw(){if(Of){const e=Array.from(ai).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=UP(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([i,s])=>{var l;(l=r.getValue(i))==null||l.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Of=!1,Ff=!1,ai.forEach(e=>e.complete(Vf)),ai.clear()}function Xw(){ai.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Of=!0)})}function zP(){Vf=!0,Xw(),Yw(),Vf=!1}class bm{constructor(t,n,r,o,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(ai.add(this),Ff||(Ff=!0,yt.read(Xw),yt.resolveKeyframes(Yw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;if(t[0]===null){const i=o==null?void 0:o.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,s);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=s),o&&i===void 0&&o.set(t[0])}MP(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ai.delete(this)}cancel(){this.state==="scheduled"&&(ai.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const BP=e=>e.startsWith("--");function WP(e,t,n){BP(t)?e.style.setProperty(t,n):e.style[t]=n}const GP=lm(()=>window.ScrollTimeline!==void 0),HP={};function KP(e,t){const n=lm(e);return()=>HP[t]??n()}const qw=KP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ta=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,ay={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ta([0,.65,.55,1]),circOut:ta([.55,0,1,.45]),backIn:ta([.31,.01,.66,-.59]),backOut:ta([.33,1.53,.69,.99])};function Qw(e,t){if(e)return typeof e=="function"?qw()?Gw(e,t):"ease-out":Lw(e)?ta(e):Array.isArray(e)?e.map(n=>Qw(n,t)||ay.easeOut):ay[e]}function YP(e,t,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:s="loop",ease:l="easeOut",times:c}={},u=void 0){const m={[t]:n};c&&(m.offset=c);const h=Qw(l,o);Array.isArray(h)&&(m.easing=h);const g={delay:r,duration:o,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),e.animate(m,g)}function Zw(e){return typeof e=="function"&&"applyToOptions"in e}function XP({type:e,...t}){return Zw(e)&&qw()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class qP extends xm{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:o,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,am(typeof t.type!="string");const u=XP(t);this.animation=YP(n,r,o,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=vm(o,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):WP(n,r,m),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Pr(Number(t))}get time(){return Pr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Nr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&GP()?(this.animation.timeline=t,Gn):n(this)}}const Jw={anticipate:Rw,backInOut:Aw,circInOut:Dw};function QP(e){return e in Jw}function ZP(e){typeof e.ease=="string"&&QP(e.ease)&&(e.ease=Jw[e.ease])}const ly=10;class JP extends qP{constructor(t){ZP(t),Kw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:o,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new wm({...s,autoplay:!1}),c=Nr(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-ly).value,l.sample(c).value,ly),l.stop()}}const cy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Po.test(e)||e==="0")&&!e.startsWith("url("));function ej(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function tj(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=cy(o,t),l=cy(i,t);return!s||!l?!1:ej(e)||(n==="spring"||Zw(n))&&r}function Sm(e){return Tw(e)&&"offsetHeight"in e}const nj=new Set(["opacity","clipPath","filter","transform"]),rj=lm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oj(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:o,damping:i,type:s}=e;if(!Sm((u=t==null?void 0:t.owner)==null?void 0:u.current))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return rj()&&n&&nj.has(n)&&(n!=="transform"||!c)&&!l&&!r&&o!=="mirror"&&i!==0&&s!=="inertia"}const ij=40;class sj extends xm{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s="loop",keyframes:l,name:c,motionValue:u,element:m,...h}){var j;super(),this.stop=()=>{var C,P;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=Tn.now();const g={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:i,repeatType:s,name:c,motionValue:u,element:m,...h},E=(m==null?void 0:m.KeyframeResolver)||bm;this.keyframeResolver=new E(l,(C,P,S)=>this.onKeyframesResolved(C,P,g,!S),c,u,m),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(t,n,r,o){this.keyframeResolver=void 0;const{name:i,type:s,velocity:l,delay:c,isHandoff:u,onUpdate:m}=r;this.resolvedAt=Tn.now(),tj(t,i,s,l)||((Br.instantAnimations||!c)&&(m==null||m(vm(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const g={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>ij?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},E=!u&&oj(g)?new JP({...g,element:g.motionValue.owner.current}):new wm(g);E.finished.then(()=>this.notifyFinished()).catch(Gn),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),zP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const aj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lj(e){const t=aj.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function eb(e,t,n=1){const[r,o]=lj(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return Sw(s)?parseFloat(s):s}return hm(o)?eb(o,t,n+1):o}function Tm(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const tb=new Set(["width","height","top","left","right","bottom",...Ns]),cj={test:e=>e==="auto",parse:e=>e},nb=e=>t=>t.test(e),rb=[Es,Ne,jr,ro,eP,J2,cj],uy=e=>rb.find(nb(e));function uj(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Cw(e):!0}const dj=new Set(["brightness","contrast","saturate","opacity"]);function fj(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(mm)||[];if(!r)return e;const o=n.replace(r,"");let i=dj.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const hj=/\b([a-z-]*)\(.*?\)/gu,_f={...Po,getAnimatableNone:e=>{const t=e.match(hj);return t?t.map(fj).join(" "):e}},dy={...Es,transform:Math.round},mj={rotate:ro,rotateX:ro,rotateY:ro,rotateZ:ro,scale:Rl,scaleX:Rl,scaleY:Rl,scaleZ:Rl,skew:ro,skewX:ro,skewY:ro,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Oa,originX:Zg,originY:Zg,originZ:Ne},Cm={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...mj,zIndex:dy,fillOpacity:Oa,strokeOpacity:Oa,numOctaves:dy},pj={...Cm,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:_f,WebkitFilter:_f},ob=e=>pj[e];function ib(e,t){let n=ob(e);return n!==_f&&(n=Po),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const gj=new Set(["auto","none","0"]);function yj(e,t,n){let r=0,o;for(;r<e.length&&!o;){const i=e[r];typeof i=="string"&&!gj.has(i)&&Va(i).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=ib(n,o)}class vj extends bm{constructor(t,n,r,o,i){super(t,n,r,o,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),hm(u))){const m=eb(u,n.current);m!==void 0&&(t[c]=m),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!tb.has(r)||t.length!==2)return;const[o,i]=t,s=uy(o),l=uy(i);if(s!==l)if(sy(s)&&sy(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else si[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||uj(t[o]))&&r.push(o);r.length&&yj(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=si[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=si[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function xj(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const o=(n==null?void 0:n[e])??r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const sb=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fy=30,wj=e=>!isNaN(parseFloat(e));class bj{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var s,l;const i=Tn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();o&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Tn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=wj(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new cm);const r=this.events[t].add(n);return t==="change"?()=>{r(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>fy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fy);return kw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ps(e,t){return new bj(e,t)}const{schedule:km,cancel:gL}=$w(queueMicrotask,!1),ir={x:!1,y:!1};function ab(){return ir.x||ir.y}function Sj(e){return e==="x"||e==="y"?ir[e]?null:(ir[e]=!0,()=>{ir[e]=!1}):ir.x||ir.y?null:(ir.x=ir.y=!0,()=>{ir.x=ir.y=!1})}function lb(e,t){const n=xj(e),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[n,o,()=>r.abort()]}function hy(e){return!(e.pointerType==="touch"||ab())}function Tj(e,t,n={}){const[r,o,i]=lb(e,n),s=l=>{if(!hy(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const m=h=>{hy(h)&&(u(h),c.removeEventListener("pointerleave",m))};c.addEventListener("pointerleave",m,o)};return r.forEach(l=>{l.addEventListener("pointerenter",s,o)}),i}const cb=(e,t)=>t?e===t?!0:cb(e,t.parentElement):!1,Em=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Cj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kj(e){return Cj.has(e.tagName)||e.tabIndex!==-1}const Jl=new WeakSet;function my(e){return t=>{t.key==="Enter"&&e(t)}}function ud(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ej=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=my(()=>{if(Jl.has(n))return;ud(n,"down");const o=my(()=>{ud(n,"up")}),i=()=>ud(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function py(e){return Em(e)&&!ab()}function Nj(e,t,n={}){const[r,o,i]=lb(e,n),s=l=>{const c=l.currentTarget;if(!py(l))return;Jl.add(c);const u=t(c,l),m=(E,j)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),Jl.has(c)&&Jl.delete(c),py(E)&&typeof u=="function"&&u(E,{success:j})},h=E=>{m(E,c===window||c===document||n.useGlobalTarget||cb(c,E.target))},g=E=>{m(E,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",g,o)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",s,o),Sm(l)&&(l.addEventListener("focus",u=>Ej(u,o)),!kj(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function ub(e){return Tw(e)&&"ownerSVGElement"in e}function Pj(e){return ub(e)&&e.tagName==="svg"}const sn=e=>!!(e&&e.getVelocity),jj=[...rb,$t,Po],Aj=e=>jj.find(nb(e)),Nm=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Rj extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=Sm(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ij({children:e,isPresent:t,anchorX:n,root:r}){const o=p.useId(),i=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(Nm);return p.useInsertionEffect(()=>{const{width:c,height:u,top:m,left:h,right:g}=s.current;if(t||!i.current||!c||!u)return;const E=n==="left"?`left: ${h}`:`right: ${g}`;i.current.dataset.motionPopId=o;const j=document.createElement("style");l&&(j.nonce=l);const C=r??document.head;return C.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${E}px !important;
            top: ${m}px !important;
          }
        `),()=>{C.removeChild(j),C.contains(j)&&C.removeChild(j)}},[t]),a.jsx(Rj,{isPresent:t,childRef:i,sizeRef:s,children:p.cloneElement(e,{ref:i})})}const Dj=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:s,anchorX:l,root:c})=>{const u=rm(Mj),m=p.useId();let h=!0,g=p.useMemo(()=>(h=!1,{id:m,initial:t,isPresent:n,custom:o,onExitComplete:E=>{u.set(E,!0);for(const j of u.values())if(!j)return;r&&r()},register:E=>(u.set(E,!1),()=>u.delete(E))}),[n,u,r]);return i&&h&&(g={...g}),p.useMemo(()=>{u.forEach((E,j)=>u.set(j,!1))},[n]),p.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(e=a.jsx(Ij,{isPresent:n,anchorX:l,root:c,children:e})),a.jsx(tu.Provider,{value:g,children:e})};function Mj(){return new Map}function db(e=!0){const t=p.useContext(tu);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,i=p.useId();p.useEffect(()=>{if(e)return o(i)},[e]);const s=p.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const Il=e=>e.key||"";function gy(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const yy=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:i="sync",propagate:s=!1,anchorX:l="left",root:c})=>{const[u,m]=db(s),h=p.useMemo(()=>gy(e),[e]),g=s&&!u?[]:h.map(Il),E=p.useRef(!0),j=p.useRef(h),C=rm(()=>new Map),[P,S]=p.useState(h),[b,T]=p.useState(h);bw(()=>{E.current=!1,j.current=h;for(let Y=0;Y<b.length;Y++){const K=Il(b[Y]);g.includes(K)?C.delete(K):C.get(K)!==!0&&C.set(K,!1)}},[b,g.length,g.join("-")]);const A=[];if(h!==P){let Y=[...h];for(let K=0;K<b.length;K++){const _=b[K],ae=Il(_);g.includes(ae)||(Y.splice(K,0,_),A.push(_))}return i==="wait"&&A.length&&(Y=A),T(gy(Y)),S(h),null}const{forceRender:$}=p.useContext(nm);return a.jsx(a.Fragment,{children:b.map(Y=>{const K=Il(Y),_=s&&!u?!1:h===b||g.includes(K),ae=()=>{if(C.has(K))C.set(K,!0);else return;let J=!0;C.forEach(be=>{be||(J=!1)}),J&&($==null||$(),T(j.current),s&&(m==null||m()),r&&r())};return a.jsx(Dj,{isPresent:_,initial:!E.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:c,onExitComplete:_?void 0:ae,anchorX:l,children:Y},K)})})},fb=p.createContext({strict:!1}),vy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gs={};for(const e in vy)gs[e]={isEnabled:t=>vy[e].some(n=>!!t[n])};function Lj(e){for(const t in e)gs[t]={...gs[t],...e[t]}}const $j=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$j.has(e)}let hb=e=>!Dc(e);function Fj(e){typeof e=="function"&&(hb=t=>t.startsWith("on")?!Dc(t):e(t))}try{Fj(require("@emotion/is-prop-valid").default)}catch{}function Oj(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(hb(o)||n===!0&&Dc(o)||!t&&!Dc(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function Vj(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}const nu=p.createContext({});function ru(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function _a(e){return typeof e=="string"||Array.isArray(e)}const Pm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jm=["initial",...Pm];function ou(e){return ru(e.animate)||jm.some(t=>_a(e[t]))}function mb(e){return!!(ou(e)||e.variants)}function _j(e,t){if(ou(e)){const{initial:n,animate:r}=e;return{initial:n===!1||_a(n)?n:void 0,animate:_a(r)?r:void 0}}return e.inherit!==!1?t:{}}function Uj(e){const{initial:t,animate:n}=_j(e,p.useContext(nu));return p.useMemo(()=>({initial:t,animate:n}),[xy(t),xy(n)])}function xy(e){return Array.isArray(e)?e.join(" "):e}const zj=Symbol.for("motionComponentSymbol");function Xi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Bj(e,t,n){return p.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xi(n)&&(n.current=r))},[t])}const Am=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Wj="framerAppearId",pb="data-"+Am(Wj),gb=p.createContext({});function Gj(e,t,n,r,o){var C,P;const{visualElement:i}=p.useContext(nu),s=p.useContext(fb),l=p.useContext(tu),c=p.useContext(Nm).reducedMotion,u=p.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const m=u.current,h=p.useContext(gb);m&&!m.projection&&o&&(m.type==="html"||m.type==="svg")&&Hj(u.current,n,o,h);const g=p.useRef(!1);p.useInsertionEffect(()=>{m&&g.current&&m.update(n,l)});const E=n[pb],j=p.useRef(!!E&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,E))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,E)));return bw(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),km.render(m.render),j.current&&m.animationState&&m.animationState.animateChanges())}),p.useEffect(()=>{m&&(!j.current&&m.animationState&&m.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,E)}),j.current=!1))}),m}function Hj(e,t,n,r){const{layoutId:o,layout:i,drag:s,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:m}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:yb(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!s||l&&Xi(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:c,layoutRoot:u})}function yb(e){if(e)return e.options.allowProjection!==!1?e.projection:yb(e.parent)}function Kj({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&Lj(e);function i(l,c){let u;const m={...p.useContext(Nm),...l,layoutId:Yj(l)},{isStatic:h}=m,g=Uj(l),E=r(l,h);if(!h&&om){Xj();const j=qj(m);u=j.MeasureLayout,g.visualElement=Gj(o,E,m,t,j.ProjectionNode)}return a.jsxs(nu.Provider,{value:g,children:[u&&g.visualElement?a.jsx(u,{visualElement:g.visualElement,...m}):null,n(o,l,Bj(E,g.visualElement,c),E,h,g.visualElement)]})}i.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const s=p.forwardRef(i);return s[zj]=o,s}function Yj({layoutId:e}){const t=p.useContext(nm).id;return t&&e!==void 0?t+"-"+e:e}function Xj(e,t){p.useContext(fb).strict}function qj(e){const{drag:t,layout:n}=gs;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Ua={};function Qj(e){for(const t in e)Ua[t]=e[t],fm(t)&&(Ua[t].isCSSVariable=!0)}function vb(e,{layout:t,layoutId:n}){return Ps.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ua[e]||e==="opacity")}const Zj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jj=Ns.length;function eA(e,t,n){let r="",o=!0;for(let i=0;i<Jj;i++){const s=Ns[i],l=e[s];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(s.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=sb(l,Cm[s]);if(!c){o=!1;const m=Zj[s]||s;r+=`${m}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function Rm(e,t,n){const{style:r,vars:o,transformOrigin:i}=e;let s=!1,l=!1;for(const c in t){const u=t[c];if(Ps.has(c)){s=!0;continue}else if(fm(c)){o[c]=u;continue}else{const m=sb(u,Cm[c]);c.startsWith("origin")?(l=!0,i[c]=m):r[c]=m}}if(t.transform||(s||n?r.transform=eA(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:m=0}=i;r.transformOrigin=`${c} ${u} ${m}`}}const Im=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xb(e,t,n){for(const r in t)!sn(t[r])&&!vb(r,n)&&(e[r]=t[r])}function tA({transformTemplate:e},t){return p.useMemo(()=>{const n=Im();return Rm(n,t,e),Object.assign({},n.vars,n.style)},[t])}function nA(e,t){const n=e.style||{},r={};return xb(r,n,e),Object.assign(r,tA(e,t)),r}function rA(e,t){const n={},r=nA(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const oA={offset:"stroke-dashoffset",array:"stroke-dasharray"},iA={offset:"strokeDashoffset",array:"strokeDasharray"};function sA(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?oA:iA;e[i.offset]=Ne.transform(-r);const s=Ne.transform(t),l=Ne.transform(n);e[i.array]=`${s} ${l}`}function wb(e,{attrX:t,attrY:n,attrScale:r,pathLength:o,pathSpacing:i=1,pathOffset:s=0,...l},c,u,m){if(Rm(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g}=e;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&sA(h,o,i,s,!1)}const bb=()=>({...Im(),attrs:{}}),Sb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function aA(e,t,n,r){const o=p.useMemo(()=>{const i=bb();return wb(i,t,Sb(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};xb(i,e.style,e),o.style={...i,...o.style}}return o}const lA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dm(e){return typeof e!="string"||e.includes("-")?!1:!!(lA.indexOf(e)>-1||/[A-Z]/u.test(e))}function cA(e=!1){return(n,r,o,{latestValues:i},s)=>{const c=(Dm(n)?aA:rA)(r,i,s,n),u=Oj(r,typeof n=="string",e),m=n!==p.Fragment?{...u,...c,ref:o}:{},{children:h}=r,g=p.useMemo(()=>sn(h)?h.get():h,[h]);return p.createElement(n,{...m,children:g})}}function wy(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Mm(e,t,n,r){if(typeof t=="function"){const[o,i]=wy(r);t=t(n!==void 0?n:e.custom,o,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,i]=wy(r);t=t(n!==void 0?n:e.custom,o,i)}return t}function ec(e){return sn(e)?e.get():e}function uA({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,o){return{latestValues:dA(n,r,o,e),renderState:t()}}const Tb=e=>(t,n)=>{const r=p.useContext(nu),o=p.useContext(tu),i=()=>uA(e,t,r,o);return n?i():rm(i)};function dA(e,t,n,r){const o={},i=r(e,{});for(const g in i)o[g]=ec(i[g]);let{initial:s,animate:l}=e;const c=ou(e),u=mb(e);t&&u&&!c&&e.inherit!==!1&&(s===void 0&&(s=t.initial),l===void 0&&(l=t.animate));let m=n?n.initial===!1:!1;m=m||s===!1;const h=m?l:s;if(h&&typeof h!="boolean"&&!ru(h)){const g=Array.isArray(h)?h:[h];for(let E=0;E<g.length;E++){const j=Mm(e,g[E]);if(j){const{transitionEnd:C,transition:P,...S}=j;for(const b in S){let T=S[b];if(Array.isArray(T)){const A=m?T.length-1:0;T=T[A]}T!==null&&(o[b]=T)}for(const b in C)o[b]=C[b]}}}return o}function Lm(e,t,n){var i;const{style:r}=e,o={};for(const s in r)(sn(r[s])||t.style&&sn(t.style[s])||vb(s,e)||((i=n==null?void 0:n.getValue(s))==null?void 0:i.liveStyle)!==void 0)&&(o[s]=r[s]);return o}const fA={useVisualState:Tb({scrapeMotionValuesFromProps:Lm,createRenderState:Im})};function Cb(e,t,n){const r=Lm(e,t,n);for(const o in e)if(sn(e[o])||sn(t[o])){const i=Ns.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[i]=e[o]}return r}const hA={useVisualState:Tb({scrapeMotionValuesFromProps:Cb,createRenderState:bb})};function mA(e,t){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const s={...Dm(r)?hA:fA,preloadedFeatures:e,useRender:cA(o),createVisualElement:t,Component:r};return Kj(s)}}function za(e,t,n){const r=e.getProps();return Mm(r,t,n!==void 0?n:r.custom,e)}const Uf=e=>Array.isArray(e);function pA(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ps(n))}function gA(e){return Uf(e)?e[e.length-1]||0:e}function yA(e,t){const n=za(e,t);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const s in i){const l=gA(i[s]);pA(e,s,l)}}function vA(e){return!!(sn(e)&&e.add)}function zf(e,t){const n=e.getValue("willChange");if(vA(n))return n.add(t);if(!n&&Br.WillChange){const r=new Br.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function kb(e){return e.props[pb]}const xA=e=>e!==null;function wA(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(xA),i=t&&n!=="loop"&&t%2===1?0:o.length-1;return!i||r===void 0?o[i]:r}const bA={type:"spring",stiffness:500,damping:25,restSpeed:10},SA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),TA={type:"keyframes",duration:.8},CA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kA=(e,{keyframes:t})=>t.length>2?TA:Ps.has(e)?e.startsWith("scale")?SA(t[1]):bA:CA;function EA({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:s,repeatDelay:l,from:c,elapsed:u,...m}){return!!Object.keys(m).length}const $m=(e,t,n,r={},o,i)=>s=>{const l=Tm(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Nr(c);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{s(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:o};EA(l)||Object.assign(m,kA(e,m)),m.duration&&(m.duration=Nr(m.duration)),m.repeatDelay&&(m.repeatDelay=Nr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let h=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(h=!0)),(Br.instantAnimations||Br.skipAnimations)&&(h=!0,m.duration=0,m.delay=0),m.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const g=wA(m.keyframes,l);if(g!==void 0){yt.update(()=>{m.onUpdate(g),m.onComplete()});return}}return l.isSync?new wm(m):new sj(m)};function NA({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Eb(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...l}=t;r&&(i=r);const c=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const m in l){const h=e.getValue(m,e.latestValues[m]??null),g=l[m];if(g===void 0||u&&NA(u,m))continue;const E={delay:n,...Tm(i||{},m)},j=h.get();if(j!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===j&&!E.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const S=kb(e);if(S){const b=window.MotionHandoffAnimation(S,m,yt);b!==null&&(E.startTime=b,C=!0)}}zf(e,m),h.start($m(m,h,g,e.shouldReduceMotion&&tb.has(m)?{type:!1}:E,e,C));const P=h.animation;P&&c.push(P)}return s&&Promise.all(c).then(()=>{yt.update(()=>{s&&yA(e,s)})}),c}function Bf(e,t,n={}){var c;const r=za(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(Eb(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:m=0,staggerChildren:h,staggerDirection:g}=o;return PA(e,t,u,m,h,g,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[u,m]=l==="beforeChildren"?[i,s]:[s,i];return u().then(()=>m())}else return Promise.all([i(),s(n.delay)])}function PA(e,t,n=0,r=0,o=0,i=1,s){const l=[],c=e.variantChildren.size,u=(c-1)*o,m=typeof r=="function",h=m?g=>r(g,c):i===1?(g=0)=>g*o:(g=0)=>u-g*o;return Array.from(e.variantChildren).sort(jA).forEach((g,E)=>{g.notify("AnimationStart",t),l.push(Bf(g,t,{...s,delay:n+(m?0:r)+h(E)}).then(()=>g.notify("AnimationComplete",t)))}),Promise.all(l)}function jA(e,t){return e.sortNodePosition(t)}function AA(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>Bf(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=Bf(e,t,n);else{const o=typeof t=="function"?za(e,t,n.custom):t;r=Promise.all(Eb(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Nb(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const RA=jm.length;function Pb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Pb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<RA;n++){const r=jm[n],o=e.props[r];(_a(o)||o===!1)&&(t[r]=o)}return t}const IA=[...Pm].reverse(),DA=Pm.length;function MA(e){return t=>Promise.all(t.map(({animation:n,options:r})=>AA(e,n,r)))}function LA(e){let t=MA(e),n=by(),r=!0;const o=c=>(u,m)=>{var g;const h=za(e,m,c==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);if(h){const{transition:E,transitionEnd:j,...C}=h;u={...u,...C,...j}}return u};function i(c){t=c(e)}function s(c){const{props:u}=e,m=Pb(e.parent)||{},h=[],g=new Set;let E={},j=1/0;for(let P=0;P<DA;P++){const S=IA[P],b=n[S],T=u[S]!==void 0?u[S]:m[S],A=_a(T),$=S===c?b.isActive:null;$===!1&&(j=P);let Y=T===m[S]&&T!==u[S]&&A;if(Y&&r&&e.manuallyAnimateOnMount&&(Y=!1),b.protectedKeys={...E},!b.isActive&&$===null||!T&&!b.prevProp||ru(T)||typeof T=="boolean")continue;const K=$A(b.prevProp,T);let _=K||S===c&&b.isActive&&!Y&&A||P>j&&A,ae=!1;const J=Array.isArray(T)?T:[T];let be=J.reduce(o(S),{});$===!1&&(be={});const{prevResolvedValues:ne={}}=b,Oe={...ne,...be},ie=Ie=>{_=!0,g.has(Ie)&&(ae=!0,g.delete(Ie)),b.needsAnimating[Ie]=!0;const f=e.getValue(Ie);f&&(f.liveStyle=!1)};for(const Ie in Oe){const f=be[Ie],re=ne[Ie];if(E.hasOwnProperty(Ie))continue;let ve=!1;Uf(f)&&Uf(re)?ve=!Nb(f,re):ve=f!==re,ve?f!=null?ie(Ie):g.add(Ie):f!==void 0&&g.has(Ie)?ie(Ie):b.protectedKeys[Ie]=!0}b.prevProp=T,b.prevResolvedValues=be,b.isActive&&(E={...E,...be}),r&&e.blockInitialAnimation&&(_=!1),_&&(!(Y&&K)||ae)&&h.push(...J.map(Ie=>({animation:Ie,options:{type:S}})))}if(g.size){const P={};if(typeof u.initial!="boolean"){const S=za(e,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(P.transition=S.transition)}g.forEach(S=>{const b=e.getBaseTarget(S),T=e.getValue(S);T&&(T.liveStyle=!0),P[S]=b??null}),h.push({animation:P})}let C=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(C=!1),r=!1,C?t(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(g=>{var E;return(E=g.animationState)==null?void 0:E.setActive(c,u)}),n[c].isActive=u;const m=s(c);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:s,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=by(),r=!0}}}function $A(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Nb(t,e):!1}function Wo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function by(){return{animate:Wo(!0),whileInView:Wo(),whileHover:Wo(),whileTap:Wo(),whileDrag:Wo(),whileFocus:Wo(),exit:Wo()}}class Mo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class FA extends Mo{constructor(t){super(t),t.animationState||(t.animationState=LA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ru(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let OA=0;class VA extends Mo{constructor(){super(...arguments),this.id=OA++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const _A={animation:{Feature:FA},exit:{Feature:VA}};function Ba(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function el(e){return{point:{x:e.pageX,y:e.pageY}}}const UA=e=>t=>Em(t)&&e(t,el(t));function ha(e,t,n,r){return Ba(e,t,UA(n),r)}function jb({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function zA({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function BA(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Ab=1e-4,WA=1-Ab,GA=1+Ab,Rb=.01,HA=0-Rb,KA=0+Rb;function pn(e){return e.max-e.min}function YA(e,t,n){return Math.abs(e-t)<=n}function Sy(e,t,n,r=.5){e.origin=r,e.originPoint=xt(t.min,t.max,e.origin),e.scale=pn(n)/pn(t),e.translate=xt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=WA&&e.scale<=GA||isNaN(e.scale))&&(e.scale=1),(e.translate>=HA&&e.translate<=KA||isNaN(e.translate))&&(e.translate=0)}function ma(e,t,n,r){Sy(e.x,t.x,n.x,r?r.originX:void 0),Sy(e.y,t.y,n.y,r?r.originY:void 0)}function Ty(e,t,n){e.min=n.min+t.min,e.max=e.min+pn(t)}function XA(e,t,n){Ty(e.x,t.x,n.x),Ty(e.y,t.y,n.y)}function Cy(e,t,n){e.min=t.min-n.min,e.max=e.min+pn(t)}function pa(e,t,n){Cy(e.x,t.x,n.x),Cy(e.y,t.y,n.y)}const ky=()=>({translate:0,scale:1,origin:0,originPoint:0}),qi=()=>({x:ky(),y:ky()}),Ey=()=>({min:0,max:0}),jt=()=>({x:Ey(),y:Ey()});function _n(e){return[e("x"),e("y")]}function dd(e){return e===void 0||e===1}function Wf({scale:e,scaleX:t,scaleY:n}){return!dd(e)||!dd(t)||!dd(n)}function Ko(e){return Wf(e)||Ib(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ib(e){return Ny(e.x)||Ny(e.y)}function Ny(e){return e&&e!=="0%"}function Mc(e,t,n){const r=e-n,o=t*r;return n+o}function Py(e,t,n,r,o){return o!==void 0&&(e=Mc(e,o,r)),Mc(e,n,r)+t}function Gf(e,t=0,n=1,r,o){e.min=Py(e.min,t,n,r,o),e.max=Py(e.max,t,n,r,o)}function Db(e,{x:t,y:n}){Gf(e.x,t.translate,t.scale,t.originPoint),Gf(e.y,n.translate,n.scale,n.originPoint)}const jy=.999999999999,Ay=1.0000000000001;function qA(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,s;for(let l=0;l<o;l++){i=n[l],s=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Zi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Db(e,s)),r&&Ko(i.latestValues)&&Zi(e,i.latestValues))}t.x<Ay&&t.x>jy&&(t.x=1),t.y<Ay&&t.y>jy&&(t.y=1)}function Qi(e,t){e.min=e.min+t,e.max=e.max+t}function Ry(e,t,n,r,o=.5){const i=xt(e.min,e.max,o);Gf(e,t,n,i,r)}function Zi(e,t){Ry(e.x,t.x,t.scaleX,t.scale,t.originX),Ry(e.y,t.y,t.scaleY,t.scale,t.originY)}function Mb(e,t){return jb(BA(e.getBoundingClientRect(),t))}function QA(e,t,n){const r=Mb(e,n),{scroll:o}=t;return o&&(Qi(r.x,o.offset.x),Qi(r.y,o.offset.y)),r}const Lb=({current:e})=>e?e.ownerDocument.defaultView:null,Iy=(e,t)=>Math.abs(e-t);function ZA(e,t){const n=Iy(e.x,t.x),r=Iy(e.y,t.y);return Math.sqrt(n**2+r**2)}class $b{constructor(t,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=hd(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,j=ZA(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!j)return;const{point:C}=g,{timestamp:P}=Xt;this.history.push({...C,timestamp:P});const{onStart:S,onMove:b}=this.handlers;E||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,E)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=fd(E,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(g,E)=>{this.end();const{onEnd:j,onSessionEnd:C,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=hd(g.type==="pointercancel"?this.lastMoveEventInfo:fd(E,this.transformPagePoint),this.history);this.startEvent&&j&&j(g,S),C&&C(g,S)},!Em(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=o||window;const l=el(t),c=fd(l,this.transformPagePoint),{point:u}=c,{timestamp:m}=Xt;this.history=[{...u,timestamp:m}];const{onSessionStart:h}=n;h&&h(t,hd(c,this.history)),this.removeListeners=Qa(ha(this.contextWindow,"pointermove",this.handlePointerMove),ha(this.contextWindow,"pointerup",this.handlePointerUp),ha(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),No(this.updatePoint)}}function fd(e,t){return t?{point:t(e.point)}:e}function Dy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hd({point:e},t){return{point:e,delta:Dy(e,Fb(t)),offset:Dy(e,JA(t)),velocity:eR(t,.1)}}function JA(e){return e[0]}function Fb(e){return e[e.length-1]}function eR(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=Fb(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Nr(t)));)n--;if(!r)return{x:0,y:0};const i=Pr(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function tR(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?xt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?xt(n,e,r.max):Math.min(e,n)),e}function My(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function nR(e,{top:t,left:n,bottom:r,right:o}){return{x:My(e.x,n,o),y:My(e.y,t,r)}}function Ly(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function rR(e,t){return{x:Ly(e.x,t.x),y:Ly(e.y,t.y)}}function oR(e,t){let n=.5;const r=pn(e),o=pn(t);return o>r?n=Fa(t.min,t.max-r,e.min):r>o&&(n=Fa(e.min,e.max-o,t.min)),zr(0,1,n)}function iR(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Hf=.35;function sR(e=Hf){return e===!1?e=0:e===!0&&(e=Hf),{x:$y(e,"left","right"),y:$y(e,"top","bottom")}}function $y(e,t,n){return{min:Fy(e,t),max:Fy(e,n)}}function Fy(e,t){return typeof e=="number"?e:e[t]||0}const aR=new WeakMap;class lR{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(el(h).point)},s=(h,g)=>{const{drag:E,dragPropagation:j,onDragStart:C}=this.getProps();if(E&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Sj(E),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_n(S=>{let b=this.getAxisMotionValue(S).get()||0;if(jr.test(b)){const{projection:T}=this.visualElement;if(T&&T.layout){const A=T.layout.layoutBox[S];A&&(b=pn(A)*(parseFloat(b)/100))}}this.originPoint[S]=b}),C&&yt.postRender(()=>C(h,g)),zf(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:E,dragDirectionLock:j,onDirectionLock:C,onDrag:P}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:S}=g;if(j&&this.currentDirection===null){this.currentDirection=cR(S),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),P&&P(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>_n(h=>{var g;return this.getAnimationState(h)==="paused"&&((g=this.getAxisMotionValue(h).animation)==null?void 0:g.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new $b(t,{onSessionStart:i,onStart:s,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:Lb(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!r)return;const{velocity:s}=o;this.startAnimation(s);const{onDragEnd:l}=this.getProps();l&&yt.postRender(()=>l(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!Dl(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=tR(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,o=this.constraints;t&&Xi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=nR(r.layoutBox,t):this.constraints=!1,this.elastic=sR(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_n(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=iR(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xi(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=QA(r,o.root,this.visualElement.getTransformPagePoint());let s=rR(o.layout.layoutBox,i);if(n){const l=n(zA(s));this.hasMutatedConstraints=!!l,l&&(s=jb(l))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=_n(m=>{if(!Dl(m,n,this.currentDirection))return;let h=c&&c[m]||{};s&&(h={min:0,max:0});const g=o?200:1e6,E=o?40:1e7,j={type:"inertia",velocity:r?t[m]:0,bounceStiffness:g,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(m,j)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return zf(this.visualElement,t),r.start($m(t,r,0,n,this.visualElement,!1))}stopAnimation(){_n(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_n(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){_n(n=>{const{drag:r}=this.getProps();if(!Dl(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:s,max:l}=o.layout.layoutBox[n];i.set(t[n]-xt(s,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xi(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};_n(s=>{const l=this.getAxisMotionValue(s);if(l&&this.constraints!==!1){const c=l.get();o[s]=oR({min:c,max:c},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_n(s=>{if(!Dl(s,t,null))return;const l=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];l.set(xt(c,u,o[s]))})}addListeners(){if(!this.visualElement.current)return;aR.set(this.visualElement,this);const t=this.visualElement.current,n=ha(t,"pointerdown",c=>{const{drag:u,dragListener:m=!0}=this.getProps();u&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Xi(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),yt.read(r);const s=Ba(window,"resize",()=>this.scalePositionWithinConstraints()),l=o.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(_n(m=>{const h=this.getAxisMotionValue(m);h&&(this.originPoint[m]+=c[m].translate,h.set(h.get()+c[m].translate))}),this.visualElement.render())});return()=>{s(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:s=Hf,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:s,dragMomentum:l}}}function Dl(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function cR(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class uR extends Mo{constructor(t){super(t),this.removeGroupControls=Gn,this.removeListeners=Gn,this.controls=new lR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Oy=e=>(t,n)=>{e&&yt.postRender(()=>e(t,n))};class dR extends Mo{constructor(){super(...arguments),this.removePointerDownListener=Gn}onPointerDown(t){this.session=new $b(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lb(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:Oy(t),onStart:Oy(n),onMove:r,onEnd:(i,s)=>{delete this.session,o&&yt.postRender(()=>o(i,s))}}}mount(){this.removePointerDownListener=ha(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const tc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Vy(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const qs={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ne.test(e))e=parseFloat(e);else return e;const n=Vy(e,t.target.x),r=Vy(e,t.target.y);return`${n}% ${r}%`}},fR={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Po.parse(e);if(o.length>5)return r;const i=Po.createTransformer(e),s=typeof o[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;o[0+s]/=l,o[1+s]/=c;const u=xt(l,c,.5);return typeof o[2+s]=="number"&&(o[2+s]/=u),typeof o[3+s]=="number"&&(o[3+s]/=u),i(o)}};let _y=!1;class hR extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;Qj(mR),i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),_y&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),tc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,_y=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||yt.postRender(()=>{const l=s.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),km.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ob(e){const[t,n]=db(),r=p.useContext(nm);return a.jsx(hR,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(gb),isPresent:t,safeToRemove:n})}const mR={borderRadius:{...qs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qs,borderTopRightRadius:qs,borderBottomLeftRadius:qs,borderBottomRightRadius:qs,boxShadow:fR};function pR(e,t,n){const r=sn(e)?e:ps(e);return r.start($m("",r,t,n)),r.animation}const gR=(e,t)=>e.depth-t.depth;class yR{constructor(){this.children=[],this.isDirty=!1}add(t){im(this.children,t),this.isDirty=!0}remove(t){sm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gR),this.isDirty=!1,this.children.forEach(t)}}function vR(e,t){const n=Tn.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(No(r),e(i-t))};return yt.setup(r,!0),()=>No(r)}const Vb=["TopLeft","TopRight","BottomLeft","BottomRight"],xR=Vb.length,Uy=e=>typeof e=="string"?parseFloat(e):e,zy=e=>typeof e=="number"||Ne.test(e);function wR(e,t,n,r,o,i){o?(e.opacity=xt(0,n.opacity??1,bR(r)),e.opacityExit=xt(t.opacity??1,0,SR(r))):i&&(e.opacity=xt(t.opacity??1,n.opacity??1,r));for(let s=0;s<xR;s++){const l=`border${Vb[s]}Radius`;let c=By(t,l),u=By(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||zy(c)===zy(u)?(e[l]=Math.max(xt(Uy(c),Uy(u),r),0),(jr.test(u)||jr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=xt(t.rotate||0,n.rotate||0,r))}function By(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const bR=_b(0,.5,Iw),SR=_b(.5,.95,Gn);function _b(e,t,n){return r=>r<e?0:r>t?1:n(Fa(e,t,r))}function Wy(e,t){e.min=t.min,e.max=t.max}function Vn(e,t){Wy(e.x,t.x),Wy(e.y,t.y)}function Gy(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Hy(e,t,n,r,o){return e-=t,e=Mc(e,1/n,r),o!==void 0&&(e=Mc(e,1/o,r)),e}function TR(e,t=0,n=1,r=.5,o,i=e,s=e){if(jr.test(t)&&(t=parseFloat(t),t=xt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let l=xt(i.min,i.max,r);e===i&&(l-=t),e.min=Hy(e.min,t,n,l,o),e.max=Hy(e.max,t,n,l,o)}function Ky(e,t,[n,r,o],i,s){TR(e,t[n],t[r],t[o],t.scale,i,s)}const CR=["x","scaleX","originX"],kR=["y","scaleY","originY"];function Yy(e,t,n,r){Ky(e.x,t,CR,n?n.x:void 0,r?r.x:void 0),Ky(e.y,t,kR,n?n.y:void 0,r?r.y:void 0)}function Xy(e){return e.translate===0&&e.scale===1}function Ub(e){return Xy(e.x)&&Xy(e.y)}function qy(e,t){return e.min===t.min&&e.max===t.max}function ER(e,t){return qy(e.x,t.x)&&qy(e.y,t.y)}function Qy(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function zb(e,t){return Qy(e.x,t.x)&&Qy(e.y,t.y)}function Zy(e){return pn(e.x)/pn(e.y)}function Jy(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NR{constructor(){this.members=[]}add(t){im(this.members,t),t.scheduleRender()}remove(t){if(sm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PR(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((o||i||s)&&(r=`translate3d(${o}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:m,rotateX:h,rotateY:g,skewX:E,skewY:j}=n;u&&(r=`perspective(${u}px) ${r}`),m&&(r+=`rotate(${m}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),E&&(r+=`skewX(${E}deg) `),j&&(r+=`skewY(${j}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const md=["","X","Y","Z"],jR=1e3;let AR=0;function pd(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Bb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=kb(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",yt,!(o||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Bb(r)}function Wb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(s={},l=t==null?void 0:t()){this.id=AR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DR),this.nodes.forEach(FR),this.nodes.forEach(OR),this.nodes.forEach(MR)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new yR)}addEventListener(s,l){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new cm),this.eventHandlers.get(s).add(l)}notifyListeners(s,...l){const c=this.eventHandlers.get(s);c&&c.notify(...l)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=ub(s)&&!Pj(s),this.instance=s;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let m,h=0;const g=()=>this.root.updateBlockedByResize=!1;yt.read(()=>{h=window.innerWidth}),e(s,()=>{const E=window.innerWidth;E!==h&&(h=E,this.root.updateBlockedByResize=!0,m&&m(),m=vR(g,250),tc.hasAnimatedSinceResize&&(tc.hasAnimatedSinceResize=!1,this.nodes.forEach(n0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||u.getDefaultTransition()||BR,{onLayoutAnimationStart:C,onLayoutAnimationComplete:P}=u.getProps(),S=!this.targetLayout||!zb(this.targetLayout,E),b=!h&&g;if(this.options.layoutRoot||this.resumeFrom||b||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...Tm(j,"layout"),onPlay:C,onComplete:P};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(m,b)}else h||n0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),No(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VR),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const h=this.path[m];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(e0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(t0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($R),this.nodes.forEach(RR),this.nodes.forEach(IR)):this.nodes.forEach(t0),this.clearAllSnapshots();const l=Tn.now();Xt.delta=zr(0,1e3/60,l-Xt.timestamp),Xt.timestamp=l,Xt.isProcessing=!0,id.update.process(Xt),id.preRender.process(Xt),id.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,km.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(LR),this.sharedNodes.forEach(_R)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!o)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Ub(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,m=u!==this.prevTransformTemplateValue;s&&this.instance&&(l||Ko(this.latestValues)||m)&&(o(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return s&&(c=this.removeTransform(c)),WR(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return jt();const l=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(GR))){const{scroll:m}=this.root;m&&(Qi(l.x,m.offset.x),Qi(l.y,m.offset.y))}return l}removeElementScroll(s){var c;const l=jt();if(Vn(l,s),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const m=this.path[u],{scroll:h,options:g}=m;m!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&Vn(l,s),Qi(l.x,h.offset.x),Qi(l.y,h.offset.y))}return l}applyTransform(s,l=!1){const c=jt();Vn(c,s);for(let u=0;u<this.path.length;u++){const m=this.path[u];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Zi(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ko(m.latestValues)&&Zi(c,m.latestValues)}return Ko(this.latestValues)&&Zi(c,this.latestValues),c}removeTransform(s){const l=jt();Vn(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ko(u.latestValues))continue;Wf(u.latestValues)&&u.updateSnapshot();const m=jt(),h=u.measurePageBox();Vn(m,h),Yy(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,m)}return Ko(this.latestValues)&&Yy(l,this.latestValues),l}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var g;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=Xt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),pa(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vn(this.target,this.layout.layoutBox),Db(this.target,this.targetDelta)):Vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),pa(this.relativeTargetOrigin,this.target,E.target),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wf(this.parent.latestValues)||Ib(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var j;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;Vn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;qA(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=jt());const{target:E}=s;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Gy(this.prevProjectionDelta.x,this.projectionDelta.x),Gy(this.prevProjectionDelta.y,this.projectionDelta.y)),ma(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!Jy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Jy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qi(),this.projectionDelta=qi(),this.projectionDeltaWithTransform=qi()}setAnimationOrigin(s,l=!1){const c=this.snapshot,u=c?c.latestValues:{},m={...this.latestValues},h=qi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=jt(),E=c?c.source:void 0,j=this.layout?this.layout.source:void 0,C=E!==j,P=this.getStack(),S=!P||P.members.length<=1,b=!!(C&&!S&&this.options.crossfade===!0&&!this.path.some(zR));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const $=A/1e3;r0(h.x,s.x,$),r0(h.y,s.y,$),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pa(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UR(this.relativeTarget,this.relativeTargetOrigin,g,$),T&&ER(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=jt()),Vn(T,this.relativeTarget)),C&&(this.animationValues=m,wR(m,u,this.latestValues,$,b,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(No(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{tc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ps(0)),this.currentAnimation=pR(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),s.onUpdate&&s.onUpdate(m)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:m}=s;if(!(!l||!c||!u)){if(this!==s&&this.layout&&u&&Gb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||jt();const h=pn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=pn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Vn(l,c),Zi(l,m),ma(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(s,l){this.sharedNodes.has(s)||this.sharedNodes.set(s,new NR),this.sharedNodes.get(s).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var l;const{layoutId:s}=this.options;return s?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:s}=this.options;return s?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let l=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&pd("z",s,u,this.animationValues);for(let m=0;m<md.length;m++)pd(`rotate${md[m]}`,s,u,this.animationValues),pd(`skew${md[m]}`,s,u,this.animationValues);s.render();for(const m in u)s.setStaticValue(m,u[m]),this.animationValues&&(this.animationValues[m]=u[m]);s.scheduleRender()}applyProjectionStyles(s,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=ec(l==null?void 0:l.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=ec(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ko(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const m=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=PR(this.projectionDeltaWithTransform,this.treeScale,m);c&&(h=c(m,h)),s.transform=h;const{x:g,y:E}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${E.origin*100}% 0`,u.animationValues?s.opacity=u===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:s.opacity=u===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const j in Ua){if(m[j]===void 0)continue;const{correct:C,applyTo:P,isCSSVariable:S}=Ua[j],b=h==="none"?m[j]:C(m[j],u);if(P){const T=P.length;for(let A=0;A<T;A++)s[P[A]]=b}else S?this.options.visualElement.renderState.vars[j]=b:s[j]=b}this.options.layoutId&&(s.pointerEvents=u===this?ec(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var l;return(l=s.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(e0),this.root.sharedNodes.clear()}}}function RR(e){e.updateLayout()}function IR(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?_n(h=>{const g=s?t.measuredBox[h]:t.layoutBox[h],E=pn(g);g.min=r[h].min,g.max=g.min+E}):Gb(i,t.layoutBox,r)&&_n(h=>{const g=s?t.measuredBox[h]:t.layoutBox[h],E=pn(r[h]);g.max=g.min+E,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+E)});const l=qi();ma(l,r,t.layoutBox);const c=qi();s?ma(c,e.applyTransform(o,!0),t.measuredBox):ma(c,r,t.layoutBox);const u=!Ub(l);let m=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:E}=h;if(g&&E){const j=jt();pa(j,t.layoutBox,g.layoutBox);const C=jt();pa(C,r,E.layoutBox),zb(j,C)||(m=!0),h.options.layoutRoot&&(e.relativeTarget=C,e.relativeTargetOrigin=j,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function DR(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function MR(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function LR(e){e.clearSnapshot()}function e0(e){e.clearMeasurements()}function t0(e){e.isLayoutDirty=!1}function $R(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function n0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function FR(e){e.resolveTargetDelta()}function OR(e){e.calcProjection()}function VR(e){e.resetSkewAndRotation()}function _R(e){e.removeLeadSnapshot()}function r0(e,t,n){e.translate=xt(t.translate,0,n),e.scale=xt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function o0(e,t,n,r){e.min=xt(t.min,n.min,r),e.max=xt(t.max,n.max,r)}function UR(e,t,n,r){o0(e.x,t.x,n.x,r),o0(e.y,t.y,n.y,r)}function zR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const BR={duration:.45,ease:[.4,0,.1,1]},i0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),s0=i0("applewebkit/")&&!i0("chrome/")?Math.round:Gn;function a0(e){e.min=s0(e.min),e.max=s0(e.max)}function WR(e){a0(e.x),a0(e.y)}function Gb(e,t,n){return e==="position"||e==="preserve-aspect"&&!YA(Zy(t),Zy(n),.2)}function GR(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const HR=Wb({attachResizeListener:(e,t)=>Ba(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gd={current:void 0},Hb=Wb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!gd.current){const e=new HR({});e.mount(window),e.setOptions({layoutScroll:!0}),gd.current=e}return gd.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),KR={pan:{Feature:dR},drag:{Feature:uR,ProjectionNode:Hb,MeasureLayout:Ob}};function l0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=r[o];i&&yt.postRender(()=>i(t,el(t)))}class YR extends Mo{mount(){const{current:t}=this.node;t&&(this.unmount=Tj(t,(n,r)=>(l0(this.node,r,"Start"),o=>l0(this.node,o,"End"))))}unmount(){}}class XR extends Mo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qa(Ba(this.node.current,"focus",()=>this.onFocus()),Ba(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function c0(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=r[o];i&&yt.postRender(()=>i(t,el(t)))}class qR extends Mo{mount(){const{current:t}=this.node;t&&(this.unmount=Nj(t,(n,r)=>(c0(this.node,r,"Start"),(o,{success:i})=>c0(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kf=new WeakMap,yd=new WeakMap,QR=e=>{const t=Kf.get(e.target);t&&t(e)},ZR=e=>{e.forEach(QR)};function JR({root:e,...t}){const n=e||document;yd.has(n)||yd.set(n,{});const r=yd.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(ZR,{root:e,...t})),r[o]}function eI(e,t,n){const r=JR(t);return Kf.set(e,n),r.observe(e),()=>{Kf.delete(e),r.unobserve(e)}}const tI={some:0,all:1};class nI extends Mo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:tI[o]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:m,onViewportLeave:h}=this.node.getProps(),g=u?m:h;g&&g(c)};return eI(this.node.current,s,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(rI(t,n))&&this.startObserver()}unmount(){}}function rI({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const oI={inView:{Feature:nI},tap:{Feature:qR},focus:{Feature:XR},hover:{Feature:YR}},iI={layout:{ProjectionNode:Hb,MeasureLayout:Ob}},Yf={current:null},Kb={current:!1};function sI(){if(Kb.current=!0,!!om)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Yf.current=e.matches;e.addEventListener("change",t),t()}else Yf.current=!1}const aI=new WeakMap;function lI(e,t,n){for(const r in t){const o=t[r],i=n[r];if(sn(o))e.addValue(r,o);else if(sn(i))e.addValue(r,ps(o,{owner:e}));else if(i!==o)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(o):s.hasAnimated||s.set(o)}else{const s=e.getStaticValue(r);e.addValue(r,ps(s!==void 0?s:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const u0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cI{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:i,visualState:s},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Tn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,yt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=ou(n),this.isVariantNode=mb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const E=h[g];c[g]!==void 0&&sn(E)&&E.set(c[g],!1)}}mount(t){this.current=t,aI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Kb.current||sI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),No(this.notifyUpdate),No(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ps.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&yt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in gs){const n=gs[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<u0.length;r++){const o=u0[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i="on"+o,s=t[i];s&&(this.propEventSubscriptions[o]=this.on(o,s))}this.prevMotionValues=lI(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ps(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Sw(r)||Cw(r))?r=parseFloat(r):!Aj(r)&&Po.test(n)&&(r=ib(t,n)),this.setBaseTarget(t,sn(r)?r.get():r)),sn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=Mm(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!sn(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new cm),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Yb extends cI{constructor(){super(...arguments),this.KeyframeResolver=vj}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;sn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Xb(e,{style:t,vars:n},r,o){const i=e.style;let s;for(s in t)i[s]=t[s];o==null||o.applyProjectionStyles(i,r);for(s in n)i.setProperty(s,n[s])}function uI(e){return window.getComputedStyle(e)}class dI extends Yb{constructor(){super(...arguments),this.type="html",this.renderInstance=Xb}readValueFromInstance(t,n){var r;if(Ps.has(n))return(r=this.projection)!=null&&r.isProjecting?Lf(n):FP(t,n);{const o=uI(t),i=(fm(n)?o.getPropertyValue(n):o[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Mb(t,n)}build(t,n,r){Rm(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Lm(t,n,r)}}const qb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fI(e,t,n,r){Xb(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(qb.has(o)?o:Am(o),t.attrs[o])}class hI extends Yb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ps.has(n)){const r=ob(n);return r&&r.default||0}return n=qb.has(n)?n:Am(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Cb(t,n,r)}build(t,n,r){wb(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,o){fI(t,n,r,o)}mount(t){this.isSVGTag=Sb(t.tagName),super.mount(t)}}const mI=(e,t)=>Dm(e)?new hI(t):new dI(t,{allowProjection:e!==p.Fragment}),pI=mA({..._A,...oI,...KR,...iI},mI),Se=Vj(pI),is=({type:e="text",label:t,placeholder:n,value:r,onChange:o,onBlur:i,error:s,icon:l,required:c=!1,disabled:u=!1,className:m})=>{const[h,g]=p.useState(!1),[E,j]=p.useState(!1),C=()=>{switch(l){case"email":return a.jsx(KN,{className:"h-5 w-5 text-gray-400"});case"password":case"lock":return a.jsx(sw,{className:"h-5 w-5 text-gray-400"});case"user":return a.jsx(uw,{className:"h-5 w-5 text-gray-400"});default:return null}},P=e==="password"&&h?"text":e;return a.jsxs("div",{className:It("space-y-2",m),children:[t&&a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[t,c&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[l&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:C()}),a.jsx("input",{type:P,value:r,onChange:S=>o(S.target.value),onFocus:()=>j(!0),onBlur:()=>{j(!1),i==null||i()},placeholder:n,disabled:u,className:It("w-full px-4 py-3 border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:bg-gray-50 disabled:cursor-not-allowed",l&&"pl-10",e==="password"&&"pr-12",s?"border-red-300 focus:ring-red-500":E?"border-blue-300":"border-gray-300","placeholder:text-gray-400")}),e==="password"&&a.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?a.jsx(rw,{className:"h-5 w-5"}):a.jsx(ow,{className:"h-5 w-5"})})]}),s&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[a.jsx(tw,{className:"h-4 w-4"}),a.jsx("span",{children:s})]})]})};function d0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qb(...e){return t=>{let n=!1;const r=e.map(o=>{const i=d0(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():d0(e[o],null)}}}}function Zt(...e){return p.useCallback(Qb(...e),e)}function Wa(e){const t=yI(e),n=p.forwardRef((r,o)=>{const{children:i,...s}=r,l=p.Children.toArray(i),c=l.find(xI);if(c){const u=c.props.children,m=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return a.jsx(t,{...s,ref:o,children:p.isValidElement(u)?p.cloneElement(u,void 0,m):null})}return a.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}var gI=Wa("Slot");function yI(e){const t=p.forwardRef((n,r)=>{const{children:o,...i}=n;if(p.isValidElement(o)){const s=bI(o),l=wI(i,o.props);return o.type!==p.Fragment&&(l.ref=r?Qb(r,s):s),p.cloneElement(o,l)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Zb=Symbol("radix.slottable");function vI(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Zb,t}function xI(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Zb}function wI(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...l)=>{const c=i(...l);return o(...l),c}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function bI(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const f0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,h0=hw,SI=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return h0(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:i}=t,s=Object.keys(o).map(u=>{const m=n==null?void 0:n[u],h=i==null?void 0:i[u];if(m===null)return null;const g=f0(m)||f0(h);return o[u][g]}),l=n&&Object.entries(n).reduce((u,m)=>{let[h,g]=m;return g===void 0||(u[h]=g),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,m)=>{let{class:h,className:g,...E}=m;return Object.entries(E).every(j=>{let[C,P]=j;return Array.isArray(P)?P.includes({...i,...l}[C]):{...i,...l}[C]===P})?[...u,h,g]:u},[]);return h0(e,s,c,n==null?void 0:n.class,n==null?void 0:n.className)},Fm=SI("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fe=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},i)=>{const s=r?gI:"button";return a.jsx(s,{className:It(Fm({variant:t,size:n,className:e})),ref:i,...o})});fe.displayName="Button";const wt=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:It("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));wt.displayName="Card";const ys=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:It("flex flex-col space-y-1.5 p-6",e),...t}));ys.displayName="CardHeader";const tl=p.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:It("text-2xl font-semibold leading-none tracking-tight",e),...t}));tl.displayName="CardTitle";const iu=p.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:It("text-sm text-muted-foreground",e),...t}));iu.displayName="CardDescription";const gt=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:It("p-6 pt-0",e),...t}));gt.displayName="CardContent";const TI=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:It("flex items-center p-6 pt-0",e),...t}));TI.displayName="CardFooter";const Jb=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{isValid:!0}:{isValid:!1,message:"Please enter a valid email address"}:{isValid:!1,message:"Email is required"},e1=e=>{const t=[];let n=0;e.length<8?t.push("Password should be at least 8 characters long"):n+=1,/[a-z]/.test(e)?n+=1:t.push("Add lowercase letters"),/[A-Z]/.test(e)?n+=1:t.push("Add uppercase letters"),/[0-9]/.test(e)?n+=1:t.push("Add numbers"),/[^A-Za-z0-9]/.test(e)?n+=1:t.push("Add special characters");let r="";switch(n){case 0:case 1:r="Very weak";break;case 2:r="Weak";break;case 3:r="Fair";break;case 4:r="Good";break;case 5:r="Strong";break}return{score:n,feedback:r,suggestions:t}},t1=e=>{if(!e)return{isValid:!1,message:"Password is required"};if(e.length<8)return{isValid:!1,message:"Password must be at least 8 characters long"};const t=e1(e);return t.score<3?{isValid:!1,message:`Password is too weak. ${t.suggestions[0]}`}:{isValid:!0}},CI=(e,t)=>t?e!==t?{isValid:!1,message:"Passwords do not match"}:{isValid:!0}:{isValid:!1,message:"Please confirm your password"},kI=e=>{switch(e){case 0:case 1:return"bg-red-500";case 2:return"bg-orange-500";case 3:return"bg-yellow-500";case 4:return"bg-blue-500";case 5:return"bg-green-500";default:return"bg-gray-300"}},EI=()=>{const e=Cs(),{login:t,loading:n,clearError:r}=eu(),{addToast:o}=ks(),[i,s]=p.useState({email:"",password:""}),[l,c]=p.useState({email:"",password:""}),[u,m]=p.useState({email:!1,password:!1});p.useEffect(()=>{r()},[r]);const h=(P,S)=>{s(b=>({...b,[P]:S})),l[P]&&c(b=>({...b,[P]:""}))},g=P=>{m(S=>({...S,[P]:!0})),E(P,i[P])},E=(P,S)=>{let b="";switch(P){case"email":const T=Jb(S);T.isValid||(b=T.message||"");break;case"password":const A=t1(S);A.isValid||(b=A.message||"");break}return c(T=>({...T,[P]:b})),!b},j=()=>{const P=E("email",i.email),S=E("password",i.password);return P&&S},C=async P=>{var S,b;if(P.preventDefault(),!j()){o({type:"error",title:"Validation Error",message:"Please fix the errors in the form"});return}try{await t(i.email,i.password),e("/dashboard")}catch(T){(S=T==null?void 0:T.message)!=null&&S.includes("Invalid credentials")?o({type:"error",title:"Login Failed",message:"Invalid email or password"}):(b=T==null?void 0:T.message)!=null&&b.includes("Network")&&o({type:"error",title:"Connection Error",message:"Unable to connect to server. Please check your internet connection."})}};return a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs(Se.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[a.jsx(Se.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:a.jsx(mo,{className:"w-8 h-8 text-white"})}),a.jsx(Se.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-3xl font-bold text-gray-900 mb-2",children:"StoryMaker AI"}),a.jsxs(Se.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"text-gray-600 flex items-center justify-center gap-2",children:[a.jsx(Jo,{className:"w-4 h-4"}),"Create amazing stories with AI"]})]}),a.jsx(Se.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:a.jsxs(wt,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[a.jsxs(ys,{className:"text-center pb-4",children:[a.jsx(tl,{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),a.jsx(iu,{className:"text-gray-600",children:"Sign in to your account to continue"})]}),a.jsxs(gt,{children:[a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsx(is,{type:"email",label:"Email Address",placeholder:"Enter your email",value:i.email,onChange:P=>h("email",P),onBlur:()=>g("email"),error:u.email?l.email:"",icon:"email",required:!0}),a.jsx(is,{type:"password",label:"Password",placeholder:"Enter your password",value:i.password,onChange:P=>h("password",P),onBlur:()=>g("password"),error:u.password?l.password:"",icon:"password",required:!0}),a.jsx(fe,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",disabled:n,children:n?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign In"})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),a.jsx("div",{className:"text-center",children:a.jsx(Tf,{to:"/register",className:"inline-flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all duration-200",children:"Create New Account"})})]})]})}),a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},className:"text-center mt-8 text-sm text-gray-500",children:a.jsx("p",{children:" 2024 StoryMaker AI. All rights reserved."})})]})})},NI=({password:e,className:t=""})=>{if(!e)return null;const n=e1(e),r=kI(n.score);return a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Password strength:"}),a.jsx("span",{className:`text-sm font-medium ${n.score<=1?"text-red-600":n.score===2?"text-orange-600":n.score===3?"text-yellow-600":n.score===4?"text-blue-600":"text-green-600"}`,children:n.feedback})]}),a.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(o=>a.jsx("div",{className:`h-2 flex-1 rounded-full transition-all duration-300 ${o<=n.score?r:"bg-gray-200"}`},o))}),n.suggestions.length>0&&a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsx("p",{className:"font-medium",children:"Suggestions:"}),a.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:n.suggestions.slice(0,3).map((o,i)=>a.jsx("li",{children:o},i))})]})]})},PI=()=>{const e=Cs(),{register:t,loading:n,clearError:r}=eu(),{addToast:o}=ks(),[i,s]=p.useState({email:"",password:"",confirmPassword:""}),[l,c]=p.useState({email:"",password:"",confirmPassword:""}),[u,m]=p.useState({email:!1,password:!1,confirmPassword:!1});p.useEffect(()=>{r()},[r]);const h=(P,S)=>{s(b=>({...b,[P]:S})),l[P]&&c(b=>({...b,[P]:""})),P==="password"&&u.confirmPassword&&E("confirmPassword",i.confirmPassword)},g=P=>{m(S=>({...S,[P]:!0})),E(P,i[P])},E=(P,S)=>{let b="";switch(P){case"email":const T=Jb(S);T.isValid||(b=T.message||"");break;case"password":const A=t1(S);A.isValid||(b=A.message||"");break;case"confirmPassword":const $=CI(i.password,S);$.isValid||(b=$.message||"");break}return c(T=>({...T,[P]:b})),!b},j=()=>{const P=E("email",i.email),S=E("password",i.password),b=E("confirmPassword",i.confirmPassword);return P&&S&&b},C=async P=>{var S,b,T,A;if(P.preventDefault(),!j()){o({type:"error",title:"Validation Error",message:"Please fix the errors in the form"});return}try{await t(i.email,i.password),o({type:"success",title:"Account Created!",message:"Welcome to StoryMaker AI! Your account has been created successfully."}),e("/dashboard")}catch($){(S=$==null?void 0:$.message)!=null&&S.includes("already exists")||(b=$==null?void 0:$.message)!=null&&b.includes("duplicate")?o({type:"error",title:"Account Already Exists",message:"An account with this email already exists. Please try logging in instead."}):(T=$==null?void 0:$.message)!=null&&T.includes("Network")?o({type:"error",title:"Connection Error",message:"Unable to connect to server. Please check your internet connection."}):(A=$==null?void 0:$.message)!=null&&A.includes("weak")&&o({type:"error",title:"Weak Password",message:"Please choose a stronger password for your account."})}};return a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx(Se.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1,duration:.5},className:"mb-6",children:a.jsxs(Tf,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[a.jsx(or,{className:"w-4 h-4"}),"Back to Login"]})}),a.jsxs(Se.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[a.jsx(Se.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:a.jsx(mo,{className:"w-8 h-8 text-white"})}),a.jsx(Se.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-3xl font-bold text-gray-900 mb-2",children:"StoryMaker AI"}),a.jsxs(Se.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"text-gray-600 flex items-center justify-center gap-2",children:[a.jsx(Jo,{className:"w-4 h-4"}),"Create amazing stories with AI"]})]}),a.jsx(Se.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:a.jsxs(wt,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[a.jsxs(ys,{className:"text-center pb-4",children:[a.jsx(tl,{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),a.jsx(iu,{className:"text-gray-600",children:"Join StoryMaker AI and start creating amazing stories"})]}),a.jsxs(gt,{children:[a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsx(is,{type:"email",label:"Email Address",placeholder:"Enter your email",value:i.email,onChange:P=>h("email",P),onBlur:()=>g("email"),error:u.email?l.email:"",icon:"email",required:!0}),a.jsx(is,{type:"password",label:"Password",placeholder:"Create a strong password",value:i.password,onChange:P=>h("password",P),onBlur:()=>g("password"),error:u.password?l.password:"",icon:"password",required:!0}),i.password&&a.jsx(NI,{password:i.password,className:"mt-2"}),a.jsx(is,{type:"password",label:"Confirm Password",placeholder:"Confirm your password",value:i.confirmPassword,onChange:P=>h("confirmPassword",P),onBlur:()=>g("confirmPassword"),error:u.confirmPassword?l.confirmPassword:"",icon:"password",required:!0}),a.jsx(fe,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",disabled:n,children:n?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating account..."]}):"Create Account"})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),a.jsx("div",{className:"text-center",children:a.jsx(Tf,{to:"/login",className:"inline-flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all duration-200",children:"Sign In to Existing Account"})})]})]})}),a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},className:"text-center mt-8 text-sm text-gray-500",children:a.jsx("p",{children:" 2024 StoryMaker AI. All rights reserved."})})]})})},jI=()=>{var nt,rt;const e=Cs(),t=yi(),{user:n,logout:r}=eu(),{addToast:o}=ks(),[i,s]=p.useState(!1),[l,c]=p.useState([]),[u,m]=p.useState(!0),[h,g]=p.useState(null),[E,j]=p.useState(!1),[C,P]=p.useState({x:0,y:0}),[S,b]=p.useState(!1),[T,A]=p.useState(!1),[$,Y]=p.useState(!1),[K,_]=p.useState(!1),[ae,J]=p.useState(""),[be,ne]=p.useState(!1),[Oe,ie]=p.useState(!1),Dt=async()=>{s(!0);try{await r(),e("/login")}catch(oe){console.error("Logout failed:",oe)}finally{s(!1)}},He=()=>{e("/create-story")},Ie=async()=>{try{m(!0);const oe=await ut.getStories();oe.success&&(c(oe.data.stories),o({type:"success",title:"Stories Updated",message:"Your local stories have been refreshed"}))}catch(oe){console.error("Error refreshing stories:",oe),o({type:"error",title:"Refresh Failed",message:"Could not refresh stories"})}finally{m(!1)}},f=(oe,Ee)=>{Ee.stopPropagation();const Je=Ee.currentTarget.getBoundingClientRect(),ft=window.innerWidth,Yn=window.innerHeight;let Ge=Je.left,Xn=Je.bottom+5;Ge+200>ft&&(Ge=Je.right-200),Xn+200>Yn&&(Xn=Je.top-200),P({x:Ge,y:Xn}),g(oe),j(!0)},re=async()=>{if(!(!h||!ae.trim())){ne(!0);try{(await ut.updateStory(h.id,{title:ae.trim()})).success&&(c(l.map(Ee=>Ee.id===h.id?{...Ee,title:ae.trim()}:Ee)),o({type:"success",title:"Story Renamed",message:"Story name has been updated successfully"}),b(!1),J(""))}catch(oe){console.error("Error renaming story:",oe),o({type:"error",title:"Rename Failed",message:"Failed to rename story"})}finally{ne(!1)}}},ve=async()=>{if(h){ie(!0);try{(await ut.deleteStory(h.id)).success&&(c(l.filter(Ee=>Ee.id!==h.id)),o({type:"success",title:"Story Deleted",message:"Story has been permanently deleted"}),_(!1))}catch(oe){console.error("Error deleting story:",oe),o({type:"error",title:"Delete Failed",message:"Failed to delete story"})}finally{ie(!1)}}},Me=oe=>{e("/create-story",{state:{storyId:oe.id}})},Le=oe=>{console.log(oe),o({type:"info",title:"Download Coming Soon",message:"Video download functionality will be implemented soon"})},Ye=oe=>{if(oe.storySummary)return oe.storySummary;if(oe.content&&oe.content.includes("*****")){const ft=oe.content.split("*****");if(ft.length>=3)return ft[2].trim()}const Je=(oe.content||"").split(" ").slice(0,50).join(" ");return Je.length>100?Je.substring(0,100)+"...":Je},Be=oe=>oe.youtubeTitle?oe.youtubeTitle:oe.title||"Untitled Story",cn=oe=>{if(oe.youtubeDescription)return oe.youtubeDescription;const Ee=oe.content||"";return Ee.length>200?Ee.substring(0,200)+"...":Ee},Ze=oe=>{const Ee=[];if(oe.genre&&Ee.push(oe.genre),oe.videoStyle&&Ee.push(oe.videoStyle),oe.language&&Ee.push(oe.language),oe.youtubeTags){const Je=oe.youtubeTags.split(",").map(ft=>ft.trim());Ee.push(...Je)}return Ee};p.useEffect(()=>{var Ee;(async()=>{try{m(!0);const Je=await ut.getStories();console.log(Je),Je.success?c(Je.data.stories):o({type:"error",title:"Failed to load stories",message:"Could not fetch your local stories"})}catch(Je){console.error("Error fetching stories:",Je),o({type:"error",title:"Failed to load stories",message:"Could not fetch your local stories"})}finally{m(!1)}})(),(Ee=t.state)!=null&&Ee.refresh&&e(t.pathname,{replace:!0,state:{}})},[o,(nt=t.state)==null?void 0:nt.refresh,e,t.pathname]);const Fn=l.filter(oe=>oe.status==="completed").length,pe=[{title:"Stories Created",value:l.length.toString(),icon:mo,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Completed Stories",value:Fn.toString(),icon:t2,color:"text-green-600",bgColor:"bg-green-50"}],Te={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},je={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return a.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[a.jsx(Se.header,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.6},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(Se.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring",stiffness:200},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(mo,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"StoryMaker AI"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Create amazing stories"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(fe,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:a.jsx(_N,{className:"w-5 h-5"})}),a.jsx(fe,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:a.jsx(lw,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:n==null?void 0:n.email}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:n==null?void 0:n.subscriptionStatus})]}),a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx(uw,{className:"w-4 h-4 text-white"})})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:Dt,disabled:i,className:"text-red-600 border-red-200 hover:bg-red-50",children:[i?a.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):a.jsx(HN,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Logout"})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},className:"mb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs(Se.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(rt=n==null?void 0:n.email)==null?void 0:rt.split("@")[0],"! "]}),a.jsxs(Se.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.5},className:"text-gray-600 flex items-center justify-center gap-2",children:[a.jsx(Jo,{className:"w-4 h-4"}),"Ready to create your next amazing story?"]})]})}),a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.6},className:"mb-8",children:a.jsx(wt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:a.jsx(gt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quick Actions"}),a.jsx("p",{className:"text-gray-600",children:"Start creating your next masterpiece"})]}),a.jsxs(fe,{onClick:He,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",children:[a.jsx($a,{className:"w-5 h-5 mr-2"}),"Create New Story"]})]})})})}),a.jsx(Se.div,{variants:Te,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:pe.map(oe=>a.jsx(Se.div,{variants:je,children:a.jsx(wt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-shadow duration-200",children:a.jsx(gt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:oe.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:oe.value})]}),a.jsx("div",{className:`w-12 h-12 ${oe.bgColor} rounded-lg flex items-center justify-center`,children:a.jsx(oe.icon,{className:`w-6 h-6 ${oe.color}`})})]})})})},oe.title))}),a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.6},children:a.jsxs(wt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:[a.jsx(ys,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(tl,{className:"text-xl font-bold text-gray-900",children:"My Video Stories"}),a.jsx(iu,{children:"Your latest creative works"})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:Ie,disabled:u,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[u?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Co,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Refresh"})]})]})}),a.jsx(gt,{children:u?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(pt,{className:"w-6 h-6 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading stories..."})]}):l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(mo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stories yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first story to get started!"}),a.jsxs(fe,{onClick:He,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx($a,{className:"w-4 h-4 mr-2"}),"Create Your First Story"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((oe,Ee)=>a.jsxs(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9+Ee*.1,duration:.5},className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200 overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-purple-600/20"}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx(mo,{className:"w-12 h-12 text-blue-600 mx-auto mb-2"}),a.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:[oe.videoStyle||"landscape"," "," ",oe.genre||"Unknown"]})]}),oe.status==="completed"&&a.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Ready"}),oe.status!=="completed"&&oe.isDraft&&a.jsx("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full",children:"Draft"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:oe.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(oe.createdAt).toLocaleDateString()})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:Je=>f(oe,Je),className:"ml-2 p-1 h-8 w-8",children:a.jsx(YN,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(BN,{className:"w-3 h-3 mr-1"}),Math.round((oe.duration||0)/60),"m"]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(zN,{className:"w-3 h-3 mr-1"}),oe.status]})]})]})]},oe.id))})})]})})]}),E&&h&&a.jsx(Se.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50",onClick:()=>j(!1),children:a.jsx(Se.div,{className:"bg-white rounded-lg shadow-xl p-2 min-w-48 border border-gray-200",style:{position:"absolute",left:C.x,top:C.y,zIndex:51},onClick:oe=>oe.stopPropagation(),children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>{J(h.title),b(!0),j(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(Wg,{className:"w-4 h-4 mr-2"}),"Rename Story"]}),a.jsxs("button",{onClick:()=>{A(!0),j(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(kf,{className:"w-4 h-4 mr-2"}),"Story Summary"]}),h.status==="completed"?a.jsxs("button",{onClick:()=>{Le(h),j(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(nw,{className:"w-4 h-4 mr-2"}),"Download Video"]}):a.jsxs("button",{onClick:()=>{Me(h),j(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(Wg,{className:"w-4 h-4 mr-2"}),"Edit Video"]}),a.jsxs("button",{onClick:()=>{Y(!0),j(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[a.jsx(iw,{className:"w-4 h-4 mr-2"}),"Show Meta Data"]}),a.jsx("div",{className:"border-t border-gray-200 my-1"}),a.jsxs("button",{onClick:()=>{_(!0),j(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md",children:[a.jsx(od,{className:"w-4 h-4 mr-2"}),"Delete Story"]})]})})}),S&&h&&a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rename Story"}),a.jsx("input",{type:"text",value:ae,onChange:oe=>J(oe.target.value),placeholder:"Enter new story name",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx(fe,{variant:"outline",onClick:()=>{b(!1),J("")},className:"flex-1",children:"Cancel"}),a.jsxs(fe,{onClick:re,disabled:be||!ae.trim(),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",children:[be?a.jsx(pt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Rename"]})]})]})}),T&&h&&a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Story Summary"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Generated Summary"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:Ye(h)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Story Content"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg max-h-40 overflow-y-auto",children:h.content||"No content available"})]})]}),a.jsx(fe,{onClick:()=>A(!1),className:"mt-6",children:"Close"})]})}),$&&h&&a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Story Meta Data"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Generated Headline"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:Be(h)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:cn(h)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Ze(h).map((oe,Ee)=>a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:oe},Ee))})]}),h.stockFootageTerms&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Stock Footage Terms"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:h.stockFootageTerms.split(",").map((oe,Ee)=>a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:oe.trim()},Ee))})]}),h.totalChapters&&h.totalChapters>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Chapter Information"}),a.jsxs("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:["Total Chapters: ",h.totalChapters,h.chapterSummaries&&h.chapterSummaries.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium mb-1",children:"Chapter Summaries:"}),h.chapterSummaries.map((oe,Ee)=>a.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[a.jsxs("strong",{children:["Chapter ",oe.number,":"]})," ",oe.summary]},Ee))]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Story Summary"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:Ye(h)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Story Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Genre:"})," ",h.genre||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Duration:"})," ",h.duration?`${Math.round(h.duration/60)}m`:"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Language:"})," ",h.language||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Video Style:"})," ",h.videoStyle||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"})," ",h.status||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Created:"})," ",h.createdAt?new Date(h.createdAt).toLocaleDateString():"N/A"]})]})]})]}),a.jsx(fe,{onClick:()=>Y(!1),className:"mt-6",children:"Close"})]})}),K&&h&&a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(od,{className:"w-6 h-6 text-red-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Story"})]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',h.title,'"? This action cannot be undone.']}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:()=>_(!1),className:"flex-1",children:"Cancel"}),a.jsxs(fe,{onClick:ve,disabled:Oe,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[Oe?a.jsx(pt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(od,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]})},AI="modulepreload",RI=function(e,t){return new URL(e,t).href},m0={},Wt=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=RI(i,r),i in m0)return;m0[i]=!0;const s=i.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!r)for(let m=o.length-1;m>=0;m--){const h=o[m];if(h.href===i&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":AI,s||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),s)return new Promise((m,h)=>{u.addEventListener("load",m),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};function II(e,t){const n=p.createContext(t),r=i=>{const{children:s,...l}=i,c=p.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:s})};r.displayName=e+"Provider";function o(i){const s=p.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,o]}function nl(e,t=[]){let n=[];function r(i,s){const l=p.createContext(s),c=n.length;n=[...n,s];const u=h=>{var S;const{scope:g,children:E,...j}=h,C=((S=g==null?void 0:g[e])==null?void 0:S[c])||l,P=p.useMemo(()=>j,Object.values(j));return a.jsx(C.Provider,{value:P,children:E})};u.displayName=i+"Provider";function m(h,g){var C;const E=((C=g==null?void 0:g[e])==null?void 0:C[c])||l,j=p.useContext(E);if(j)return j;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,m]}const o=()=>{const i=n.map(s=>p.createContext(s));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return o.scopeName=e,[r,DI(o,...t)]}function DI(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function gn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}var vs=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},MI=oh[" useId ".trim().toString()]||(()=>{}),LI=0;function vd(e){const[t,n]=p.useState(MI());return vs(()=>{e||n(r=>r??String(LI++))},[e]),e||(t?`radix-${t}`:"")}var $I=oh[" useInsertionEffect ".trim().toString()]||vs;function n1({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,s]=FI({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:o;{const m=p.useRef(e!==void 0);p.useEffect(()=>{const h=m.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,r])}const u=p.useCallback(m=>{var h;if(l){const g=OI(m)?m(e):m;g!==e&&((h=s.current)==null||h.call(s,g))}else i(m)},[l,e,i,s]);return[c,u]}function FI({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),o=p.useRef(n),i=p.useRef(t);return $I(()=>{i.current=t},[t]),p.useEffect(()=>{var s;o.current!==n&&((s=i.current)==null||s.call(i,n),o.current=n)},[n,o]),[n,r,i]}function OI(e){return typeof e=="function"}var VI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ln=VI.reduce((e,t)=>{const n=Wa(`Primitive.${t}`),r=p.forwardRef((o,i)=>{const{asChild:s,...l}=o,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function _I(e,t){e&&Xh.flushSync(()=>e.dispatchEvent(t))}function Ga(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function UI(e,t=globalThis==null?void 0:globalThis.document){const n=Ga(e);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var zI="DismissableLayer",Xf="dismissableLayer.update",BI="dismissableLayer.pointerDownOutside",WI="dismissableLayer.focusOutside",p0,r1=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),o1=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:l,...c}=e,u=p.useContext(r1),[m,h]=p.useState(null),g=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=p.useState({}),j=Zt(t,K=>h(K)),C=Array.from(u.layers),[P]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=C.indexOf(P),b=m?C.indexOf(m):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,A=b>=S,$=KI(K=>{const _=K.target,ae=[...u.branches].some(J=>J.contains(_));!A||ae||(o==null||o(K),s==null||s(K),K.defaultPrevented||l==null||l())},g),Y=YI(K=>{const _=K.target;[...u.branches].some(J=>J.contains(_))||(i==null||i(K),s==null||s(K),K.defaultPrevented||l==null||l())},g);return UI(K=>{b===u.layers.size-1&&(r==null||r(K),!K.defaultPrevented&&l&&(K.preventDefault(),l()))},g),p.useEffect(()=>{if(m)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(p0=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),g0(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=p0)}},[m,g,n,u]),p.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),g0())},[m,u]),p.useEffect(()=>{const K=()=>E({});return document.addEventListener(Xf,K),()=>document.removeEventListener(Xf,K)},[]),a.jsx(ln.div,{...c,ref:j,style:{pointerEvents:T?A?"auto":"none":void 0,...e.style},onFocusCapture:gn(e.onFocusCapture,Y.onFocusCapture),onBlurCapture:gn(e.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:gn(e.onPointerDownCapture,$.onPointerDownCapture)})});o1.displayName=zI;var GI="DismissableLayerBranch",HI=p.forwardRef((e,t)=>{const n=p.useContext(r1),r=p.useRef(null),o=Zt(t,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ln.div,{...e,ref:o})});HI.displayName=GI;function KI(e,t=globalThis==null?void 0:globalThis.document){const n=Ga(e),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){i1(BI,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function YI(e,t=globalThis==null?void 0:globalThis.document){const n=Ga(e),r=p.useRef(!1);return p.useEffect(()=>{const o=i=>{i.target&&!r.current&&i1(WI,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function g0(){const e=new CustomEvent(Xf);document.dispatchEvent(e)}function i1(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?_I(o,i):o.dispatchEvent(i)}var xd="focusScope.autoFocusOnMount",wd="focusScope.autoFocusOnUnmount",y0={bubbles:!1,cancelable:!0},XI="FocusScope",s1=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[l,c]=p.useState(null),u=Ga(o),m=Ga(i),h=p.useRef(null),g=Zt(t,C=>c(C)),E=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let C=function(T){if(E.paused||!l)return;const A=T.target;l.contains(A)?h.current=A:oo(h.current,{select:!0})},P=function(T){if(E.paused||!l)return;const A=T.relatedTarget;A!==null&&(l.contains(A)||oo(h.current,{select:!0}))},S=function(T){if(document.activeElement===document.body)for(const $ of T)$.removedNodes.length>0&&oo(l)};document.addEventListener("focusin",C),document.addEventListener("focusout",P);const b=new MutationObserver(S);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",P),b.disconnect()}}},[r,l,E.paused]),p.useEffect(()=>{if(l){x0.add(E);const C=document.activeElement;if(!l.contains(C)){const S=new CustomEvent(xd,y0);l.addEventListener(xd,u),l.dispatchEvent(S),S.defaultPrevented||(qI(tD(a1(l)),{select:!0}),document.activeElement===C&&oo(l))}return()=>{l.removeEventListener(xd,u),setTimeout(()=>{const S=new CustomEvent(wd,y0);l.addEventListener(wd,m),l.dispatchEvent(S),S.defaultPrevented||oo(C??document.body,{select:!0}),l.removeEventListener(wd,m),x0.remove(E)},0)}}},[l,u,m,E]);const j=p.useCallback(C=>{if(!n&&!r||E.paused)return;const P=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,S=document.activeElement;if(P&&S){const b=C.currentTarget,[T,A]=QI(b);T&&A?!C.shiftKey&&S===A?(C.preventDefault(),n&&oo(T,{select:!0})):C.shiftKey&&S===T&&(C.preventDefault(),n&&oo(A,{select:!0})):S===b&&C.preventDefault()}},[n,r,E.paused]);return a.jsx(ln.div,{tabIndex:-1,...s,ref:g,onKeyDown:j})});s1.displayName=XI;function qI(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(oo(r,{select:t}),document.activeElement!==n)return}function QI(e){const t=a1(e),n=v0(t,e),r=v0(t.reverse(),e);return[n,r]}function a1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function v0(e,t){for(const n of e)if(!ZI(n,{upTo:t}))return n}function ZI(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function JI(e){return e instanceof HTMLInputElement&&"select"in e}function oo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&JI(e)&&t&&e.select()}}var x0=eD();function eD(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=w0(e,t),e.unshift(t)},remove(t){var n;e=w0(e,t),(n=e[0])==null||n.resume()}}}function w0(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function tD(e){return e.filter(t=>t.tagName!=="A")}var nD="Portal",l1=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[o,i]=p.useState(!1);vs(()=>i(!0),[]);const s=n||o&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return s?jE.createPortal(a.jsx(ln.div,{...r,ref:t}),s):null});l1.displayName=nD;function rD(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var su=e=>{const{present:t,children:n}=e,r=oD(t),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Zt(r.ref,iD(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:i}):null};su.displayName="Presence";function oD(e){const[t,n]=p.useState(),r=p.useRef(null),o=p.useRef(e),i=p.useRef("none"),s=e?"mounted":"unmounted",[l,c]=rD(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Ml(r.current);i.current=l==="mounted"?u:"none"},[l]),vs(()=>{const u=r.current,m=o.current;if(m!==e){const g=i.current,E=Ml(u);e?c("MOUNT"):E==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(m&&g!==E?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),vs(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,h=E=>{const C=Ml(r.current).includes(E.animationName);if(E.target===t&&C&&(c("ANIMATION_END"),!o.current)){const P=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=P)})}},g=E=>{E.target===t&&(i.current=Ml(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ml(e){return(e==null?void 0:e.animationName)||"none"}function iD(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var bd=0;function sD(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??b0()),document.body.insertAdjacentElement("beforeend",e[1]??b0()),bd++,()=>{bd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bd--}},[])}function b0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Cr=function(){return Cr=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cr.apply(this,arguments)};function c1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function aD(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var nc="right-scroll-bar-position",rc="width-before-scroll-bar",lD="with-scroll-bars-hidden",cD="--removed-body-scroll-bar-size";function Sd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function uD(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var dD=typeof window<"u"?p.useLayoutEffect:p.useEffect,S0=new WeakMap;function fD(e,t){var n=uD(t||null,function(r){return e.forEach(function(o){return Sd(o,r)})});return dD(function(){var r=S0.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(l){i.has(l)||Sd(l,null)}),i.forEach(function(l){o.has(l)||Sd(l,s)})}S0.set(n,e)},[e]),n}function hD(e){return e}function mD(e,t){t===void 0&&(t=hD);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(l){return l!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var l=n;n=[],l.forEach(i),s=n}var c=function(){var m=s;s=[],m.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(m){s.push(m),u()},filter:function(m){return s=s.filter(m),n}}}};return o}function pD(e){e===void 0&&(e={});var t=mD(null);return t.options=Cr({async:!0,ssr:!1},e),t}var u1=function(e){var t=e.sideCar,n=c1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Cr({},n))};u1.isSideCarExport=!0;function gD(e,t){return e.useMedium(t),u1}var d1=pD(),Td=function(){},au=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Td,onWheelCapture:Td,onTouchMoveCapture:Td}),o=r[0],i=r[1],s=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,m=e.enabled,h=e.shards,g=e.sideCar,E=e.noRelative,j=e.noIsolation,C=e.inert,P=e.allowPinchZoom,S=e.as,b=S===void 0?"div":S,T=e.gapMode,A=c1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),$=g,Y=fD([n,t]),K=Cr(Cr({},A),o);return p.createElement(p.Fragment,null,m&&p.createElement($,{sideCar:d1,removeScrollBar:u,shards:h,noRelative:E,noIsolation:j,inert:C,setCallbacks:i,allowPinchZoom:!!P,lockRef:n,gapMode:T}),s?p.cloneElement(p.Children.only(l),Cr(Cr({},K),{ref:Y})):p.createElement(b,Cr({},K,{className:c,ref:Y}),l))});au.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};au.classNames={fullWidth:rc,zeroRight:nc};var T0,yD=function(){if(T0)return T0;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=yD();return t&&e.setAttribute("nonce",t),e}function xD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function wD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bD=function(){var e=0,t=null;return{add:function(n){e==0&&(t=vD())&&(xD(t,n),wD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},SD=function(){var e=bD();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},f1=function(){var e=SD(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},TD={left:0,top:0,right:0,gap:0},Cd=function(e){return parseInt(e||"",10)||0},CD=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Cd(n),Cd(r),Cd(o)]},kD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TD;var t=CD(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ED=f1(),ss="data-scroll-locked",ND=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(lD,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ss,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(rc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(nc," .").concat(nc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rc," .").concat(rc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ss,`] {
    `).concat(cD,": ").concat(l,`px;
  }
`)},C0=function(){var e=parseInt(document.body.getAttribute(ss)||"0",10);return isFinite(e)?e:0},PD=function(){p.useEffect(function(){return document.body.setAttribute(ss,(C0()+1).toString()),function(){var e=C0()-1;e<=0?document.body.removeAttribute(ss):document.body.setAttribute(ss,e.toString())}},[])},jD=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;PD();var i=p.useMemo(function(){return kD(o)},[o]);return p.createElement(ED,{styles:ND(i,!t,o,n?"":"!important")})},qf=!1;if(typeof window<"u")try{var Ll=Object.defineProperty({},"passive",{get:function(){return qf=!0,!0}});window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{qf=!1}var Ri=qf?{passive:!1}:!1,AD=function(e){return e.tagName==="TEXTAREA"},h1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!AD(e)&&n[t]==="visible")},RD=function(e){return h1(e,"overflowY")},ID=function(e){return h1(e,"overflowX")},k0=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=m1(e,r);if(o){var i=p1(e,r),s=i[1],l=i[2];if(s>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},DD=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},MD=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},m1=function(e,t){return e==="v"?RD(t):ID(t)},p1=function(e,t){return e==="v"?DD(t):MD(t)},LD=function(e,t){return e==="h"&&t==="rtl"?-1:1},$D=function(e,t,n,r,o){var i=LD(e,window.getComputedStyle(t).direction),s=i*r,l=n.target,c=t.contains(l),u=!1,m=s>0,h=0,g=0;do{if(!l)break;var E=p1(e,l),j=E[0],C=E[1],P=E[2],S=C-P-i*j;(j||S)&&m1(e,l)&&(h+=S,g+=j);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(m&&(o&&Math.abs(h)<1||!o&&s>h)||!m&&(o&&Math.abs(g)<1||!o&&-s>g))&&(u=!0),u},$l=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},E0=function(e){return[e.deltaX,e.deltaY]},N0=function(e){return e&&"current"in e?e.current:e},FD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},VD=0,Ii=[];function _D(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(VD++)[0],i=p.useState(f1)[0],s=p.useRef(e);p.useEffect(function(){s.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var C=aD([e.lockRef.current],(e.shards||[]).map(N0),!0).filter(Boolean);return C.forEach(function(P){return P.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),C.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(C,P){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!s.current.allowPinchZoom;var S=$l(C),b=n.current,T="deltaX"in C?C.deltaX:b[0]-S[0],A="deltaY"in C?C.deltaY:b[1]-S[1],$,Y=C.target,K=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in C&&K==="h"&&Y.type==="range")return!1;var _=k0(K,Y);if(!_)return!0;if(_?$=K:($=K==="v"?"h":"v",_=k0(K,Y)),!_)return!1;if(!r.current&&"changedTouches"in C&&(T||A)&&(r.current=$),!$)return!0;var ae=r.current||$;return $D(ae,P,C,ae==="h"?T:A,!0)},[]),c=p.useCallback(function(C){var P=C;if(!(!Ii.length||Ii[Ii.length-1]!==i)){var S="deltaY"in P?E0(P):$l(P),b=t.current.filter(function($){return $.name===P.type&&($.target===P.target||P.target===$.shadowParent)&&FD($.delta,S)})[0];if(b&&b.should){P.cancelable&&P.preventDefault();return}if(!b){var T=(s.current.shards||[]).map(N0).filter(Boolean).filter(function($){return $.contains(P.target)}),A=T.length>0?l(P,T[0]):!s.current.noIsolation;A&&P.cancelable&&P.preventDefault()}}},[]),u=p.useCallback(function(C,P,S,b){var T={name:C,delta:P,target:S,should:b,shadowParent:UD(S)};t.current.push(T),setTimeout(function(){t.current=t.current.filter(function(A){return A!==T})},1)},[]),m=p.useCallback(function(C){n.current=$l(C),r.current=void 0},[]),h=p.useCallback(function(C){u(C.type,E0(C),C.target,l(C,e.lockRef.current))},[]),g=p.useCallback(function(C){u(C.type,$l(C),C.target,l(C,e.lockRef.current))},[]);p.useEffect(function(){return Ii.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",c,Ri),document.addEventListener("touchmove",c,Ri),document.addEventListener("touchstart",m,Ri),function(){Ii=Ii.filter(function(C){return C!==i}),document.removeEventListener("wheel",c,Ri),document.removeEventListener("touchmove",c,Ri),document.removeEventListener("touchstart",m,Ri)}},[]);var E=e.removeScrollBar,j=e.inert;return p.createElement(p.Fragment,null,j?p.createElement(i,{styles:OD(o)}):null,E?p.createElement(jD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function UD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zD=gD(d1,_D);var g1=p.forwardRef(function(e,t){return p.createElement(au,Cr({},e,{ref:t,sideCar:zD}))});g1.classNames=au.classNames;const BD=g1;var WD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Di=new WeakMap,Fl=new WeakMap,Ol={},kd=0,y1=function(e){return e&&(e.host||y1(e.parentNode))},GD=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=y1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},HD=function(e,t,n,r){var o=GD(t,Array.isArray(e)?e:[e]);Ol[n]||(Ol[n]=new WeakMap);var i=Ol[n],s=[],l=new Set,c=new Set(o),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};o.forEach(u);var m=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(g){if(l.has(g))m(g);else try{var E=g.getAttribute(r),j=E!==null&&E!=="false",C=(Di.get(g)||0)+1,P=(i.get(g)||0)+1;Di.set(g,C),i.set(g,P),s.push(g),C===1&&j&&Fl.set(g,!0),P===1&&g.setAttribute(n,"true"),j||g.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",g,S)}})};return m(t),l.clear(),kd++,function(){s.forEach(function(h){var g=Di.get(h)-1,E=i.get(h)-1;Di.set(h,g),i.set(h,E),g||(Fl.has(h)||h.removeAttribute(r),Fl.delete(h)),E||h.removeAttribute(n)}),kd--,kd||(Di=new WeakMap,Di=new WeakMap,Fl=new WeakMap,Ol={})}},KD=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||WD(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),HD(r,o,n,"aria-hidden")):function(){return null}},lu="Dialog",[v1,x1]=nl(lu),[YD,hr]=v1(lu),w1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,m]=n1({prop:r,defaultProp:o??!1,onChange:i,caller:lu});return a.jsx(YD,{scope:t,triggerRef:l,contentRef:c,contentId:vd(),titleId:vd(),descriptionId:vd(),open:u,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(h=>!h),[m]),modal:s,children:n})};w1.displayName=lu;var b1="DialogTrigger",S1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=hr(b1,n),i=Zt(t,o.triggerRef);return a.jsx(ln.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":_m(o.open),...r,ref:i,onClick:gn(e.onClick,o.onOpenToggle)})});S1.displayName=b1;var Om="DialogPortal",[XD,T1]=v1(Om,{forceMount:void 0}),C1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=hr(Om,t);return a.jsx(XD,{scope:t,forceMount:n,children:p.Children.map(r,s=>a.jsx(su,{present:n||i.open,children:a.jsx(l1,{asChild:!0,container:o,children:s})}))})};C1.displayName=Om;var Lc="DialogOverlay",k1=p.forwardRef((e,t)=>{const n=T1(Lc,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=hr(Lc,e.__scopeDialog);return i.modal?a.jsx(su,{present:r||i.open,children:a.jsx(QD,{...o,ref:t})}):null});k1.displayName=Lc;var qD=Wa("DialogOverlay.RemoveScroll"),QD=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=hr(Lc,n);return a.jsx(BD,{as:qD,allowPinchZoom:!0,shards:[o.contentRef],children:a.jsx(ln.div,{"data-state":_m(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),mi="DialogContent",E1=p.forwardRef((e,t)=>{const n=T1(mi,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=hr(mi,e.__scopeDialog);return a.jsx(su,{present:r||i.open,children:i.modal?a.jsx(ZD,{...o,ref:t}):a.jsx(JD,{...o,ref:t})})});E1.displayName=mi;var ZD=p.forwardRef((e,t)=>{const n=hr(mi,e.__scopeDialog),r=p.useRef(null),o=Zt(t,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return KD(i)},[]),a.jsx(N1,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gn(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:gn(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0;(s.button===2||l)&&i.preventDefault()}),onFocusOutside:gn(e.onFocusOutside,i=>i.preventDefault())})}),JD=p.forwardRef((e,t)=>{const n=hr(mi,e.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return a.jsx(N1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,l;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),N1=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=e,l=hr(mi,n),c=p.useRef(null),u=Zt(t,c);return sD(),a.jsxs(a.Fragment,{children:[a.jsx(s1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:a.jsx(o1,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":_m(l.open),...s,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(tM,{titleId:l.titleId}),a.jsx(rM,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Vm="DialogTitle",P1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=hr(Vm,n);return a.jsx(ln.h2,{id:o.titleId,...r,ref:t})});P1.displayName=Vm;var j1="DialogDescription",A1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=hr(j1,n);return a.jsx(ln.p,{id:o.descriptionId,...r,ref:t})});A1.displayName=j1;var R1="DialogClose",I1=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=hr(R1,n);return a.jsx(ln.button,{type:"button",...r,ref:t,onClick:gn(e.onClick,()=>o.onOpenChange(!1))})});I1.displayName=R1;function _m(e){return e?"open":"closed"}var D1="DialogTitleWarning",[eM,M1]=II(D1,{contentName:mi,titleName:Vm,docsSlug:"dialog"}),tM=({titleId:e})=>{const t=M1(D1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},nM="DialogDescriptionWarning",rM=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${M1(nM).contentName}}.`;return p.useEffect(()=>{var i;const o=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},oM=w1,iM=S1,sM=C1,aM=k1,lM=E1,cM=P1,uM=A1,L1=I1,$1="AlertDialog",[dM,vL]=nl($1,[x1]),Gr=x1(),F1=e=>{const{__scopeAlertDialog:t,...n}=e,r=Gr(t);return a.jsx(oM,{...r,...n,modal:!0})};F1.displayName=$1;var fM="AlertDialogTrigger",hM=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Gr(n);return a.jsx(iM,{...o,...r,ref:t})});hM.displayName=fM;var mM="AlertDialogPortal",O1=e=>{const{__scopeAlertDialog:t,...n}=e,r=Gr(t);return a.jsx(sM,{...r,...n})};O1.displayName=mM;var pM="AlertDialogOverlay",V1=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Gr(n);return a.jsx(aM,{...o,...r,ref:t})});V1.displayName=pM;var as="AlertDialogContent",[gM,yM]=dM(as),vM=vI("AlertDialogContent"),_1=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,i=Gr(n),s=p.useRef(null),l=Zt(t,s),c=p.useRef(null);return a.jsx(eM,{contentName:as,titleName:U1,docsSlug:"alert-dialog",children:a.jsx(gM,{scope:n,cancelRef:c,children:a.jsxs(lM,{role:"alertdialog",...i,...o,ref:l,onOpenAutoFocus:gn(o.onOpenAutoFocus,u=>{var m;u.preventDefault(),(m=c.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(vM,{children:r}),a.jsx(wM,{contentRef:s})]})})})});_1.displayName=as;var U1="AlertDialogTitle",z1=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Gr(n);return a.jsx(cM,{...o,...r,ref:t})});z1.displayName=U1;var B1="AlertDialogDescription",W1=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Gr(n);return a.jsx(uM,{...o,...r,ref:t})});W1.displayName=B1;var xM="AlertDialogAction",G1=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Gr(n);return a.jsx(L1,{...o,...r,ref:t})});G1.displayName=xM;var H1="AlertDialogCancel",K1=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=yM(H1,n),i=Gr(n),s=Zt(t,o);return a.jsx(L1,{...i,...r,ref:s})});K1.displayName=H1;var wM=({contentRef:e})=>{const t=`\`${as}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${as}\` by passing a \`${B1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${as}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},bM=F1,SM=O1,Y1=V1,X1=_1,q1=G1,Q1=K1,Z1=z1,J1=W1;const TM=bM,CM=SM,eS=p.forwardRef(({className:e,...t},n)=>a.jsx(Y1,{className:It("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));eS.displayName=Y1.displayName;const tS=p.forwardRef(({className:e,...t},n)=>a.jsxs(CM,{children:[a.jsx(eS,{}),a.jsx(X1,{ref:n,className:It("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));tS.displayName=X1.displayName;const nS=({className:e,...t})=>a.jsx("div",{className:It("flex flex-col space-y-2 text-center sm:text-left",e),...t});nS.displayName="AlertDialogHeader";const rS=({className:e,...t})=>a.jsx("div",{className:It("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});rS.displayName="AlertDialogFooter";const oS=p.forwardRef(({className:e,...t},n)=>a.jsx(Z1,{ref:n,className:It("text-lg font-semibold",e),...t}));oS.displayName=Z1.displayName;const iS=p.forwardRef(({className:e,...t},n)=>a.jsx(J1,{ref:n,className:It("text-sm text-muted-foreground",e),...t}));iS.displayName=J1.displayName;const sS=p.forwardRef(({className:e,...t},n)=>a.jsx(q1,{ref:n,className:It(Fm(),e),...t}));sS.displayName=q1.displayName;const aS=p.forwardRef(({className:e,...t},n)=>a.jsx(Q1,{ref:n,className:It(Fm({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));aS.displayName=Q1.displayName;function lS(e,[t,n]){return Math.min(n,Math.max(t,e))}var kM=p.createContext(void 0);function EM(e){const t=p.useContext(kM);return e||t||"ltr"}function NM(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function PM(e){const[t,n]=p.useState(void 0);return vs(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;s=u.inlineSize,l=u.blockSize}else s=e.offsetWidth,l=e.offsetHeight;n({width:s,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function jM(e){const t=e+"CollectionProvider",[n,r]=nl(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=C=>{const{scope:P,children:S}=C,b=ar.useRef(null),T=ar.useRef(new Map).current;return a.jsx(o,{scope:P,itemMap:T,collectionRef:b,children:S})};s.displayName=t;const l=e+"CollectionSlot",c=Wa(l),u=ar.forwardRef((C,P)=>{const{scope:S,children:b}=C,T=i(l,S),A=Zt(P,T.collectionRef);return a.jsx(c,{ref:A,children:b})});u.displayName=l;const m=e+"CollectionItemSlot",h="data-radix-collection-item",g=Wa(m),E=ar.forwardRef((C,P)=>{const{scope:S,children:b,...T}=C,A=ar.useRef(null),$=Zt(P,A),Y=i(m,S);return ar.useEffect(()=>(Y.itemMap.set(A,{ref:A,...T}),()=>void Y.itemMap.delete(A))),a.jsx(g,{[h]:"",ref:$,children:b})});E.displayName=m;function j(C){const P=i(e+"CollectionConsumer",C);return ar.useCallback(()=>{const b=P.collectionRef.current;if(!b)return[];const T=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(P.itemMap.values()).sort((Y,K)=>T.indexOf(Y.ref.current)-T.indexOf(K.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:s,Slot:u,ItemSlot:E},j,r]}var cS=["PageUp","PageDown"],uS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},js="Slider",[Qf,AM,RM]=jM(js),[fS,xL]=nl(js,[RM]),[IM,cu]=fS(js),hS=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:i=1,orientation:s="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:m,onValueChange:h=()=>{},onValueCommit:g=()=>{},inverted:E=!1,form:j,...C}=e,P=p.useRef(new Set),S=p.useRef(0),T=s==="horizontal"?DM:MM,[A=[],$]=n1({prop:m,defaultProp:u,onChange:be=>{var Oe;(Oe=[...P.current][S.current])==null||Oe.focus(),h(be)}}),Y=p.useRef(A);function K(be){const ne=VM(A,be);J(be,ne)}function _(be){J(be,S.current)}function ae(){const be=Y.current[S.current];A[S.current]!==be&&g(A)}function J(be,ne,{commit:Oe}={commit:!1}){const ie=BM(i),Dt=WM(Math.round((be-r)/i)*i+r,ie),He=lS(Dt,[r,o]);$((Ie=[])=>{const f=FM(Ie,He,ne);if(zM(f,c*i)){S.current=f.indexOf(He);const re=String(f)!==String(Ie);return re&&Oe&&g(f),re?f:Ie}else return Ie})}return a.jsx(IM,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:o,valueIndexToChangeRef:S,thumbs:P.current,values:A,orientation:s,form:j,children:a.jsx(Qf.Provider,{scope:e.__scopeSlider,children:a.jsx(Qf.Slot,{scope:e.__scopeSlider,children:a.jsx(T,{"aria-disabled":l,"data-disabled":l?"":void 0,...C,ref:t,onPointerDown:gn(C.onPointerDown,()=>{l||(Y.current=A)}),min:r,max:o,inverted:E,onSlideStart:l?void 0:K,onSlideMove:l?void 0:_,onSlideEnd:l?void 0:ae,onHomeKeyDown:()=>!l&&J(r,0,{commit:!0}),onEndKeyDown:()=>!l&&J(o,A.length-1,{commit:!0}),onStepKeyDown:({event:be,direction:ne})=>{if(!l){const Dt=cS.includes(be.key)||be.shiftKey&&uS.includes(be.key)?10:1,He=S.current,Ie=A[He],f=i*Dt*ne;J(Ie+f,He,{commit:!0})}}})})})})});hS.displayName=js;var[mS,pS]=fS(js,{startEdge:"left",endEdge:"right",size:"width",direction:1}),DM=p.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:i,onSlideStart:s,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...m}=e,[h,g]=p.useState(null),E=Zt(t,T=>g(T)),j=p.useRef(void 0),C=EM(o),P=C==="ltr",S=P&&!i||!P&&i;function b(T){const A=j.current||h.getBoundingClientRect(),$=[0,A.width],K=Um($,S?[n,r]:[r,n]);return j.current=A,K(T-A.left)}return a.jsx(mS,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:a.jsx(gS,{dir:C,"data-orientation":"horizontal",...m,ref:E,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:T=>{const A=b(T.clientX);s==null||s(A)},onSlideMove:T=>{const A=b(T.clientX);l==null||l(A)},onSlideEnd:()=>{j.current=void 0,c==null||c()},onStepKeyDown:T=>{const $=dS[S?"from-left":"from-right"].includes(T.key);u==null||u({event:T,direction:$?-1:1})}})})}),MM=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:i,onSlideMove:s,onSlideEnd:l,onStepKeyDown:c,...u}=e,m=p.useRef(null),h=Zt(t,m),g=p.useRef(void 0),E=!o;function j(C){const P=g.current||m.current.getBoundingClientRect(),S=[0,P.height],T=Um(S,E?[r,n]:[n,r]);return g.current=P,T(C-P.top)}return a.jsx(mS,{scope:e.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:a.jsx(gS,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const P=j(C.clientY);i==null||i(P)},onSlideMove:C=>{const P=j(C.clientY);s==null||s(P)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:C=>{const S=dS[E?"from-bottom":"from-top"].includes(C.key);c==null||c({event:C,direction:S?-1:1})}})})}),gS=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:l,onStepKeyDown:c,...u}=e,m=cu(js,n);return a.jsx(ln.span,{...u,ref:t,onKeyDown:gn(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):cS.concat(uS).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:gn(e.onPointerDown,h=>{const g=h.target;g.setPointerCapture(h.pointerId),h.preventDefault(),m.thumbs.has(g)?g.focus():r(h)}),onPointerMove:gn(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&o(h)}),onPointerUp:gn(e.onPointerUp,h=>{const g=h.target;g.hasPointerCapture(h.pointerId)&&(g.releasePointerCapture(h.pointerId),i(h))})})}),yS="SliderTrack",vS=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=cu(yS,n);return a.jsx(ln.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});vS.displayName=yS;var Zf="SliderRange",xS=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=cu(Zf,n),i=pS(Zf,n),s=p.useRef(null),l=Zt(t,s),c=o.values.length,u=o.values.map(g=>SS(g,o.min,o.max)),m=c>1?Math.min(...u):0,h=100-Math.max(...u);return a.jsx(ln.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:m+"%",[i.endEdge]:h+"%"}})});xS.displayName=Zf;var Jf="SliderThumb",wS=p.forwardRef((e,t)=>{const n=AM(e.__scopeSlider),[r,o]=p.useState(null),i=Zt(t,l=>o(l)),s=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return a.jsx(LM,{...e,ref:i,index:s})}),LM=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...i}=e,s=cu(Jf,n),l=pS(Jf,n),[c,u]=p.useState(null),m=Zt(t,b=>u(b)),h=c?s.form||!!c.closest("form"):!0,g=PM(c),E=s.values[r],j=E===void 0?0:SS(E,s.min,s.max),C=OM(r,s.values.length),P=g==null?void 0:g[l.size],S=P?_M(P,j,l.direction):0;return p.useEffect(()=>{if(c)return s.thumbs.add(c),()=>{s.thumbs.delete(c)}},[c,s.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${S}px)`},children:[a.jsx(Qf.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(ln.span,{role:"slider","aria-label":e["aria-label"]||C,"aria-valuemin":s.min,"aria-valuenow":E,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:m,style:E===void 0?{display:"none"}:e.style,onFocus:gn(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&a.jsx(bS,{name:o??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:E},r)]})});wS.displayName=Jf;var $M="RadioBubbleInput",bS=p.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const o=p.useRef(null),i=Zt(o,r),s=NM(t);return p.useEffect(()=>{const l=o.current;if(!l)return;const c=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&m){const h=new Event("input",{bubbles:!0});m.call(l,t),l.dispatchEvent(h)}},[s,t]),a.jsx(ln.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});bS.displayName=$M;function FM(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,i)=>o-i)}function SS(e,t,n){const i=100/(n-t)*(e-t);return lS(i,[0,100])}function OM(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function VM(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function _M(e,t,n){const r=e/2,i=Um([0,50],[0,r]);return(r-i(t)*n)*n}function UM(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function zM(e,t){if(t>0){const n=UM(e);return Math.min(...n)>=t}return!0}function Um(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function BM(e){return(String(e).split(".")[1]||"").length}function WM(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var TS=hS,GM=vS,HM=xS,KM=wS;const Yo=p.forwardRef(({className:e,...t},n)=>a.jsxs(TS,{ref:n,className:It("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(GM,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(HM,{className:"absolute h-full bg-primary"})}),a.jsx(KM,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Yo.displayName=TS.displayName;const YM=[],XM=({selectedVoice:e,onVoiceSelect:t,className:n=""})=>{const[r,o]=p.useState(null),[i,s]=p.useState(null),[l,c]=p.useState(YM),[u,m]=p.useState(!1),[h,g]=p.useState(null);p.useEffect(()=>{let C=!0;return(async()=>{var S;try{m(!0),g(null);const b=await ut.fetchMurfVoices();C&&(b!=null&&b.success)&&Array.isArray((S=b.data)==null?void 0:S.voices)&&b.data.voices.length>0&&(c(b.data.voices),window.murfVoices=b.data.voices)}catch(b){C&&g((b==null?void 0:b.message)||"Failed to load voices")}finally{C&&m(!1)}})(),()=>{C=!1}},[]);const E=C=>{t(C)},j=async(C,P)=>{try{i&&(i.pause(),i.currentTime=0,o(null)),o(C),console.log(`Playing voice preview for: ${P} (${C})`);const S=await ut.generateTTS(C,"Hello, how are you"),b=URL.createObjectURL(S),T=new Audio(b);s(T),T.onended=()=>{console.log("Voice preview finished playing"),o(null),URL.revokeObjectURL(b)},T.onerror=()=>{console.error("Error playing preview audio"),o(null),URL.revokeObjectURL(b)},await T.play(),console.log("Voice preview started playing")}catch(S){console.error("Error playing voice preview:",S),o(null)}};return ar.useEffect(()=>()=>{i&&(i.pause(),i.src&&URL.revokeObjectURL(i.src))},[i]),a.jsxs("div",{className:`space-y-4 ${n}`,children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Choose a Voice"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Select a voice for your story narration"})]}),u?a.jsx("div",{className:"w-full",children:a.jsx(wt,{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[a.jsx(pt,{className:"w-12 h-12 animate-spin text-blue-600"}),a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Voices..."}),a.jsx("p",{className:"text-sm text-gray-600",children:"Fetching available voices"})]})]})})})}):h?a.jsx("div",{className:"w-full",children:a.jsx(wt,{className:"bg-white border border-red-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-red-600 text-xl",children:""})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Voices"}),a.jsx("p",{className:"text-sm text-red-600 mb-4",children:h}),a.jsx(fe,{onClick:()=>window.location.reload(),variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",children:"Try Again"})]})]})})})}):l.length===0?a.jsx("div",{className:"w-full",children:a.jsx(wt,{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-gray-600 text-xl",children:""})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Voices Available"}),a.jsx("p",{className:"text-sm text-gray-600",children:"No voices were returned from the API"})]})]})})})}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsx(wt,{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-0",children:a.jsx("div",{className:"space-y-0",children:l.slice(0,Math.ceil(l.length/2)).map((C,P)=>a.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-all duration-200 ${P!==l.slice(0,Math.ceil(l.length/2)).length-1?"border-b border-gray-100":""} ${e===C.voice_id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",onClick:()=>E(C.voice_id),children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:C.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:C.name}),a.jsx("p",{className:"text-sm text-gray-500",children:C.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fe,{onClick:S=>{S.stopPropagation(),j(C.voice_id,C.name)},disabled:r===C.voice_id,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100",children:r===C.voice_id?a.jsx(pt,{className:"w-4 h-4 animate-spin text-blue-600"}):a.jsx(Zo,{className:"w-4 h-4 text-blue-600"})}),e===C.voice_id&&a.jsx(hi,{className:"w-6 h-6 text-blue-600 fill-current"})]})]},C.voice_id))})})}),a.jsx(wt,{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-0",children:a.jsx("div",{className:"space-y-0",children:l.slice(Math.ceil(l.length/2)).map((C,P)=>a.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-all duration-200 ${P!==l.slice(Math.ceil(l.length/2)).length-1?"border-b border-gray-100":""} ${e===C.voice_id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",onClick:()=>E(C.voice_id),children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:C.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:C.name}),a.jsx("p",{className:"text-sm text-gray-500",children:C.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fe,{onClick:S=>{S.stopPropagation(),j(C.voice_id,C.name)},disabled:r===C.voice_id,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100",children:r===C.voice_id?a.jsx(pt,{className:"w-4 h-4 animate-spin text-blue-600"}):a.jsx(Zo,{className:"w-4 h-4 text-blue-600"})}),e===C.voice_id&&a.jsx(hi,{className:"w-6 h-6 text-blue-600 fill-current"})]})]},C.voice_id))})})})]})]})};class qM{isElectron(){return typeof window<"u"&&"electronAPI"in window}getElectronAPI(){if(!this.isElectron())throw new Error("Audio storage is only available in Electron environment");return window.electronAPI}async saveAudioFile(t,n,r){if(!this.isElectron())throw new Error("Audio storage requires Electron environment");try{const o=await r.arrayBuffer(),i=new Uint8Array(o),s=await this.getElectronAPI().audio.saveAudioFile(t,n,i);return console.log(` Audio file saved for story ${t}, chunk ${n}:`,s.relativePath),{id:n,fileName:s.fileName,relativePath:s.relativePath,filePath:s.filePath}}catch(o){throw console.error("Failed to save audio file:",o),o}}async loadAudioFile(t){if(!this.isElectron())throw new Error("Audio loading requires Electron environment");try{if(!await this.getElectronAPI().audio.fileExists(t))throw new Error(`Audio file not found: ${t}`);const r=await this.getElectronAPI().audio.loadAudioFile(t),o=new Blob([r],{type:"audio/mpeg"}),i=URL.createObjectURL(o);return console.log(` Audio file loaded: ${t} -> ${i}`),i}catch(n){throw console.error("Failed to load audio file:",n),n}}async saveAudioManifest(t,n){if(!this.isElectron())throw new Error("Audio manifest saving requires Electron environment");try{await this.getElectronAPI().audio.saveManifest(t,n),console.log(` Audio manifest saved for story ${t}`)}catch(r){throw console.error("Failed to save audio manifest:",r),r}}async deleteStoryAudio(t){if(!this.isElectron()){console.warn("Audio deletion is only available in Electron environment");return}try{await this.getElectronAPI().audio.deleteStoryAudio(t),console.log(` Audio files deleted for story ${t}`)}catch(n){throw console.error("Failed to delete story audio:",n),n}}async fileExists(t){if(!this.isElectron())return!1;try{return await this.getElectronAPI().audio.fileExists(t)}catch(n){return console.error("Failed to check file existence:",n),!1}}async getAudioDirectory(){if(!this.isElectron())throw new Error("Audio directory access requires Electron environment");try{return await this.getElectronAPI().audio.getAudioDirectory()}catch(t){throw console.error("Failed to get audio directory:",t),t}}getRelativePath(t,n){return`audio/story-${t}/${n}.mp3`}createManifest(t,n,r){return{storyId:t,voiceId:n,generatedAt:new Date().toISOString(),chunks:r.map(o=>({id:o.id,fileName:`${o.id}.mp3`,relativePath:o.relativePath,text:o.text,duration:o.duration,startTime:o.startTime}))}}}const Dr=new qM,QM={"en-US-natalie":{name:"Natalie",description:"Warm and professional female voice"},"en-US-amara":{name:"Amara",description:"Friendly female voice, great for storytelling"},"en-US-miles":{name:"Miles",description:"Clear male voice, perfect for narration"},"en-US-ryan":{name:"Ryan",description:"Versatile male voice for various content types"},"21m00Tcm4TlvDq8ikWAM":{name:"Rachel",description:"Calm narrator"},AZnzlk1XvdvUeBnXmlld:{name:"Alice",description:"British accent"},EXAVITQu4vr4xnSDxMaL:{name:"Lily",description:"Young female voice"},ErXwobaYiN019PkySvjV:{name:"Henry",description:"Narrative voice"},MF3mGyEYCl7XYWbV9V6O:{name:"Elli",description:"Emotional range"},kdmDKE6EkgrWrrykO9Qt:{name:"Alexandra",description:"Super realistic, young female voice that likes to chat"},L0Dsvb3SLTyegXwtm47J:{name:"Archer",description:"Grounded and friendly young British male with charm"},g6xIsTj2HwM6VR4iXFCw:{name:"Jessica Anne Bogart",description:"Empathetic and expressive, great for wellness coaches"},OYTbf65OHHFELVut7v2H:{name:"Hope",description:"Bright and uplifting, perfect for positive interactions"},dj3G1R1ilKoFKhBnWOzG:{name:"Eryn",description:"Friendly and relatable, ideal for casual interactions"},HDA9tsk27wYi3uq0fPcK:{name:"Stuart",description:"Professional & friendly Aussie, ideal for technical assistance"},"1SM7GgM6IMuvQlz2BwM3":{name:"Mark",description:"Relaxed and laid back, suitable for nonchalant chats"},PT4nqlKZfc06VW1BuClj:{name:"Angela",description:"Raw and relatable, great listener and down to earth"},vBKc2FfBKJfcZNyEt1n6:{name:"Finn",description:"Tenor pitched, excellent for podcasts and light chats"},"56AoDkrOh6qfVPDXZ7Pt":{name:"Cassidy",description:"Engaging and energetic, good for entertainment contexts"},NOpBlnGInO9m6vDvFkFC:{name:"Grandpa Spuds Oxley",description:"Distinctive character voice for unique agents"}},P0=({storyContent:e,selectedVoiceId:t,generatedAudioVoiceId:n,onAudioGenerated:r,onNext:o,onAudioControlRef:i,className:s="",autoStart:l=!1,storyId:c,existingAudioChunks:u})=>{const[m,h]=p.useState(!1),[g,E]=p.useState([]),[j,C]=p.useState(-1),[P,S]=p.useState(!1),[b,T]=p.useState(0),[A,$]=p.useState(0),[Y,K]=p.useState(!1),[_,ae]=p.useState(null),[J,be]=p.useState(null);p.useEffect(()=>{console.log("=== STATE CHANGE ===",{allGenerated:Y,isGenerating:m,audioChunksLength:g.length,chunksWithValidBlobs:g.filter(V=>V.blobUrl&&V.blobUrl.startsWith("blob:")).length,generatedChunks:g.filter(V=>V.isGenerated).length})},[Y,m,g]),p.useEffect(()=>{if(!m&&Y&&g.length>0){const V=g.filter(L=>L.blobUrl&&L.blobUrl.startsWith("blob:"));console.log("=== GENERATION COMPLETED - UI SHOULD SWITCH TO PLAYBACK ===",{allGenerated:Y,isGenerating:m,totalChunks:g.length,validChunks:V.length,shouldShowPlayback:!m&&Y})}},[m,Y,g]);const ne=p.useRef([]),Oe=p.useRef(null),ie=p.useRef(),Dt=V=>{let L=V.split(/\n\s*\n/).filter(X=>X.trim().length>0);const H=[];return L.forEach(X=>{if(X.length<=2500)H.push(X.trim());else{const ue=X.split(/[.!?]+/).filter($e=>$e.trim().length>0);let se="";ue.forEach($e=>{const Ae=$e.trim();se.length+Ae.length+1<=2500?se+=(se?". ":"")+Ae:(se&&H.push(se+"."),se=Ae)}),se&&H.push(se+".")}}),H},He=V=>{const L=V.split(/\s+/).length;return Math.max(2,Math.round(L/150*60))};p.useEffect(()=>{if(u&&u.length>0){console.log("Loading existing audio chunks:",u),(async()=>{const ue=[];let se=!0;for(const Ae of u){let st,ot;if(c&&Ae.filePath&&!Ae.filePath.startsWith("blob:"))try{ot=Ae.filePath,typeof window<"u"&&window.__initialLoadComplete!==!0?(console.log(` Skipping audio load during initial load: ${ot}`),st=`file://${ot}`):st=await Dr.loadAudioFile(ot),console.log(` Loaded audio from disk: ${ot}`)}catch(Jt){console.warn(`Failed to load audio from disk: ${Jt}`),se=!1}else Ae.filePath&&Ae.filePath.startsWith("blob:")&&(console.warn(`Chunk ${Ae.id} has blob URL that may be invalid`),se=!1);ue.push({id:Ae.id,name:Ae.name,text:Ae.text,duration:Ae.duration,startTime:Ae.startTime,filePath:st||ot||"",blobUrl:st,relativePath:ot,isGenerated:!!st})}console.log("Mapped chunks:",ue.map(Ae=>({id:Ae.id,hasBlobUrl:!!Ae.blobUrl,hasRelativePath:!!Ae.relativePath,isGenerated:Ae.isGenerated}))),E(ue),K(se),ne.current=new Array(ue.length).fill(null),ue.forEach((Ae,st)=>{if(Ae.blobUrl)try{const ot=new Audio(Ae.blobUrl);ne.current[st]=ot,console.log(`Created audio element for chunk ${Ae.id} at index ${st}`),ot.onerror=()=>{console.error(`Error loading audio chunk ${Ae.id} - marking for regeneration`),E(Jt=>Jt.map(Mt=>Mt.id===Ae.id?{...Mt,blobUrl:"",isGenerated:!1}:Mt)),K(!1)},ot.onloadedmetadata=()=>{console.log(`Loaded audio chunk ${Ae.id}, duration: ${ot.duration}s`)}}catch(ot){console.error(`Failed to create audio element for chunk ${Ae.id}:`,ot)}});const $e=ue.reduce((Ae,st)=>Ae+st.duration,0);$($e)})();return}const V=Dt(e);console.log(`Story split into ${V.length} paragraphs/chunks:`),V.forEach((X,ue)=>{console.log(`Chunk ${ue+1}: "${X.substring(0,100)}..." (${X.length} chars)`)});let L=0;const H=V.map((X,ue)=>{const se=He(X),$e={id:`chunk-${ue+1}`,name:`Paragraph ${ue+1}`,text:X,duration:se,startTime:L,filePath:"",isGenerated:!1};return L+=se,$e});console.log(`Created ${H.length} audio chunks for processing`),E(H),$(L),ne.current=new Array(H.length).fill(null)},[e,u]),p.useEffect(()=>{l&&g.length>0&&!Y&&!m&&(console.log("Auto-starting audio generation..."),ve())},[l,g,Y,m]),p.useEffect(()=>{i&&i({handlePlayPause:Be,isPlaying:()=>P})},[i]);const Ie=V=>{if(V.audioBlob){const L=URL.createObjectURL(V.audioBlob);return console.log(`Recreated blob URL for chunk ${V.id}:`,L),E(H=>H.map(X=>X.id===V.id?{...X,blobUrl:L}:X)),L}return console.warn(`Cannot recreate blob URL for chunk ${V.id} - no stored blob available`),null},f=async V=>{const L=g[V];if(!(!L||L.isGenerated))try{const H=await ut.generateTTS(t,L.text);let X,ue=URL.createObjectURL(H);if(c)try{X=(await Dr.saveAudioFile(c,L.id,H)).relativePath,console.log(` Audio saved to disk: ${X}`)}catch($e){console.warn(`Failed to save audio to disk, using blob URL: ${$e}`)}const se=new Audio(ue);ne.current[V]=se,await new Promise($e=>{se.onloadedmetadata=()=>{const Ae=se.duration;E(ot=>{const Jt=[...ot];Jt[V]={...Jt[V],duration:Ae,blobUrl:ue,audioBlob:H,relativePath:X,isGenerated:!0};let Mt=0;return Jt.forEach(Nn=>{Nn.startTime=Mt,Mt+=Nn.duration}),Jt});let st=0;E(ot=>(st=ot.reduce((Jt,Mt)=>Jt+Mt.duration,0),ot)),$(st),$e()},se.onerror=()=>{console.error(`Failed to load audio for chunk ${V}`),$e()}})}catch(H){throw console.error(`Error generating audio for chunk ${V}:`,H),H}},re=async V=>{console.log(`Starting generation for chunk ${V+1}/${g.length}`),await f(V),console.log(`Completed generation for chunk ${V+1}/${g.length}`),C(V)},ve=async()=>{console.log("=== STARTING AUDIO GENERATION ==="),h(!0),C(0);try{for(let V=0;V<g.length;V++){console.log(`Generating chunk ${V+1}/${g.length}`);try{await re(V),console.log(`Successfully generated chunk ${V+1}/${g.length}`)}catch(L){console.error(`Error generating chunk ${V+1}:`,L);continue}}console.log("All audio chunks generated successfully"),console.log(`Total chunks processed: ${g.length}`),E(V=>{const L=V.map(H=>({...H,isGenerated:!0}));return console.log("Calling onAudioGenerated with final chunks:",L),console.log(`Final chunks count: ${L.length}`),console.log("Chunk details:",L.map((H,X)=>({index:X,id:H.id,name:H.name,hasBlobUrl:!!H.blobUrl,text:H.text.substring(0,50)+"..."}))),r(L,A),L}),console.log("=== AUDIO GENERATION COMPLETED SUCCESSFULLY ==="),C(-1),h(!1),K(!0),setTimeout(()=>{console.log("Final state verification:",{allGenerated:!0,isGenerating:!1,shouldShowPlayback:!0})},50)}catch(V){console.error("Error generating audio:",V),K(!1),h(!1),C(-1)}console.log("=== AUDIO GENERATION PROCESS FINISHED ===")},Me=V=>{const L=Math.floor(V/60),H=Math.floor(V%60);return`${L}:${H.toString().padStart(2,"0")}`},Le=V=>{if(!Oe.current||!Y||A===0)return;const L=Oe.current.getBoundingClientRect(),H=V.clientX-L.left,X=Math.max(0,Math.min(H/L.width,1)),ue=X*A;console.log(`Timeline clicked: seeking to ${ue.toFixed(2)}s of ${A.toFixed(2)}s (${(X*100).toFixed(1)}%)`),T(ue),Ye(ue)},Ye=V=>{console.log(`Seeking to time: ${V.toFixed(2)}s`),mr(),Hr(),ne.current.forEach(se=>{se&&se.pause()});const L=g.find(se=>se.isGenerated&&V>=se.startTime&&V<se.startTime+se.duration);if(!L){console.warn(`No chunk found for time ${V.toFixed(2)}s`);return}const H=g.findIndex(se=>se.id===L.id),X=V-L.startTime;console.log(`Found chunk ${L.id} at index ${H}, seeking to offset ${X.toFixed(2)}s`);let ue=ne.current[H];if(!ue&&L.blobUrl&&(console.log(`Creating new audio element for chunk ${L.id}`),ue=new Audio(L.blobUrl),ne.current[H]=ue,Ot(ue,H,"seek")),ue)try{if(ue.currentTime=X,ae(ue),console.log(` Audio seeked to ${X.toFixed(2)}s in chunk ${L.id}`),console.log(` Timeline position maintained at: ${V.toFixed(2)}s`),P){const se=ue.play();se!==void 0&&se.then(()=>{console.log(` Resumed playback from ${X.toFixed(2)}s`),ie.current||cn()}).catch($e=>{console.error("Failed to resume playback after seeking:",$e),S(!1)})}}catch(se){console.error(`Failed to seek audio for chunk ${L.id}:`,se)}else console.error(`No audio element available for chunk ${L.id}`)},Be=()=>{var V;if(console.log("=== AUDIO PLAYBACK DEBUG ==="),console.log("Play/Pause clicked. Current state:",{isPlaying:P,currentTime:b,totalDuration:A,audioChunksLength:g.length,allGenerated:Y}),g.length===0){console.error("No audio chunks available for playback");return}if(console.log("Audio chunks for playback:",g.map(L=>({id:L.id,name:L.name,hasBlobUrl:!!L.blobUrl,blobUrl:L.blobUrl,startTime:L.startTime,duration:L.duration}))),P)console.log("Pausing playback"),Fn();else{if(b>0&&b<A){un();return}b>=A&&(console.log(" At end of playback, restarting from beginning"),T(0)),console.log(" Starting playback from beginning"),mr(),Hr(),ne.current.forEach(H=>{H&&H!==_&&H.pause()}),S(!0);const L=g.find(H=>H.isGenerated&&b>=H.startTime&&b<H.startTime+H.duration);if(L&&L.blobUrl){console.log("Found active chunk for playback:",{id:L.id,name:L.name,startTime:L.startTime,duration:L.duration,currentTime:b,offsetInChunk:b-L.startTime,blobUrl:L.blobUrl});try{const H=new Audio;H.src=L.blobUrl,H.onerror=()=>{console.warn("Blob URL appears invalid, attempting to recreate...");const X=Ie(L);X&&(console.log("Successfully recreated blob URL:",X),L.blobUrl=X)}}catch{console.warn("Preflight check failed, will attempt recreation on error")}try{const H=g.findIndex($e=>$e.id===L.id);let X=ne.current[H];X?console.log("Using pre-existing audio element for chunk",L.id):(console.log("Creating new audio element for chunk",L.id),X=new Audio(L.blobUrl),ne.current[H]=X),X.onloadeddata=()=>{console.log("Audio loaded successfully, duration:",X.duration)},X.oncanplaythrough=()=>{console.log("Audio can play through")},X.onerror=$e=>{console.error("Audio error:",$e),console.error("Audio error details:",{error:X.error,networkState:X.networkState,readyState:X.readyState,src:X.src}),console.log("Attempting to recreate blob URL and audio element...");try{const Ae=Ie(L);if(Ae){const st=new Audio(Ae);ne.current[H]=st,ae(st),st.currentTime=b-L.startTime,st.play().catch(ot=>{console.error("Failed to play recreated audio:",ot),S(!1)})}else console.error("Could not recreate blob URL - no stored blob available"),S(!1)}catch(Ae){console.error("Failed to recreate audio element:",Ae),S(!1)}},Ot(X,H,"playback"),H===g.length-1&&console.log(` This is the last chunk (${H}) - will loop to beginning when finished`),(!X.src||X.src!==L.blobUrl)&&(console.log("Setting audio source to:",L.blobUrl),X.src=L.blobUrl);const ue=b-L.startTime;console.log(` Starting playback in chunk ${L.id} at offset ${ue.toFixed(2)}s (global time: ${b.toFixed(2)}s)`),X.currentTime=ue,console.log(` Audio element seeked to: ${X.currentTime.toFixed(2)}s`),ae(X),console.log(` Current audio set for chunk: ${L.id}`),Ut(X,L,H);const se=X.play();se!==void 0&&se.then(()=>{console.log(" Audio playback started successfully"),ie.current||(console.log(" Starting time update loop for indicator movement"),cn()),console.log(" Time update loop should now be running")}).catch($e=>{console.error("Error playing audio:",$e),S(!1)})}catch(H){console.error("Error creating audio element:",H),S(!1)}}else{console.warn("No active chunk found or chunk has no blobUrl",{activeChunk:L?{id:L.id,blobUrl:L.blobUrl,isValidBlobUrl:(V=L.blobUrl)==null?void 0:V.startsWith("blob:")}:null,currentTime:b,audioChunks:g.map(X=>{var ue;return{id:X.id,startTime:X.startTime,duration:X.duration,hasBlobUrl:!!X.blobUrl,isValidBlobUrl:(ue=X.blobUrl)==null?void 0:ue.startsWith("blob:"),isGenerated:X.isGenerated}})});const H=g.find(X=>X.isGenerated&&X.blobUrl&&X.blobUrl.startsWith("blob:"));if(H){console.log("No chunk found for current time, starting with first available chunk:",H.name);try{const X=new Audio(H.blobUrl),ue=g.findIndex($e=>$e.id===H.id);ue>=0&&(ne.current[ue]=X),ae(X),T(H.startTime),Ut(X,H,ue),Ot(X,ue,"first-chunk"),X.onerror=$e=>{console.error("Error playing first chunk:",$e),S(!1)};const se=X.play();se!==void 0&&se.then(()=>{console.log(" First chunk playback started"),ie.current||(console.log(" Starting time update loop for first chunk"),cn())}).catch($e=>{console.error("Error playing first chunk:",$e),S(!1)})}catch(X){console.error("Error creating audio for first chunk:",X),S(!1)}}else console.error("No audio chunks have valid blobUrl"),S(!1),g.some(ue=>ue.isGenerated&&(!ue.blobUrl||!ue.blobUrl.startsWith("blob:")))&&console.warn("Audio was previously generated but blob URLs are invalid. Audio may need to be regenerated.")}}},cn=()=>{ie.current&&cancelAnimationFrame(ie.current),console.log(" Time update loop started for smooth indicator movement"),ie.current=requestAnimationFrame(Ze)},Ze=()=>{if(!_){P&&(ie.current=requestAnimationFrame(Ze));return}if(_.paused||_.ended){if(_.ended){console.log(" Current audio ended, onended handler will manage transition/restart"),P&&(ie.current=requestAnimationFrame(Ze));return}if(_.paused&&P){console.log(" Audio paused but isPlaying=true, continuing time loop for restart"),P&&(ie.current=requestAnimationFrame(Ze));return}else if(_.paused&&!P){console.log(" Audio paused and isPlaying=false, stopping time updates"),ie.current&&(cancelAnimationFrame(ie.current),ie.current=void 0);return}}const V=ne.current.findIndex(L=>L===_);if(V>=0&&V<g.length){const L=g[V];if(L&&L.isGenerated){const H=L.startTime+_.currentTime,X=Math.min(Math.max(H,0),A);if(T(X),_.ended)if(console.log(" Chunk ended, checking if this is the last chunk"),V===g.length-1){console.log(" Last chunk ended in updateTimePosition - stopping playback"),ge();return}else{qn()||(console.log(" Could not advance to next chunk from update loop; stopping"),ge());return}}}ie.current=requestAnimationFrame(Ze)},Fn=()=>{console.log(" Pausing audio playback - maintaining position"),ne.current.forEach(V=>{V&&V.pause()}),_&&_.pause(),J&&J.pause(),ie.current&&(cancelAnimationFrame(ie.current),ie.current=void 0,console.log(" Time update loop paused")),S(!1),Ee(!1),ft(!1),console.log(` Paused at position: ${b.toFixed(2)}s`)},un=()=>{console.log(` Resuming playback from position: ${b.toFixed(2)}s`),mr(),Hr();const V=g.find(L=>L.isGenerated&&b>=L.startTime&&b<L.startTime+L.duration);if(V&&V.blobUrl){const L=g.findIndex(se=>se.id===V.id);let H=ne.current[L];H||(console.log(` Creating audio element for resume at chunk ${L}`),H=new Audio(V.blobUrl),ne.current[L]=H,Ot(H,L,"resume")),ae(H);const X=b-V.startTime;H.currentTime=X,console.log(` Resuming chunk ${L} at offset ${X.toFixed(2)}s`),S(!0);const ue=H.play();ue&&ue.then(()=>{console.log(" Successfully resumed playback"),ie.current||cn()}).catch(se=>{console.error(" Failed to resume playback:",se),S(!1)})}else console.log(" No active chunk found for resume position"),T(0),g.find(H=>H.isGenerated)&&Be()},pe=()=>{console.log(" Stopping all audio playback"),ne.current.forEach(V=>{V&&(V.pause(),V.currentTime=0)}),_&&(_.pause(),_.currentTime=0,ae(null)),J&&(J.pause(),J.currentTime=0),ie.current&&(cancelAnimationFrame(ie.current),ie.current=void 0,console.log(" Time update loop stopped")),S(!1),T(0),Ee(!1),ft(!1)};p.useEffect(()=>()=>{console.log("AudioPreview unmounting - cleaning up resources"),J!=null&&J.src&&J.src.startsWith("blob:")&&URL.revokeObjectURL(J.src),ie.current&&cancelAnimationFrame(ie.current),_&&_.pause()},[]),p.useEffect(()=>()=>{J!=null&&J.src&&J.src.startsWith("blob:")&&(console.log("Cleaning up previous preview audio"),URL.revokeObjectURL(J.src))},[J]);const Te=V=>{try{const L=localStorage.getItem("murfVoicesCache");if(L){const X=JSON.parse(L).find(ue=>ue.voice_id===V);if(X)return console.log(` AudioPreview: Found voice in cache: ${X.name} (${V})`),{name:X.name,description:X.description}}}catch(L){console.warn("AudioPreview: Failed to get voice from cache:",L)}return null},je=V=>{var ue,se;if(!V)return{name:"Unknown Voice",description:"Voice not found"};const L=Te(V);if(L)return{name:L.name,description:L.description||"Voice from cache"};const H=QM[V];if(H)return H;const X=(se=(ue=window==null?void 0:window.murfVoices)==null?void 0:ue.find)==null?void 0:se.call(ue,$e=>$e.voice_id===V);return X?{name:X.name,description:X.description}:{name:"Unknown Voice",description:"Voice not found"}},nt=je(t),rt=n?je(n):null,[oe,Ee]=p.useState(!1),[Je,ft]=p.useState(!1),[Yn,Ge]=p.useState(null),Xn=V=>{if(!Oe.current||A===0)return;const L=Oe.current.getBoundingClientRect(),H=V.clientX-L.left,ue=Math.max(0,Math.min(H/L.width,1))*A;Ge(ue)},we=()=>{Ge(null)},Ut=(V,L,H)=>{console.log(` Setting up time updates for chunk ${H}`),V.ontimeupdate=()=>{if(!V.paused&&!V.ended){const ue=L.startTime+V.currentTime,se=Math.min(ue,A);T(se),Math.floor(se)!==Math.floor(se-.5)&&console.log(` Time indicator moving: ${se.toFixed(2)}s (chunk ${H})`)}};const X=setInterval(()=>{if(!V.paused&&!V.ended&&V===_){const ue=L.startTime+V.currentTime,se=Math.min(ue,A);T(se)}else(V.paused||V.ended)&&clearInterval(X)},100)},ge=()=>{console.log(" End of playback reached - stopping"),console.log(` All ${g.length} chunks have been played`),ne.current.forEach(V=>{V&&(V.pause(),V.currentTime=0)}),ie.current&&(cancelAnimationFrame(ie.current),ie.current=void 0,console.log(" Time update loop stopped")),S(!1),ae(null),T(A),console.log(" Playback completed - all chunks played successfully")},Ot=(V,L,H="")=>{console.log(` Setting up chunk advancement for chunk ${L} (${H})`),V.onended=()=>{console.log(` Chunk ${L} ended (${H}), advancing...`),console.log(`${H} chunk audio that ended:`,V),console.log("Current audio state:",_),console.log("Is audio ended?",V.ended),console.log("Audio current time:",V.currentTime),console.log("Audio duration:",V.duration);const X=L===g.length-1;console.log(` Is this the last chunk? ${X} (${L}/${g.length-1})`),X?(console.log(" Last chunk finished - stopping playback"),ge()):(_!==V&&(console.log(" Setting currentAudio to ended audio before advancing"),ae(V)),console.log(` Attempting to advance from ${H} chunk...`),setTimeout(()=>{qn()||(console.log(" No more chunks available - stopping playback"),ge())},10))},V.onerror=X=>{console.error(` Error in chunk ${L} (${H}):`,X),setTimeout(()=>{qn()||S(!1)},10)}},mr=()=>{console.log(" Ensuring all audio elements have proper chunk advancement"),ne.current.forEach((V,L)=>{V&&(!V.onended||V.onended.toString().indexOf("advanceToNextChunk")===-1)&&(console.log(` Setting up missing advancement for chunk ${L}`),Ot(V,L,"existing"))})},Hr=()=>{console.log(" Ensuring all audio elements have proper time updates"),ne.current.forEach((V,L)=>{if(V&&g[L]){const H=g[L];console.log(` Setting up time updates for existing chunk ${L}`),V.ontimeupdate=()=>{if(!V.paused&&!V.ended){const X=H.startTime+V.currentTime,ue=Math.min(X,A);T(ue)}}}})},qn=()=>{console.log(" advanceToNextChunk called"),console.log("Current audio:",_),console.log("Audio chunks:",g.map(L=>({id:L.id,isGenerated:L.isGenerated,hasBlobUrl:!!L.blobUrl}))),console.log("Audio refs:",ne.current.map((L,H)=>({index:H,exists:!!L,src:L==null?void 0:L.src,ended:L==null?void 0:L.ended})));let V=-1;if(_&&(V=ne.current.findIndex(L=>L===_),console.log(` Current chunk index from currentAudio: ${V}`)),V===-1){console.log(" CurrentAudio not found, trying alternative approaches...");const L=ne.current.findIndex(H=>H&&H.ended);if(console.log(` Found ended audio at index: ${L}`),L>=0)console.log(" Using ended audio index as current chunk index"),V=L;else{let H=-1,X=-1;ne.current.forEach((ue,se)=>{if(ue&&g[se]&&g[se].isGenerated){const $e=g[se].startTime+g[se].duration;b>=g[se].startTime&&b<=$e&&g[se].startTime>X&&(H=se,X=g[se].startTime)}}),H>=0&&(console.log(` Using time-based match at index: ${H}`),V=H)}}if(V===-1)return console.log(" Could not determine current chunk index, cannot advance"),!1;if(console.log(` Looking for chunks after index ${V}`),console.log(`Total chunks available: ${g.length}`),V>=g.length-1)return console.log(" Already at or past the last chunk - no advancement possible"),!1;for(let L=V+1;L<g.length;L++){const H=g[L];if(console.log(` Checking chunk ${L}:`,{exists:!!H,isGenerated:H==null?void 0:H.isGenerated,hasBlobUrl:!!(H!=null&&H.blobUrl),chunkId:H==null?void 0:H.id,startTime:H==null?void 0:H.startTime,duration:H==null?void 0:H.duration}),H&&H.isGenerated&&H.blobUrl){console.log(` Found next chunk: ${H.id} at index ${L}`);let X=ne.current[L];X?(console.log(` Reusing existing audio element for chunk ${L}`),Ot(X,L,"advance-reuse"),Ut(X,H,L)):(console.log(` Creating new audio element for chunk ${L}`),X=new Audio(H.blobUrl),ne.current[L]=X,X.ontimeupdate=()=>{if(X&&X===_&&!X.paused&&!X.ended){const se=H.startTime+X.currentTime,$e=Math.min(se,A);T($e)}},Ot(X,L,"advance")),console.log(` Switching currentAudio to chunk ${L}`),_&&_!==X&&(console.log(" Stopping previous audio before advancing"),_.pause(),_.currentTime=0,_.onended=null,_.ontimeupdate=null,_.onerror=null),ne.current.forEach((se,$e)=>{se&&se!==X&&$e!==L&&(se.pause(),se.currentTime=0)}),ae(X),X.currentTime=0,console.log(" Ensuring isPlaying remains true during chunk transition"),S(!0),console.log(` Starting playback of chunk ${L}`),Ot(X,L,"advance");const ue=X.play();return ue&&ue.then(()=>{console.log(` Successfully started chunk ${L}`),console.log(" Confirming isPlaying state: true"),S(!0),ie.current||(console.log(` Restarting time update loop for chunk ${L}`),cn())}).catch(se=>{console.error(` Failed to play chunk ${L}:`,se),qn()||S(!1)}),!0}}return console.log(" No more chunks available"),!1},Lo=async()=>{try{pe(),Ee(!0),console.log("Playing selected voice preview for:",t,"with text: 'Hello, how are you'");const V=await ut.generateTTS(t,"Hello, how are you"),L=URL.createObjectURL(V),H=new Audio(L);be(H),H.onended=()=>{console.log("Selected voice preview finished playing"),Ee(!1),URL.revokeObjectURL(L)},H.onerror=()=>{console.error("Error playing selected voice preview"),Ee(!1),URL.revokeObjectURL(L)},await H.play(),console.log("Selected voice preview started playing")}catch(V){console.error("Error playing selected voice preview:",V),Ee(!1)}},As=async()=>{if(n)try{pe(),ft(!0),console.log("Playing generated voice preview for:",n,"with text: 'Hello, how are you'");const V=await ut.generateTTS(n,"Hello, how are you"),L=URL.createObjectURL(V),H=new Audio(L);be(H),H.onended=()=>{console.log("Generated voice preview finished playing"),ft(!1),URL.revokeObjectURL(L)},H.onerror=()=>{console.error("Error playing generated voice preview"),ft(!1),URL.revokeObjectURL(L)},await H.play(),console.log("Generated voice preview started playing")}catch(V){console.error("Error playing generated voice preview:",V),ft(!1)}};return a.jsxs("div",{className:`space-y-6 ${s}`,children:[a.jsxs("div",{className:"space-y-3",children:[rt&&n!==t&&a.jsx(wt,{className:"bg-white border border-green-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-0",children:a.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:rt.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:rt.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[rt.description,"  Used for current audio"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(fe,{onClick:As,disabled:Je,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-green-100",children:Je?a.jsx(pt,{className:"w-4 h-4 animate-spin text-green-600"}):a.jsx(Zo,{className:"w-4 h-4 text-green-600"})})})]})})}),a.jsx(wt,{className:"bg-white border border-blue-200 rounded-xl overflow-hidden",children:a.jsx(gt,{className:"p-0",children:a.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border-blue-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:nt.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:nt.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[nt.description," "," ",rt&&n!==t?"Selected for next generation":"Current voice"]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(fe,{onClick:Lo,disabled:oe,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100",children:oe?a.jsx(pt,{className:"w-4 h-4 animate-spin text-blue-600"}):a.jsx(Zo,{className:"w-4 h-4 text-blue-600"})})})]})})})]}),Y?a.jsxs("div",{className:"space-y-6",children:[(()=>g.some(L=>L.isGenerated&&(!L.blobUrl||!L.blobUrl.startsWith("blob:")))?a.jsx(wt,{className:"border-orange-200 bg-orange-50",children:a.jsx(gt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Cf,{className:"w-5 h-5 text-orange-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-orange-800",children:"Audio needs to be regenerated"}),a.jsx("p",{className:"text-sm text-orange-700",children:"The audio was previously generated but is no longer available for playback."})]}),a.jsxs(fe,{onClick:()=>{K(!1),E(L=>L.map(H=>({...H,blobUrl:"",isGenerated:!1})))},size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:[a.jsx(Co,{className:"w-4 h-4 mr-2"}),"Regenerate"]})]})})}):null)(),a.jsx(wt,{children:a.jsx(gt,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx(fe,{onClick:Be,className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:!g.some(V=>V.blobUrl&&V.blobUrl.startsWith("blob:")),children:P?a.jsx(aw,{className:"w-5 h-5"}):a.jsx(Zo,{className:"w-5 h-5"})}),a.jsx(fe,{onClick:pe,variant:"outline",children:a.jsx(cw,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{ref:Oe,className:"relative h-3 bg-gray-200 rounded-full cursor-pointer hover:bg-gray-300 transition-colors group",onClick:Le,onMouseMove:Xn,onMouseLeave:we,children:[a.jsx("div",{className:"absolute h-full bg-blue-600 rounded-full",style:{width:`${A>0?b/A*100:0}%`,transition:P?"none":"width 0.15s ease-out"}}),g.map(V=>{if(!V.isGenerated)return null;const L=A>0?V.startTime/A*100:0,H=A>0?V.duration/A*100:0;return a.jsx("div",{className:"absolute h-full bg-blue-200 rounded-full opacity-50",style:{left:`${L}%`,width:`${H}%`}},V.id)}),Yn!==null&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute w-3 h-3 bg-blue-400 rounded-full border border-white shadow-md transform -translate-y-0.5 -translate-x-1.5 opacity-75",style:{left:`${A>0?Yn/A*100:0}%`}}),a.jsxs("div",{className:"absolute bg-gray-800 text-white text-xs px-2 py-1 rounded transform -translate-x-1/2 -translate-y-8 pointer-events-none",style:{left:`${A>0?Yn/A*100:0}%`},children:[Me(Yn),a.jsx("div",{className:"absolute left-1/2 top-full w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-800 transform -translate-x-1/2"})]})]}),a.jsx("div",{className:"absolute w-5 h-5 bg-blue-600 rounded-full border-2 border-white shadow-lg transform -translate-y-1 -translate-x-2.5 cursor-grab active:cursor-grabbing hover:scale-110 group-hover:opacity-100 opacity-90",style:{left:`${A>0?b/A*100:0}%`,transition:P?"none":"left 0.15s ease-out, transform 0.2s ease-out"}})]}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[a.jsx("span",{children:Me(b)}),a.jsx("span",{children:Me(A)})]})]}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:g.map(V=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-medium",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:V.name}),a.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[V.text.substring(0,100),"..."]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:Me(V.duration)})]},V.id))})]})})}),a.jsx("div",{className:"flex justify-center",children:a.jsxs(fe,{onClick:()=>{pe(),o()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3",children:[a.jsx(Ql,{className:"w-5 h-5 mr-2"}),"Create Video"]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4",children:[u&&u.length>0&&!m&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 max-w-md mx-auto",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ii,{className:"w-5 h-5 text-yellow-600 mr-2"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Regenerating Audio"}),a.jsx("p",{className:"text-sm text-yellow-600",children:"Previous audio will be replaced with new voice"})]})]})}),!m&&g.length>0&&t&&a.jsxs(fe,{onClick:ve,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3",children:[a.jsx(Zo,{className:"w-5 h-5 mr-2"}),u&&u.length>0?"Regenerate Audio ":"Generate Audio "]})]}),m&&a.jsx(wt,{children:a.jsx(gt,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-medium",children:"Generating Audio..."}),a.jsxs("p",{className:"text-gray-600",children:["Processing part ",j+1," of"," ",g.length]})]}),a.jsx("div",{className:"space-y-2",children:g.map((V,L)=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${L<j?"bg-green-500 text-white":L===j?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:L<j?"":L===j?a.jsx(pt,{className:"w-3 h-3 animate-spin"}):L+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:V.name}),a.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[V.text.substring(0,100),"..."]})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["~",Me(V.duration)]})]},V.id))}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${j/g.length*100}%`}})})]})})})]})]})},io=p.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,className:It("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));io.displayName="Input";class ZM{isElectron(){return typeof window<"u"&&"electronAPI"in window}getElectronAPI(){if(!this.isElectron())throw new Error("Media storage is only available in Electron environment");return window.electronAPI}getLocalFileUrl(t){if(!this.isElectron())throw new Error("Local file URLs require Electron environment");return`local-file://${t}`}async getThumbnailUrl(t,n){return n==="image"?this.loadImageAsBase64(t):this.loadImageAsBase64(t)}async saveMediaFile(t,n,r,o,i,s,l){if(!this.isElectron())throw new Error("Media storage requires Electron environment");try{const c=await r.arrayBuffer(),u=new Uint8Array(c);let m,h;const g=n.endsWith("_thumb"),E=g?n.replace("_thumb",""):n;if(g)m=o==="video"?`pexels_video_${s}_${E}_thumb.jpg`:`pexels_photo_${s}_${E}_thumb.jpg`,h="image/jpeg";else if(o==="video")m=`pexels_video_${s}_${n}.mp4`,h="video/mp4";else{const C=i.includes(".png")?".png":".jpg";m=`pexels_photo_${s}_${n}${C}`,h=C===".png"?"image/png":"image/jpg"}console.log(` Generated filename for ${o} ${n}: ${m}`);const j=await this.getElectronAPI().media.saveMediaFile(t,n,u,m,h);if(!j||!j.success)throw new Error((j==null?void 0:j.error)||"Failed to save media file");return{id:n,fileName:m,relativePath:j.relativePath,filePath:j.filePath,type:o,originalUrl:i,pexelsId:s,photographer:l}}catch(c){throw console.error("Error saving media file:",c),c}}async loadMediaFile(t){if(!this.isElectron())throw new Error("Media storage requires Electron environment");try{const n=await this.getElectronAPI().media.loadMediaFile(t);if(!n||!n.success)throw new Error((n==null?void 0:n.error)||"Failed to load media file");return n.isFilePath?(console.log(` Large media file detected, using file path: ${n.filePath}`),`file://${n.filePath}`):(console.log(` Small media file, converting buffer to base64 (${n.size} bytes)`),`data:application/octet-stream;base64,${Buffer.from(n.data).toString("base64")}`)}catch(n){throw console.error("Error loading media file:",n),n}}async loadImageAsBase64(t){if(!this.isElectron())throw new Error("Base64 image loading requires Electron environment");try{const n=await this.getElectronAPI().media.loadImageAsBase64(t);if(!n||!n.success)throw new Error((n==null?void 0:n.error)||"Failed to load image as base64");return n.isFilePath?(console.log(` Large file detected, using file path: ${n.dataUrl}`),n.dataUrl):(console.log(` Small file, using base64 data (${n.size} bytes)`),n.dataUrl)}catch(n){throw console.error("Error loading image as base64:",n),n}}async fileExists(t){if(!this.isElectron())return!1;try{const n=await this.getElectronAPI().media.fileExists(t);return(n==null?void 0:n.exists)||!1}catch(n){return console.error("Error checking media file existence:",n),!1}}async getMediaManifest(t){if(!this.isElectron())return null;try{const n=await this.getElectronAPI().media.getMediaManifest(t);return(n==null?void 0:n.manifest)||null}catch(n){return console.error("Error getting media manifest:",n),null}}async deleteStoryMedia(t){if(!this.isElectron())return!1;try{const n=await this.getElectronAPI().media.deleteStoryMedia(t);return(n==null?void 0:n.success)||!1}catch(n){return console.error("Error deleting story media:",n),!1}}async cleanupMedia(){if(!this.isElectron())return!1;try{const t=await this.getElectronAPI().media.cleanupMedia();return(t==null?void 0:t.success)||!1}catch(t){return console.error("Error cleaning up media:",t),!1}}}const br=new ZM,j0=Object.defineProperty({__proto__:null,mediaStorageService:br},Symbol.toStringTag,{value:"Module"}),JM=({className:e="",onPrevious:t,onSaveAndFinish:n,onRender:r,storyContent:o="",selectedVoiceId:i="",videoStyle:s="landscape",savedVideoAssets:l,audioChunks:c=[],storyId:u,initialStory:m,onVideoAssetsUpdate:h,onTranscriptInfoUpdate:g,onStockMediaInfoUpdate:E,onSentenceTranscriptsUpdate:j,hasRenderFailed:C=!1,onRetryRender:P,mediaItems:S,setMediaItems:b,timelineItems:T,setTimelineItems:A,layers:$,setLayers:Y})=>{var Tp;const K=p.useRef(null),_=p.useRef(null),ae=p.useRef(0),J=p.useRef(0),be=p.useRef(null),ne=p.useRef(new Map),Oe=p.useRef(null),ie=p.useRef(null),Dt=p.useRef(null),He=p.useRef(null),Ie=p.useRef(0),f=p.useRef(null),re=p.useRef(null),ve=p.useRef(new Map),[Me,Le]=p.useState(!0),[Ye,Be]=p.useState(null),[cn,Ze]=p.useState([]),[Fn,un]=p.useState([]),pe=S??cn,Te=b??Ze,je=T??Fn,nt=A??un,[rt,oe]=p.useState(80),[Ee,Je]=p.useState(60),[ft,Yn]=p.useState(40),[Ge,Xn]=p.useState(!1),[we,Ut]=p.useState(0),[ge,Ot]=p.useState(0),[mr,Hr]=p.useState([]),qn=p.useRef([]),[Lo,As]=p.useState([]),V=p.useRef([]),[L,H]=p.useState(!1),[X,ue]=p.useState(!1),[se,$e]=p.useState(!1),[Ae,st]=p.useState(!1),[ot,Jt]=p.useState(!1),[Mt,Nn]=p.useState(!1),[xi,rl]=p.useState(!1),[uu,$o]=p.useState(""),[Rs,wi]=p.useState(!1),[Is,du]=p.useState(null),[bi,ol]=p.useState(null),[z,W]=p.useState(!1),[O,de]=p.useState(!1),[Re,ke]=p.useState("");p.useEffect(()=>()=>{g&&Is&&g(Is),E&&bi&&E(bi)},[g,E,Is,bi]);const[at,ze]=p.useState(!1),[Lt,le]=p.useState(0),[Tt,pr]=p.useState(!1),[et,Pn]=p.useState([{id:"voice-layer",name:"Voice Over",visible:!0,locked:!1,items:[],type:"voiceover",duration:0}]),xe=$??et,Ve=Y??Pn,[Ar,Si]=p.useState("voice-layer"),[Wm,Kr]=p.useState(0),[Fe,Ds]=p.useState(null),[AS,fu]=p.useState(null),[Rr,Ms]=p.useState(null),[RS,il]=p.useState(null),[IS,Ti]=p.useState(!1),[DS,Fo]=p.useState("Initializing..."),[dn,hu]=p.useState(null),[MS,LS]=p.useState(0),[sl,Gm]=p.useState(0),[ce,gr]=p.useState(null),[mu,al]=p.useState("none"),[pu,Hm]=p.useState(null),[gu,Km]=p.useState(null),[Xe,yu]=p.useState(null),[Ym,vu]=p.useState(null),[Xm,xu]=p.useState("default"),[$S,qm]=p.useState(null),[Oo,Ls]=p.useState(null);p.useEffect(()=>{},[ce]);const[$s,Qm]=p.useState(null),[en,Zm]=p.useState(null),[FS,OS]=p.useState(0),[wu,VS]=p.useState(0),[Qn,_S]=p.useState(1),[ll,mL]=p.useState(0),Jm=5,bu=5,Ci=d=>{const w=[];d.forEach(v=>{v.items&&w.push(...v.items)}),nt(w)},[Su,US]=p.useState(["Arial","Helvetica","Times New Roman","Courier New","Verdana","Georgia","Palatino","Garamond","Bookman","Comic Sans MS","Trebuchet MS","Arial Black","Impact","Lucida Sans Unicode","Tahoma","Lucida Console","Monaco","Courier","serif","sans-serif","monospace","cursive","fantasy"]),zS=()=>Su;p.useEffect(()=>{typeof window<"u"&&(window.getVideoEditorFonts=zS)},[Su]),p.useEffect(()=>{const d=setTimeout(()=>{console.log(" VideoEditor: Initial load complete, file loading enabled"),pr(!0)},2e3);return()=>clearTimeout(d)},[]);const Tu=d=>d.replace(/\\/g,"/"),Cu=async d=>{if(ve.current.has(d))return ve.current.get(d);if(!Tt||typeof window<"u"&&window.__initialLoadComplete!==!0)return console.log(` Skipping file load during initial load: ${d}`),`file://${d}`;try{const w=await br.loadImageAsBase64(d);return ve.current.set(d,w),w}catch(w){throw console.error(` Failed to create base64 for ${d}:`,w),w}},Yr=async d=>{if(ve.current.has(d))return ve.current.get(d);try{console.log(` Converting external URL to base64: ${d.substring(0,50)}...`);const w=await fetch("http://localhost:5555/api/media/download-openai-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:d,storyId:u||"temp",imageId:`temp_${Date.now()}`})});if(!w.ok)throw new Error(`Backend proxy failed: ${w.status}`);const v=await w.blob(),x=await new Promise((k,y)=>{const N=new FileReader;N.onload=()=>k(N.result),N.onerror=y,N.readAsDataURL(v)});return ve.current.set(d,x),console.log(` Successfully converted URL to base64: ${x.substring(0,50)}...`),x}catch(w){throw console.error(` Failed to convert URL to base64: ${d}`,w),w}},BS=async()=>{const d=["Arial","Helvetica","Helvetica Neue","Calibri","Segoe UI","Roboto","Open Sans","Lato","Source Sans Pro","Montserrat","Poppins","Inter","System UI","San Francisco","Avenir","Futura","Century Gothic","Trebuchet MS","Verdana","Tahoma","Geneva","Lucida Grande","Lucida Sans Unicode","Arial Black","Impact","Franklin Gothic Medium","Arial Narrow","Times New Roman","Times","Georgia","Garamond","Palatino","Book Antiqua","Minion Pro","Adobe Garamond Pro","Baskerville","Caslon","Bodoni","Didot","Trajan Pro","Optima","Perpetua","Rockwell","Clarendon","Playfair Display","Merriweather","Libre Baskerville","Courier New","Courier","Monaco","Menlo","Consolas","Inconsolata","Source Code Pro","Fira Code","JetBrains Mono","Roboto Mono","SF Mono","Lucida Console","Liberation Mono","Comic Sans MS","Papyrus","Brush Script MT","Lucida Handwriting","Marker Felt","Chalkduster","Noteworthy","Snell Roundhand","Bradley Hand","Trattatello","Zapfino","Herculanum","Roboto","Open Sans","Lato","Montserrat","Oswald","Source Sans Pro","Slabo 27px","Raleway","PT Sans","Lora","Ubuntu","PT Serif","Playfair Display","Merriweather","Nunito","Poppins","Rubik","Work Sans","Fira Sans","Noto Sans","Mukti","Karla"],w=[],x=document.createElement("canvas").getContext("2d");if(!x)return d.slice(0,20);const k="mmmmmmmmmmlli",y="72px";x.font=`${y} monospace`;const N=x.measureText(k).width;for(const G of d)try{x.font=`${y} "${G}", monospace`;const U=x.measureText(k).width;if(Math.abs(U-N)>1)w.push(G);else{x.font=`${y} "${G}", serif`;const he=x.measureText(k).width;Math.abs(he-N)>1&&w.push(G)}}catch{continue}const R=["Arial","Helvetica","Times New Roman","Courier New","Verdana","Georgia","serif","sans-serif","monospace"];return[...new Set([...w,...R])]},ku=async d=>{const w=ne.current.get(d);if(w)return w;const v=pe.find(x=>x.id===d);if(!v||v.type!=="voiceover"&&v.type!=="audio")return null;try{let x=null;if(v.previewUrl&&v.previewUrl.startsWith("blob:"))x=v.previewUrl;else if(v.filePath)if(v.filePath.startsWith("blob:"))x=v.filePath;else{const y=Tu(v.filePath);if(!await Dr.fileExists(y))throw new Error(`Audio file not found: ${y}`);try{!Tt||typeof window<"u"&&window.__initialLoadComplete!==!0?(console.log(` Skipping audio load during initial load: ${y}`),x=`file://${y}`):x=await Dr.loadAudioFile(y)}catch(R){throw new Error(`Failed to load from storage: ${R}`)}}if(!x)throw new Error(`No valid audio URL for media ${d}`);const k=new Audio(x);return await new Promise((y,N)=>{const R=setTimeout(()=>{N(new Error("Audio load timeout"))},5e3);k.onloadeddata=()=>{clearTimeout(R),y(!0)},k.onerror=D=>{clearTimeout(R),N(D)},k.load()}),k.onerror=y=>{console.error(` Audio playback error for ${v.name}:`,y)},ne.current.set(d,k),k}catch(x){throw new Error(`Failed to load audio for playback ${d}: ${x}`)}},tt=p.useRef(null),Vo=p.useRef(null),wn=p.useRef(new Map),yr=p.useRef(new Map),Ct=p.useRef(!1),ki=()=>{if(console.log(" INIT: Attempting to initialize preview canvas..."),!tt.current){console.error(" INIT FAIL: previewCanvasRef.current is null");return}const d=tt.current.getContext("2d");if(!d){console.error(" INIT FAIL: Cannot get 2D context from canvas");return}Vo.current=d,Ct.current=!0,console.log(" INIT SUCCESS: Canvas initialized successfully"),cl()},cl=()=>{if(!tt.current)return;const d=tt.current.parentElement;if(!d)return;const w=d.clientWidth,v=d.clientHeight;let x,k;switch(s){case"square":x=Math.min(w,v),k=x;break;case"vertical":x=Math.min(w,v*9/16),k=x*16/9;break;case"landscape":default:k=Math.min(v,w*9/16),x=k*16/9;break}tt.current.width=x,tt.current.height=k;const y=Vo.current;y&&(y.fillStyle="#000000",y.fillRect(0,0,x,k)),ht(we,0)},ep=async d=>new Promise((w,v)=>{const x=document.createElement("video");x.preload="metadata",x.src=d,x.onloadedmetadata=async()=>{try{x.currentTime=Math.min(1,x.duration*.1),await new Promise(y=>{x.onseeked=()=>{try{const N=document.createElement("canvas");N.width=x.videoWidth,N.height=x.videoHeight;const R=N.getContext("2d");if(R){R.drawImage(x,0,0,N.width,N.height);const D=N.toDataURL("image/jpeg",.7);w(D)}else v(new Error("Could not get canvas context"))}catch(N){v(N)}y()},setTimeout(()=>{try{const N=document.createElement("canvas");N.width=x.videoWidth||320,N.height=x.videoHeight||240;const R=N.getContext("2d");if(R){R.drawImage(x,0,0,N.width,N.height);const D=N.toDataURL("image/jpeg",.7);w(D)}else v(new Error("Could not get canvas context"))}catch(N){v(N)}y()},2e3)})}catch(y){v(y)}},x.onerror=()=>{v(new Error("Failed to load video for thumbnail generation"))},x.load(),setTimeout(()=>{x.src="",x.load()},5e3)}),Xr=async d=>{if(d.type==="video"){const w=wn.current.get(d.id);if(w)return w;try{const v=document.createElement("video");let x;if(d.filePath){console.log(` Loading video ${d.id} from filesystem: ${d.filePath}...`);try{!Tt||typeof window<"u"&&window.__initialLoadComplete!==!0?(console.log(` Skipping video load during initial load: ${d.filePath}`),x=`file://${d.filePath}`):(x=await br.loadMediaFile(d.filePath),console.log(` Loaded video ${d.id} as base64: ${x.substring(0,50)}...`))}catch(N){throw console.warn(` Failed to load video ${d.id} from filesystem:`,N),new Error(`Cannot load video from ${d.filePath}`)}}else if(d.previewUrl)x=d.previewUrl,console.log(` Loading video ${d.id} from previewUrl: ${x.substring(0,50)}...`);else throw new Error(`No valid source for video ${d.id}`);v.src=x,v.preload="auto",v.muted=!1;const k=d.volume||100,y=Ee;return v.volume=d.muted?0:k*y/1e4,d.source==="pexels"&&x.startsWith("http")&&console.warn(` NETWORK REQUEST DETECTED: Pexels video ${d.id} is using network URL instead of local file!`),await new Promise((N,R)=>{const D=()=>v.readyState>=1&&v.videoWidth>0&&v.videoHeight>0?(N(),!0):!1;v.onloadedmetadata=()=>{D()||setTimeout(()=>{D()},100)},v.onloadeddata=()=>{D()},v.oncanplay=()=>{D()},v.onerror=()=>{R(new Error("Failed to load video"))},v.load(),setTimeout(()=>{v.readyState>=1?N():R(new Error("Video loading timeout"))},5e3)}),wn.current.set(d.id,v),console.log(` Video element loaded and set for ${d.id}`),setTimeout(()=>{Ct.current&&ht(we,0)},50),v}catch(v){return console.warn(` VIDEO LOAD FAIL: ${d.id} failed to load. Error:`,v),null}}else if(d.type==="image"){const w=yr.current.get(d.id);if(w)return console.log(` Image element already exists for ${d.id}`),w;console.log(` Starting to load image ${d.id}...`);try{const v=new Image;let x="";if(d.thumbnailUrl&&(d.thumbnailUrl.startsWith("data:")||d.thumbnailUrl.startsWith("blob:")||d.thumbnailUrl.includes("localhost:5555/api/media/openai-image")))x=d.thumbnailUrl,console.log(` Loading image ${d.id} from thumbnailUrl: ${x.substring(0,50)}...`);else if(d.thumbnailUrl&&d.thumbnailUrl.startsWith("http"))try{x=await Yr(d.thumbnailUrl),console.log(` Loaded image ${d.id} from thumbnailUrl (converted to base64): ${x.substring(0,50)}...`)}catch(k){console.warn(` Failed to convert thumbnailUrl to base64 for ${d.id}:`,k),x=d.thumbnailUrl}else if(d.previewUrl&&(d.previewUrl.startsWith("data:")||d.previewUrl.startsWith("blob:")||d.previewUrl.includes("localhost:5555/api/media/openai-image")))x=d.previewUrl,console.log(` Loading image ${d.id} from previewUrl: ${x.substring(0,50)}...`);else if(d.previewUrl&&d.previewUrl.startsWith("http"))try{x=await Yr(d.previewUrl),console.log(` Loaded image ${d.id} from previewUrl (converted to base64): ${x.substring(0,50)}...`)}catch(k){console.warn(` Failed to convert previewUrl to base64 for ${d.id}:`,k),x=d.previewUrl}else if(d.filePath&&!d.filePath.startsWith("http")){console.log(` Loading image ${d.id} from filesystem: ${d.filePath}...`);try{x=await br.loadImageAsBase64(d.filePath),x.startsWith("file://")?console.log(` Loaded large image ${d.id} as file path: ${x}`):console.log(` Loaded small image ${d.id} as base64: ${x.substring(0,50)}...`)}catch(k){console.warn(` Failed to load image as base64 from filesystem ${d.id}:`,k);try{x=await br.loadMediaFile(d.filePath),console.log(` Loaded image ${d.id} as media file: ${x.substring(0,50)}...`)}catch(y){console.error(` All filesystem loading methods failed for image ${d.id}:`,y)}}}else if(d.filePath&&d.filePath.startsWith("http"))if(d.filePath.includes("localhost:5555/api/media/openai-image"))x=d.filePath,console.log(` Loading image ${d.id} from backend-served path: ${x}`);else try{x=await Yr(d.filePath),console.log(` Loaded image ${d.id} from filePath (converted to base64): ${x.substring(0,50)}...`)}catch(k){console.warn(` Failed to convert filePath to base64 for ${d.id}:`,k)}else{const k=[d.thumbnailUrl,d.previewUrl,d.filePath].filter(y=>!!y);if(k.length>0){const y=k[0];if(y.startsWith("http"))if(y.includes("localhost:5555/api/media/openai-image"))x=y,console.log(` Using fallback backend-served source for image ${d.id}: ${x}`);else try{x=await Yr(y),console.log(` Using fallback source for image ${d.id} (converted to base64): ${x.substring(0,50)}...`)}catch(N){console.warn(` Failed to convert fallback source to base64 for ${d.id}:`,N),x=y}else x=y,console.log(` Using fallback source for image ${d.id}: ${x.substring(0,50)}...`)}else throw new Error(`No valid source for image ${d.id}`)}return x.startsWith("file://")?console.log(` Setting image src for ${d.id} to file path: ${x}`):x.startsWith("data:")?console.log(` Setting image src for ${d.id} to base64 data: ${x.substring(0,100)}...`):console.log(` Setting image src for ${d.id} to: ${x.substring(0,100)}...`),await new Promise((k,y)=>{v.onload=()=>{console.log(` Image onload fired for ${d.id} - loaded successfully`),console.log(` Image dimensions: ${v.width}x${v.height}`),k()},v.onerror=N=>{console.error(` Image onerror fired for ${d.id}:`,N),console.error(` Failed image src: ${x}`),y(new Error(`Failed to load image: ${N}`))},v.src=x}),console.log(` Adding image to refs for ${d.id}...`),yr.current.set(d.id,v),console.log(` Image element loaded and set for ${d.id}`),console.log(" Current image refs:",Array.from(yr.current.keys())),setTimeout(()=>{Ct.current&&ht(we,0)},50),v}catch(v){return console.error(` IMAGE LOAD FAIL: ${d.id} failed to load. Error:`,v),console.error(" Current image refs after failure:",Array.from(yr.current.keys())),null}}return null},tp=()=>{const d=tt.current,w=Vo.current;if(!d||!w)return console.warn(" Canvas health check failed: Canvas or context is null"),!1;if(d.width<=0||d.height<=0)return console.warn(" Canvas health check failed: Invalid canvas dimensions",{width:d.width,height:d.height}),!1;try{const v=w.getImageData(0,0,1,1);if(!v||!v.data)return console.warn(" Canvas health check failed: Cannot get image data"),!1}catch(v){return v instanceof Error&&(v.message.includes("tainted")||v.message.includes("cross-origin"))?(console.warn(" Canvas health check failed: Canvas tainted by cross-origin data. This is expected for external images."),!0):(console.warn(" Canvas health check failed: Context error",v),!1)}return!0},ht=(d=we,w=0)=>{if(console.log(` renderPreviewFrame called at time ${d} (retry: ${w})`),!tp()){console.warn(" Canvas health check failed, attempting recovery..."),Ct.current=!1,setTimeout(()=>{ki(),w<3&&ht(d,w+1)},100);return}if(!Ct.current){if(console.warn(` RENDER FAIL: Canvas not initialized yet (canvasInitializedRef.current: ${Ct.current}, previewCanvasRef: ${!!tt.current}, previewContextRef: ${!!Vo.current})`),w<5){const N=Math.min(100*Math.pow(2,w),2e3);if(console.log(` RETRY: Will retry rendering in ${N}ms (attempt ${w+1}/5)`),re.current&&clearTimeout(re.current),tt.current&&!Ct.current){console.log(" RETRY: Attempting early canvas initialization...");try{ki()}catch(R){console.warn(" RETRY: Early initialization failed:",R)}}re.current=setTimeout(()=>{ht(d,w+1)},N)}else{console.error(" RENDER FAIL: Canvas failed to initialize after 5 retries. Trying to force initialization..."),console.log(` FORCE INIT: Canvas state - canvasRef: ${!!tt.current}, contextRef: ${!!Vo.current}, initialized: ${Ct.current}`);try{tt.current?(console.log(" FORCE INIT: Attempting to reinitialize canvas..."),ki(),setTimeout(()=>{console.log(` FORCE INIT: Retry after forced initialization. Canvas initialized: ${Ct.current}`),ht(d,0)},300)):console.error(" CRITICAL: Canvas element is null, cannot force initialization")}catch(N){console.error(" CRITICAL: Cannot initialize canvas:",N)}}return}if(!Vo.current||!tt.current){if(console.warn(" RENDER FAIL: Canvas context or canvas ref not available"),w<3){const N=200+w*100;console.log(` RETRY: Canvas context missing, retrying in ${N}ms (attempt ${w+1}/3)`),re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{ht(d,w+1)},N)}else console.error(" RENDER FAIL: Canvas context unavailable after retries");return}re.current&&(clearTimeout(re.current),re.current=null),w>0&&console.log(` RENDER SUCCESS: Canvas ready after ${w} retries!`);const v=Vo.current,x=tt.current;console.log(` Canvas size: ${x.width}x${x.height}`),console.log(` Layers count: ${xe.length}`),console.log(` Media items count: ${pe.length}`),v.fillStyle="#000000",v.fillRect(0,0,x.width,x.height);let k=0,y=0;[...xe].reverse().forEach((N,R)=>{if(console.log(` Processing layer ${R}: ${N.name} (${N.items.length} items, visible: ${N.visible})`),!N.visible){console.warn(` SKIP: Layer "${N.name}" is not visible`);return}console.log(` Layer ${N.name} timeline items:`,N.items.map(D=>({id:D.id,mediaId:D.mediaId,startTime:D.startTime,endTime:D.startTime+D.duration,inTimeRange:d>=D.startTime&&d<D.startTime+D.duration}))),N.items.forEach((D,G)=>{var U,he,F,B;if(console.log(` Processing item ${G}: ${D.id} (${D.startTime}-${D.startTime+D.duration}) mediaId: ${D.mediaId}`),d>=D.startTime&&d<D.startTime+D.duration){console.log(` Item ${D.id} is in time range`);const I=pe.find(me=>me.id===D.mediaId);if(!I){console.warn(` RENDER FAIL: MediaItem not found for item.mediaId: ${D.mediaId}`),console.warn("Available mediaItems:",pe.map(me=>({id:me.id,name:me.name,type:me.type}))),y++;return}console.log(` Found mediaItem: ${I.name} (${I.type})`);const M=D.geometry||{x:0,y:0,width:1,height:1,rotation:0},q=M.x*x.width,ee=M.y*x.height,Q=M.width*x.width,Z=M.height*x.height,Ce=M.rotation||0;if(console.log(` Geometry: x=${q.toFixed(1)}, y=${ee.toFixed(1)}, w=${Q.toFixed(1)}, h=${Z.toFixed(1)}`),v.save(),Ce!==0?(v.translate(q+Q/2,ee+Z/2),v.rotate(Ce*Math.PI/180),v.translate(-(Q/2),-(Z/2))):v.translate(q,ee),I.type==="video"){const me=wn.current.get(I.id);if(!me)console.warn(` RENDER FAIL: Video element not found in ref for ${I.id}`),console.warn("Available video refs:",Array.from(wn.current.keys())),y++;else if(console.log(` Video element found: readyState=${me.readyState}, width=${me.videoWidth}, height=${me.videoHeight}, src=${me.src.substring(0,50)}...`),me&&(me.readyState>=1||me.videoWidth>0&&me.videoHeight>0))try{v.drawImage(me,0,0,Q,Z),console.log(` Successfully rendered video ${I.id}`),k++}catch(De){console.warn(` RENDER FAIL: Error drawing video ${I.id}:`,De),y++}else console.warn(` RENDER FAIL: Video ${I.id} not ready - readyState: ${me.readyState}, dimensions: ${me.videoWidth}x${me.videoHeight}`),y++}else if(I.type==="image"){const me=yr.current.get(I.id);if(!me)console.warn(` RENDER FAIL: Image element not found in ref for ${I.id}`),console.warn("Available image refs:",Array.from(yr.current.keys())),y++;else if(console.log(` Image element found: complete=${me.complete}, naturalWidth=${me.naturalWidth}, src=${me.src.substring(0,50)}...`),me.complete&&me.naturalWidth>0)try{v.drawImage(me,0,0,Q,Z),console.log(` Successfully rendered image ${I.id}`),k++}catch(De){if(De instanceof Error&&(De.message.includes("tainted")||De.message.includes("cross-origin"))){console.warn(` CORS ERROR: Cannot draw image ${D.mediaId} due to cross-origin restrictions. Attempting to convert to base64...`);const qe=pe.find(Qe=>Qe.id===D.mediaId);qe&&((U=qe.filePath)!=null&&U.startsWith("http")||(he=qe.previewUrl)!=null&&he.startsWith("http")||(F=qe.thumbnailUrl)!=null&&F.startsWith("http"))&&setTimeout(()=>{Xr(qe).then(()=>{Ct.current&&ht(we,0)}).catch(Qe=>{console.error(` Failed to reload image ${qe.id} with base64:`,Qe)})},100)}else console.warn(` RENDER FAIL: Error drawing image ${D.mediaId}:`,De);y++}else console.warn(` RENDER FAIL: Image ${I.id} not loaded - complete: ${me.complete}, naturalWidth: ${me.naturalWidth}`),y++}else if(I.type==="text"&&(console.log(` RENDERING TEXT: Rendering text item ${I.id}: "${(B=I.text)==null?void 0:B.substring(0,50)}..."`),I.text)){const me=I.fontFamily||"Arial",De=I.fontSize||Math.min(Q,Z)*.1,qe=I.fontBold?"bold":"normal",Qe=I.fontItalic?"italic":"normal";let fn=`${Qe} ${qe} ${De}px ${me}`;v.font=fn,v.textAlign=I.textAlignment||"center",v.textBaseline="middle";const jn=(I.textOpacity||100)/100,Kt=I.fontColor||"#ffffff";let Qr=Kt;if(jn<1&&Kt.startsWith("#")){const Bt=parseInt(Kt.slice(1,3),16),xr=parseInt(Kt.slice(3,5),16),On=parseInt(Kt.slice(5,7),16);Qr=`rgba(${Bt}, ${xr}, ${On}, ${jn})`}if(v.fillStyle=Qr,I.textBorderThickness&&I.textBorderThickness>0&&I.textBorderColor?(v.strokeStyle=I.textBorderColor,v.lineWidth=I.textBorderThickness):(v.strokeStyle="#000000",v.lineWidth=2),v.shadowColor="rgba(0, 0, 0, 0.8)",v.shadowBlur=4,v.shadowOffsetX=2,v.shadowOffsetY=2,!I.backgroundTransparent&&I.backgroundColor&&I.backgroundColor!=="#000000"){v.save();const Bt=I.backgroundColor,xr=(I.backgroundOpacity||100)/100;let On=Bt;if(xr<1&&Bt.startsWith("#")){const Jn=parseInt(Bt.slice(1,3),16),hn=parseInt(Bt.slice(3,5),16),er=parseInt(Bt.slice(5,7),16);On=`rgba(${Jn}, ${hn}, ${er}, ${xr})`}v.fillStyle=On,v.fillRect(0,0,Q,Z),v.restore(),v.fillStyle=Qr}let Zr=I.text;switch(I.textCapitalization){case"AA":Zr=I.text.toUpperCase();break;case"aa":Zr=I.text.toLowerCase();break;case"Aa":Zr=I.text.charAt(0).toUpperCase()+I.text.slice(1).toLowerCase();break;case"--":default:Zr=I.text;break}let Et;switch(I.textAlignment){case"left":Et=Q*.05;break;case"right":Et=Q*.95;break;case"center":default:Et=Q/2;break}const zt=Q*.9,Zn=Zr.split(" "),Jr=[];let Uo=Zn[0]||"";for(let Bt=1;Bt<Zn.length;Bt++){const xr=Zn[Bt],On=Uo+" "+xr;v.measureText(On).width>zt&&Uo.length>0?(Jr.push(Uo),Uo=xr):Uo=On}Uo.length>0&&Jr.push(Uo);let Os,ju;Jr.length===1?(Os=Z,ju=Z/2):(Os=Z/Jr.length,ju=Os/2),Jr.forEach((Bt,xr)=>{const On=ju+xr*Os;let Jn=De;if(Jr.length===1){const hn=v.measureText(Bt),er=Q*.9*(De/hn.width),zo=Z*.8;Jn=Math.min(er,zo,De*2)}else{const hn=Math.max(...Jr.map(An=>v.measureText(An).width)),er=Q*.9*(De/hn),zo=Os*.7;Jn=Math.min(er,zo,De*1.5)}if(Math.abs(Jn-De)>1){let hn=`${Qe} ${qe} ${Jn}px ${me}`;v.font=hn}if(I.textBorderThickness&&I.textBorderThickness>0&&v.strokeText(Bt,Et,On),v.fillText(Bt,Et,On),I.fontUnderline){const hn=v.measureText(Bt),er=On+(Jn||De)*.1,zo=Math.max(1,(Jn||De)*.05);v.save(),v.strokeStyle=v.fillStyle,v.lineWidth=zo,v.beginPath();let An=Et,Au=hn.width;switch(I.textAlignment){case"left":An=Et;break;case"center":An=Et-hn.width/2;break;case"right":An=Et-hn.width;break}v.moveTo(An,er),v.lineTo(An+Au,er),v.stroke(),v.restore()}if(I.fontStrikethrough){const hn=v.measureText(Bt),er=On-(Jn||De)*.2,zo=Math.max(1,(Jn||De)*.05);v.save(),v.strokeStyle=v.fillStyle,v.lineWidth=zo,v.beginPath();let An=Et,Au=hn.width;switch(I.textAlignment){case"left":An=Et;break;case"center":An=Et-hn.width/2;break;case"right":An=Et-hn.width;break}v.moveTo(An,er),v.lineTo(An+Au,er),v.stroke(),v.restore()}v.font=fn}),v.shadowColor="transparent",v.shadowBlur=0,v.shadowOffsetX=0,v.shadowOffsetY=0,console.log(` Successfully rendered text ${I.id}`),k++}v.restore(),ce&&ce.id===D.id&&(I.type==="image"||I.type==="video"||I.type==="text")&&(WS(v,q,ee,Q,Z),I.type==="text"&&(v.save(),v.strokeStyle="#00ff00",v.lineWidth=1,v.setLineDash([2,2]),v.strokeRect(q,ee,Q,Z),v.restore())),v.restore()}else console.log(` SKIP: Item ${D.id} not in time range (current: ${d})`)})}),console.log(` RENDER SUMMARY: ${k} items rendered, ${y} items skipped`),y>0&&k===0?console.warn(` NO ITEMS RENDERED! All ${y} items were skipped. Check the warnings above.`):k>0&&console.log(` RENDER SUCCESS: ${k} items displayed on canvas`)},WS=(d,w,v,x,k)=>{d.strokeStyle="#00aaff",d.lineWidth=2,d.setLineDash([5,5]),d.strokeRect(w,v,x,k),d.setLineDash([]);const y=8,N=[{name:"tl",x:w-y/2,y:v-y/2},{name:"tr",x:w+x-y/2,y:v-y/2},{name:"bl",x:w-y/2,y:v+k-y/2},{name:"br",x:w+x-y/2,y:v+k-y/2},{name:"t",x:w+x/2-y/2,y:v-y/2},{name:"b",x:w+x/2-y/2,y:v+k-y/2},{name:"l",x:w-y/2,y:v+k/2-y/2},{name:"r",x:w+x-y/2,y:v+k/2-y/2}];d.fillStyle="#00aaff",d.strokeStyle="#ffffff",d.lineWidth=1,N.forEach(R=>{d.fillRect(R.x,R.y,y,y),d.strokeRect(R.x,R.y,y,y)})};p.useEffect(()=>{qn.current=mr},[mr]),p.useEffect(()=>{V.current=Lo},[Lo]),p.useEffect(()=>{xe.length>0&&pe.length>0&&GS().catch(d=>{console.warn(" Failed to preload audio chunks:",d)})},[xe,pe]);const Eu=async d=>{if(!d||ge===0)return;const v=(performance.now()-ae.current)/1e3,x=J.current+v;if(x>=ge){if(Ei(),Ut(ge),J.current=ge,ie.current&&ge>0){const y=ie.current.clientWidth,N=ge/ge*y;Kr(N)}return}const k=Math.min(x,ge);Ut(k),ht(k),kT(),d&&x<ge&&(_.current=requestAnimationFrame(()=>Eu(d)))},np=d=>xe.flatMap(x=>x.visible?x.items:[]).sort((x,k)=>x.startTime-k.startTime).find(x=>{const k=pe.find(y=>y.id===x.mediaId);return k&&(k.type==="voiceover"||k.type==="audio")&&x.startTime>d.startTime})||null,rp=async d=>{const w=pe.find(v=>v.id===d.mediaId);if(!(!w||w.type!=="voiceover"&&w.type!=="audio"))try{const v=await ku(d.mediaId);if(v&&!v.ended&&v.paused){v.currentTime=0;const x=w.volume||100;let k=100;w.type==="voiceover"?k=rt:w.type==="audio"&&(k=ft),v.volume=w.muted?0:x*k/1e4,await v.play(),console.log(` Started next audio chunk: ${w.name}`),Hr(y=>y.includes(v)?y:[...y,v]),v.onended=()=>{console.log(` Audio chunk ended: ${w.name}`);const y=np(d);y&&rp(y)}}}catch(v){console.error(` Failed to start next audio chunk ${w.name}:`,v)}},GS=async()=>{const w=xe.flatMap(x=>x.visible?x.items:[]).filter(x=>{const k=pe.find(y=>y.id===x.mediaId);return k&&(k.type==="voiceover"||k.type==="audio")}),v=5;for(let x=0;x<w.length;x+=v){const k=w.slice(x,x+v);await Promise.all(k.map(async y=>{try{await ku(y.mediaId)}catch(N){console.warn(` Failed to preload audio chunk: ${N}`)}}))}},op=d=>{if(!tt.current)return{x:0,y:0};const w=tt.current,v=w.getBoundingClientRect();return{x:(d.clientX-v.left)*(w.width/v.width),y:(d.clientY-v.top)*(w.height/v.height)}},ip=(d,w)=>{if(!tt.current)return null;const v=tt.current;for(const x of xe)if(x.visible)for(const k of x.items){const y=pe.find(F=>F.id===k.mediaId);if(!y||y.type!=="image"&&y.type!=="video"&&y.type!=="text"||!(we>=k.startTime&&we<k.startTime+k.duration))continue;const R=k.geometry||{x:0,y:0,width:1,height:1},D=R.x*v.width,G=R.y*v.height,U=R.width*v.width,he=R.height*v.height;if(d>=D&&d<=D+U&&w>=G&&w<=G+he)return k}return null},sp=(d,w,v)=>{if(!tt.current)return null;const x=tt.current,k=v.geometry||{x:0,y:0,width:1,height:1},y=k.x*x.width,N=k.y*x.height,R=k.width*x.width,D=k.height*x.height,G=15,U=[{name:"tl",x:y,y:N},{name:"tr",x:y+R,y:N},{name:"bl",x:y,y:N+D},{name:"br",x:y+R,y:N+D},{name:"t",x:y+R/2,y:N},{name:"b",x:y+R/2,y:N+D},{name:"l",x:y,y:N+D/2},{name:"r",x:y+R,y:N+D/2}];for(const he of U)if(Math.abs(d-he.x)<=G&&Math.abs(w-he.y)<=G)return he.name;return null},HS=(d,w)=>{if(mu==="move")return"move";if(mu==="resize")switch(pu){case"tl":case"br":return"nw-resize";case"tr":case"bl":return"ne-resize";case"t":case"b":return"n-resize";case"l":case"r":return"e-resize";default:return"nwse-resize"}const v=ip(d,w);if(v){if(ce&&v.id===ce.id){const x=sp(d,w,v);if(x)switch(x){case"tl":case"br":return"nw-resize";case"tr":case"bl":return"ne-resize";case"t":case"b":return"n-resize";case"l":case"r":return"e-resize";default:return"nwse-resize"}}if(ce&&v.id===ce.id){const x=pe.find(k=>k.id===v.mediaId);if(x&&(x.type==="image"||x.type==="video"))return"move"}else{const x=pe.find(k=>k.id===v.mediaId);if(x&&(x.type==="image"||x.type==="video"))return"pointer"}}return"default"},KS=d=>{const w=op(d),v=ip(w.x,w.y);if(v){gr(v);const x=sp(w.x,w.y,v);x?(al("resize"),Hm(x),yu(v.geometry||{x:0,y:0,width:1,height:1})):(al("move"),yu(v.geometry||{x:0,y:0,width:1,height:1})),Km(w)}else gr(null),al("none")},YS=(d,w)=>{const v=op(d),x=HS(v.x,v.y);if(x!==Xm&&xu(x),!ce||!gu||!Xe||!tt.current)return;const k=tt.current,y=(v.x-gu.x)/k.width,N=(v.y-gu.y)/k.height;let R={...Xe};if(w==="move")R.x=Math.max(0,Math.min(1-R.width,Xe.x+y)),R.y=Math.max(0,Math.min(1-R.height,Xe.y+N));else if(w==="resize"&&pu){switch(pu){case"tl":R.width=Math.max(.05,Xe.width-y),R.height=Math.max(.05,Xe.height-N),R.x=Xe.x+Xe.width-R.width,R.y=Xe.y+Xe.height-R.height;break;case"tr":R.width=Math.max(.05,Xe.width+y),R.height=Math.max(.05,Xe.height-N),R.y=Xe.y+Xe.height-R.height;break;case"bl":R.width=Math.max(.05,Xe.width-y),R.height=Math.max(.05,Xe.height+N),R.x=Xe.x+Xe.width-R.width;break;case"br":R.width=Math.max(.05,Xe.width+y),R.height=Math.max(.05,Xe.height+N);break;case"t":R.height=Math.max(.05,Xe.height-N),R.y=Xe.y+Xe.height-R.height;break;case"b":R.height=Math.max(.05,Xe.height+N);break;case"l":R.width=Math.max(.05,Xe.width-y),R.x=Xe.x+Xe.width-R.width;break;case"r":R.width=Math.max(.05,Xe.width+y);break}R.x=Math.max(0,Math.min(1-R.width,R.x)),R.y=Math.max(0,Math.min(1-R.height,R.y)),R.width=Math.min(1-R.x,R.width),R.height=Math.min(1-R.y,R.height)}qS(ce.id,R)},ap=()=>{ce&&Nu(ce.id),al("none"),Hm(null),Km(null),yu(null)},XS=()=>{xu("default"),ap()},qS=(d,w)=>{const v=je.find(x=>x.id===d);if(v){const x=pe.find(k=>k.id===v.mediaId);x&&x.type==="text"&&rT(d,w),Te(k=>k.map(y=>y.id===v.mediaId?{...y,x:w.x,y:w.y,width:w.width,height:w.height}:y))}Ve(x=>x.map(k=>({...k,items:k.items.map(y=>y.id===d?{...y,geometry:w}:y)}))),gr(x=>x&&x.id===d?{...x,geometry:w}:x),Ct.current&&ht(we),_o()};p.useEffect(()=>(BS().then(d=>{US(d)}),setTimeout(()=>{ki(),window.addEventListener("resize",cl)},100),pe.forEach(d=>{!wn.current.has(d.id)&&!yr.current.has(d.id)&&Xr(d).then(()=>{}).catch(w=>{console.error(` Failed to load media element ${d.id}:`,w)})}),()=>{window.removeEventListener("resize",cl),wn.current.forEach(d=>{d.pause(),d.src="",d.load()}),wn.current.clear(),yr.current.clear()}),[]),p.useEffect(()=>{ce&&pe.find(w=>w.id===ce.mediaId&&w.type==="text")&&setTimeout(()=>{Ct.current&&ht(we)},50)},[ce==null?void 0:ce.id,we]),p.useEffect(()=>{pe.filter(w=>w.type==="text").length>0&&Ct.current&&ht(we)},[JSON.stringify(pe.filter(d=>d.type==="text").map(d=>({id:d.id,fontFamily:d.fontFamily,fontSize:d.fontSize,fontColor:d.fontColor,backgroundColor:d.backgroundColor,backgroundTransparent:d.backgroundTransparent,fontBold:d.fontBold,fontItalic:d.fontItalic,fontUnderline:d.fontUnderline,fontStrikethrough:d.fontStrikethrough,textOpacity:d.textOpacity,backgroundOpacity:d.backgroundOpacity,textBorderColor:d.textBorderColor,textBorderThickness:d.textBorderThickness,textAlignment:d.textAlignment,textCapitalization:d.textCapitalization,text:d.text})))]),p.useEffect(()=>{cl(),Ct.current&&ht(0)},[s]),p.useEffect(()=>{const d=pe.filter(x=>(x.type==="voiceover"||x.type==="audio")&&x.name.includes("(Part")&&!ne.current.has(x.id));d.length>0&&hp(d).catch(x=>{console.error("Failed to preload split audio elements:",x)});const w=pe.filter(x=>x.type==="image"&&!x.thumbnailUrl&&x.filePath);w.length>0&&(console.log(` Loading thumbnails for ${w.length} images...`),w.forEach(x=>{Cu(x.filePath).then(k=>{Te(y=>y.map(N=>N.id===x.id?{...N,thumbnailUrl:k}:N))}).catch(k=>{console.error(` Failed to load thumbnail for ${x.name}:`,k)})})),console.log(` MEDIA LOADING: Processing ${pe.length} media items for element loading`);const v=pe.map(async(x,k)=>{const y=wn.current.has(x.id),N=yr.current.has(x.id);if(console.log(` Item ${k}: ${x.id} (${x.type}) - videoRef: ${y}, imageRef: ${N}`),!y&&!N){console.log(` Loading element for ${x.id}...`);try{await Xr(x),console.log(` Successfully loaded element for ${x.id}`)}catch(R){console.error(` Failed to load element for ${x.id}:`,R)}}else console.log(` Element already loaded for ${x.id}`)});Promise.all(v).then(()=>{console.log(` REFS STATUS: ${wn.current.size} video refs, ${yr.current.size} image refs`),Ct.current&&ht(we,0)})},[pe]),p.useEffect(()=>{if(pe.length>0&&je.length>0){const d=new Set(pe.map(v=>v.id)),w=je.filter(v=>!d.has(v.mediaId));w.length>0&&(console.warn(` Found ${w.length} orphaned timeline items, cleaning up...`),w.forEach(v=>{console.warn(` Removing orphaned timeline item: ${v.id} (references non-existent media: ${v.mediaId})`)}),nt(v=>v.filter(x=>d.has(x.mediaId))),Ve(v=>v.map(x=>({...x,items:x.items.filter(k=>d.has(k.mediaId))}))))}},[pe,je]),p.useEffect(()=>()=>{re.current&&(clearTimeout(re.current),re.current=null)},[]);const Ei=()=>{if(ie.current){const d=ie.current.clientWidth,w=Wm/d*ge;Ut(w),J.current=w}Xn(!1),qn.current.forEach(d=>d.pause()),V.current.forEach(d=>d.pause()),_.current&&(cancelAnimationFrame(_.current),_.current=null),be.current&&(clearInterval(be.current),be.current=null)},QS=()=>{var d;return(d=K.current)==null?void 0:d.click()},[ZS,ul]=p.useState(!1),[JS,Fs]=p.useState(!1),[vr,lp]=p.useState(null),eT=()=>ul(!0),Nu=d=>{const w=je.find(v=>v.id===d);if(w&&w.geometry){const v=w.geometry;Te(x=>x.map(k=>k.id===w.mediaId?{...k,x:v.x,y:v.y,width:v.width,height:v.height}:k))}},tT=d=>{kt(d,{fontFamily:"Arial",fontSize:24,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontStrikethrough:!1,fontColor:"#ffffff",backgroundColor:"#000000",backgroundTransparent:!1,textOpacity:100,backgroundOpacity:70,textBorderColor:"#000000",textBorderThickness:2,textAlignment:"center",textCapitalization:"--"})},kt=(d,w)=>{Te(v=>v.map(x=>x.id===d?{...x,...w}:x)),(w.x!==void 0||w.y!==void 0||w.width!==void 0||w.height!==void 0)&&(nt(v=>v.map(x=>{var k,y,N,R,D;return x.mediaId===d?{...x,geometry:{...x.geometry,x:w.x??((k=x.geometry)==null?void 0:k.x)??0,y:w.y??((y=x.geometry)==null?void 0:y.y)??0,width:w.width??((N=x.geometry)==null?void 0:N.width)??1,height:w.height??((R=x.geometry)==null?void 0:R.height)??1,rotation:((D=x.geometry)==null?void 0:D.rotation)??0}}:x})),Ve(v=>v.map(x=>({...x,items:x.items.map(k=>{var y,N,R,D,G;return k.mediaId===d?{...k,geometry:{...k.geometry,x:w.x??((y=k.geometry)==null?void 0:y.x)??0,y:w.y??((N=k.geometry)==null?void 0:N.y)??0,width:w.width??((R=k.geometry)==null?void 0:R.width)??1,height:w.height??((D=k.geometry)==null?void 0:D.height)??1,rotation:((G=k.geometry)==null?void 0:G.rotation)??0}}:k})})))),Ct.current&&ht(we),_o()};p.useEffect(()=>{ce&&Nu(ce.id)},[ce==null?void 0:ce.id,ce==null?void 0:ce.geometry]);const nT=(d,w=1920,v=1080,x={})=>{const y=document.createElement("canvas").getContext("2d");if(!y)return{x:.1,y:.8,width:.8,height:.15};const{fontFamily:N="Arial",fontSize:R=Math.min(w,v)*.04,fontWeight:D="normal",fontStyle:G="normal",maxWidthRatio:U=.8,position:he="bottom",forceFullWidth:F=!1,minHeight:B=.12}=x;y.font=`${G} ${D} ${R}px ${N}`;const I=F?.95:U,M=d.split(" "),q=w*I,ee=[];let Q=M[0]||"";for(let Et=1;Et<M.length;Et++){const zt=M[Et],Zn=Q+" "+zt;y.measureText(Zn).width>q&&Q.length>0?(ee.push(Q),Q=zt):Q=Zn}Q.length>0&&ee.push(Q);let Z=0,Ce=0,me=0;ee.forEach(Et=>{const zt=y.measureText(Et);let Zn=0;zt.actualBoundingBoxLeft!==void 0&&zt.actualBoundingBoxRight!==void 0?Zn=zt.actualBoundingBoxLeft+zt.actualBoundingBoxRight:Zn=zt.width,Zn>Z&&(Z=Zn),zt.actualBoundingBoxAscent!==void 0&&zt.actualBoundingBoxDescent!==void 0&&(zt.actualBoundingBoxAscent>Ce&&(Ce=zt.actualBoundingBoxAscent),zt.actualBoundingBoxDescent>me&&(me=zt.actualBoundingBoxDescent))});let De=Z,qe;if(ee.length===1)qe=Ce+me||R*.8;else{const Et=Ce+me||R*.8,zt=R*.1;qe=Et+(ee.length-1)*(Et+zt)}F&&(De=w*I),De=Math.max(De,R*.5),qe=Math.max(qe,R*.5);const Qe=v*B;qe=Math.max(qe,Qe);const fn=Math.min(De/w,I),jn=Math.min(qe/v,.4);let Kt=(1-fn)/2,Qr;const Zr=.005;switch(he){case"top":Qr=Zr;break;case"center":Qr=(1-jn)/2;break;case"bottom":default:Qr=Math.max(1-jn-Zr,0);break}return{x:Kt,y:Qr,width:fn,height:jn,rotation:0}},rT=(d,w)=>{const v=je.find(Z=>Z.id===d);if(!v)return;const x=pe.find(Z=>Z.id===v.mediaId);if(!x||x.type!=="text"||!x.text)return;const k=tt.current,y=(k==null?void 0:k.width)||1920,N=(k==null?void 0:k.height)||1080,R=w.width*y,D=w.height*N,U=document.createElement("canvas").getContext("2d");if(!U)return;const he=x.fontSize||Math.min(y,N)*.04;U.font=`${x.fontItalic?"italic":"normal"} ${x.fontBold?"bold":"normal"} ${he}px ${x.fontFamily||"Arial"}`;const F=x.text.split(" "),B=[];let I=F[0]||"";for(let Z=1;Z<F.length;Z++){const Ce=F[Z],me=I+" "+Ce;U.measureText(me).width>R*.9&&I.length>0?(B.push(I),I=Ce):I=me}I.length>0&&B.push(I);const M=Math.max(...B.map(Z=>U.measureText(Z).width)),q=B.length*he*1.1,ee=M>R*.9,Q=q>D*.8;if(ee||Q){const Z=R*.9/M,Ce=D*.8/q,me=Math.min(Z,Ce),De=Math.max(he*me,8);Te(qe=>qe.map(Qe=>Qe.id===x.id?{...Qe,fontSize:De}:Qe))}},cp=(d,w=0,v)=>{const x=tt.current,k=(x==null?void 0:x.width)||1920,y=(x==null?void 0:x.height)||1080,N=je.find(B=>{var I,M;return B.startTime===w&&(((I=pe.find(q=>q.id===B.mediaId))==null?void 0:I.type)==="voiceover"||((M=pe.find(q=>q.id===B.mediaId))==null?void 0:M.type)==="audio")}),R=(N==null?void 0:N.duration)||0;console.log(` AUDIO DURATION: Audio timeline item duration: ${R}s, Audio start time: ${w}s`);const D=d.segments.map(B=>{const I=(B.end-B.start)/Math.max(...d.segments.map(q=>q.end)),M=R*I;return console.log(` SEGMENT DURATION: "${B.text.substring(0,30)}..." - Original: ${B.end-B.start}s, Proportional: ${M.toFixed(2)}s`),{id:`text_segment_${v||"unknown"}_${B.id}`,name:`Text: ${B.text.substring(0,30)}${B.text.length>30?"...":""}`,type:"text",duration:M,filePath:"",text:B.text,fontFamily:"Arial",fontSize:Math.min(k,y)*.04,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontStrikethrough:!1,fontColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.7)",backgroundTransparent:!1,textOpacity:100,backgroundOpacity:70,textBorderColor:"#000000",textBorderThickness:2,textAlignment:"center",textCapitalization:"--"}});Te(B=>(console.log(` CREATE TRANSCRIPT: Adding ${D.length} new text media items from transcript`),[...B,...D]));const G=D.map((B,I)=>{const M=d.segments[I],q=nT(M.text,k,y,{fontFamily:B.fontFamily,fontSize:B.fontSize,fontWeight:B.fontBold?"bold":"normal",fontStyle:B.fontItalic?"italic":"normal",position:"bottom",padding:0,forceFullWidth:!0,minHeight:.2}),ee=M.start/Math.max(...d.segments.map(De=>De.end)),Q=M.end/Math.max(...d.segments.map(De=>De.end)),Z=w+R*ee,Ce=w+R*Q,me=Ce-Z;return console.log(` TRANSCRIPT SEGMENT: "${M.text.substring(0,30)}..." - Original: ${M.start}s-${M.end}s, Timeline: ${Z.toFixed(2)}s-${Ce.toFixed(2)}s, Duration: ${B.duration.toFixed(2)}s`),{id:`timeline_${B.id}`,mediaId:B.id,startTime:Z,duration:me,track:0,geometry:q}});Ve(B=>{const I=B.findIndex(M=>M.type==="text");if(I!==-1){const M=[...B];return console.log(` CREATE TRANSCRIPT: Adding ${G.length} new timeline items to existing text layer`),M[I]={...M[I],items:[...M[I].items,...G]},M}else{const M={id:`text_layer_${Date.now()}`,name:"Text",type:"text",visible:!0,locked:!1,items:G};return console.log(` CREATE TRANSCRIPT: Creating new text layer with ${G.length} timeline items`),[...B,M]}}),nt(B=>{const I=B.map(q=>q.id),M=G.filter(q=>!I.includes(q.id));return M.length>0?(console.log(` CREATE TRANSCRIPT: Adding ${M.length} new timeline items to global timeline`),[...B,...M]):(console.log(" CREATE TRANSCRIPT: All timeline items already exist globally, skipping duplicates"),B)});const U=Math.max(...d.segments.map(B=>B.end));U>ge&&Ot(U);const he={sentences:d.segments.map((B,I)=>{const M=D[I],q=B.start/Math.max(...d.segments.map(me=>me.end)),ee=B.end/Math.max(...d.segments.map(me=>me.end)),Q=w+R*q,Z=w+R*ee,Ce=Z-Q;return{id:M.id,text:B.text,startTime:Q,duration:Ce,endTime:Z,audioChunkId:void 0,chapterNumber:void 0}}),totalDuration:w+R,language:"en",savedAt:new Date().toISOString()};j&&j(he);const F={storyContent:o||"",audioChunks:c||[],totalAudioDuration:(c==null?void 0:c.reduce((B,I)=>B+(I.duration||0),0))||0,voiceoverSettings:{selectedVoiceId:i||"",volume:rt},savedAt:new Date().toISOString()};du(F)},oT=async d=>{var v,x;if(!u)return console.error("Story ID is required to import OpenAI-generated images"),[];const w=[];for(const k of d)try{console.log(` Importing OpenAI image: ${k.name}`),console.log(" DEBUG: stockItem object:",{id:k.id,name:k.name,url:k.url,imageBuffer:k.imageBuffer?`${k.imageBuffer.substring(0,50)}...`:"none",fileName:k.fileName,contentType:k.contentType,size:k.size,source:k.source,type:k.type,hasUrl:!!k.url,hasImageBuffer:!!k.imageBuffer,hasFileName:!!k.fileName,urlLength:((v=k.url)==null?void 0:v.length)||0,bufferSize:((x=k.imageBuffer)==null?void 0:x.length)||0});const y=`openai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;if(k.imageBuffer){console.log(` USING IMAGE BUFFER: Image ${k.id} has base64 data`),console.log(` File name: ${k.fileName}`),console.log(` Story ID: ${u}`);const N=k.imageBuffer,R=atob(N),D=new Array(R.length);for(let B=0;B<R.length;B++)D[B]=R.charCodeAt(B);const G=new Uint8Array(D),U=new Blob([G],{type:k.contentType}),he=await br.saveMediaFile(u,y,U,"image",k.url,"openai","OpenAI"),F={id:y,name:k.name,type:"image",duration:k.duration,filePath:he.relativePath,fileName:he.fileName,url:k.url,description:k.description,source:k.source,paragraphNumber:k.paragraphNumber,x:0,y:0,width:k.width,height:k.height,thumbnailUrl:`data:${k.contentType};base64,${k.imageBuffer}`};F.openaiPrompt=k.prompt,F.allocation=k.allocation,F.priority=k.priority,F.strategicIndex=k.strategicIndex,F.originalOpenAIUrl=k.url,F.segmentId=k.segmentId,console.log(` OpenAI image saved to Electron AppData: ${F.filePath}`),console.log(` Electron path: ${F.filePath}`),console.log(` Original URL: ${k.url}`),console.log(` File name: ${F.fileName}`),w.push(F),console.log(` Successfully imported OpenAI image: ${k.name}`,{id:F.id,source:F.source,filePath:F.filePath,fileName:F.fileName,type:F.type})}else{console.warn(` WARNING: No image buffer data for image ${k.id}, skipping...`);continue}}catch(y){console.error(` Failed to import OpenAI image ${k.id}:`,y)}return w},iT=async(d,w,v,x)=>{const k=v.startsWith("video/")?"video":v.startsWith("image/")?"image":v.startsWith("audio/")?"audio":null;if(!k)return null;try{let y=0,N="";const R=URL.createObjectURL(d);if(k==="video"){const F=document.createElement("video");F.preload="metadata",F.src=R,await new Promise(B=>{F.onloadedmetadata=async()=>{y=F.duration,F.currentTime=1,await new Promise(I=>{F.onseeked=()=>{const M=document.createElement("canvas");M.width=F.videoWidth,M.height=F.videoHeight;const q=M.getContext("2d");q==null||q.drawImage(F,0,0,M.width,M.height),N=M.toDataURL("image/jpeg"),I()}}),B()},F.onerror=()=>B()})}else if(k==="audio"){const F=new Audio(R);await new Promise(B=>{let I=!1;const M=()=>{I||(I=!0,B())};F.onloadedmetadata=()=>{y=F.duration,M()},F.onloadeddata=()=>{y===0&&F.duration>0&&(y=F.duration)},F.oncanplaythrough=()=>{y===0&&F.duration>0&&(y=F.duration)},F.onerror=()=>{M()},F.load(),setTimeout(()=>{I||M()},3e3)})}let D=R,G=R,U=R;if(u)try{const F=x.startsWith("openai-"),B=F?"openai":"local",I=F?"OpenAI":"User";console.log(` SAVING: Saving ${k} file to filesystem...`,{storyId:u,mediaId:x,fileName:w,fileType:v,isOpenAIImage:F,pexelsId:B,photographer:I,fileSize:d.size});const M=await br.saveMediaFile(u,x,d,k==="video"?"video":"image",R,B,I);if(console.log(" SAVED: File saved to filesystem successfully:",{relativePath:M.relativePath,filePath:M.filePath,fileName:M.fileName}),D=M.relativePath,G=R,k==="image")try{console.log(` LOADING: Loading saved image as base64 for thumbnail: ${D}`),U=await br.loadImageAsBase64(D),console.log(` LOADED: Image loaded as base64 successfully, length: ${U.length}`)}catch(q){console.warn(" Failed to load image as base64 for thumbnail, using blob URL:",q),U=R}else U=N}catch(F){console.error(" SAVE FAILED: Failed to save media file to filesystem:",F),console.error(" SAVE ERROR DETAILS:",{storyId:u,mediaId:x,fileName:w,fileType:v,fileSize:d.size,error:F instanceof Error?F.message:"Unknown error",stack:F instanceof Error?F.stack:void 0}),G=R,U=R}return{id:x,name:w.split(".")[0],type:k,duration:y,filePath:D,previewUrl:G,thumbnailUrl:N||(k==="image"?U:""),text:""}}catch(y){return console.error(`Failed to process file ${w}:`,y instanceof Error?y.message:"Unknown error"),null}},sT=async(d,w)=>{const v=tt.current,x=(v==null?void 0:v.width)||1920,k=(v==null?void 0:v.height)||1080;console.log(` STOCK MAPPING: Mapping ${d.length} imported media items to ${w.length} original stock items`);const y=d.map((B,I)=>{console.log(` Creating timeline item for media ${B.id} at index ${I}`);let M=w.find(fn=>fn.paragraphNumber===I+1);if(M||(M=w[I]),!M)return console.warn(` No original stock data found for imported media ${B.id} at index ${I}`),null;console.log(` STOCK MAPPING: Successfully mapped imported media ${B.id} to paragraph ${M.paragraphNumber||I+1}`);const q=M.width/M.height,ee=x/k;let Q,Z,Ce,me;q>ee?(Q=k*q,Z=k,Ce=(x-Q)/2,me=0):(Q=x,Z=x/q,Ce=0,me=(k-Z)/2);let De,qe;if(M.allocation==="story-based"&&M.startTime!==void 0&&M.endTime!==void 0)De=M.startTime,qe=M.endTime-M.startTime,console.log(` STORY-BASED TIMING: Image ${M.paragraphNumber} covers ${De.toFixed(1)}s to ${M.endTime.toFixed(1)}s (duration: ${qe.toFixed(1)}s)`);else{const fn=M.paragraphNumber||I+1,jn=5;De=(fn-1)*jn,qe=jn,console.log(` PARAGRAPH TIMING: Image ${fn} at ${De}s for ${qe}s`)}const Qe={id:`timeline_openai_${B.id}`,mediaId:B.id,startTime:De,duration:qe,track:0,geometry:{x:Ce/x,y:me/k,width:Q/x,height:Z/k,rotation:0}};return console.log(` Created timeline item: ${Qe.id} at ${De}s for ${qe}s`),Qe}).filter(Boolean);if(console.log(` FINAL TIMELINE ITEMS: Created ${y.length} timeline items:`,y.map(B=>({id:B.id,mediaId:B.mediaId,startTime:B.startTime,duration:B.duration}))),w.length>0&&w[0].allocation==="story-based"){const B=y.sort((ee,Q)=>ee.startTime-Q.startTime),I=B[0],M=B[B.length-1],q=M?M.startTime+M.duration-I.startTime:0;console.log(" COVERAGE VERIFICATION:",{totalItems:y.length,firstImageStart:(I==null?void 0:I.startTime.toFixed(1))+"s",lastImageEnd:M?(M.startTime+M.duration).toFixed(1)+"s":"N/A",totalCoverage:q.toFixed(1)+"s",videoDuration:ge.toFixed(1)+"s",coveragePercentage:ge>0?(q/ge*100).toFixed(1)+"%":"N/A"}),q<ge*.95?console.warn(` COVERAGE WARNING: Images only cover ${(q/ge*100).toFixed(1)}% of video duration. There may be gaps.`):console.log(` COVERAGE SUCCESS: Images cover ${(q/ge*100).toFixed(1)}% of video duration. Complete coverage achieved!`)}if(y.length===0){console.error(" CRITICAL ERROR: No timeline items created for stock media!");return}console.log(` TIMELINE VERIFICATION: ${y.length} timeline items ready for layer creation`);const N="stocks-layer",R=xe.findIndex(B=>B.id===N);let D;if(R>=0)D=xe.map(B=>{if(B.id===N){const I=B.items.map(q=>q.id),M=y.filter(q=>!I.includes(q.id));return M.length>0?(console.log(` ADD STOCK: Adding ${M.length} new stock timeline items to existing layer (${y.length-M.length} duplicates skipped)`),{...B,items:[...B.items,...M]}):(console.log(` ADD STOCK: All ${y.length} stock timeline items already exist in layer, skipping duplicates`),B)}return B});else{const B={id:N,name:"Stock Media",visible:!0,locked:!1,items:y,type:"footage",duration:Math.max(...y.map(M=>M.startTime+M.duration))};let I=-1;for(let M=xe.length-1;M>=0;M--)if(xe[M].type==="text"){I=M;break}I>=0?(D=[...xe.slice(0,I+1),B,...xe.slice(I+1)],console.log(` ADD STOCK: Inserted stock media layer after text layer at index ${I}`)):(D=[B,...xe],console.log(" ADD STOCK: No text layers found, added stock media layer at top"))}console.log(` RESTORATION FLOW: Setting ${D.length} layers with stock media`),console.log(` LAYERS: Setting ${D.length} layers:`,D.map(B=>{var I,M;return{id:B.id,name:B.name,type:B.type,itemCount:((I=B.items)==null?void 0:I.length)||0,items:(M=B.items)==null?void 0:M.map(q=>({id:q.id,mediaId:q.mediaId,startTime:q.startTime}))}})),Ve(D),console.log(" MANUAL SYNC: Syncing timeline items from layers..."),Ci(D);const G=Math.max(...y.map(B=>B.startTime+B.duration));G>ge&&Ot(G);const U=d.map(async B=>{try{return await Xr(B),console.log(` Stock media element loaded: ${B.id}`),!0}catch(I){return console.error(` Failed to load stock media element ${B.id}:`,I),!1}}),F=(await Promise.all(U)).filter(Boolean).length;console.log(` STOCK MEDIA LOADED: ${F}/${d.length} items ready for rendering`),console.log(" Auto-render will be triggered by useEffect hooks when layers change")},aT=async d=>{try{const w=await oT(d);if(w.length===0)return;Te(y=>{const N=y.map(D=>D.id),R=w.filter(D=>!N.includes(D.id));return R.length>0?[...y,...R]:y}),await sT(w,d);const v=pe.filter(y=>(y.source==="pexels"||y.source==="openai-dalle")&&(y.type==="video"||y.type==="image")),x=je.filter(y=>v.some(N=>N.id===y.mediaId)),k={items:v.map(y=>{const N=x.find(R=>R.mediaId===y.id);return y.source==="openai-dalle"?{id:y.id,name:y.name,type:"image",description:y.description||y.name,url:y.originalOpenAIUrl||y.url||"",fileName:y.fileName||`${y.id}.jpg`,duration:y.duration||0,width:y.width||0,height:y.height||0,segmentId:y.segmentId,startTime:(N==null?void 0:N.startTime)||0,endTime:((N==null?void 0:N.startTime)||0)+((N==null?void 0:N.duration)||y.duration||0),searchQuery:y.searchQuery,prompt:y.openaiPrompt||"",source:"openai-dalle",allocation:y.allocation||"sequential",priority:y.priority||"medium",strategicIndex:y.strategicIndex,localFilePath:y.filePath,downloadedAt:new Date().toISOString()}:{id:y.id,name:y.name,type:"image",description:y.name,url:y.url||"",fileName:`${y.id}.jpg`,duration:y.duration||0,width:y.width||0,height:y.height||0,segmentId:void 0,startTime:(N==null?void 0:N.startTime)||0,endTime:((N==null?void 0:N.startTime)||0)+((N==null?void 0:N.duration)||y.duration||0),searchQuery:y.searchQuery,prompt:`Stock media: ${y.name}`,source:"pexels-legacy",allocation:"sequential",priority:"medium",strategicIndex:void 0,localFilePath:y.filePath,downloadedAt:new Date().toISOString()}}),savedAt:new Date().toISOString()};ol(k)}catch(w){throw w}},up=p.useCallback(async(d=!1)=>{var N,R;if(!u){Be("Story ID is required for stock media fetching");return}let w=ge;if(!w||w===0){if((N=l==null?void 0:l.timeline)!=null&&N.totalDuration)w=l.timeline.totalDuration;else if(c&&c.length>0){const D=c.reduce((G,U)=>G+U.duration,0);D>0&&(w=D)}else if(m!=null&&m.totalAudioDuration)w=m.totalAudioDuration;else if((R=m==null?void 0:m.transcriptInfo)!=null&&R.totalAudioDuration)w=m.transcriptInfo.totalAudioDuration;else if(je&&je.length>0){const D=je.reduce((G,U)=>Math.max(G,U.startTime+U.duration),0);D>0&&(w=D)}}if(!w||w===0){Be("Video duration not available. Please ensure audio has been generated or video has been loaded.");return}const v=w/60,k=Math.ceil(v*5),y=[{id:1,start:0,end:w,text:`Story-based generation for ${k} images`,paragraphNumber:1,isStoryBased:!0,totalImages:k,videoDuration:w}];d?(lp(y),await dp()):(Fs(!0),lp(y))},[u,ge,l,c,m,je]),dp=p.useCallback(async()=>{if(!(!vr||!u)){W(!0),ke("Starting automatic image generation...");try{const d=vr[0],w=d.totalImages,v=d.videoDuration;if(!w||!v){Be("Missing required parameters for story-based generation");return}Fo(`Generating ${w} images based on story content (5 per minute)...`);const x=v/w,k=.5,y=[];for(let R=0;R<w;R++){const D=R*x,G=Math.min(D+x+k,v),U=R+1;y.push({id:U,start:D,end:G,text:`Story-based image ${U} for video segment ${D.toFixed(1)}s - ${G.toFixed(1)}s`,paragraphNumber:U,isStoryBased:!0,imageNumber:U,startTime:D,endTime:G,prompt:`Create a beautiful, cinematic image representing a compelling story moment. Scene ${U} of ${w}. This image will appear at ${D.toFixed(1)}s and cover until ${G.toFixed(1)}s in a ${(v/60).toFixed(2)} minute video. Style: High quality, professional, cinematic, suitable for storytelling. Focus on visual storytelling and scene transitions. Ensure this image can sustain viewer interest for ${(G-D).toFixed(1)} seconds.`,description:`Story moment ${U} - ${D.toFixed(1)}s to ${G.toFixed(1)}s (covers ${(G-D).toFixed(1)}s)`,priority:"high",allocation:"story-based"})}const N=await ut.fetchStockMedia(y,u,w);if(Fo("Creating story-based stock media layer..."),N.stockMedia&&N.stockMedia.length>0)N.stockMedia.filter(D=>!D.paragraphNumber).length>0&&N.stockMedia.forEach((D,G)=>{D.paragraphNumber||(D.paragraphNumber=G+1)}),await aT(N.stockMedia);else throw new Error("No stock media received from backend");Fo(` Story-based stock media completed! ${N.totalItems} images added to media library and timeline.`),W(!1),de(!0),ke("Automatic image generation completed!"),setTimeout(()=>{Ti(!1)},1e3)}catch(d){Be(d instanceof Error?d.message:"Failed to generate stock media"),W(!1),ke("Image generation failed - you can try manually.")}}},[vr,u,ut]),lT=async()=>{if(vr){if(!u){Be("Story ID is required for stock media generation"),Fs(!1);return}try{if(Fo("Fetching related stock media..."),Ti(!0),Fs(!1),vr.length===0){Be("No story data available for stock media generation."),Ti(!1);return}await dp()}catch(d){console.error(" Failed to fetch stock media:",d),Be(d instanceof Error?d.message:"Failed to fetch stock media"),Ti(!1)}}},cT=async d=>{if(!u){Be("Story ID is required for transcript processing");return}try{Ti(!0),Fo("Loading audio file..."),ul(!1);let w;if(d.filePath.startsWith("blob:"))w=await(await fetch(d.filePath)).arrayBuffer();else try{w=await window.electronAPI.audio.loadAudioFile(d.filePath)}catch(G){throw new Error(`Failed to load audio file: ${G}`)}const x=(G=>{var F;const U=(F=G.split(".").pop())==null?void 0:F.toLowerCase();return{mp3:"audio/mpeg",wav:"audio/wav",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",webm:"audio/webm"}[U||""]||"audio/mpeg"})(d.name),k=new Blob([w],{type:x}),y=new File([k],d.name,{type:x});Fo("Generating transcript with AI...");const N=await ut.generateTranscript(y,u,d.id);Fo("Creating text layers...");const R=je.find(G=>G.mediaId===d.id),D=(R==null?void 0:R.startTime)||0;console.log(` TRANSCRIPT: Audio file "${d.name}" starts at ${D}s in timeline`),cp(N,D,d.id)}catch(w){console.error(" Failed to generate transcript:",w),Be(w instanceof Error?w.message:"Failed to generate transcript")}finally{Ti(!1)}},Ni=p.useCallback(async()=>{if(!u){console.log(" No story ID available for automatic transcript generation");return}if(xi){console.log(" Automatic transcript generation already in progress");return}if(xe.filter(x=>x.type==="text").some(x=>x.items.length>0)){console.log(" AUTO-TRANSCRIPT: Skipping - transcripts already exist"),Nn(!0);return}const v=pe.filter(x=>x.type==="voiceover");if(v.length===0){console.log(" No voiceover items found for transcript generation");return}console.log(` AUTO-TRANSCRIPT: Found ${v.length} voiceover items for transcript generation`),rl(!0),$o(`Starting transcript generation for ${v.length} voiceover items...`);for(const x of v)try{console.log(` AUTO-TRANSCRIPT: Generating transcript for "${x.name}"`),$o(`Generating transcript for "${x.name}"...`);let k;if(x.filePath.startsWith("blob:"))k=await(await fetch(x.filePath)).arrayBuffer();else try{k=await window.electronAPI.audio.loadAudioFile(x.filePath)}catch(F){console.warn(` Failed to load audio file for auto-transcript: ${F}`);continue}const N=(F=>{var M;const B=(M=F.split(".").pop())==null?void 0:M.toLowerCase();return{mp3:"audio/mpeg",wav:"audio/wav",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",webm:"audio/webm"}[B||""]||"audio/mpeg"})(x.name),R=new Blob([k],{type:N}),D=new File([R],x.name,{type:N});console.log(` AUTO-TRANSCRIPT: Calling API for "${x.name}"`);const G=await ut.generateTranscript(D,u,x.id);console.log(` AUTO-TRANSCRIPT: Received transcript for "${x.name}" with ${G.segments.length} segments`);const U=je.find(F=>F.mediaId===x.id),he=(U==null?void 0:U.startTime)||0;console.log(` AUTO-TRANSCRIPT: Creating text layers for "${x.name}" starting at ${he}s`),cp(G,he,x.id),await new Promise(F=>setTimeout(F,1e3))}catch(k){console.error(` AUTO-TRANSCRIPT: Failed to generate transcript for "${x.name}":`,k),$o(`Failed to generate transcript for "${x.name}" - continuing with next item...`);continue}Nn(!0),rl(!1),$o("Automatic transcript generation completed!"),$o("Transcripts completed! Automatic image generation will start if needed."),wi(!0),setTimeout(()=>{wi(!1)},5e3)},[u,xe,pe,je,ut]),uT=()=>{const d=pe.filter(w=>w.type==="voiceover");return d.length===0?a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-4 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-64",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No voiceover items found"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Generate some voiceover audio first to create transcripts."}),a.jsx(fe,{size:"sm",onClick:()=>ul(!1),className:"mt-2 text-xs",children:"Close"})]}):a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-3 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-80  overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Select Voiceover for Transcript"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>ul(!1),className:"text-xs h-6 w-6 p-0",children:a.jsx(Ki,{className:"w-3 h-3"})})]}),a.jsx("div",{className:"space-y-2",children:d.map(w=>{var v;return a.jsxs("div",{onClick:()=>cT(w),className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-100 hover:border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Bg,{className:"w-4 h-4 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium truncate max-w-48",children:w.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[(v=w.duration)==null?void 0:v.toFixed(1),"s"]})]})]}),a.jsx(fe,{size:"sm",className:"text-xs h-7",children:"Generate"})]},w.id)})})]})},dT=async d=>{const w=d.target.files;if(!(!w||w.length===0)){if(!u){Be("Story ID is required to save media files");return}for(const v of Array.from(w))try{const x=`custom-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,k=await iT(v,v.name,v.type,x);k&&Te(y=>y.map(R=>R.id).includes(k.id)?y:[...y,k])}catch(x){Be(x instanceof Error?x.message:"Failed to process file")}d.target.value=""}},fT=()=>{if(xe.length>=Jm)return;const d={id:`layer-${xe.length+1}`,name:`Layer ${xe.length+1}`,visible:!0,locked:!1,items:[],type:"main"};Ve(w=>[d,...w]),Si(d.id)},hT=async(d,w,v,x)=>{const k=await mT(d.filePath),y=k.sampleRate,N=k.numberOfChannels,R=Math.floor(w*y),D=R,G=k.length-R,U=new(window.AudioContext||window.webkitAudioContext),he=U.createBuffer(N,D,y);for(let Qe=0;Qe<N;Qe++){const fn=k.getChannelData(Qe),jn=he.getChannelData(Qe);for(let Kt=0;Kt<D;Kt++)jn[Kt]=fn[Kt]}const F=U.createBuffer(N,G,y);for(let Qe=0;Qe<N;Qe++){const fn=k.getChannelData(Qe),jn=F.getChannelData(Qe);for(let Kt=0;Kt<G;Kt++)jn[Kt]=fn[R+Kt]}const B=await fp(he),I=await fp(F),M=Date.now(),q=`${d.id}_split1_${M}`,ee=`${d.id}_split2_${M}`,Q=URL.createObjectURL(B),Z=URL.createObjectURL(I);let Ce=Q,me=Z;if(u)try{Ce=(await Dr.saveAudioFile(u,q,B)).relativePath,me=(await Dr.saveAudioFile(u,ee,I)).relativePath}catch(Qe){console.warn("Failed to save split audio to storage, using blob URLs:",Qe)}const De={id:q,name:`${d.name} (Part 1)`,type:d.type,duration:v,filePath:Ce,text:d.text||"",previewUrl:Q},qe={id:ee,name:`${d.name} (Part 2)`,type:d.type,duration:x,filePath:me,text:d.text||"",previewUrl:Z};return U.close(),{firstPartMediaItem:De,secondPartMediaItem:qe}},mT=async d=>{let w;try{if(d.startsWith("blob:"))w=await(await fetch(d)).arrayBuffer();else{const x=await Dr.loadAudioFile(d);w=await(await fetch(x)).arrayBuffer()}if(!(w instanceof ArrayBuffer))throw new Error(`Invalid audio data type: ${typeof w}, expected ArrayBuffer`);if(w.byteLength===0)throw new Error("Audio data is empty");const v=new(window.AudioContext||window.webkitAudioContext);try{const x=await v.decodeAudioData(w.slice());return v.close(),x}catch(x){throw v.close(),console.error("Failed to decode audio data:",x),new Error(`Failed to decode audio: ${x}`)}}catch(v){throw console.error("Failed to load audio buffer:",v),new Error(`Failed to load audio buffer: ${v}`)}},fp=async d=>{const w=d.length,v=d.sampleRate,x=d.numberOfChannels,k=new ArrayBuffer(44+w*x*2),y=new DataView(k),N=(D,G)=>{for(let U=0;U<G.length;U++)y.setUint8(D+U,G.charCodeAt(U))};N(0,"RIFF"),y.setUint32(4,36+w*x*2,!0),N(8,"WAVE"),N(12,"fmt "),y.setUint32(16,16,!0),y.setUint16(20,1,!0),y.setUint16(22,x,!0),y.setUint32(24,v,!0),y.setUint32(28,v*x*2,!0),y.setUint16(32,x*2,!0),y.setUint16(34,16,!0),N(36,"data"),y.setUint32(40,w*x*2,!0);let R=44;for(let D=0;D<w;D++)for(let G=0;G<x;G++){const U=d.getChannelData(G)[D],he=Math.max(-1,Math.min(1,U))*32767;y.setInt16(R,he,!0),R+=2}return new Blob([k],{type:"audio/wav"})},hp=async d=>{for(const w of d)if(w.type==="voiceover"||w.type==="audio")try{const v=w.previewUrl||w.filePath;if(!v){console.warn(` No audio URL for split file: ${w.id}`);continue}const x=new Audio(v);await new Promise((k,y)=>{const N=setTimeout(()=>{console.error(` Audio load timeout for split file: ${w.id}`),y(new Error("Audio load timeout"))},1e4);x.onloadeddata=()=>{clearTimeout(N),k()},x.onerror=R=>{clearTimeout(N),console.error(` Failed to load split audio: ${w.id} (${w.name})`,{error:R,audioUrl:v.substring(0,100),readyState:x.readyState,networkState:x.networkState}),y(R)},x.load()}),ne.current.set(w.id,x)}catch(v){console.error(` Failed to preload audio for ${w.id} (${w.name}):`,v)}},pT=async()=>{if(!ce){console.warn(" Split failed: No timeline item selected for splitting");return}const d=ce.startTime,w=ce.startTime+ce.duration;if(we<=d||we>=w){console.warn(` Split failed: Current time (${we.toFixed(2)}s) is not within the selected item's duration (${d.toFixed(2)}s - ${w.toFixed(2)}s)`);return}const v=pe.find(N=>N.id===ce.mediaId);if(!v){console.error(" Split failed: Original media item not found");return}const x=we-d,k=x,y=w-we;try{if(v.type==="voiceover"||v.type==="audio"){const{firstPartMediaItem:N,secondPartMediaItem:R}=await hT(v,x,k,y),D={...ce,id:`${ce.id}_part1_${Date.now()}`,mediaId:N.id,duration:k,geometry:ce.geometry?{...ce.geometry}:void 0},G={...ce,id:`${ce.id}_part2_${Date.now()}`,mediaId:R.id,startTime:we,duration:y,geometry:ce.geometry?{...ce.geometry}:void 0};Te(F=>[...F.filter(M=>M.id!==v.id),N,R]);const U=ne.current.get(v.id);U&&(U.pause(),U.src="",ne.current.delete(v.id)),v.previewUrl&&v.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(v.previewUrl),v.filePath&&v.filePath.startsWith("blob:")&&URL.revokeObjectURL(v.filePath);const he=xe.map(F=>({...F,items:F.items.map(B=>B.id===ce.id?[D,G]:B).flat()}));Ve(he),Ci(he),gr(D),await hp([N,R])}else{const N={...ce,id:`${ce.id}_part1_${Date.now()}`,duration:k,geometry:ce.geometry?{...ce.geometry}:void 0},R={...ce,id:`${ce.id}_part2_${Date.now()}`,startTime:we,duration:y,geometry:ce.geometry?{...ce.geometry}:void 0},D=xe.map(G=>({...G,items:G.items.map(U=>U.id===ce.id?[N,R]:U).flat()}));Ve(D),Ci(D),gr(N)}}catch(N){console.error(" Split failed:",N),Be(`Failed to split item: ${N instanceof Error?N.message:"Unknown error"}`)}},mp=(d,w)=>{const v=w.getBoundingClientRect(),x=d.clientX-v.left,k=v.width;return x/k*ge},pp=(d,w,v)=>{const x=xe.find(y=>y.id===d);if(!x)return!1;const k=w+v;return x.items.some(y=>{const N=y.startTime+y.duration;return w<N&&k>y.startTime})},gT=(d,w)=>{if(!Fe)return;d.preventDefault();const v=d.currentTarget,x=mp(d,v);let k;Fe.type==="image"?k=bu:Fe.type==="audio"||Fe.type==="voiceover"?k=Fe.duration&&Fe.duration>0?Fe.duration:5:Fe.type==="video"?k=Fe.duration||5:k=5,pp(w,x,k)?(d.dataTransfer.dropEffect="none",Ls(null)):(d.dataTransfer.dropEffect="copy",Ls({layerId:w,time:x}))},yT=d=>{const w=d.relatedTarget;(!w||!d.currentTarget.contains(w))&&Ls(null)},vT=(d,w)=>{if(d.preventDefault(),!Fe)return;const v=mp(d,d.currentTarget);let x;if(Fe.type==="image"?x=bu:Fe.type==="audio"||Fe.type==="voiceover"?x=Fe.duration&&Fe.duration>0?Fe.duration:5:Fe.type==="video"?x=Fe.duration||5:x=5,pp(w,v,x)){Ds(null),Ls(null);return}const k=x,y={id:`timeline_${Fe.id}_${Date.now()}`,mediaId:Fe.id,startTime:v,duration:k,track:xe.findIndex(R=>R.id===w)+1,geometry:Fe.type==="image"||Fe.type==="video"?{x:0,y:0,width:1,height:1,rotation:0}:void 0},N=xe.map(R=>R.id===w?{...R,items:[...R.items,y]}:R);Ve(N),Ci(N),(Fe.type==="image"||Fe.type==="video")&&gr(y),Ds(null),Ls(null)},xT=d=>{const w=xe.find(v=>v.id===d);if(!(w&&w.type==="voiceover")){if(w&&w.type==="text"){const v=w.items.map(x=>x.mediaId);Te(x=>x.filter(k=>!v.includes(k.id))),nt(x=>x.filter(k=>!v.includes(k.mediaId)))}if(Ve(v=>v.filter(x=>x.id!==d)),Ar===d){const v=xe.filter(x=>x.id!==d);Si(v.length>0?v[0].id:"")}}},wT=d=>{Ve(w=>w.map(v=>v.id===d?{...v,visible:!v.visible}:v))},bT=d=>{Ve(w=>w.map(v=>v.id===d?{...v,locked:!v.locked}:v))},ST=(d,w)=>{const v=xe.find(x=>x.id===d);if(v&&v.type==="voiceover"){const x=w.replace(/^\s*/,"");Ve(k=>k.map(y=>y.id===d?{...y,name:x}:y));return}Ve(x=>x.map(k=>k.id===d?{...k,name:w}:k))};p.useEffect(()=>{(async()=>{try{if(Le(!0),Be(null),!(c!=null&&c.length)){Le(!1);return}if(Tt){if(ie.current){const N=ie.current.clientWidth,R=we/ge*N;Kr(R)}Le(!1);return}if(l&&!Ae){Le(!1);return}const w=c.filter(N=>!(!N||typeof N!="object"||!N.id||!N.filePath));if(w.length===0)throw new Error("No valid audio chunks found");const v=w.map(N=>({id:N.id,name:N.name||N.id,type:"voiceover",duration:N.duration,filePath:Tu(N.filePath),text:N.text}));let x=0;const k=v.map(N=>{const R={id:`timeline_${N.id}`,mediaId:N.id,startTime:x,duration:N.duration,track:1};return x+=N.duration,R});for(const N of v)if(N.filePath){const R=Tu(N.filePath);if(!await Dr.fileExists(R))throw new Error(`Audio file not found: ${R}`)}pe.length===0?(Te(v),nt(k)):je.filter(R=>k.some(D=>D.id===R.id)).length===0&&nt(R=>[...k,...R]);const y=v.reduce((N,R)=>N+R.duration,0);Ot(y),Ve(N=>{const R=N.find(D=>D.id==="voice-layer");return R&&R.items.length>0?N:N.map(D=>D.id==="voice-layer"?{...D,items:k,duration:y}:D)}),pr(!0),ze(!0),Le(!1),setTimeout(()=>{console.warn(" Starting delayed canvas re-initialization with retry logic...");const N=(R=0)=>{console.warn(` Canvas re-initialization attempt ${R+1}/5...`);try{ki(),ht(we);const U=tt.current;if(U&&U.width>0&&U.height>0){const he=U.getContext("2d");if(he){const F=he.getImageData(0,0,1,1);if(F&&F.data){console.log(" Canvas re-initialization successful on attempt",R+1),setTimeout(()=>{!xe.filter(M=>M.type==="text").some(M=>M.items.length>0)&&!Mt?(console.log(" AUTO-TRANSCRIPT: Starting automatic transcript generation..."),Ni()):console.log(" AUTO-TRANSCRIPT: Skipping - transcripts already exist or generation completed")},2e3);return}}}R<5-1?(console.log(` Canvas initialization attempt ${R+1} failed, retrying in 500ms...`),setTimeout(()=>{N(R+1)},500)):console.error(" Failed to initialize canvas after maximum retries (5 attempts)")}catch(U){console.error(` Canvas initialization attempt ${R+1} failed:`,U),R<5-1?setTimeout(()=>{N(R+1)},500):console.error(" Failed to initialize canvas after maximum retries due to errors")}};N()},3e3)}catch(w){Be(w instanceof Error?w.message:"Failed to initialize editor"),Le(!1)}})()},[c,Tt]),p.useEffect(()=>{const d=()=>{if(ie.current&&!Ge){const w=ie.current.clientWidth,v=we/ge*w;Kr(v)}};return d(),window.addEventListener("resize",d),document.addEventListener("visibilitychange",d),()=>{window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",d)}},[we,ge,Ge]),p.useEffect(()=>{const d=c.length;d!==Lt&&(Tt||(ze(!1),le(d)))},[c,Lt,Tt]),p.useEffect(()=>{var d,w,v,x;if(l&&!Ae&&!X){if(ue(!0),l.layers&&l.layers.length>0){const k=xe.some(y=>y.id!=="voice-layer"&&y.items.length>0);Ve(k?y=>{var G;const N=[...y];if(!N.some(U=>U.id==="voice-layer")&&l.layers){const U=l.layers.find(he=>he.id==="voice-layer");U&&N.push(U)}return(((G=l.layers)==null?void 0:G.filter(U=>U.type==="text"))||[]).forEach(U=>{var F;N.find(B=>B.type==="text"&&B.id===U.id)||(console.log(` PRESERVING TEXT LAYER: Adding saved text layer "${U.name}" with ${((F=U.items)==null?void 0:F.length)||0} items`),N.push(U))}),N}:l.layers),(d=l.editorSettings)!=null&&d.selectedLayerId&&Si(l.editorSettings.selectedLayerId)}if(l.audioChunks&&l.audioChunks.length>0){const k=l.audioChunks.map(D=>({id:D.id,name:D.name,type:"voiceover",duration:D.duration,filePath:D.blobUrl,text:D.text}));let y=0;const N=l.audioChunks.map(D=>{const G={id:`timeline_${D.id}`,mediaId:D.id,startTime:y,duration:D.duration,track:1};return y+=D.duration,G});if((async()=>{const D=l.audioChunks;if(!(!Array.isArray(D)||D.length===0))for(const G of D)try{let U=null;if(G.filePath&&!G.filePath.startsWith("blob:"))try{U=await Dr.loadAudioFile(G.filePath)}catch{U=null}else G.blobUrl&&G.blobUrl.startsWith("blob:")&&(U=G.blobUrl);if(U){const he=new Audio(U);try{await new Promise((F,B)=>{const I=setTimeout(()=>{B(new Error("Audio load timeout"))},5e3);he.onloadeddata=()=>{clearTimeout(I),F(!0)},he.onerror=M=>{clearTimeout(I),B(M)},he.load()}),ne.current.set(G.id,he)}catch(F){console.warn(`Failed to load audio element for chunk ${G.id}:`,F)}}}catch(U){console.warn(`Failed to restore audio for chunk ${G.id}:`,U)}})().then(()=>{st(!0),setTimeout(()=>{if(xe.filter(U=>U.type==="text").some(U=>U.items.length>0)){console.log(" AUTO-TRANSCRIPT: Transcripts already exist after restoration, marking as completed"),Nn(!0);return}console.log(" AUTO-TRANSCRIPT: Starting automatic transcript generation after restoration..."),Ni()},3e3)}).catch(()=>{st(!0),setTimeout(()=>{if(xe.filter(U=>U.type==="text").some(U=>U.items.length>0)){console.log(" AUTO-TRANSCRIPT: Transcripts already exist after restoration (with errors), marking as completed"),Nn(!0);return}console.log(" AUTO-TRANSCRIPT: Starting automatic transcript generation after restoration (with errors)..."),Ni()},3e3)}).finally(()=>{ue(!1)}),pe.length===0?(Te(k),nt(N)):je.filter(G=>N.some(U=>U.id===G.id)).length===0&&nt(G=>[...N,...G]),Ot(((w=l.timeline)==null?void 0:w.totalDuration)||0),Ut(((v=l.timeline)==null?void 0:v.currentTime)||0),(x=l.editorSettings)!=null&&x.volumeSettings){const{voiceover:D=80,footage:G=60,soundtrack:U=40}=l.editorSettings.volumeSettings;oe(D),Je(G),Yn(U)}return}else st(!0),ue(!1)}else Ae||(st(!0),ue(!1))},[o,i,l,c,Ae,X,at,Lt]),p.useEffect(()=>{if((c==null?void 0:c.length)>0&&u&&!Mt&&Tt&&!Me){if(xe.filter(x=>x.type==="text").some(x=>x.items.length>0)){console.log(" AUTO-TRANSCRIPT: Transcripts already exist, marking as completed"),Nn(!0);return}const v=setTimeout(()=>{console.log(" AUTO-TRANSCRIPT: Triggering automatic transcript generation from useEffect..."),Ni()},5e3);return()=>clearTimeout(v)}},[c,u,Mt,Tt,Me,Ni,xe]),p.useEffect(()=>{(c==null?void 0:c.length)>0&&(wi(!1),c.length>Lt&&(Nn(!1),le(c.length)))},[c,Mt,Lt]),p.useEffect(()=>{u&&!z&&!O&&Rs&&pe.filter(w=>w.type==="image").length===0&&up(!0)},[u,pe,z,O,Rs,up]);const TT=()=>{switch(s){case"square":return"aspect-square";case"vertical":return"aspect-[9/16]";case"landscape":default:return"aspect-video"}},_o=()=>{if(!h)return;const d={storyContent:o,audioChunks:c,totalAudioDuration:(c==null?void 0:c.reduce((y,N)=>y+(N.duration||0),0))||0,voiceoverSettings:{selectedVoiceId:i,volume:rt},savedAt:new Date().toISOString()},w=pe.filter(y=>(y.source==="pexels"||y.source==="openai-dalle")&&(y.type==="video"||y.type==="image")),v=je.filter(y=>w.some(N=>N.id===y.mediaId)),x={items:w.map(y=>{const N=v.find(R=>R.mediaId===y.id);return y.source==="openai-dalle"?{id:y.id,name:y.name,type:"image",description:y.description||y.name,url:y.url||"",fileName:y.fileName||`${y.id}.jpg`,duration:y.duration||0,width:y.width||0,height:y.height||0,segmentId:y.segmentId,startTime:(N==null?void 0:N.startTime)||0,endTime:((N==null?void 0:N.startTime)||0)+((N==null?void 0:N.duration)||y.duration||0),searchQuery:y.searchQuery,prompt:y.openaiPrompt||"",source:"openai-dalle",allocation:y.allocation||"sequential",priority:y.priority||"medium",strategicIndex:y.strategicIndex,localFilePath:y.filePath,downloadedAt:new Date().toISOString()}:{id:y.id,name:y.name,type:"image",description:y.name,url:y.url||"",fileName:`${y.id}.jpg`,duration:y.duration||0,width:y.width||0,height:y.height||0,segmentId:void 0,startTime:(N==null?void 0:N.startTime)||0,endTime:((N==null?void 0:N.startTime)||0)+((N==null?void 0:N.duration)||y.duration||0),searchQuery:y.searchQuery,prompt:`Stock media: ${y.name}`,source:"pexels-legacy",allocation:"sequential",priority:"medium",strategicIndex:void 0,downloadedAt:new Date().toISOString()}}),savedAt:new Date().toISOString()},k={transcriptInfo:d,stockMediaInfo:x,voice:i?{id:i,name:"Selected Voice",isSelected:!0}:null,mediaLibrary:pe.map(y=>{const N={id:y.id,name:y.name,type:y.type,duration:y.duration,filePath:y.filePath,text:y.text||"",thumbnailUrl:y.thumbnailUrl&&y.thumbnailUrl.startsWith("data:")?y.thumbnailUrl:"",previewUrl:""};return y.type==="text"&&(N.fontFamily=y.fontFamily||"Arial",N.fontSize=y.fontSize||48,N.fontBold=y.fontBold||!1,N.fontItalic=y.fontItalic||!1,N.fontColor=y.fontColor||"#ffffff",N.backgroundColor=y.backgroundColor||"rgba(0, 0, 0, 0.7)",N.backgroundTransparent=y.backgroundTransparent??!1,y.x!==void 0&&(N.x=y.x),y.y!==void 0&&(N.y=y.y),y.width!==void 0&&(N.width=y.width),y.height!==void 0&&(N.height=y.height),console.log(` SAVE TEXT: Saving text item "${y.name}" with font ${y.fontFamily}, size ${y.fontSize}`)),N}),audioChunks:pe.filter(y=>y.type==="voiceover").map(y=>{const N=je.find(R=>R.mediaId===y.id);return{id:y.id,name:y.name,text:y.text||"",duration:y.duration||0,startTime:(N==null?void 0:N.startTime)||0,blobUrl:y.filePath,isGenerated:!0,filePath:y.filePath}}),layers:xe.map(y=>({id:y.id,name:y.name,visible:y.visible,locked:y.locked,type:y.type,items:y.items,duration:y.duration})),timeline:{totalDuration:ge,currentTime:we,tracks:xe.map(y=>({id:y.id,name:y.name,type:y.type||"main",items:y.items.map(N=>({...N,track:N.track}))}))},editorSettings:{selectedLayerId:Ar,volumeSettings:{voiceover:rt,footage:Ee,soundtrack:ft},videoStyle:s}};h(k),g&&d&&g(d),E&&x&&E(x)};p.useEffect(()=>{pe.some(w=>w.type==="text"||w.source==="transcript")||Jt(!1)},[l,pe]);const CT=async()=>{var w,v,x,k,y,N,R,D;if(!l)return;const d=l.transcriptInfo;if(((v=(w=m==null?void 0:m.sentenceTranscripts)==null?void 0:w.sentences)==null?void 0:v.length)>0)try{const G=tt.current,U=(G==null?void 0:G.width)||1920,he=(G==null?void 0:G.height)||1080,F=m.sentenceTranscripts.sentences.map(M=>({id:M.id,name:`Text: ${M.text.substring(0,30)}${M.text.length>30?"...":""}`,type:"text",duration:M.duration,filePath:"",text:M.text,fontFamily:"Arial",fontSize:Math.min(U,he)*.04,fontBold:!1,fontItalic:!1,fontColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.7)",backgroundTransparent:!1})),B=m.sentenceTranscripts.sentences.map(M=>{const q={x:U*.1,y:he*.8,width:U*.8,height:he*.1};return{id:`timeline_${M.id}`,mediaId:M.id,startTime:M.startTime,duration:M.duration,track:1,geometry:q}});Te(M=>{const q=M.filter(Q=>Q.type==="text").map(Q=>Q.id),ee=F.filter(Q=>!q.includes(Q.id));return ee.length>0?[...M,...ee]:M}),Ve(M=>{const q=M.findIndex(ee=>ee.type==="text");if(q!==-1){const ee=[...M],Q=ee[q].items.map(Ce=>Ce.id),Z=B.filter(Ce=>!Q.includes(Ce.id));return Z.length>0&&(ee[q]={...ee[q],items:[...ee[q].items,...Z]}),ee}else{const ee={id:`restored_text_layer_${Date.now()}`,name:"Text",type:"text",visible:!0,locked:!1,items:B};return[...M,ee]}}),nt(M=>{const q=M.map(Q=>Q.id),ee=B.filter(Q=>!q.includes(Q.id));return ee.length>0?[...M,...ee]:M});const I=Math.max(...m.sentenceTranscripts.sentences.map(M=>M.endTime));I>ge&&Ot(I)}catch{}if(l.stockMediaInfo){const G=l.stockMediaInfo;if(G.items&&G.items.length>0){const U=[],he=[];for(const F of G.items)try{console.log(` Restoring stock media item: ${F.id} (${F.source})`);let B="",I="",M="";if(F.source==="openai-dalle"){const Q=F.localFilePath||F.filePath;if(Q&&!Q.startsWith("http")){B=Q;try{const Z=await br.loadImageAsBase64(Q);I=Z,M=Z,console.log(` OpenAI image: Loaded from Electron AppData - ${Q}`)}catch(Z){if(console.warn(` Failed to load OpenAI image from Electron AppData ${F.id}:`,Z),F.url)try{const Ce=await Yr(F.url);I=Ce,M=Ce}catch(Ce){console.warn(` Failed to convert OpenAI image URL to base64 ${F.id}:`,Ce),B=F.url,I=F.url,M=F.url}}}else if(Q&&Q.startsWith("http")&&Q.includes("localhost:5555/api/media/openai-image"))try{const Z=await Yr(Q);B=Q,I=Z,M=Z,console.log(` OpenAI image: Converted old backend URL to base64 - ${Z.substring(0,50)}...`)}catch(Z){console.warn(` Failed to convert old backend URL to base64 ${F.id}:`,Z),B=Q,I=Q,M=Q}else try{const Z=await Yr(F.url);B=F.url,I=Z,M=Z,console.log(` OpenAI image: Converted URL to base64 - ${Z.substring(0,50)}...`)}catch(Z){console.warn(` Failed to convert OpenAI image to base64 ${F.id}:`,Z),B=F.url,I=F.url,M=F.url}}else try{const Q=F.localFilePath||F.url;if(Q.startsWith("http"))try{const Z=await Yr(Q);B=Q,I=Z,M=Z}catch(Z){console.warn(` Failed to convert legacy URL to base64 ${F.id}:`,Z),B=Q,I=Q,M=Q}else{const Z=await br.loadImageAsBase64(Q);B=Q,I=Z,M=Z}console.log(` Legacy image: Loaded from filesystem - ${Q}`)}catch(Q){console.warn(` Failed to load legacy image ${F.id}:`,Q),B=F.url,I=F.url,M=F.url}const q={id:F.id,name:F.name,type:F.type,source:F.source||"unknown",filePath:B,previewUrl:I,thumbnailUrl:M,duration:F.duration||0,width:F.width||0,height:F.height||0,volume:60,pexelsId:F.pexelsId?Number(F.pexelsId):void 0,photographer:F.photographer,searchQuery:F.searchQuery},ee={id:`timeline-stock-${F.id}`,startTime:F.startTime,duration:F.duration||0,mediaId:F.id,track:0};U.push(q),he.push(ee)}catch{continue}if(U.length>0){Te(I=>{const M=I.map(ee=>ee.id),q=U.filter(ee=>!M.includes(ee.id));return q.length>0?[...I,...q]:I});const F="stocks-layer";Ve(I=>{const M=[...I],q=M.findIndex(ee=>ee.id===F);if(q>=0){const ee=M[q].items.map(Z=>Z.id),Q=he.filter(Z=>!ee.includes(Z.id));Q.length>0&&(M[q]={...M[q],items:[...M[q].items,...Q],duration:Math.max(M[q].duration??0,Math.max(...G.items.map(Z=>Z.endTime)))})}else{const ee={id:F,name:"Stock Media",visible:!0,locked:!1,items:he,type:"footage",duration:Math.max(...G.items.map(Q=>Q.endTime))};M.unshift(ee)}return M}),nt(I=>{const M=I.map(ee=>ee.id),q=he.filter(ee=>!M.includes(ee.id));return q.length>0?[...I,...q]:I});for(const I of U)try{await Xr(I)}catch{}const B=Math.max(...G.items.map(I=>I.endTime));B>ge&&Ot(B),setTimeout(()=>{ht(we),Ut(we+.001),setTimeout(()=>{Ut(we)},100)},1e3)}}}try{if(Le(!0),(x=l.mediaLibrary)!=null&&x.length){const F=(await Promise.all(l.mediaLibrary.map(async I=>{let M=I.filePath,q=I.thumbnailUrl,ee=I.previewUrl;if(!M.startsWith("blob:")&&(I.type==="image"||I.type==="video"))try{const{mediaStorageService:Z}=await Wt(()=>Promise.resolve().then(()=>j0),void 0,import.meta.url),Ce=await Z.loadMediaFile(M);if(ee=Ce,!q||q.startsWith("blob:"))if(I.type==="video")try{q=await ep(Ce)}catch(me){console.warn(` Failed to generate video thumbnail for ${I.id}:`,me),q=""}else try{q=await Cu(M)}catch(me){console.warn(` Base64 failed for stock image ${I.id}, using blob URL:`,me),q=Ce}}catch(Z){console.warn(`Failed to create blob URL for media item ${I.id}:`,Z),ee=M,(!q||q.startsWith("blob:"))&&(q=M)}else if(M.startsWith("blob:"))if(console.warn(`Found old blob URL for ${I.id}, attempting to regenerate...`),I.filePath&&!I.filePath.startsWith("blob:"))try{const{mediaStorageService:Z}=await Wt(()=>Promise.resolve().then(()=>j0),void 0,import.meta.url),Ce=await Z.loadMediaFile(I.filePath);if(ee=Ce,!q||q.startsWith("blob:"))if(I.type==="video")try{q=await ep(Ce)}catch(me){console.warn(` Failed to regenerate video thumbnail for ${I.id}:`,me),q=""}else q=Ce}catch(Z){console.warn(`Failed to regenerate blob URL for ${I.id}:`,Z),ee=M,q=q||M}else ee=M,q=q||M;const Q={...I,filePath:M,thumbnailUrl:q,previewUrl:ee};return I.type==="text"&&console.log(` RESTORE TEXT: Loading text item "${I.name}"`,{text:I.text,fontFamily:I.fontFamily,fontSize:I.fontSize,fontColor:I.fontColor,backgroundColor:I.backgroundColor,geometry:{x:I.x,y:I.y,width:I.width,height:I.height}}),Q}))).filter(I=>I!==null),B=F.filter(I=>I.type==="text");B.length>0&&console.log(` RESTORE FROM DB: Loading ${B.length} text items from database:`,B.map(I=>{var M;return{id:I.id,name:I.name,text:((M=I.text)==null?void 0:M.substring(0,50))+(I.text&&I.text.length>50?"...":""),fontFamily:I.fontFamily,fontSize:I.fontSize}})),Te(I=>{if(I.length===0)return console.log(` RESTORE MEDIA: Setting ${F.length} restored media items (fresh restore)`),F;{const M=I.map(ee=>ee.id),q=F.filter(ee=>!M.includes(ee.id));return q.length>0?(console.log(` PRESERVE MEDIA: Adding ${q.length} missing media items to existing ${I.length} items`),[...I,...q]):(console.log(` PRESERVE MEDIA: All ${F.length} media items already exist, preserving lifted state`),I)}}),console.log(" LOADING: Loading media elements for restored media library items...");for(const I of F){if(I.type==="text"){console.log(` SKIP LOAD: Text item ${I.id} doesn't need loading (rendered directly)`);continue}try{await Xr(I),console.log(` LOADED: Successfully loaded media element for ${I.id} (${I.type})`)}catch(M){console.error(` LOAD FAIL: Failed to load media element for ${I.id}:`,M)}}}if((k=l.layers)!=null&&k.length){console.log(` RESTORE: Found ${l.layers.length} layers to restore`),console.log(" RESTORE: Layers:",l.layers.map(F=>{var B,I;return{id:F.id,name:F.name,type:F.type,itemsCount:((B=F.items)==null?void 0:B.length)||0,items:((I=F.items)==null?void 0:I.map(M=>({id:M.id,mediaId:M.mediaId,startTime:M.startTime,duration:M.duration})))||[]}})),Ve(F=>{if(F.length<=1)return console.log(` RESTORE LAYERS: Setting ${l.layers.length} restored layers (fresh restore)`),l.layers;{console.log(` PRESERVE LAYERS: Merging ${l.layers.length} restored layers with ${F.length} existing layers`);const B=[...F];return l.layers.forEach(I=>{const M=B.findIndex(q=>q.id===I.id);M>=0?B[M]=I:B.push(I)}),B}});const he=[];if(l.layers.forEach(F=>{F.items&&he.push(...F.items)}),nt(F=>{if(F.length===0)return console.log(` RESTORE TIMELINE: Setting ${he.length} restored timeline items (fresh restore)`),he;{const B=F.map(M=>M.id),I=he.filter(M=>!B.includes(M.id));return I.length>0?(console.log(` PRESERVE TIMELINE: Adding ${I.length} restored timeline items to existing ${F.length} items`),[...F,...I]):(console.log(` PRESERVE TIMELINE: All ${he.length} timeline items already exist, preserving lifted state`),F)}}),d){console.log(" RESTORE: Found stored transcript info, attempting restoration...");const F=d;if(F.audioChunks&&F.audioChunks.length>0){const B=F.audioChunks.map(ee=>ee.id);if(pe.filter(ee=>ee.source==="transcript"&&B.includes(ee.id)).length===F.audioChunks.length&&ot){console.log(" RESTORE: Transcript items already exist and transcriptRestored is true, skipping restoration");return}const M=F.audioChunks.map((ee,Q)=>{var Z;return{id:ee.id,name:ee.name||`Audio Part ${Q+1}`,type:"voiceover",source:"transcript",filePath:ee.filePath,previewUrl:ee.filePath,thumbnailUrl:"",duration:ee.duration,width:0,height:0,volume:((Z=F.voiceoverSettings)==null?void 0:Z.volume)||80,text:ee.text,startTime:ee.startTime}}),q=F.audioChunks.map(ee=>({id:`timeline-voice-${ee.id}`,startTime:ee.startTime,duration:ee.duration,mediaId:ee.id,track:0}));Te(ee=>{const Q=new Set(ee.map(me=>me.id)),Z=M.filter(me=>!Q.has(me.id));return Z.length===0?ee:[...ee,...Z]}),Ve(ee=>{const Q=[...ee],Z=Q.findIndex(Ce=>Ce.type==="voiceover");if(Z>=0){const Ce=new Set(Q[Z].items.map(De=>De.id)),me=q.filter(De=>!Ce.has(De.id));if(me.length===0)return Q;Q[Z]={...Q[Z],items:[...Q[Z].items,...me],duration:Math.max(Q[Z].duration??0,F.totalAudioDuration??0)}}else{const Ce={id:"voice-layer",name:"Voice Over",visible:!0,locked:!1,items:q,type:"voiceover",duration:F.totalAudioDuration||0};Q.push(Ce)}return Q}),Ve(ee=>{const Q=ee.flatMap(Ce=>Ce.items.map(me=>({...me,track:ee.indexOf(Ce)}))),Z=ee.find(Ce=>Ce.type==="voiceover");return nt(Q),ee});for(const ee of M)try{await Xr(ee)}catch(Q){console.error(" Failed to load voice audio element",ee.id,Q)}F.totalAudioDuration&&F.totalAudioDuration>ge&&Ot(F.totalAudioDuration),setTimeout(()=>{ht(we),Ut(we+.001),setTimeout(()=>{Ut(we)},100)},500),Jt(!0)}}}const G=l.editorSettings;G&&(oe(((y=G.volumeSettings)==null?void 0:y.voiceover)??80),Je(((N=G.volumeSettings)==null?void 0:N.footage)??60),Yn(((R=G.volumeSettings)==null?void 0:R.soundtrack)??40),G.selectedLayerId&&Si(G.selectedLayerId));const U=l.timeline;U&&(Ot(U.totalDuration??0),Ut(U.currentTime??0)),(D=l.audioChunks)!=null&&D.length,console.log(" FINAL RENDER: Triggering final render after restoration..."),setTimeout(()=>{Ct.current?(ht(we,0),console.log(" FINAL RENDER: Final render completed")):console.warn(" FINAL RENDER: Canvas not initialized, skipping final render")},500),console.log(" RESTORE: Video assets restoration completed successfully"),Le(!1),$e(!1)}catch(G){console.error(" RESTORE: Error restoring video assets:",G),Be("Failed to restore video assets"),Le(!1),$e(!1)}};p.useEffect(()=>{l&&!Ae&&!X&&!se&&(console.log(" RESTORE: Starting video assets restoration..."),$e(!0),CT())},[l,Ae,X,se]),p.useEffect(()=>{(pe.length>0||je.length>0||xe.length>0)&&_o()},[pe,je,xe,Ar,rt,Ee,ft,ge,s]),p.useEffect(()=>{if(we>0&&!Ge){const d=setTimeout(()=>{_o()},1e3);return()=>clearTimeout(d)}},[we,Ge]),p.useEffect(()=>{const d=[];xe.forEach(x=>{x.items&&d.push(...x.items)});const w=JSON.stringify(je),v=JSON.stringify(d);w!==v&&nt(d)},[xe]),p.useEffect(()=>{Ct.current&&(ht(we),xu("default"))},[ce,xe]),p.useEffect(()=>{if(Ct.current){const d=setTimeout(()=>{ht(we)},50);return()=>clearTimeout(d)}},[we]),p.useEffect(()=>{const d=setInterval(()=>{Ct.current&&!tp()&&(console.warn(" Periodic health check: Canvas is unhealthy, attempting recovery..."),Ct.current=!1,setTimeout(()=>{ki(),ht(we)},100))},5e3);return()=>clearInterval(d)},[we]),p.useEffect(()=>{if(ie.current&&ge>0){const d=ie.current.clientWidth,w=we/ge*d;Kr(w)}},[we,ge]);const kT=()=>{if(!Dt.current||!ie.current||!Ge)return;const d=Dt.current,w=ie.current,v=d.clientWidth,x=w.clientWidth,k=we/ge*x,y=d.scrollLeft,N=k,R=y+v*.2,D=y+v*.8;if(N<R||N>D){const G=N-v*.5;setTimeout(()=>{d.scrollTo({left:Math.max(0,G),behavior:"smooth"})},100)}};p.useEffect(()=>{const d=w=>{if(ce)switch(w.key){case"Delete":case"Backspace":w.preventDefault(),HT(ce.id),gr(null);break;case"Escape":w.preventDefault(),gr(null);break}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[ce]);const Pu=async()=>{Xn(!0);const d=[],w=[];for(const v of xe)if(v.visible){for(const x of v.items)if(we>=x.startTime&&we<x.startTime+x.duration){const y=pe.find(N=>N.id===x.mediaId);if(!y){console.warn(` Media item not found for mediaId: ${x.mediaId}`);continue}if(y.type==="video"){const N=await Xr(y);if(N){const R=y.volume||100,D=Ee;N.volume=y.muted?0:R*D/1e4;const G=we-x.startTime;N.currentTime=G,await N.play(),w.push(N)}}else if(y.type==="voiceover"||y.type==="audio")try{const N=await ku(y.id);if(N){const R=y.volume||100;let D=100;y.type==="voiceover"?D=rt:y.type==="audio"&&(D=ft),N.volume=y.muted?0:R*D/1e4;const G=we-x.startTime;N.currentTime=G,await N.play(),d.push(N),y.type==="voiceover"&&(N.onended=()=>{const U=x.startTime+x.duration,he=np(x),F=.2;if(he&&Math.abs(he.startTime-U)<=F){rp(he);return}if(Ut(U),J.current=U,ie.current&&ge>0){const B=ie.current.clientWidth,I=U/ge*B;Kr(I)}Ei()})}else console.warn(` Failed to load audio element for: ${y.id}`)}catch(N){console.error(` Error loading audio for ${y.id}:`,N)}}}Hr(d),As(w),ae.current=performance.now(),_.current=requestAnimationFrame(()=>Eu(Ge))},ET=async d=>{if(!Oe.current)return;const w=Oe.current.getBoundingClientRect(),v=96,x=w.width-v,k=d.clientX-w.left-v;if(k<0)return;const N=Math.max(0,Math.min(k/x,1))*ge,R=Math.max(0,Math.min(N,ge));return Ut(R),R};p.useEffect(()=>()=>{mr.forEach(d=>{var v;const w=d.cloneNode();(v=d.parentNode)==null||v.replaceChild(w,d),w.pause()})},[]),ar.useEffect(()=>{const d=async v=>{if(L&&Oe.current){const x=Ge;x&&Ei(),await ET(v),x&&await Pu()}},w=()=>{H(!1)};return L&&(document.addEventListener("mousemove",d),document.addEventListener("mouseup",w)),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",w)}},[L,Ge]),p.useEffect(()=>(Ge||be.current&&(clearInterval(be.current),be.current=null),()=>{be.current&&(clearInterval(be.current),be.current=null)}),[Ge]),p.useEffect(()=>{const d=w=>{w.key==="Escape"&&dn&&(vu(null),hu(null),f.current&&(cancelAnimationFrame(f.current),f.current=null))};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[dn]),p.useEffect(()=>()=>{_.current&&(cancelAnimationFrame(_.current),_.current=null),be.current&&(clearInterval(be.current),be.current=null),f.current&&(cancelAnimationFrame(f.current),f.current=null)},[]);const gp=()=>ie.current?ie.current.clientWidth/ge*Qn:800/ge*Qn,qr=p.useRef(null),Pi=p.useRef(Qn),ji=p.useRef(ge),yp=p.useRef(0);p.useEffect(()=>{ie.current&&ie.current.clientWidth!==yp.current&&(yp.current=ie.current.clientWidth,qr.current=null)},[(Tp=ie.current)==null?void 0:Tp.clientWidth]);const vp=()=>{if(qr.current===null||Pi.current!==Qn||ji.current!==ge){const d=gp(),w=50,v=100,x=v/d,k=[.01,.02,.05,.1,.2,.25,.5,1,2,5,10,15,30,60,120,300,600],y=w/d;for(const N of k){const R=N*d;if(R>=w&&R<=v)return qr.current=N,Pi.current=Qn,ji.current=ge,N}if(x>=y){const N=Math.max(y,Math.min(x,1));return qr.current=N,Pi.current=Qn,ji.current=ge,N}return qr.current=k[0],Pi.current=Qn,ji.current=ge,k[0]}return qr.current},NT=()=>ge*Qn*100,PT=d=>{const w=vp();if(w<1)return w<=.01?`${d.toFixed(3)}s`:w<=.02?`${d.toFixed(2)}s`:w<=.05?`${d.toFixed(2)}s`:w<=.1?`${d.toFixed(1)}s`:w<=.2?`${d.toFixed(1)}s`:w<=.25?`${d.toFixed(1)}s`:`${d.toFixed(1)}s`;if(d<60)return`${Math.floor(d)}s`;{const v=Math.floor(d/60),x=Math.floor(d%60);return x===0?`${v}m`:`${v}m${x}s`}},jT=async d=>{if(console.log(" Time ruler clicked!"),console.log(` Current playback state: isPlaying=${Ge}`),!ie.current)return;const w=qr.current,v=Pi.current,x=ji.current,k=ie.current.getBoundingClientRect(),y=d.clientX-k.left+ll,N=ie.current.clientWidth,R=y/N,D=ge*R,G=D/ge*ie.current.clientWidth-ll;Kr(G),ae.current=performance.now(),J.current=D,Ut(D),console.log(` Time ruler: About to call seekAllMediaToTime with time: ${D.toFixed(2)}s`),KT(D),console.log(" Time ruler: seekAllMediaToTime completed"),ht(D),setTimeout(()=>{qr.current=w,Pi.current=v,ji.current=x},0)},xp=d=>{if(!ie.current||!Ge)return;Ie.current||(Ie.current=d);const w=d-Ie.current;Ie.current=d;const x=gp()*w/1e3;Kr(k=>k+x),Ge&&(He.current=requestAnimationFrame(xp))};if(p.useEffect(()=>(Ge?(Ie.current=0,He.current=requestAnimationFrame(xp)):He.current&&cancelAnimationFrame(He.current),()=>{He.current&&cancelAnimationFrame(He.current)}),[Ge]),p.useEffect(()=>{if(ie.current&&!Ge){const d=ie.current.clientWidth,w=we/ge*d-ll;Kr(w)}},[we,ge,Ge,ll]),p.useEffect(()=>{V.current.forEach(d=>{let w=null;for(const[v,x]of wn.current.entries())if(x===d){w=v;break}if(w){const v=pe.find(x=>x.id===w);if(v){const x=v.volume||100,k=Ee;d.volume=v.muted?0:x*k/1e4}}})},[Ee,Lo,pe]),p.useEffect(()=>{wn.current.forEach((d,w)=>{const v=pe.find(x=>x.id===w);if(v){const x=v.volume||100,k=Ee;d.volume=v.muted?0:x*k/1e4}})},[Ee,pe]),p.useEffect(()=>{qn.current.forEach(d=>{let w=null;for(const[v,x]of ne.current.entries())if(x===d){w=v;break}if(w){const v=pe.find(x=>x.id===w);if(v){const x=v.volume||100;let k=100;v.type==="voiceover"?k=rt:v.type==="audio"&&(k=ft),d.volume=v.muted?0:x*k/1e4}}})},[rt,ft,mr,pe]),p.useEffect(()=>{ne.current.forEach((d,w)=>{const v=pe.find(x=>x.id===w);if(v){const x=v.volume||100;let k=100;v.type==="voiceover"?k=rt:v.type==="audio"&&(k=ft),d.volume=v.muted?0:x*k/1e4}})},[rt,ft,pe]),X)return a.jsx("div",{className:`bg-gray-50 flex flex-col items-center justify-center ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Video Editor"}),a.jsx("p",{className:"text-gray-600",children:"Restoring audio assets..."})]})});const AT=async()=>{if(Ge)Ei();else try{await Pu(),Eu(!0)}catch{Be("Failed to start playback"),Xn(!1)}},dl=d=>{const w=Math.floor(d/60),v=Math.floor(d%60);return`${w}:${v.toString().padStart(2,"0")}`},RT=()=>IS?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin text-blue-500 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generating Transcript"})]}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("p",{className:"text-gray-600 mb-2",children:"AI is processing your audio file..."}),a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:DS})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"This may take a few moments depending on audio length"})]})}):null;if(Me)return a.jsx("div",{className:`flex items-center justify-center h-full ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading video editor..."})]})});if(Ye)return a.jsx("div",{className:`flex items-center justify-center h-full ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:""}),a.jsx("p",{className:"text-gray-900 font-medium mb-2",children:"Failed to load video editor"}),a.jsx("p",{className:"text-gray-600",children:Ye}),t&&a.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-900",children:"Go Back"})]})});const IT=d=>{var w,v;if(d.type==="image"){const x=d.thumbnailUrl||d.filePath;return a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg overflow-hidden",children:x?a.jsx("img",{src:x,alt:d.name,className:"w-full h-full object-cover",onError:k=>{console.warn(`Failed to load thumbnail for ${d.name}:`,k),d.filePath&&!d.thumbnailUrl&&Cu(d.filePath).then(y=>{Te(N=>N.map(R=>R.id===d.id?{...R,thumbnailUrl:y}:R))}).catch(y=>{console.error(` Failed to load thumbnail for ${d.name}:`,y)})}}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(pt,{className:"w-4 h-4 animate-spin text-gray-400"})})})}else if(d.type==="video"&&d.thumbnailUrl){const x=d.thumbnailUrl;return d.source==="pexels"&&x.startsWith("http")&&console.warn(` THUMBNAIL NETWORK REQUEST: Pexels ${d.type} ${d.id} is using network URL for thumbnail!`,{thumbnailUrl:(w=d.thumbnailUrl)==null?void 0:w.substring(0,50),filePath:(v=d.filePath)==null?void 0:v.substring(0,50),actualSrc:x.substring(0,50)}),a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg overflow-hidden",children:a.jsx("img",{src:x,alt:d.name,className:"w-full h-full object-cover"})})}return a.jsxs("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:[d.type==="voiceover"&&a.jsx(ii,{className:"w-4 h-4"}),d.type==="video"&&a.jsx(Ef,{className:"w-4 h-4"}),d.type==="audio"&&a.jsx(Bg,{className:"w-4 h-4"}),d.type==="text"&&a.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-xs font-bold text-gray-600",children:"T"})]})},DT=d=>{Ds(d)},MT=(d,w)=>{d.preventDefault(),fu(w)},LT=()=>{fu(null)},$T=(d,w)=>{Ms(w),d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",w)},FT=(d,w)=>{d.preventDefault(),d.dataTransfer.dropEffect="move",Rr&&Rr!==w&&il(w)},OT=()=>{il(null)},VT=(d,w)=>{if(d.preventDefault(),il(null),!Rr||Rr===w){Ms(null);return}const v=xe.findIndex(N=>N.id===Rr),x=xe.findIndex(N=>N.id===w);if(v===-1||x===-1){Ms(null);return}const k=[...xe],y=k[v];k.splice(v,1),k.splice(x,0,y),Ve(k),Ms(null)},_T=()=>{Ms(null),il(null)},UT=(d,w)=>{if(d.preventDefault(),fu(null),!Fe)return;let v;Fe.type==="image"?v=bu:Fe.type==="audio"||Fe.type==="voiceover"?v=Fe.duration&&Fe.duration>0?Fe.duration:5:Fe.type==="video"?v=Fe.duration||5:v=5;const x={id:`timeline_${Fe.id}_${Date.now()}`,mediaId:Fe.id,startTime:0,duration:v,track:xe.findIndex(y=>y.id===w)+1,geometry:Fe.type==="image"||Fe.type==="video"?{x:0,y:0,width:1,height:1,rotation:0}:void 0},k=xe.map(y=>{if(y.id===w){const N=y.items.length>0?y.items.reduce((R,D)=>D.startTime+D.duration>R.startTime+R.duration?D:R):null;return x.startTime=N?N.startTime+N.duration:0,x.startTime+x.duration,{...y,items:[...y.items,x]}}return y});Ve(k),Ci(k),(Fe.type==="image"||Fe.type==="video")&&gr(x),Ds(null),Ds(null)},zT=d=>a.jsx(wt,{className:"cursor-move hover:shadow-md transition-shadow border border-gray-200",draggable:!0,onDragStart:()=>DT(d),children:a.jsx(gt,{className:"p-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[IT(d),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[d.type==="voiceover"&&`${Math.round(d.duration||0)}s`,d.type==="video"&&`${d.duration}s video`,d.type==="image"&&"Image (5s)",d.type==="audio"&&`${d.duration}s audio`]})]}),d.type!=="voiceover"&&a.jsx("button",{onClick:()=>{d.thumbnailUrl&&d.thumbnailUrl.startsWith("blob:")&&URL.revokeObjectURL(d.thumbnailUrl),d.previewUrl&&d.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(d.previewUrl),d.filePath&&d.filePath.startsWith("blob:")&&URL.revokeObjectURL(d.filePath),Te(w=>w.filter(v=>v.id!==d.id)),Ve(w=>w.map(v=>({...v,items:v.items.filter(x=>x.mediaId!==d.id)})))},className:"p-1 hover:bg-gray-100 rounded",children:a.jsx(Ki,{className:"w-4 h-4 text-gray-500"})})]})})},d.id),BT=(d,w)=>{d.stopPropagation();const v=xe.find(k=>k.items.some(y=>y.id===w.id));if(v!=null&&v.locked)return;d.target.classList.contains("resize-handle")||(hu(w),LS(d.clientX),Gm(w.startTime))},WT=(d,w,v)=>{const x=xe.find(k=>k.id===v);return x?x.items.some(k=>{if(k.id===d.id)return!1;const y=w+d.duration,N=k.startTime+k.duration;return w<N&&y>k.startTime}):!1},GT=d=>{if(!dn||!ie.current)return;const w=xe.find(R=>R.items.some(D=>D.id===dn.id));if(!w||w.locked)return;const v=ie.current.clientWidth,k=(d.clientX-MS)/v*ge,N=Math.max(0,sl+k);vu(N),f.current&&cancelAnimationFrame(f.current),f.current=requestAnimationFrame(()=>{WT(dn,N,w.id)||Ve(R=>R.map(D=>({...D,items:D.items.map(G=>G.id===dn.id?{...G,startTime:N}:G)}))),f.current=null})},wp=()=>{if(dn){vu(null),f.current&&(cancelAnimationFrame(f.current),f.current=null);const d=xe.find(w=>w.items.some(v=>v.id===dn.id));d&&d.items.find(w=>w.id===dn.id)}hu(null)},HT=d=>{const w=xe.map(v=>({...v,items:v.items.filter(x=>x.id!==d)}));Ve(w),Ci(w)},KT=d=>{console.log(` seekAllMediaToTime called with time: ${d.toFixed(2)}s`),console.log(` Available video elements: ${wn.current.size}`),console.log(` Available audio elements: ${ne.current.size}`),console.log(` Current isPlaying state: ${Ge}`);const w=Ge;w&&(console.log(" Pausing playback for seeking..."),Ei(),qn.current.length=0,V.current.length=0),console.log(" Force stopping all audio elements..."),ne.current.forEach((v,x)=>{if(v)try{v.pause(),v.currentTime=0,v.load(),console.log(` Force reset audio element ${x}`)}catch(k){console.error(` Error resetting audio ${x}:`,k)}}),console.log(" Force stopping all video elements..."),wn.current.forEach((v,x)=>{if(v)try{v.pause(),v.currentTime=0,console.log(` Force reset video element ${x}`)}catch(k){console.error(` Error resetting video ${x}:`,k)}}),console.log(" Waiting for elements to fully stop..."),setTimeout(()=>{console.log(" Elements stopped, now seeking...");try{wn.current.forEach((v,x)=>{if(v&&!isNaN(v.duration)){const k=je.find(y=>y.mediaId===x);if(k){const y=Math.max(0,d-k.startTime);y<=k.duration&&(v.currentTime=y,console.log(` Video ${x} seeked to ${y.toFixed(2)}s (timeline: ${d.toFixed(2)}s)`))}}})}catch(v){console.error(" Error seeking video elements:",v)}try{ne.current.forEach((v,x)=>{if(v&&!isNaN(v.duration)){const k=je.find(y=>y.mediaId===x);if(k){const y=Math.max(0,d-k.startTime);y<=k.duration&&(v.currentTime=y,console.log(` Audio ${x} seeked to ${y.toFixed(2)}s (timeline: ${d.toFixed(2)}s)`))}}})}catch(v){console.error(" Error seeking audio elements:",v)}w&&(console.log(" Resuming playback after seeking..."),setTimeout(()=>{Pu()},100))},200)},YT=d=>{const w=pe.find(U=>U.id===d.mediaId);if(!w)return console.warn(` TIMELINE RENDER: Media item not found for timeline item ${d.id} with mediaId ${d.mediaId}`),console.warn(" TIMELINE RENDER: Available media items:",pe.map(U=>({id:U.id,name:U.name,type:U.type}))),null;const v=xe.find(U=>U.items.some(he=>he.id===d.id)),x=(v==null?void 0:v.locked)||!1,k=(dn==null?void 0:dn.id)===d.id,y=(en==null?void 0:en.id)===d.id,N=(ce==null?void 0:ce.id)===d.id,R=we>=d.startTime&&we<d.startTime+d.duration,D=N&&!R,G=U=>{U.preventDefault(),U.stopPropagation(),x?console.warn(" Cannot select locked timeline item:",d.id):(gr(d),Ct.current&&ht(we))};return a.jsxs("div",{className:`absolute top-1 h-5 rounded-sm flex items-center px-2 select-none
          ${x?"cursor-not-allowed opacity-50":"cursor-pointer"}
          ${k?"shadow-lg z-30":""}
          ${y?"shadow-lg z-40":""}
          ${N?"z-20":"z-10"}
          group
          ${w.type==="video"?"bg-purple-100 border border-purple-500":w.type==="image"?"bg-green-100 border border-green-500":w.type==="text"?"bg-orange-100 border border-orange-500":"bg-blue-100 border border-blue-500"}
          transition-all duration-150
          hover:shadow-md`,style:{left:k&&Ym!==null?`${Ym/ge*100}%`:`${d.startTime/ge*100}%`,width:`${d.duration/ge*100}%`,minWidth:"8px",opacity:D?.7:1,transition:k?"transform 0.1s ease-out":"transform 0.2s ease-out",boxShadow:N?`inset 0 0 0 2px ${w.type==="video"?"#7c3aed":w.type==="image"?"#059669":w.type==="text"?"#ea580c":"#2563eb"}`:k||y?"0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1)":void 0},onMouseDown:U=>{const he=U.target;!he.classList.contains("resize-handle")&&!he.closest(".resize-handle")&&(U.stopPropagation(),x||BT(U,d))},onClick:G,children:[!x&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"resize-handle absolute left-0 top-0 bottom-0 w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 hover:bg-blue-200 z-30",onMouseDown:U=>{U.stopPropagation(),bp(U,d,"left")},onClick:U=>{U.preventDefault(),U.stopPropagation()}}),a.jsx("div",{className:"resize-handle absolute right-0 top-0 bottom-0 w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 hover:bg-blue-200 z-30",onMouseDown:U=>{U.stopPropagation(),bp(U,d,"right")},onClick:U=>{U.preventDefault(),U.stopPropagation()}})]}),a.jsx("div",{className:"flex items-center justify-between w-full select-none",children:a.jsx("span",{className:"text-[11px] font-medium truncate px-1 select-none flex-1 cursor-pointer",onClick:G,title:N?"Press Delete or Backspace to remove":"",children:w.name})}),(k||y)&&a.jsxs("div",{className:"absolute -bottom-3 left-1/2 transform -translate-x-1/2 text-[10px] text-gray-500 bg-white px-1 rounded shadow select-none pointer-events-none",children:[dl(d.startTime)," -"," ",dl(d.startTime+d.duration)]})]},d.id)},XT=()=>{const d=ce?pe.find(y=>y.id===ce.mediaId):null;if(!d)return a.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(lw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Select a timeline item to edit properties"})]})});const w=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(ii,{className:"w-4 h-4 mr-2"}),"Audio Controls"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Volume"}),a.jsxs("span",{className:"text-xs text-gray-500",children:[d.volume||100,"%"]})]}),a.jsx(Yo,{value:[d.volume||100],onValueChange:([y])=>kt(d.id,{volume:y}),max:100,step:1,className:"w-full",disabled:d.muted})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`mute-${d.id}`,checked:d.muted||!1,onChange:y=>kt(d.id,{muted:y.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),a.jsxs("label",{htmlFor:`mute-${d.id}`,className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Mute ",d.type==="video"?"video":"audio"]})]})]})]}),v=(y,N=0)=>Math.round((y||N)*100)/100,x=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(XN,{className:"w-4 h-4 mr-2"}),"Position & Size"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"X Position"}),a.jsx(io,{type:"number",min:"0",max:"1",step:"0.01",value:v(d.x,0),onChange:y=>kt(d.id,{x:parseFloat(y.target.value)}),className:"text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Y Position"}),a.jsx(io,{type:"number",min:"0",max:"1",step:"0.01",value:v(d.y,0),onChange:y=>kt(d.id,{y:parseFloat(y.target.value)}),className:"text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Width"}),a.jsx(io,{type:"number",min:"0.1",max:"1",step:"0.01",value:v(d.width,1),onChange:y=>kt(d.id,{width:parseFloat(y.target.value)}),className:"text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Height"}),a.jsx(io,{type:"number",min:"0.1",max:"1",step:"0.01",value:v(d.height,1),onChange:y=>kt(d.id,{height:parseFloat(y.target.value)}),className:"text-xs"})]})]})]}),k=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(Gg,{className:"w-4 h-4 mr-2"}),"Subtitle Styling"]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>tT(d.id),className:"text-xs flex items-center gap-1 px-2 py-1 h-7",title:"Restore default styling",children:[a.jsx(QN,{className:"w-3 h-3"}),"Reset"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Font Family"}),a.jsx("select",{value:d.fontFamily||"Arial",onChange:y=>kt(d.id,{fontFamily:y.target.value}),className:"w-full text-xs border border-gray-300 rounded px-2 py-1",children:Su.map(y=>a.jsx("option",{value:y,style:{fontFamily:y},children:y},y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Font Size"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yo,{value:[d.fontSize||24],onValueChange:([y])=>kt(d.id,{fontSize:y}),min:8,max:72,step:1,className:"flex-1"}),a.jsxs("span",{className:"text-xs text-gray-500 min-w-[2rem] text-right",children:[d.fontSize||24,"px"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Font Style"}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.jsx(fe,{variant:d.fontBold?"default":"outline",size:"sm",onClick:()=>kt(d.id,{fontBold:!d.fontBold}),className:"text-xs",children:a.jsx(UN,{className:"w-3 h-3"})}),a.jsx(fe,{variant:d.fontItalic?"default":"outline",size:"sm",onClick:()=>kt(d.id,{fontItalic:!d.fontItalic}),className:"text-xs",children:a.jsx(WN,{className:"w-3 h-3"})}),a.jsx(fe,{variant:d.fontUnderline?"default":"outline",size:"sm",onClick:()=>kt(d.id,{fontUnderline:!d.fontUnderline}),className:"text-xs",children:a.jsx("span",{className:"text-xs font-bold underline",children:"U"})}),a.jsx(fe,{variant:d.fontStrikethrough?"default":"outline",size:"sm",onClick:()=>kt(d.id,{fontStrikethrough:!d.fontStrikethrough}),className:"text-xs",children:a.jsx("span",{className:"text-xs font-bold line-through",children:"S"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Text Alignment"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["left","center","right"].map(y=>a.jsx(fe,{variant:d.textAlignment===y?"default":"outline",size:"sm",onClick:()=>kt(d.id,{textAlignment:y}),className:"text-xs capitalize",children:y},y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Text Capitalization"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["AA","Aa","aa","--"].map(y=>a.jsx(fe,{variant:d.textCapitalization===y?"default":"outline",size:"sm",onClick:()=>kt(d.id,{textCapitalization:y}),className:"text-xs",children:y},y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Text Color"}),a.jsx(io,{type:"color",value:d.fontColor||"#ffffff",onChange:y=>kt(d.id,{fontColor:y.target.value}),className:"w-full h-8"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Text Opacity"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yo,{value:[d.textOpacity||100],onValueChange:([y])=>kt(d.id,{textOpacity:y}),min:0,max:100,step:1,className:"flex-1"}),a.jsxs("span",{className:"text-xs text-gray-500 min-w-[3rem] text-right",children:[d.textOpacity||100,"%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Text Border"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(io,{type:"color",value:d.textBorderColor||"#000000",onChange:y=>kt(d.id,{textBorderColor:y.target.value}),className:"flex-1 h-8",placeholder:"Border Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yo,{value:[d.textBorderThickness||0],onValueChange:([y])=>kt(d.id,{textBorderThickness:y}),min:0,max:10,step:1,className:"w-20"}),a.jsxs("span",{className:"text-xs text-gray-500 min-w-[2.5rem] text-right",children:[d.textBorderThickness||0,"px"]})]})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Background Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(io,{type:"color",value:d.backgroundColor||"#000000",onChange:y=>kt(d.id,{backgroundColor:y.target.value}),className:"flex-1 h-8",disabled:d.backgroundTransparent}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",id:"backgroundTransparent",checked:d.backgroundTransparent||!1,onChange:y=>kt(d.id,{backgroundTransparent:y.target.checked}),className:"w-4 h-4"}),a.jsx("label",{htmlFor:"backgroundTransparent",className:"text-xs text-gray-700 cursor-pointer",children:"Transparent"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Background Opacity"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yo,{value:[d.backgroundOpacity||100],onValueChange:([y])=>kt(d.id,{backgroundOpacity:y}),min:0,max:100,step:1,className:"flex-1",disabled:d.backgroundTransparent}),a.jsxs("span",{className:"text-xs text-gray-500 min-w-[3rem] text-right",children:[d.backgroundOpacity||100,"%"]})]})]})]});return a.jsxs("div",{className:"flex-1 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Selected Item"}),a.jsx("p",{className:"text-sm text-gray-600",children:d.name}),a.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[d.type,"  ",d.duration.toFixed(1),"s"]})]}),(d.type==="audio"||d.type==="voiceover"||d.type==="video")&&w(),(d.type==="image"||d.type==="video"||d.type==="text")&&x(),d.type==="text"&&k()]})},qT=()=>a.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col h-full",children:[a.jsx(ys,{className:"pb-3 h-[70px]",children:a.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[a.jsx(fe,{size:"sm",onClick:QS,className:"text-xs flex items-center justify-center",children:a.jsx($a,{className:"w-4 h-4 "})}),a.jsxs("div",{className:"relative hidden",children:[a.jsx(fe,{size:"sm",onClick:eT,className:"text-xs bg-blue-600 hover:bg-blue-700 flex items-center justify-center",children:a.jsx(Gg,{className:"w-4 h-4 "})}),ZS&&uT(),JS&&vr&&a.jsxs("div",{className:"absolute top-full left-0 mt-1 p-4 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-96",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-600",children:" Confirm OpenAI API Call"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>Fs(!1),className:"text-xs h-6 w-6 p-0",children:a.jsx(Ki,{className:"w-3 h-3"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:["You are about to generate ",a.jsxs("strong",{children:[vr.length," AI images"]})," using OpenAI DALL-E."]}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"This will cost money. Each image costs approximately $0.04 USD."}),a.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:vr.map((d,w)=>a.jsxs("div",{className:"text-xs bg-gray-50 p-2 rounded",children:[a.jsxs("span",{className:"font-medium",children:["Paragraph ",d.paragraphNumber||w+1,":"]}),a.jsxs("span",{className:"text-gray-600 ml-2",children:[d.text.substring(0,60),"..."]})]},d.id))})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(fe,{size:"sm",onClick:lT,className:"bg-red-600 hover:bg-red-700 text-white",children:["Generate ",vr.length," Images ($",(vr.length*.04).toFixed(2),")"]}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>Fs(!1),children:"Cancel"})]})]})]}),a.jsx(fe,{size:"sm",onClick:()=>{if(Mt&&(Nn(!1),wi(!1)),xe.filter(v=>v.type==="text").some(v=>v.items.length>0)&&!Mt){console.log(" MANUAL-TRANSCRIPT: Transcripts already exist, marking as completed"),Nn(!0);return}Ni()},disabled:xi,className:`text-xs flex items-center hidden justify-center ${Mt?"bg-green-600 hover:bg-green-700":"bg-orange-600 hover:bg-orange-700"}`,title:Mt?"Regenerate transcripts":"Manually trigger transcript generation",children:xi?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):Mt?a.jsx(Co,{className:"w-4 h-4"}):a.jsx(Co,{className:"w-4 h-4"})})]})}),a.jsxs(gt,{className:"flex-1 overflow-y-auto min-h-[50vh]  h-[calc(100vh-70px-220px)]",children:[a.jsx("input",{type:"file",ref:K,className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:dT}),a.jsx("div",{className:"space-y-2 overflow-y-auto h-full",children:(()=>{const d=pe.filter(k=>k.type!=="text"),w=d.filter(k=>k.source==="openai-dalle");w.length>0&&console.log(` MEDIA PANEL: Found ${w.length} OpenAI images:`,w.map(k=>({id:k.id,name:k.name,type:k.type,source:k.source})));const v=d.filter(k=>k.type==="video");return v.filter(k=>k.source==="pexels").length===0&&v.length>0&&console.warn(` Found ${v.length} videos but 0 Pexels videos in media panel`),d.map(zT)})()})]})]}),QT=()=>a.jsx("div",{className:"text-gray-400 cursor-move px-1",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]})]})}),ZT=d=>{switch(d){case"voiceover":return a.jsx(ii,{className:"w-4 h-4 text-blue-500"});case"main":return a.jsx(GN,{className:"w-4 h-4 text-purple-500"});default:return a.jsx(cw,{className:"w-4 h-4 text-gray-500"})}},bp=(d,w,v)=>{d.stopPropagation();const x=xe.find(k=>k.items.some(y=>y.id===w.id));x!=null&&x.locked||(Qm(v),Zm(w),OS(d.clientX),VS(w.duration),Gm(w.startTime))},JT=d=>{if(!en||!ie.current||!$s)return;const w=xe.find(D=>D.items.some(G=>G.id===en.id));if(!w||w.locked)return;const v=ie.current.clientWidth,k=(d.clientX-FS)/v*ge;let y=en.startTime,N=en.duration;if($s==="left"){const D=sl+wu-.5,G=Math.max(0,Math.min(D,sl+k));y=G,N=wu-(G-sl)}else N=Math.max(.5,wu+k);w.items.some(D=>{if(D.id===en.id)return!1;const G=y+N,U=D.startTime+D.duration;return y>=D.startTime&&y<U||G>D.startTime&&G<=U||y<=D.startTime&&G>=U})||Ve(D=>D.map(G=>({...G,items:G.items.map(U=>U.id===en.id?{...U,startTime:y,duration:N}:U)})))},Sp=()=>{if(en){const d=xe.find(w=>w.items.some(v=>v.id===en.id));if(d){const w=d.items.find(v=>v.id===en.id);w&&Ve(v=>v.map(x=>({...x,items:x.items.map(k=>k.id===en.id?{...k,startTime:w.startTime,duration:w.duration}:k)})))}}Qm(null),en&&Nu(en.id),Zm(null)},eC=()=>a.jsxs("div",{className:"h-[150px] mt-[67px] bg-white border-t border-gray-200 flex select-none",children:[a.jsx("style",{children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          height: 12px;
          width: 12px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
        }
        .slider::-moz-range-thumb {
          height: 12px;
          width: 12px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          border: none;
        }
      `}),a.jsxs("div",{className:"w-64 bg-gray-50 flex flex-col border-r border-gray-200 select-none",children:[a.jsx("div",{className:"h-8 px-2 border-b border-gray-200 bg-white flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs(fe,{size:"sm",onClick:pT,disabled:!ce||we<=(ce==null?void 0:ce.startTime)||we>=(ce==null?void 0:ce.startTime)+(ce==null?void 0:ce.duration),className:"h-6 px-2 text-[11px] bg-orange-500 hover:bg-orange-600 text-white justify-center disabled:opacity-50",title:ce?we<=(ce==null?void 0:ce.startTime)||we>=(ce==null?void 0:ce.startTime)+(ce==null?void 0:ce.duration)?"Move time indicator within selected item range to split":"Split selected item at current time":"Select a timeline item to split",children:[a.jsx(JN,{className:"w-3 h-3 mr-1"}),"Split"]}),a.jsxs(fe,{size:"sm",onClick:fT,disabled:xe.length>=Jm,className:"h-6 px-2 text-[11px] bg-blue-500 hover:bg-blue-600 text-white justify-center",children:[a.jsx($a,{className:"w-3 h-3 mr-1"}),"Add Layer"]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:Qn,onChange:d=>_S(parseFloat(d.target.value)),className:"w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",title:`Timeline Scale: ${Qn}x`}),a.jsxs("span",{className:"text-xs text-gray-600 w-8",children:[Qn,"x"]})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:xe.map(d=>a.jsx("div",{draggable:!0,className:`h-8 min-h-[32px] border-b border-gray-200 flex items-center cursor-move
                ${Ar===d.id?"bg-blue-50":"hover:bg-gray-100"}
                ${AS===d.id?"bg-blue-100":""}
                ${RS===d.id?"bg-green-100 border-green-300":""}
                ${Rr===d.id?"opacity-30":""}
                ${!d.visible&&"opacity-50"}
                transition-all duration-200`,onClick:()=>Si(d.id),onDragStart:w=>$T(w,d.id),onDragOver:w=>{Rr?FT(w,d.id):MT(w,d.id)},onDragLeave:()=>{Rr?OT():LT()},onDrop:w=>{Rr?VT(w,d.id):UT(w,d.id)},onDragEnd:_T,children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 px-2 w-full h-full",children:[a.jsx(QT,{}),ZT(d.type||"main"),a.jsx("div",{className:"flex-1 flex items-center min-w-0",children:a.jsx("input",{type:"text",value:(d.type==="voiceover"||d.type==="text"?" ":"")+d.name,onChange:w=>ST(d.id,w.target.value),className:`flex-1 text-xs bg-transparent border-none focus:ring-1 focus:ring-blue-500 rounded px-1 text-gray-700 ${$S===d.id?"select-text":"select-none"}`,onClick:w=>w.stopPropagation(),onFocus:()=>qm(d.id),onBlur:()=>qm(null)})}),a.jsx("button",{onClick:w=>{w.stopPropagation(),wT(d.id)},className:`p-1 rounded-sm hover:bg-gray-200 ${d.visible?"text-gray-600":"text-gray-400"}`,title:d.visible?"Hide layer":"Show layer",children:d.visible?a.jsx(ow,{className:"w-3 h-3"}):a.jsx(rw,{className:"w-3 h-3"})}),a.jsx("button",{onClick:w=>{w.stopPropagation(),bT(d.id)},className:`p-1 rounded-sm hover:bg-gray-200 ${d.locked?"text-red-500":"text-gray-400"}`,title:d.locked?"Unlock layer":"Lock layer",children:d.locked?a.jsx(sw,{className:"w-3 h-3"}):a.jsx(n2,{className:"w-3 h-3"})}),xe.length>1&&d.type!=="voiceover"&&a.jsx("button",{onClick:w=>{w.stopPropagation(),xT(d.id)},className:"p-1 rounded-sm hover:bg-gray-200 text-gray-400 hover:text-red-500",children:a.jsx(Ki,{className:"w-3 h-3"})})]})},d.id))})]}),a.jsx("div",{ref:Dt,className:"flex-1 overflow-x-auto overflow-y-hidden",children:a.jsxs("div",{className:"flex flex-col bg-white",style:{width:`${NT()}px`},children:[a.jsxs("div",{ref:ie,onClick:jT,className:"h-8 min-h-[32px] border-b border-gray-200 relative bg-gray-50 flex items-center cursor-pointer select-none",children:[(()=>{const d=vp();return Array.from({length:Math.ceil(ge/d)},(w,v)=>{const x=v*d;return x>ge?null:a.jsxs("div",{className:"absolute h-full flex flex-col items-center",style:{left:`${x/ge*100}%`,transform:"translateX(-50%)"},children:[a.jsx("div",{className:"w-px h-2 bg-gray-300"}),a.jsx("span",{className:"text-[10px] text-gray-600 select-none whitespace-nowrap",children:PT(x)})]},x)})})(),a.jsxs("div",{className:"absolute top-0 bottom-0 z-50 pointer-events-none transition-transform duration-100 ease-linear",style:{transform:`translateX(${Wm}px)`,transition:Ge?"none":"transform 0.2s ease-out"},children:[a.jsx("div",{className:"w-px h-full bg-red-500"}),a.jsx("div",{className:"absolute -top-1 -translate-x-1/2 w-0 h-0 border-4 border-transparent border-t-red-500"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto relative bg-gray-50 select-none",onMouseMove:d=>{$s&&en?JT(d):dn&&GT(d)},onMouseUp:()=>{$s?Sp():dn&&wp()},onMouseLeave:()=>{$s?Sp():dn&&wp()},children:xe.map(d=>{var w,v;return d.id==="stocks-layer"&&console.log(` TIMELINE RENDER: Rendering stocks layer with ${((w=d.items)==null?void 0:w.length)||0} items:`,(v=d.items)==null?void 0:v.map(x=>({id:x.id,mediaId:x.mediaId,startTime:x.startTime}))),a.jsxs("div",{className:`h-8 min-h-[32px] border-b border-gray-200 relative bg-white group
                    ${!d.visible&&"opacity-50"} 
                    ${Ar===d.id?"bg-blue-50":""}
                    ${d.locked?"cursor-not-allowed":""}
                    ${(Oo==null?void 0:Oo.layerId)===d.id?"bg-green-100 ring-2 ring-green-300":""}
                    transition-all duration-150`,onClick:()=>Si(d.id),onDragOver:x=>gT(x,d.id),onDragLeave:yT,onDrop:x=>vT(x,d.id),children:[d.items.map(x=>YT(x)),(Oo==null?void 0:Oo.layerId)===d.id&&a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-green-500 z-20 pointer-events-none",style:{left:`${Oo.time/ge*100}%`},children:a.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-b-3 border-transparent border-b-green-500"})})]},d.id)})})]})})]});return a.jsxs("div",{className:`h-screen bg-gray-50 flex flex-col ${e}`,children:[xi&&a.jsx("div",{className:"fixed top-4 right-4 z-50 bg-blue-600 text-white px-4 py-3 rounded-lg shadow-lg max-w-md",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pt,{className:"w-5 h-5 animate-spin"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Auto-Generating Transcripts"}),a.jsx("p",{className:"text-xs text-blue-100 mt-1",children:uu})]})]})}),z&&a.jsx("div",{className:"fixed top-16 right-4 z-50 bg-purple-600 text-white px-4 py-3 rounded-lg shadow-lg max-w-md",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pt,{className:"w-5 h-5 animate-spin"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Auto-Generating Images"}),a.jsx("p",{className:"text-xs text-purple-100 mt-1",children:Re})]})]})}),Rs&&a.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-600 text-white px-4 py-3 rounded-lg shadow-lg max-w-md",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(hi,{className:"w-5 h-5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Auto-Generation Complete!"}),a.jsx("p",{className:"text-xs text-green-100 mt-1",children:O?"Transcripts and images have been automatically generated.":"All voiceover transcripts have been automatically generated."})]})]})}),a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between h-[70px]",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(fe,{variant:"outline",onClick:()=>{Ge&&Ei(),t==null||t()},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Previous"]}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Video Editor"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>{_o(),n==null||n()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(hi,{className:"w-4 h-4 mr-2"}),"Save & Finish"]}),C?a.jsxs(fe,{onClick:()=>{_o(),P==null||P()},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[a.jsx(Co,{className:"w-4 h-4 mr-2"}),"Retry Render"]}):a.jsxs(fe,{onClick:()=>{_o(),r==null||r()},className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ef,{className:"w-4 h-4 mr-2"}),"Render"]})]})]}),a.jsxs("div",{className:"flex-1 flex max-h-[calc(100vh-70px-220px)]",children:[qT(),a.jsxs("div",{className:"flex-1 relative flex flex-col bg-gray-900 h-[480px]",children:[a.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:a.jsx(wt,{className:`w-full max-w-4xl ${TT()} bg-black border-gray-600 overflow-hidden max-h-[400px] rounded-none`,children:a.jsx(gt,{className:"p-0 min-h-[330px] w-full flex items-center justify-center bg-black",children:a.jsx("canvas",{ref:tt,className:"max-w-full max-h-[370px] w-full object-contain",style:{backgroundColor:"black",cursor:Xm},onMouseDown:KS,onMouseMove:d=>{YS(d,mu)},onMouseUp:ap,onMouseLeave:XS})})})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gray-700 h-12 flex items-center justify-center px-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:AT,disabled:ge===0,className:"text-white hover:bg-gray-700 disabled:opacity-50",children:Ge?a.jsx(aw,{className:"w-5 h-5"}):a.jsx(Zo,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-white text-sm",children:[dl(we)," / ",dl(ge)]})]})})]}),a.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col",children:[a.jsx(ys,{className:"pb-3",children:a.jsx(tl,{className:"text-lg",children:"Properties Panel"})}),a.jsxs(gt,{className:"flex-1 overflow-y-auto",children:[XT(),RT()]})]})]}),eC()]})};var zm="Progress",Bm=100,[eL,wL]=nl(zm),[tL,nL]=eL(zm),CS=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:i=rL,...s}=e;(o||o===0)&&!A0(o)&&console.error(oL(`${o}`,"Progress"));const l=A0(o)?o:Bm;r!==null&&!R0(r,l)&&console.error(iL(`${r}`,"Progress"));const c=R0(r,l)?r:null,u=$c(c)?i(c,l):void 0;return a.jsx(tL,{scope:n,value:c,max:l,children:a.jsx(ln.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":$c(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":NS(c,l),"data-value":c??void 0,"data-max":l,...s,ref:t})})});CS.displayName=zm;var kS="ProgressIndicator",ES=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,o=nL(kS,n);return a.jsx(ln.div,{"data-state":NS(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});ES.displayName=kS;function rL(e,t){return`${Math.round(e/t*100)}%`}function NS(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function $c(e){return typeof e=="number"}function A0(e){return $c(e)&&!isNaN(e)&&e>0}function R0(e,t){return $c(e)&&!isNaN(e)&&e<=t&&e>=0}function oL(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Bm}\`.`}function iL(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Bm} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var PS=CS,sL=ES;const jS=p.forwardRef(({className:e,value:t,...n},r)=>a.jsx(PS,{ref:r,className:It("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:a.jsx(sL,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));jS.displayName=PS.displayName;const aL=({onBackToEditor:e,onSaveComplete:t})=>{const[n,r]=p.useState("rendering"),[o,i]=p.useState(0),[s,l]=p.useState(null),[c,u]=p.useState(null),[m,h]=p.useState("");p.useEffect(()=>{const j=async(C,{progress:P,error:S,filePath:b})=>{if(console.log("Render progress update received:",{progress:P,error:S,filePath:b}),S)r("error"),h(S);else if(b){r("complete"),l(b),i(100);try{const T=await window.electron.loadRenderedVideo(b);if(T.success){const A=new Uint8Array(T.data),$=new Blob([A],{type:"video/mp4"}),Y=URL.createObjectURL($);u(Y)}else console.error("Failed to load rendered video:",T.error)}catch(T){console.error("Error loading rendered video for preview:",T)}}else i(P)};return window.electron.onRenderProgress(j),()=>{window.electron.removeRenderProgressListener(j)}},[]),p.useEffect(()=>()=>{c&&URL.revokeObjectURL(c)},[c]);const g=async()=>{s&&await window.electron.saveRenderedVideo(s)&&t()},E=()=>{switch(n){case"rendering":return a.jsxs("div",{className:"text-center",children:[a.jsx(pt,{className:"w-10 h-10 mx-auto animate-spin text-blue-600 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Rendering Your Video..."}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Please wait while we process your video. This may take a few moments depending on the length and complexity."}),a.jsxs("div",{className:"w-full max-w-md mx-auto",children:[a.jsx(jS,{value:o,className:"w-full mb-3"}),a.jsxs("p",{className:"text-base font-mono text-blue-600",children:[o.toFixed(1),"% Complete"]})]}),a.jsx("div",{className:"mt-6 text-sm text-gray-400",children:a.jsx("p",{children:"Processing timeline, media files, and text overlays..."})})]});case"complete":return a.jsxs("div",{className:"text-center",children:[a.jsx(hi,{className:"w-10 h-10 mx-auto text-green-600 mb-3"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Video Render Complete!"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Your video has been successfully rendered. Preview it below and save it to your computer."}),c&&a.jsx("div",{className:"w-full max-w-4xl mx-auto mb-4",children:a.jsx("video",{src:c,controls:!0,className:"w-full h-auto max-h-[70vh] rounded-lg shadow-lg",style:{objectFit:"contain",maxWidth:"100%"},onError:j=>{console.error("Video loading error:",j),console.error("Video URL:",c)}})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center mt-6",children:[a.jsxs(fe,{onClick:g,size:"lg",className:"w-full sm:w-auto",children:[a.jsx(nw,{className:"w-5 h-5 mr-2"}),"Save Video to Computer"]}),a.jsx(fe,{variant:"outline",onClick:e,size:"lg",className:"w-full sm:w-auto",children:"Back to Editor"})]}),a.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"The video will be saved to your Downloads folder"})]});case"error":return a.jsxs("div",{className:"text-center",children:[a.jsx(dw,{className:"w-10 h-10 mx-auto text-red-600 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Video Render Failed"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"An error occurred while rendering your video. Please check the details below and try again."}),a.jsxs(wt,{className:"bg-red-50 border-red-200 text-red-800 p-4 text-left max-w-2xl mx-auto",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Error Details:"}),a.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm overflow-auto max-h-40",children:m})]}),a.jsx("div",{className:"mt-6",children:a.jsx(fe,{variant:"outline",onClick:e,size:"lg",children:"Back to Editor"})})]})}};return a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50",children:a.jsx(wt,{className:"w-full max-w-6xl",children:a.jsx(gt,{className:"p-8",children:E()})})})},lL=[{value:"landscape",label:"Landscape",description:"Wide format (16:9)"},{value:"square",label:"Square",description:"Square format (1:1)"},{value:"vertical",label:"Vertical",description:"Portrait format (9:16)"}],cL=["Fantasy","Science Fiction","Mystery","Romance","Adventure","Horror","Comedy","Drama","Thriller","Historical Fiction","Fable","Nature Walks","Seasons & Weathers","Scientific Facts","History","Mindfulness & Meditations","Motivations"],uL=["English","Spanish","Portuguese","French","German","Italian","Dutch","Russian","Chinese","Ukrainian","Romanian","Turkish","Hindi","Arabic","Japanese","Korean","Swedish","Finnish","Malay"],dL=["awe","wonder","joy","sadness","grief","love","fear","anxiety","hope","nostalgia","betrayal","anger","revenge","guilt","shame","relief","pride","humiliation","admiration","loneliness","tension","suspense","serenity","confusion","anticipation","shock","heartbreak","triumph","empathy","regret","elation","dread","awkwardness","frustration","paranoia","compassion","determination","envy","jealousy","desperation","courage","melancholy","satisfaction","curiosity","vindication","helplessness","delight","disgust","peace","resentment","inspiration","justice","disbelief","euphoria","bittersweetness"],fL=()=>{var bi,ol;const e=Cs(),t=yi(),{addToast:n}=ks(),[r,o]=p.useState(1),[i,s]=p.useState(!1),[l,c]=p.useState(!1),[u,m]=p.useState(!1),[h,g]=p.useState(!1),[E,j]=p.useState(!1),[C,P]=p.useState(!1),[S,b]=p.useState(void 0),[T,A]=p.useState(null),[$,Y]=p.useState(!1),[K,_]=p.useState(!1),[ae,J]=p.useState(!1),[be,ne]=p.useState(!1),Oe=z=>{if(!z)return"";try{const de=localStorage.getItem("murfVoicesCache");if(de){const ke=JSON.parse(de).find(at=>at.voice_id===z);if(ke!=null&&ke.name)return ke.name}}catch(de){console.warn("Failed to parse cached voices from localStorage:",de)}const W=(window==null?void 0:window.murfVoices)||[],O=Array.isArray(W)?W.find(de=>de.voice_id===z):void 0;return O!=null&&O.name?(ie(O),O.name):"Unknown Voice"},ie=z=>{try{const W=localStorage.getItem("murfVoicesCache");let O=[];if(W)try{O=JSON.parse(W)}catch{console.warn("Failed to parse existing voice cache, starting fresh"),O=[]}const de=O.findIndex(Re=>Re.voice_id===z.voice_id);de>=0?O[de]=z:O.push(z),O.length>100&&(O=O.slice(-100)),localStorage.setItem("murfVoicesCache",JSON.stringify(O)),console.log(` Cached voice: ${z.name} (${z.voice_id})`)}catch(W){console.warn("Failed to cache voice in localStorage:",W)}},Dt=z=>{if(!(!Array.isArray(z)||z.length===0))try{const W=localStorage.getItem("murfVoicesCache");let O=[];if(W)try{O=JSON.parse(W)}catch{console.warn("Failed to parse existing voice cache, starting fresh"),O=[]}z.forEach(de=>{const Re=O.findIndex(ke=>ke.voice_id===de.voice_id);Re>=0?O[Re]=de:O.push(de)}),O.length>100&&(O=O.slice(-100)),localStorage.setItem("murfVoicesCache",JSON.stringify(O)),console.log(` Bulk cached ${z.length} voices in localStorage`)}catch(W){console.warn("Failed to bulk cache voices in localStorage:",W)}},He=(z,W)=>{const O=z.map(de=>({id:de.id,name:de.name,text:de.text,duration:de.duration,startTime:de.startTime,filePath:de.filePath||de.relativePath||de.blobUrl||""}));Te({audioChunks:O,totalAudioDuration:W}),_(!0),b(f.selectedVoiceId)},Ie={videoStyle:"landscape",storyName:"",duration:180,genre:"",mainPrompt:"",language:"English",additionalContext:[],videoToneEmotions:[],selectedVoiceId:void 0},[f,re]=p.useState(Ie),[ve,Me]=p.useState(null),[Le,Ye]=p.useState([]),[Be,cn]=p.useState([]),[Ze,Fn]=p.useState([{id:"voice-layer",name:"Voice Over",visible:!0,locked:!1,items:[],type:"voiceover",duration:0}]);p.useEffect(()=>{(async()=>{try{const W=localStorage.getItem("murfVoicesCache");if(W){const de=JSON.parse(W);console.log(` Found existing voice cache in localStorage with ${de.length} voices`);return}console.log(" No voice cache found, attempting to fetch from API...");const O=(window==null?void 0:window.murfVoices)||[];O.length>0?(console.log(` Found ${O.length} voices in window object, caching them...`),Dt(O)):console.log(" No voices found in window object, will cache when available")}catch(W){console.warn("Failed to initialize voice cache:",W)}})()},[]),p.useEffect(()=>{const z=()=>{const O=(window==null?void 0:window.murfVoices)||[];O.length>0&&(localStorage.getItem("murfVoicesCache")||(console.log(` Voices became available, caching ${O.length} voices...`),Dt(O)))};z();const W=setInterval(z,2e3);return()=>clearInterval(W)},[]),p.useEffect(()=>{if(!f.storyId){const z=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;Te({storyId:z})}},[]);const un=8,pe=(z,W)=>z.length!==W.length?!1:z.every((O,de)=>O===W[de]);p.useEffect(()=>{(async()=>{var O,de,Re,ke,at;const W=(O=t.state)==null?void 0:O.storyId;if(console.log(" DEBUG: Story ID:",W),W!=null){Y(!0);try{const{apiService:ze}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url),Lt=await ze.getStory(W);if(console.log(" DEBUG: API Response:",Lt),Lt.success){const le=Lt.data.story;console.log(" DEBUG: Loaded story data:",le);let Tt=le.content||"",pr=le.storySummary||"";if(le.content&&le.content.includes("*****")){const Ar=le.content.split("*****");Ar.length>=3&&(Tt=Ar[0].trim(),pr=Ar[2].trim())}const et={videoStyle:le.videoStyle||"landscape",storyName:le.title,duration:le.duration||180,genre:le.genre||"Fable",mainPrompt:le.mainPrompt||"",language:le.language||"English",additionalContext:le.additionalContext||[],videoToneEmotions:le.videoToneEmotions||[],generatedContent:Tt,storyId:le.id,isDraft:le.isDraft,currentStep:le.currentStep||1,maxStepReached:le.maxStepReached||le.currentStep||1,storySummary:le.storySummary||pr,chapterSummaries:le.chapterSummaries||[],youtubeTitle:le.youtubeTitle||"",youtubeDescription:le.youtubeDescription||"",youtubeTags:le.youtubeTags||"",stockFootageTerms:le.stockFootageTerms||"",chapters:le.chapters||[],currentChapter:le.currentChapter||0,totalChapters:le.totalChapters||0,selectedVoiceId:le.selectedVoiceId,audioChunks:le.audioChunks,totalAudioDuration:le.totalAudioDuration,videoAssets:le.videoAssets};console.log(" DEBUG: Setting story data:",et),console.log(" DEBUG: Loaded videoAssets from database:",{hasVideoAssets:!!et.videoAssets,videoAssetsKeys:et.videoAssets?Object.keys(et.videoAssets):[],mediaLibraryCount:((Re=(de=et.videoAssets)==null?void 0:de.mediaLibrary)==null?void 0:Re.length)||0,layersCount:((at=(ke=et.videoAssets)==null?void 0:ke.layers)==null?void 0:at.length)||0}),re(et),et.audioChunks&&et.audioChunks.length>0&&et.selectedVoiceId&&(b(et.selectedVoiceId),_(!0)),Me(et);let Pn=1;const xe=le.maxStepReached||1;le.videoAssets&&le.videoAssets.audioChunks&&le.videoAssets.audioChunks.length>0?(Pn=7,m(!0),_(!0)):le.audioChunks&&le.audioChunks.length>0?(Pn=6,m(!0),_(!0),J(!0)):le.selectedVoiceId?(Pn=6,m(!0)):le.status==="completed"||le.content?(Pn=5,m(!0)):Pn=Math.max(le.currentStep||1,xe),o(Pn),le.content&&m(!0);const Ve=le.status==="completed"||le.content?"Story completed - you can review and edit the generated content":`Continuing from step ${le.currentStep||1}`;n({type:"info",title:"Story Loaded",message:Ve})}}catch(ze){console.error("Error loading story:",ze),n({type:"error",title:"Load Failed",message:"Failed to load story data"})}finally{Y(!1)}}})()},[(bi=t.state)==null?void 0:bi.storyId,n]);const Te=z=>{re(W=>{const O={...W,...z};return!ve&&!f.storyId&&Me(Ie),O})},je=z=>!!(z&&z!==""&&!z.startsWith("temp-"));p.useEffect(()=>{(async()=>{if(console.log(" DEBUG: Voice selection auto-save check:",{selectedVoiceId:f.selectedVoiceId,storyId:f.storyId,isValidStoryId:je(f.storyId),hasGeneratedContent:!!f.generatedContent,willSave:!!(f.selectedVoiceId&&je(f.storyId)&&f.generatedContent)}),f.selectedVoiceId&&je(f.storyId)&&f.generatedContent)try{const{apiService:W}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);await W.updateStory(f.storyId,{selectedVoiceId:f.selectedVoiceId}),console.log("Voice selection auto-saved")}catch(W){console.error("Failed to auto-save voice selection:",W)}})()},[f.selectedVoiceId]),p.useEffect(()=>{(async()=>{var W,O,de,Re,ke,at;if(console.log(" DEBUG: Video assets auto-save check:",{hasVideoAssets:!!f.videoAssets,storyId:f.storyId,isValidStoryId:je(f.storyId),isTemporaryStory:(W=f.storyId)==null?void 0:W.startsWith("temp-"),videoAssetsKeys:f.videoAssets?Object.keys(f.videoAssets):[],mediaLibraryCount:((de=(O=f.videoAssets)==null?void 0:O.mediaLibrary)==null?void 0:de.length)||0,layersCount:((ke=(Re=f.videoAssets)==null?void 0:Re.layers)==null?void 0:ke.length)||0,willSave:!!(f.videoAssets&&(je(f.storyId)||(at=f.storyId)!=null&&at.startsWith("temp-")))}),f.videoAssets&&(je(f.storyId)||f.storyId&&f.storyId.startsWith("temp-")))try{const{apiService:ze}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);if(f.storyId&&f.storyId.startsWith("temp-")){console.log(" Auto-creating story from temporary ID for video assets...");const Lt=`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`,le=await ze.createStory({title:f.storyName,content:Lt,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:un,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});if(le.success)Te({storyId:le.data.story.id}),console.log(" Story auto-created successfully with ID:",le.data.story.id);else throw new Error("Failed to auto-create story")}else await ze.updateStory(f.storyId,{videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo}),console.log(" Video assets auto-saved successfully")}catch(ze){console.error(" Failed to auto-save video assets:",ze)}else console.log(" Video assets auto-save skipped - conditions not met")})()},[f.videoAssets,f.transcriptInfo,f.stockMediaInfo]),p.useEffect(()=>{(async()=>{if(f.audioChunks&&f.audioChunks.length>0&&je(f.storyId))try{const{apiService:W}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);await W.updateStory(f.storyId,{audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration}),console.log("Audio chunks auto-saved")}catch(W){console.error("Failed to auto-save audio chunks:",W)}})()},[f.audioChunks,f.totalAudioDuration]),p.useEffect(()=>{console.log(" DEBUG: Story ID changed:",{storyId:f.storyId,isValid:je(f.storyId),hasGeneratedContent:!!f.generatedContent,currentStep:r})},[f.storyId,f.generatedContent,r]),p.useEffect(()=>{(async()=>{if(r===7&&f.storyId&&f.storyId.startsWith("temp-")&&f.generatedContent){console.log(" Force creating story before entering video editor...");try{const{apiService:W}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url),O=`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`,de=await W.createStory({title:f.storyName,content:O,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:un,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});de.success?(Te({storyId:de.data.story.id}),console.log(" Story force-created successfully with ID:",de.data.story.id)):console.error(" Failed to force-create story")}catch(W){console.error(" Error force-creating story:",W)}}})()},[r,f.storyId,f.generatedContent]),p.useEffect(()=>{var z,W;if(console.log(" DEBUG: Periodic auto-save check:",{currentStep:r,storyId:f.storyId,isValidStoryId:je(f.storyId),isTemporaryStory:(z=f.storyId)==null?void 0:z.startsWith("temp-"),hasVideoAssets:!!f.videoAssets,willStartInterval:!!(r===7&&(je(f.storyId)||(W=f.storyId)!=null&&W.startsWith("temp-"))&&f.videoAssets)}),r===7&&(je(f.storyId)||f.storyId&&f.storyId.startsWith("temp-"))&&f.videoAssets){console.log(" Starting periodic auto-save interval (every 10 seconds)");const O=setInterval(async()=>{try{const{apiService:de}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);if(f.storyId&&f.storyId.startsWith("temp-")){console.log(" Periodic auto-save: Creating story from temporary ID...");const Re=`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`,ke=await de.createStory({title:f.storyName,content:Re,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:un,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});if(ke.success)Te({storyId:ke.data.story.id}),console.log(" Periodic auto-save: Story created successfully with ID:",ke.data.story.id);else throw new Error("Failed to create story during periodic auto-save")}else await de.updateStory(f.storyId,{videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo}),console.log(" Periodic auto-save of video assets completed")}catch(de){console.error(" Failed to periodic auto-save video assets:",de)}},1e4);return()=>{console.log(" Stopping periodic auto-save interval"),clearInterval(O)}}},[r,f.storyId,f.videoAssets,f.transcriptInfo,f.stockMediaInfo]),p.useEffect(()=>()=>{r===7&&je(f.storyId)&&f.videoAssets&&(async()=>{try{const{apiService:W}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);await W.updateStory(f.storyId,{videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo}),console.log(" Save on exit from video editor")}catch(W){console.error("Failed to save on exit from video editor:",W)}})()},[r,f.storyId,f.videoAssets,f.transcriptInfo,f.stockMediaInfo]);const nt=()=>{if(T&&T.isPlaying()&&T.handlePlayPause(),r<un){const z=r+1;if(r===6&&z===7&&f.storyId&&f.storyId.startsWith("temp-")&&f.generatedContent){console.log(" Force creating story before entering video editor (handleNext)..."),(async()=>{try{const{apiService:O}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url),de=`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`,Re=await O.createStory({title:f.storyName,content:de,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:un,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});Re.success?(Te({storyId:Re.data.story.id}),console.log(" Story force-created successfully with ID:",Re.data.story.id),o(z),Te({maxStepReached:Math.max(f.maxStepReached||1,z)})):(console.error(" Failed to force-create story"),o(z),Te({maxStepReached:Math.max(f.maxStepReached||1,z)}))}catch(O){console.error(" Error force-creating story:",O),o(z),Te({maxStepReached:Math.max(f.maxStepReached||1,z)})}})();return}o(z),Te({maxStepReached:Math.max(f.maxStepReached||1,z)}),je(f.storyId)&&(async()=>{try{const{apiService:O}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);await O.updateStory(f.storyId,{maxStepReached:Math.max(f.maxStepReached||1,z),videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration}),console.log(" Forced save during step navigation")}catch(O){console.error("Failed to force save during navigation:",O)}})()}},rt=()=>{if(T&&T.isPlaying()&&T.handlePlayPause(),r>1){const z=r-1;o(z),je(f.storyId)&&(async()=>{try{const{apiService:O}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);await O.updateStory(f.storyId,{videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration}),console.log(" Forced save during backward navigation")}catch(O){console.error("Failed to force save during backward navigation:",O)}})()}},oe=z=>{switch(z){case 1:return f.storyName.trim().length>0;case 2:return f.duration>=30&&f.genre!=="";case 3:return f.mainPrompt.trim().length>0;case 4:return!0;case 5:return!!(f.generatedContent&&f.generatedContent.length>0);case 6:return!!f.selectedVoiceId;case 7:return!0;default:return!1}},Ee=async()=>{s(!0),m(!1),Te({generatedContent:"",storySummary:"",chapterSummaries:[],youtubeTitle:"",youtubeDescription:"",youtubeTags:"",stockFootageTerms:"",chapters:[],currentChapter:0,totalChapters:0}),o(5);try{const{apiService:z}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);n({type:"info",title:"Generating Story Structure",message:"Creating story outline and metadata..."}),await z.generateStoryStructure({title:f.storyName,genre:f.genre,duration:f.duration,mainPrompt:f.mainPrompt,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions},W=>{W.type==="start"?n({type:"info",title:"Generating Structure",message:W.message}):W.type},W=>{W&&(re(O=>({...O,storySummary:W.storySummary,chapterSummaries:W.chapterSummaries,youtubeTitle:W.youtubeTitle,youtubeDescription:W.youtubeDescription,youtubeTags:W.youtubeTags,stockFootageTerms:W.stockFootageTerms,totalChapters:W.chapterSummaries.length,currentChapter:0})),Je(W.chapterSummaries,W.storySummary))},W=>{s(!1),m(!1),n({type:"error",title:"Structure Generation Failed",message:W.message||"Failed to generate story structure"})})}catch(z){s(!1),m(!1),n({type:"error",title:"Generation Failed",message:z instanceof Error?z.message:"Failed to generate story"})}},Je=async(z,W)=>{const{apiService:O}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url),de=[];let Re=0;const ke=async()=>{if(Re>=z.length){const ze=de.sort((le,Tt)=>le.number-Tt.number).map(le=>le.content).join(`

`);re(le=>({...le,generatedContent:ze,chapters:de})),s(!1),m(!0);const Lt=ze.split(/\s+/).length;n({type:"success",title:"Story Generated!",message:`Your amazing story has been created successfully! (${Lt} words)`});return}const at=z[Re];re(ze=>({...ze,currentChapter:at.number})),await O.generateChapterContent({chapterSummary:at.summary,chapterNumber:at.number,storySummary:W,topic:f.mainPrompt,genre:f.genre,language:f.language,duration:f.duration,videoToneEmotions:f.videoToneEmotions},ze=>{ze.type==="start"||ze.type==="chunk"&&re(Lt=>{const le=[...Lt.chapters||[]],Tt=le.findIndex(et=>et.number===at.number);Tt>=0?le[Tt]={...le[Tt],content:(le[Tt].content||"")+ze.content}:le.push({number:at.number,content:ze.content});const pr=le.sort((et,Pn)=>et.number-Pn.number).map(et=>et.content).join(`

`);return{...Lt,chapters:le,generatedContent:pr}})},ze=>{ze&&(de.push({number:ze.chapterNumber,content:ze.chapterContent}),n({type:"success",title:`Chapter ${ze.chapterNumber} Complete`,message:`Chapter ${ze.chapterNumber} has been generated successfully!`})),Re++,ke()},ze=>{s(!1),m(!1),n({type:"error",title:`Chapter ${at.number} Generation Failed`,message:ze.message||`Failed to generate chapter ${at.number}`})})};await ke()},ft=()=>{T&&T.isPlaying()&&T.handlePlayPause();const z=ve||Ie,W=f.storyName!==z.storyName||f.videoStyle!==z.videoStyle||f.duration!==z.duration||f.genre!==z.genre||f.mainPrompt!==z.mainPrompt||f.language!==z.language||!pe(f.additionalContext,z.additionalContext)||!pe(f.videoToneEmotions,z.videoToneEmotions)||f.generatedContent!==z.generatedContent||(ve?r!==ve.currentStep:r!==1)||i||u;console.log(" DEBUG: Change detection:",{hasChanges:W,currentStory:f,originalStory:z,currentStep:r,originalStep:ve==null?void 0:ve.currentStep}),W?(console.log(" DEBUG: Changes detected, showing confirmation dialog"),g(!0)):(console.log(" DEBUG: No changes detected, navigating directly"),T&&T.handlePlayPause(),e("/dashboard"))},Yn=()=>{g(!1),T&&T.handlePlayPause(),e("/dashboard")},Ge=async()=>{var z,W,O,de,Re,ke;T&&T.isPlaying()&&T.handlePlayPause(),c(!0);try{const{apiService:at}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url),ze=f.generatedContent?`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`:"";if(f.storyId&&!f.storyId.startsWith("temp-"))console.log(" Attempting to update existing story:",{storyId:f.storyId,storyName:f.storyName,storyIdType:typeof f.storyId,storyIdLength:(z=f.storyId)==null?void 0:z.length,isTemp:(W=f.storyId)==null?void 0:W.startsWith("temp-")}),(await at.updateStory(f.storyId,{title:f.storyName,content:ze,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:r,maxStepReached:f.maxStepReached,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo})).success&&(n({type:"success",title:"Draft Updated!",message:"Your story has been saved as a draft"}),e("/dashboard",{state:{refresh:!0}}));else{console.log(" Creating new story as draft:",{storyName:f.storyName,hasStoryId:!!f.storyId,storyId:f.storyId,isTemp:(O=f.storyId)==null?void 0:O.startsWith("temp-"),reason:f.storyId?"Temporary story ID":"No story ID"});const le=await at.createStory({title:f.storyName,content:ze,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:r,maxStepReached:f.maxStepReached,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});le.success&&((de=f.storyId)!=null&&de.startsWith("temp-")&&((ke=(Re=le.data)==null?void 0:Re.story)!=null&&ke.id)&&(console.log(" Converting temporary story ID to real ID:",{oldId:f.storyId,newId:le.data.story.id}),Te({storyId:le.data.story.id})),n({type:"success",title:"Draft Saved!",message:"Your story has been saved as a draft"}),e("/dashboard",{state:{refresh:!0}}))}}catch(at){console.error("Error saving draft:",at),n({type:"error",title:"Save Failed",message:"Failed to save draft"})}finally{c(!1),g(!1)}},Xn=async()=>{s(!0),m(!1),Te({generatedContent:"",storySummary:"",chapterSummaries:[],youtubeTitle:"",youtubeDescription:"",youtubeTags:"",stockFootageTerms:"",chapters:[],currentChapter:0,totalChapters:0});try{const{apiService:z}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);n({type:"info",title:"Regenerating Story Structure",message:"Creating new story outline and metadata..."}),await z.generateStoryStructure({title:f.storyName,genre:f.genre,duration:f.duration,mainPrompt:f.mainPrompt,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions},W=>{W.type==="start"?n({type:"info",title:"Regenerating Structure",message:W.message}):W.type},W=>{W&&(re(O=>({...O,storySummary:W.storySummary,chapterSummaries:W.chapterSummaries,youtubeTitle:W.youtubeTitle,youtubeDescription:W.youtubeDescription,youtubeTags:W.youtubeTags,stockFootageTerms:W.stockFootageTerms,totalChapters:W.chapterSummaries.length,currentChapter:0})),Je(W.chapterSummaries,W.storySummary))},W=>{s(!1),m(!1),n({type:"error",title:"Regeneration Failed",message:W.message||"Failed to regenerate story structure"})})}catch(z){s(!1),m(!1),n({type:"error",title:"Regeneration Failed",message:z instanceof Error?z.message:"Failed to regenerate story"})}},we=async()=>{var z,W,O,de,Re,ke,at,ze,Lt,le,Tt,pr;if(T&&T.handlePlayPause(),!f.generatedContent){n({type:"error",title:"No Content to Save",message:"Please generate a story first"});return}c(!0);try{const{apiService:et}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url),Pn=`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`;if(f.storyId&&!f.storyId.startsWith("temp-")){console.log(" Attempting to update existing story (Save & Finish):",{storyId:f.storyId,storyName:f.storyName,storyIdType:typeof f.storyId,storyIdLength:(z=f.storyId)==null?void 0:z.length,isTemp:(W=f.storyId)==null?void 0:W.startsWith("temp-")});const Ve=await et.updateStory(f.storyId,{title:f.storyName,content:Pn,genre:f.genre,duration:f.duration,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});if(console.log(" CreateStoryScreen: Saving story with videoAssets (update):",{hasVideoAssets:!!f.videoAssets,storyId:f.storyId,mediaLibraryCount:((de=(O=f.videoAssets)==null?void 0:O.mediaLibrary)==null?void 0:de.length)||0,layersCount:((ke=(Re=f.videoAssets)==null?void 0:Re.layers)==null?void 0:ke.length)||0}),Ve.success)n({type:"success",title:"Story Updated!",message:"Your story has been updated"}),e("/dashboard",{state:{refresh:!0}});else throw new Error("Failed to update story")}else{console.log(" Creating new story (Save & Finish):",{storyName:f.storyName,hasStoryId:!!f.storyId,storyId:f.storyId,isTemp:(at=f.storyId)==null?void 0:at.startsWith("temp-"),reason:f.storyId?"Temporary story ID":"No story ID"});const Ve=await et.createStory({title:f.storyName,content:Pn,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:un,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});if(console.log(" CreateStoryScreen: Saving story with videoAssets (create):",{hasVideoAssets:!!f.videoAssets,storyId:f.storyId,mediaLibraryCount:((Lt=(ze=f.videoAssets)==null?void 0:ze.mediaLibrary)==null?void 0:Lt.length)||0,layersCount:((Tt=(le=f.videoAssets)==null?void 0:le.layers)==null?void 0:Tt.length)||0}),Ve.success)(pr=f.storyId)!=null&&pr.startsWith("temp-")&&console.log(" Converting temporary story ID to real ID (Save & Finish):",{oldId:f.storyId,newId:Ve.data.story.id}),Te({storyId:Ve.data.story.id}),n({type:"success",title:"Story Saved!",message:"Your story has been saved"}),e("/dashboard",{state:{refresh:!0}});else throw new Error("Failed to save story")}}catch(et){console.error("Error saving story:",et),n({type:"error",title:"Save Failed",message:et instanceof Error?et.message:"Failed to save story to local database"})}finally{c(!1)}},Ut=()=>{f.additionalContext.length<5&&Te({additionalContext:[...f.additionalContext,""]})},ge=z=>{Te({additionalContext:f.additionalContext.filter((W,O)=>O!==z)})},Ot=(z,W)=>{const O=[...f.additionalContext];O[z]=W,Te({additionalContext:O})},mr=z=>{const W=f.videoToneEmotions;W.includes(z)?Te({videoToneEmotions:W.filter(O=>O!==z)}):W.length<4&&Te({videoToneEmotions:[...W,z]})},Hr=z=>{if(z<1)return"Less than 1 minute";if(z===1)return"1 minute";if(z<60)return`${z} minutes`;const W=Math.floor(z/60),O=z%60;return O===0?`${W} hour${W>1?"s":""}`:`${W} hour${W>1?"s":""} ${O} minute${O>1?"s":""}`},qn=z=>z<=5?"Short Story":z<=15?"Medium Story":z<=30?"Long Story":"Epic Story",Lo=z=>{switch(z){case 1:return a.jsx(mo,{className:"w-5 h-5"});case 2:return a.jsx(e2,{className:"w-5 h-5"});case 3:return a.jsx(qN,{className:"w-5 h-5"});case 4:return a.jsx(r2,{className:"w-5 h-5"});case 5:return i?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsx(Jo,{className:"w-5 h-5"});case 6:return a.jsx(ii,{className:"w-5 h-5"});case 7:return a.jsx(Ef,{className:"w-5 h-5"});default:return a.jsx(Jo,{className:"w-5 h-5"})}},As=z=>{switch(z){case 1:return"Story Title & Video Style";case 2:return"Story Length & Genre";case 3:return"Story Description";case 4:return"Language & Context";case 5:return i?"Generating Story...":"Story Generation & Review";case 6:return"Voice Selection";case 7:return"Video Creation";default:return""}},V=z=>{Te({audioChunks:z.audioChunks,totalAudioDuration:z.totalAudioDuration})},L=z=>{var W,O;console.log(" CreateStoryScreen: Updating video assets:",{hasVideoAssets:!!z,hasMediaLibrary:!!(z!=null&&z.mediaLibrary),mediaLibraryCount:((W=z==null?void 0:z.mediaLibrary)==null?void 0:W.length)||0,hasLayers:!!(z!=null&&z.layers),layersCount:((O=z==null?void 0:z.layers)==null?void 0:O.length)||0,storyId:f.storyId}),Te({videoAssets:z})},H=z=>{console.log(" Updating transcript info:",z),re(W=>({...W,transcriptInfo:z}))},X=z=>{console.log(" Updating stock media info:",z),re(W=>({...W,stockMediaInfo:z}))},ue=z=>{console.log(" Updating sentence transcripts:",z),re(W=>({...W,sentenceTranscripts:z}))},se=()=>{var z;if(f.videoAssets){console.log("Starting render process from frontend...",f.videoAssets);const W={...f.videoAssets,mediaItems:Le||f.videoAssets.mediaLibrary||[],timelineItems:Be||[],layers:Ze||f.videoAssets.layers||[],timeline:{totalDuration:((z=f.videoAssets.timeline)==null?void 0:z.totalDuration)||30,currentTime:0,tracks:(Ze==null?void 0:Ze.map(O=>{var de;return{id:O.id,name:O.name,type:O.type||"footage",blocks:((de=O.items)==null?void 0:de.map(Re=>({id:Re.id,startTime:Re.startTime,duration:Re.duration,mediaId:Re.mediaId,volume:100})))||[]}}))||[]},editorSettings:{selectedLayerId:"",volumeSettings:{voiceover:100,footage:100,soundtrack:100},videoStyle:f.videoStyle||"landscape"}};console.log("Latest video assets for rendering:",W),window.electron.startRender(W),ne(!1),o(8)}else console.error("Render clicked but no videoAssets found in storyData.")},$e=()=>{ne(!0),o(7)},Ae=()=>{we()},st=()=>{ne(!1),se()},ot=()=>{var z,W;switch(r){case 1:return a.jsx(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(is,{type:"text",label:"Story Title",placeholder:"Enter your story title",value:f.storyName,onChange:O=>Te({storyName:O}),icon:"user",required:!0}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Video Style ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:lL.map(O=>a.jsxs(Se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Te({videoStyle:O.value}),className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${f.videoStyle===O.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[a.jsx("div",{className:"font-medium",children:O.label}),a.jsx("div",{className:"text-sm opacity-75",children:O.description})]},O.value))})]})]})},"step1");case 2:return a.jsx(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Story Length ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-semibold text-blue-600",children:Hr(f.duration/60)}),a.jsx("div",{className:"text-xs text-gray-500",children:qn(f.duration/60)})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yo,{value:[f.duration],onValueChange:([O])=>Te({duration:O}),max:7200,min:60,step:60,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"1 min"}),a.jsx("span",{children:"30 min"}),a.jsx("span",{children:"60 min"}),a.jsx("span",{children:"120 min"})]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4",children:[300,900,1800,3600].map(O=>a.jsxs(Se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te({duration:O}),className:`p-2 rounded-lg border-2 transition-all duration-200 text-xs ${f.duration===O?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[O/60,"m"]},O))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Genre ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:cL.map(O=>a.jsx(Se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Te({genre:O}),className:`p-3 rounded-lg border-2 transition-all duration-200 ${f.genre===O?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:O},O))})]})]})},"step2");case 3:return a.jsx(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Story Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:f.mainPrompt,onChange:O=>Te({mainPrompt:O.target.value}),placeholder:"Describe your story idea, plot, or any specific elements you'd like to include...",className:"min-w-[500px] p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:6})]})})},"step3");case 4:return a.jsx(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Language"}),a.jsx("select",{value:f.language,onChange:O=>Te({language:O.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:uL.map(O=>a.jsx("option",{value:O,children:O},O))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Context (Optional)"}),a.jsxs("div",{className:"space-y-2",children:[f.additionalContext.map((O,de)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:O,onChange:Re=>Ot(de,Re.target.value),placeholder:"Enter additional context...",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>ge(de),className:"text-red-600 border-red-200 hover:bg-red-50",children:a.jsx(Ki,{className:"w-4 h-4"})})]},de)),f.additionalContext.length<5&&a.jsxs(fe,{variant:"outline",onClick:Ut,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[a.jsx($a,{className:"w-4 h-4 mr-2"}),"Add Context"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Video Tone & Emotions (Optional - Max 4)"}),a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Selected: ",f.videoToneEmotions.length,"/4"]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 max-h-48 overflow-y-auto",children:dL.map(O=>a.jsx(Se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>mr(O),disabled:!f.videoToneEmotions.includes(O)&&f.videoToneEmotions.length>=4,className:`p-2 rounded-lg border-2 transition-all duration-200 text-xs ${f.videoToneEmotions.includes(O)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:O},O))})]})]})},"step4");case 5:return a.jsx(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[i?a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(pt,{className:"w-5 h-5 text-blue-600 animate-spin"}),a.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:f.currentChapter&&f.totalChapters?`Generating Chapter ${f.currentChapter} of ${f.totalChapters}...`:"Generating Story Structure..."})]}),a.jsx("p",{className:"text-blue-700 text-sm",children:f.currentChapter&&f.totalChapters?`AI is creating Chapter ${f.currentChapter} content. Please wait while the story unfolds!`:"AI is creating your story outline and metadata. This will be followed by chapter generation."})]}):u&&f.generatedContent?a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(hi,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Story Generated Successfully!"})]}),a.jsxs("p",{className:"text-green-700 text-sm",children:["Your story has been created with"," ",f.totalChapters||0," chapters. You can now review and edit it below."]}),f.youtubeTitle&&a.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-green-200",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-1",children:"YouTube Metadata Generated:"}),a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"Title:"})," ",f.youtubeTitle]}),a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"Description:"})," ",f.youtubeDescription]}),a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"Tags:"})," ",f.youtubeTags]})]})]}):a.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Jo,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Ready to Generate"})]}),a.jsx("p",{className:"text-yellow-700 text-sm",children:"Click the generate button to start creating your story. This will first generate the story structure and metadata, then create each chapter's content."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i?"Generating Story Content...":"Generated Story Content"}),a.jsx("textarea",{value:f.generatedContent||"",onChange:O=>Te({generatedContent:O.target.value}),placeholder:i?"Generating...":"No content generated yet...",disabled:i,className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none min-h-64",rows:12})]}),u&&f.storySummary&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Story Summary"}),a.jsx("div",{className:"w-full p-4 border border-gray-300 rounded-lg bg-gray-50 min-h-32",children:a.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:f.storySummary})})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(fe,{variant:"outline",onClick:rt,className:"flex-1 text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Previous"]}),u&&f.generatedContent&&a.jsxs(fe,{variant:"outline",onClick:()=>{f.generatedContent&&(navigator.clipboard.writeText(f.generatedContent),n({type:"success",title:"Copied!",message:"Story content copied to clipboard"}))},className:"flex-1",children:[a.jsx(kf,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]}),u&&f.generatedContent&&a.jsxs(fe,{onClick:Xn,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white",children:[a.jsx(Co,{className:"w-4 h-4 mr-2"}),"Regenerate"]}),u&&f.generatedContent&&a.jsxs(fe,{onClick:nt,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Next: Choose Voice"]}),!i&&!f.generatedContent&&a.jsxs(fe,{onClick:Ee,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[a.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Generate Story"]})]})]})},"step5");case 6:return a.jsxs(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"space-y-6",children:[!ae&&a.jsxs(a.Fragment,{children:[a.jsx(XM,{selectedVoice:f.selectedVoiceId,onVoiceSelect:O=>{if(Te({selectedVoiceId:O}),O){const Re=((window==null?void 0:window.murfVoices)||[]).find(ke=>ke.voice_id===O);Re&&(ie(Re),console.log(` Auto-cached selected voice: ${Re.name}`))}},className:"max-w-4xl mx-auto"}),a.jsxs("div",{className:"flex space-x-3 max-w-4xl mx-auto",children:[a.jsxs(fe,{variant:"outline",onClick:rt,className:"flex-1 text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Previous"]}),f.selectedVoiceId&&a.jsxs(fe,{onClick:()=>{console.log("Proceeding to audio generation"),J(!0),f.audioChunks&&f.audioChunks.length>0&&_(!0)},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[a.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Generate Audio"]})]})]}),ae&&f.selectedVoiceId&&!K&&a.jsxs(a.Fragment,{children:[f.audioChunks&&f.audioChunks.length>0&&a.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cf,{className:"w-5 h-5 text-orange-600 mr-2"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-orange-800",children:"Replace Existing Audio"}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Generating new audio with"," ",a.jsx("strong",{children:Oe(f.selectedVoiceId||"")})," ","will completely replace your current audio."]})]})]})})}),a.jsx(P0,{storyContent:f.generatedContent||"",selectedVoiceId:f.selectedVoiceId,generatedAudioVoiceId:S,existingAudioChunks:(z=f.audioChunks)==null?void 0:z.map(O=>({id:O.id,name:O.name||`Audio Part ${O.id}`,text:O.text||"",duration:O.duration,startTime:O.startTime||0,filePath:O.filePath||O.relativePath||O.blobUrl||"",relativePath:O.relativePath,blobUrl:O.blobUrl})),autoStart:C,storyId:f.storyId,onAudioControlRef:A,onAudioGenerated:(O,de)=>{const Re=O.map(ke=>({id:ke.id,name:ke.name||`Audio Part ${ke.id}`,text:ke.text||"",duration:ke.duration,startTime:ke.startTime||0,filePath:ke.filePath||ke.relativePath||ke.blobUrl||""}));He(Re,de),P(!1)},onNext:nt,className:"max-w-4xl mx-auto"}),a.jsxs("div",{className:"flex justify-between max-w-4xl mx-auto",children:[a.jsxs(fe,{variant:"outline",onClick:()=>{console.log("Going back to voice selection - preserving voice and audio data"),J(!1)},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Back to Voice Selection"]}),a.jsxs(fe,{variant:"outline",onClick:rt,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Previous Step"]})]})]}),ae&&f.selectedVoiceId&&K&&a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"max-w-4xl mx-auto mb-6",children:a.jsx(gt,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ii,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Audio Options"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Selected voice for next generation:"," ",a.jsx("strong",{children:Oe(f.selectedVoiceId||"")})]})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(fe,{onClick:()=>{console.log("Going back to change voice"),T&&T.isPlaying()&&T.handlePlayPause(),J(!1)},variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Change Voice"]}),a.jsxs(fe,{onClick:()=>{console.log("Showing regenerate confirmation dialog"),j(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[a.jsx(Co,{className:"w-4 h-4 mr-2"}),"Regenerate Audio"]})]})]})})}),S&&a.jsx(wt,{className:"max-w-4xl mx-auto mb-4 border-green-200 bg-green-50",children:a.jsx(gt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ii,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-green-800",children:"Generated Audio"}),a.jsxs("p",{className:"text-sm text-green-700",children:["Voice used:"," ",a.jsx("strong",{children:Oe(S)})]})]})]})})}),a.jsx(P0,{storyContent:f.generatedContent||"",selectedVoiceId:f.selectedVoiceId,generatedAudioVoiceId:S,existingAudioChunks:(W=f.audioChunks)==null?void 0:W.map(O=>({id:O.id,name:O.name||`Audio Part ${O.id}`,text:O.text||"",duration:O.duration,startTime:O.startTime||0,filePath:O.filePath||O.relativePath||O.blobUrl||"",relativePath:O.relativePath,blobUrl:O.blobUrl})),storyId:f.storyId,onAudioControlRef:A,onAudioGenerated:(O,de)=>{const Re=O.map(ke=>({id:ke.id,name:ke.name||`Audio Part ${ke.id}`,text:ke.text||"",duration:ke.duration,startTime:ke.startTime||0,filePath:ke.filePath||ke.relativePath||ke.blobUrl||""}));He(Re,de)},onNext:nt,className:"max-w-4xl mx-auto"}),a.jsxs("div",{className:"flex justify-between max-w-4xl mx-auto",children:[a.jsxs(fe,{variant:"outline",onClick:()=>{console.log("Change Voice clicked - preserving voice selection and saving current audio"),T&&T.isPlaying()&&T.handlePlayPause(),console.log("Change Voice clicked - keeping audio visible"),J(!1)},className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Change Voice"]}),a.jsxs(fe,{variant:"outline",onClick:rt,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Previous Step"]})]})]})]},"step6");case 7:return a.jsxs(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},className:"h-full",children:[a.jsx("div",{className:"absolute top-4 right-4 z-50",children:a.jsx(fe,{onClick:du,disabled:l,className:"bg-green-600 hidden hover:bg-green-700 text-white shadow-lg",children:l?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ZN,{className:"w-4 h-4 mr-2"}),"Save Progress"]})})}),a.jsx(JM,{className:"w-full h-full",storyContent:f.generatedContent||"",selectedVoiceId:f.selectedVoiceId||"",videoStyle:f.videoStyle||"landscape",savedVideoAssets:f.videoAssets,audioChunks:f.audioChunks,storyId:f.storyId,initialStory:f,onPrevious:Rs,onSaveAndFinish:wi,onRender:Is,onVideoAssetsUpdate:L,onAudioDataUpdate:V,onTranscriptInfoUpdate:H,onStockMediaInfoUpdate:X,onSentenceTranscriptsUpdate:ue,hasRenderFailed:be,onRetryRender:st,mediaItems:Le,setMediaItems:Ye,timelineItems:Be,setTimelineItems:cn,layers:Ze,setLayers:Fn})]},"step7");case 8:return a.jsx(aL,{onBackToEditor:$e,onSaveComplete:Ae});default:return a.jsx(Se.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},transition:{duration:.3},children:$o()},`step-${r}`)}},Jt=()=>a.jsx("div",{children:"Story Name Step"}),Mt=()=>a.jsx("div",{children:"Duration Step"}),Nn=()=>a.jsx("div",{children:"Prompt Step"}),xi=()=>a.jsx("div",{children:"Language Step"}),rl=()=>a.jsx("div",{children:"Generation Step"}),uu=()=>a.jsx("div",{children:"Voice Selection Step"}),$o=()=>{switch(r){case 1:return Jt();case 2:return Mt();case 3:return Nn();case 4:return xi();case 5:return rl();case 6:return uu();default:return Jt()}},Rs=()=>rt(),wi=()=>we(),Is=()=>{if(f.videoAssets){const z={...f.videoAssets,mediaLibrary:Le||f.videoAssets.mediaLibrary||[],layers:Ze||f.videoAssets.layers||[],timeline:{...f.videoAssets.timeline,tracks:(Ze==null?void 0:Ze.map(W=>{var O;return{id:W.id,name:W.name,type:W.type||"footage",blocks:((O=W.items)==null?void 0:O.map(de=>({id:de.id,startTime:de.startTime,duration:de.duration,mediaId:de.mediaId,volume:100})))||[]}}))||[]}};re(W=>({...W,videoAssets:z})),console.log("Updated video assets before rendering:",z)}se()},du=async()=>{console.log(" DEBUG: Manual save attempt:",{storyId:f.storyId,isValidStoryId:je(f.storyId),hasVideoAssets:!!f.videoAssets,hasGeneratedContent:!!f.generatedContent,currentStep:r});try{c(!0);const{apiService:z}=await Wt(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);if(f.storyId&&f.storyId.startsWith("temp-")){console.log(" Creating story from temporary ID...");const W=`${f.generatedContent}

*****
${f.youtubeTitle}

${f.youtubeDescription}

${f.youtubeTags}

${f.stockFootageTerms}
*****
${f.storySummary}
*****`,O=await z.createStory({title:f.storyName,content:W,genre:f.genre,duration:f.duration,isDraft:!0,currentStep:un,videoStyle:f.videoStyle,language:f.language,additionalContext:f.additionalContext,videoToneEmotions:f.videoToneEmotions,mainPrompt:f.mainPrompt,storySummary:f.storySummary,chapterSummaries:f.chapterSummaries,youtubeTitle:f.youtubeTitle,youtubeDescription:f.youtubeDescription,youtubeTags:f.youtubeTags,stockFootageTerms:f.stockFootageTerms,chapters:f.chapters,totalChapters:f.totalChapters,selectedVoiceId:f.selectedVoiceId,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration,videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo});if(O.success)Te({storyId:O.data.story.id}),console.log(" Story created successfully with ID:",O.data.story.id),n({type:"success",title:"Story Created & Saved!",message:"Your story has been created and video progress saved"});else throw new Error("Failed to create story")}else if(je(f.storyId)&&f.videoAssets)console.log(" Updating existing story..."),await z.updateStory(f.storyId,{videoAssets:f.videoAssets,transcriptInfo:f.transcriptInfo,stockMediaInfo:f.stockMediaInfo,audioChunks:f.audioChunks,totalAudioDuration:f.totalAudioDuration}),console.log(" Manual save completed successfully"),n({type:"success",title:"Progress Saved!",message:"Your video editor progress has been saved"});else throw new Error("Invalid story ID or missing video assets")}catch(z){console.error(" Failed to manual save:",z),n({type:"error",title:"Save Failed",message:z instanceof Error?z.message:"Failed to save video editor progress"})}finally{c(!1)}};return a.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[a.jsx(Se.header,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.6},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 shadow-sm",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(Se.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring",stiffness:200},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(mo,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(ol=t.state)!=null&&ol.storyId?"Edit Story":"Create New Story"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",r," of ",un]})]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:ft,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})})}),r!==7&&a.jsxs(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"flex items-center justify-center mb-8",children:a.jsx("div",{className:"flex items-center justify-center w-full max-w-2xl",children:Array.from({length:un},(z,W)=>a.jsxs(Se.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4+W*.1,duration:.5,type:"spring",stiffness:200},className:"flex items-center justify-center",children:[a.jsx("div",{className:`min-w-12 min-h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${W+1<=r?"bg-gradient-to-r from-blue-600 to-purple-600 border-transparent text-white":"bg-white border-gray-300 text-gray-400"}`,children:Lo(W+1)}),W<un-1&&a.jsx("div",{className:`h-1 w-20 mx-0 transition-all duration-300 ${W+1<r?"bg-gradient-to-r from-blue-600 to-purple-600":"bg-gray-200"}`})]},W+1))})}),r!==7&&a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(Se.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.5},className:"text-2xl font-bold text-gray-900 mb-2",children:As(r)}),a.jsx(Se.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-gray-600",children:"Let's create something amazing together"})]})]}),r===7?a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.6},className:"flex-1",children:$?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Story..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we load your story data"})]})}):a.jsx(yy,{mode:"wait",children:ot()})}):a.jsx("div",{className:"min-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:a.jsx(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.6},children:a.jsx(wt,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:a.jsxs(gt,{className:"p-8 max-w-4xl",children:[$?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Story..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we load your story data"})]})}):a.jsx(yy,{mode:"wait",children:ot()}),!$&&r<5&&a.jsxs(Se.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200",children:[a.jsxs(fe,{variant:"outline",onClick:rt,disabled:r===1,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:[a.jsx(or,{className:"w-4 h-4 mr-2"}),"Previous"]}),a.jsxs(fe,{onClick:nt,disabled:!oe(r),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-lg transition-all duration-200 transform hover:scale-[1.02] focus:scale-[0.98]",children:["Next",a.jsx(Ql,{className:"w-4 h-4 ml-2"})]})]})]})})})}),h&&a.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Cf,{className:"w-6 h-6 text-yellow-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Back to Dashboard"})]}),a.jsx("p",{className:"text-gray-600 mb-6",children:"What would you like to do with your current progress?"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(fe,{onClick:Ge,disabled:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[l?a.jsx(pt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(kf,{className:"w-4 h-4 mr-2"}),"Save & Exit"]}),a.jsx(fe,{onClick:Yn,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:"Don't Save"}),a.jsx(fe,{variant:"outline",onClick:()=>g(!1),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})}),a.jsx(TM,{open:E,onOpenChange:j,children:a.jsxs(tS,{children:[a.jsxs(nS,{children:[a.jsxs(oS,{className:"flex items-center space-x-2",children:[a.jsx(Co,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{children:"Regenerate Audio"})]}),a.jsxs(iS,{children:["Are you sure you want to regenerate the audio? This will replace your current audio",S?` (voice: ${Oe(S)})`:""," ","with new audio using"," ",a.jsx("strong",{children:Oe(f.selectedVoiceId||"")}),"."]})]}),a.jsxs(rS,{children:[a.jsx(aS,{children:"Cancel"}),a.jsx(sS,{onClick:()=>{console.log("Confirmed regeneration with voice:",Oe(f.selectedVoiceId||"")),console.log("Starting immediate regeneration..."),Te({audioChunks:void 0,totalAudioDuration:void 0}),_(!1),b(void 0),P(!0),j(!1)},className:"bg-blue-600 hover:bg-blue-700",children:"Yes, Regenerate"})]})]})})]})},hL=()=>(p.useEffect(()=>{window.__initialLoadComplete=!1;const e=setTimeout(()=>{console.log(" App: Initial load complete, file loading enabled globally"),window.__initialLoadComplete=!0},3e3);return()=>clearTimeout(e)},[]),a.jsx(I2,{children:a.jsx(M2,{children:a.jsx(EN,{children:a.jsxs(xN,{children:[a.jsx(Mi,{path:"/login",element:a.jsx(EI,{})}),a.jsx(Mi,{path:"/register",element:a.jsx(PI,{})}),a.jsx(Mi,{path:"/dashboard",element:a.jsx(Xg,{children:a.jsx(jI,{})})}),a.jsx(Mi,{path:"/create-story",element:a.jsx(Xg,{children:a.jsx(fL,{})})}),a.jsx(Mi,{path:"*",element:a.jsx(ew,{to:"/dashboard",replace:!0})})]})})})}));Ed.createRoot(document.getElementById("root")).render(a.jsx(ar.StrictMode,{children:a.jsx(hL,{})}));
